!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var i=[],o=Object.getPrototypeOf,n=i.slice,r=i.flat?function(t){return i.flat.call(t)}:function(t){return i.concat.apply([],t)},s=i.push,a=i.indexOf,l={},c=l.toString,h=l.hasOwnProperty,u=h.toString,d=u.call(Object),p={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},f=function(t){return null!=t&&t===t.window},m=t.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function v(t,e,i){var o,n,r=(i=i||m).createElement("script");if(r.text=t,e)for(o in y)(n=e[o]||e.getAttribute&&e.getAttribute(o))&&r.setAttribute(o,n);i.head.appendChild(r).parentNode.removeChild(r)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[c.call(t)]||"object":typeof t}var b="3.6.0",w=function(t,e){return new w.fn.init(t,e)};function _(t){var e=!!t&&"length"in t&&t.length,i=x(t);return!g(t)&&!f(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}w.fn=w.prototype={jquery:b,constructor:w,length:0,toArray:function(){return n.call(this)},get:function(t){return null==t?n.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},w.extend=w.fn.extend=function(){var t,e,i,o,n,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||g(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)o=t[e],"__proto__"!==e&&s!==o&&(c&&o&&(w.isPlainObject(o)||(n=Array.isArray(o)))?(i=s[e],r=n&&!Array.isArray(i)?[]:n||w.isPlainObject(i)?i:{},n=!1,s[e]=w.extend(c,r,o)):void 0!==o&&(s[e]=o));return s},w.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==c.call(t)||(e=o(t))&&("function"!=typeof(i=h.call(e,"constructor")&&e.constructor)||u.call(i)!==d))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){v(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,o=0;if(_(t))for(i=t.length;o<i&&!1!==e.call(t[o],o,t[o]);o++);else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(_(Object(t))?w.merge(i,"string"==typeof t?[t]:t):s.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:a.call(e,t,i)},merge:function(t,e){for(var i=+e.length,o=0,n=t.length;o<i;o++)t[n++]=e[o];return t.length=n,t},grep:function(t,e,i){for(var o=[],n=0,r=t.length,s=!i;n<r;n++)!e(t[n],n)!==s&&o.push(t[n]);return o},map:function(t,e,i){var o,n,s=0,a=[];if(_(t))for(o=t.length;s<o;s++)null!=(n=e(t[s],s,i))&&a.push(n);else for(s in t)null!=(n=e(t[s],s,i))&&a.push(n);return r(a)},guid:1,support:p}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=i[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){l["[object "+e+"]"]=e.toLowerCase()});var S=function(t){var e,i,o,n,r,s,a,l,c,h,u,d,p,g,f,m,y,v,x,b="sizzle"+1*new Date,w=t.document,_=0,S=0,C=lt(),k=lt(),A=lt(),E=lt(),T=function(t,e){return t===e&&(u=!0),0},M={}.hasOwnProperty,L=[],P=L.pop,I=L.push,D=L.push,N=L.slice,F=function(t,e){for(var i=0,o=t.length;i<o;i++)if(t[i]===e)return i;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",G="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+R+"*("+G+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+G+"))|)"+R+"*\\]",z=":("+G+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",H=new RegExp(R+"+","g"),V=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),Y=new RegExp("^"+R+"*,"+R+"*"),j=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),X=new RegExp(R+"|>"),W=new RegExp(z),U=new RegExp("^"+G+"$"),q={ID:new RegExp("^#("+G+")"),CLASS:new RegExp("^\\.("+G+")"),TAG:new RegExp("^("+G+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),it=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},ot=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){d()},st=bt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{D.apply(L=N.call(w.childNodes),w.childNodes)}catch(e){D={apply:L.length?function(t,e){I.apply(t,N.call(e))}:function(t,e){for(var i=t.length,o=0;t[i++]=e[o++];);t.length=i-1}}}function at(t,e,o,n){var r,a,c,h,u,g,y,v=e&&e.ownerDocument,w=e?e.nodeType:9;if(o=o||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return o;if(!n&&(d(e),e=e||p,f)){if(11!==w&&(u=J.exec(t)))if(r=u[1]){if(9===w){if(!(c=e.getElementById(r)))return o;if(c.id===r)return o.push(c),o}else if(v&&(c=v.getElementById(r))&&x(e,c)&&c.id===r)return o.push(c),o}else{if(u[2])return D.apply(o,e.getElementsByTagName(t)),o;if((r=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return D.apply(o,e.getElementsByClassName(r)),o}if(i.qsa&&!E[t+" "]&&(!m||!m.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(y=t,v=e,1===w&&(X.test(t)||j.test(t))){for((v=tt.test(t)&&yt(e.parentNode)||e)===e&&i.scope||((h=e.getAttribute("id"))?h=h.replace(ot,nt):e.setAttribute("id",h=b)),a=(g=s(t)).length;a--;)g[a]=(h?"#"+h:":scope")+" "+xt(g[a]);y=g.join(",")}try{return D.apply(o,v.querySelectorAll(y)),o}catch(e){E(t,!0)}finally{h===b&&e.removeAttribute("id")}}}return l(t.replace(V,"$1"),e,o,n)}function lt(){var t=[];return function e(i,n){return t.push(i+" ")>o.cacheLength&&delete e[t.shift()],e[i+" "]=n}}function ct(t){return t[b]=!0,t}function ht(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),n=i.length;n--;)o.attrHandle[i[n]]=e}function dt(t,e){var i=e&&t,o=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(o)return o;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function gt(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function ft(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ct(function(e){return e=+e,ct(function(i,o){for(var n,r=t([],i.length,e),s=r.length;s--;)i[n=r[s]]&&(i[n]=!(o[n]=i[n]))})})}function yt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=at.support={},r=at.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!Z.test(t&&t.namespaceURI||e&&e.nodeName||"HTML")},d=at.setDocument=function(t){var e,n,s=t?t.ownerDocument||t:w;return s!=p&&9===s.nodeType&&s.documentElement&&(g=(p=s).documentElement,f=!r(p),w!=p&&(n=p.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",rt,!1):n.attachEvent&&n.attachEvent("onunload",rt)),i.scope=ht(function(t){return g.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),i.attributes=ht(function(t){return t.className="i",!t.getAttribute("className")}),i.getElementsByTagName=ht(function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length}),i.getElementsByClassName=K.test(p.getElementsByClassName),i.getById=ht(function(t){return g.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length}),i.getById?(o.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},o.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i=e.getElementById(t);return i?[i]:[]}}):(o.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},o.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i,o,n,r=e.getElementById(t);if(r){if((i=r.getAttributeNode("id"))&&i.value===t)return[r];for(n=e.getElementsByName(t),o=0;r=n[o++];)if((i=r.getAttributeNode("id"))&&i.value===t)return[r]}return[]}}),o.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,o=[],n=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[n++];)1===i.nodeType&&o.push(i);return o}return r},o.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},y=[],m=[],(i.qsa=K.test(p.querySelectorAll))&&(ht(function(t){var e;g.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+R+"*(?:value|"+O+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),ht(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+R+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),g.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(i.matchesSelector=K.test(v=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector))&&ht(function(t){i.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),y.push("!=",z)}),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),e=K.test(g.compareDocumentPosition),x=e||K.test(g.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,o=e&&e.parentNode;return t===o||!(!o||1!==o.nodeType||!(i.contains?i.contains(o):t.compareDocumentPosition&&16&t.compareDocumentPosition(o)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return u=!0,0;var o=!t.compareDocumentPosition-!e.compareDocumentPosition;return o||(1&(o=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===o?t==p||t.ownerDocument==w&&x(w,t)?-1:e==p||e.ownerDocument==w&&x(w,e)?1:h?F(h,t)-F(h,e):0:4&o?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,o=0,n=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!n||!r)return t==p?-1:e==p?1:n?-1:r?1:h?F(h,t)-F(h,e):0;if(n===r)return dt(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;s[o]===a[o];)o++;return o?dt(s[o],a[o]):s[o]==w?-1:a[o]==w?1:0}),p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),i.matchesSelector&&f&&!E[e+" "]&&(!y||!y.test(e))&&(!m||!m.test(e)))try{var o=v.call(t,e);if(o||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return o}catch(t){E(e,!0)}return 0<at(e,p,null,[t]).length},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&d(t),x(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&d(t);var n=o.attrHandle[e.toLowerCase()],r=n&&M.call(o.attrHandle,e.toLowerCase())?n(t,e,!f):void 0;return void 0!==r?r:i.attributes||!f?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},at.escape=function(t){return(t+"").replace(ot,nt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,o=[],n=0,r=0;if(u=!i.detectDuplicates,h=!i.sortStable&&t.slice(0),t.sort(T),u){for(;e=t[r++];)e===t[r]&&(n=o.push(r));for(;n--;)t.splice(o[n],1)}return h=null,t},n=at.getText=function(t){var e,i="",o=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=n(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[o++];)i+=n(e);return i},(o=at.selectors={cacheLength:50,createPseudo:ct,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&W.test(i)&&(e=s(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&C(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(o){var n=at.attr(o,t);return null==n?"!="===e:!e||(n+="","="===e?n===i:"!="===e?n!==i:"^="===e?i&&0===n.indexOf(i):"*="===e?i&&-1<n.indexOf(i):"$="===e?i&&n.slice(-i.length)===i:"~="===e?-1<(" "+n.replace(H," ")+" ").indexOf(i):"|="===e&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,o,n){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===o&&0===n?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,d,p,g,f=r!==s?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a,x=!1;if(m){if(r){for(;f;){for(d=e;d=d[f];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;g=f="only"===t&&!g&&"nextSibling"}return!0}if(g=[s?m.firstChild:m.lastChild],s&&v){for(x=(p=(c=(h=(u=(d=m)[b]||(d[b]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===_&&c[1])&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[f]||(x=p=0)||g.pop();)if(1===d.nodeType&&++x&&d===e){h[t]=[_,p,x];break}}else if(v&&(x=p=(c=(h=(u=(d=e)[b]||(d[b]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===_&&c[1]),!1===x)for(;(d=++p&&d&&d[f]||(x=p=0)||g.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++x||(v&&((h=(u=d[b]||(d[b]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]=[_,x]),d!==e)););return(x-=n)===o||x%o==0&&0<=x/o}}},PSEUDO:function(t,e){var i,n=o.pseudos[t]||o.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return n[b]?n(e):1<n.length?(i=[t,t,"",e],o.setFilters.hasOwnProperty(t.toLowerCase())?ct(function(t,i){for(var o,r=n(t,e),s=r.length;s--;)t[o=F(t,r[s])]=!(i[o]=r[s])}):function(t){return n(t,0,i)}):n}},pseudos:{not:ct(function(t){var e=[],i=[],o=a(t.replace(V,"$1"));return o[b]?ct(function(t,e,i,n){for(var r,s=o(t,null,n,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,o(e,null,r,i),e[0]=null,!i.pop()}}),has:ct(function(t){return function(e){return 0<at(t,e).length}}),contains:ct(function(t){return t=t.replace(et,it),function(e){return-1<(e.textContent||n(e)).indexOf(t)}}),lang:ct(function(t){return U.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===g},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!o.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return $.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt(function(){return[0]}),last:mt(function(t,e){return[e-1]}),eq:mt(function(t,e,i){return[i<0?i+e:i]}),even:mt(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:mt(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:mt(function(t,e,i){for(var o=i<0?i+e:e<i?e:i;0<=--o;)t.push(o);return t}),gt:mt(function(t,e,i){for(var o=i<0?i+e:i;++o<e;)t.push(o);return t})}}).pseudos.nth=o.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})o.pseudos[e]=gt(e);function vt(){}function xt(t){for(var e=0,i=t.length,o="";e<i;e++)o+=t[e].value;return o}function bt(t,e,i){var o=e.dir,n=e.next,r=n||o,s=i&&"parentNode"===r,a=S++;return e.first?function(e,i,n){for(;e=e[o];)if(1===e.nodeType||s)return t(e,i,n);return!1}:function(e,i,l){var c,h,u,d=[_,a];if(l){for(;e=e[o];)if((1===e.nodeType||s)&&t(e,i,l))return!0}else for(;e=e[o];)if(1===e.nodeType||s)if(h=(u=e[b]||(e[b]={}))[e.uniqueID]||(u[e.uniqueID]={}),n&&n===e.nodeName.toLowerCase())e=e[o]||e;else{if((c=h[r])&&c[0]===_&&c[1]===a)return d[2]=c[2];if((h[r]=d)[2]=t(e,i,l))return!0}return!1}}function wt(t){return 1<t.length?function(e,i,o){for(var n=t.length;n--;)if(!t[n](e,i,o))return!1;return!0}:t[0]}function _t(t,e,i,o,n){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(i&&!i(r,o,n)||(s.push(r),c&&e.push(a)));return s}function St(t,e,i,o,n,r){return o&&!o[b]&&(o=St(o)),n&&!n[b]&&(n=St(n,r)),ct(function(r,s,a,l){var c,h,u,d=[],p=[],g=s.length,f=r||function(t,e,i){for(var o=0,n=e.length;o<n;o++)at(t,e[o],i);return i}(e||"*",a.nodeType?[a]:a,[]),m=!t||!r&&e?f:_t(f,d,t,a,l),y=i?n||(r?t:g||o)?[]:s:m;if(i&&i(m,y,a,l),o)for(c=_t(y,p),o(c,[],a,l),h=c.length;h--;)(u=c[h])&&(y[p[h]]=!(m[p[h]]=u));if(r){if(n||t){if(n){for(c=[],h=y.length;h--;)(u=y[h])&&c.push(m[h]=u);n(null,y=[],c,l)}for(h=y.length;h--;)(u=y[h])&&-1<(c=n?F(r,u):d[h])&&(r[c]=!(s[c]=u))}}else y=_t(y===s?y.splice(g,y.length):y),n?n(null,s,y,l):D.apply(s,y)})}function Ct(t){for(var e,i,n,r=t.length,s=o.relative[t[0].type],a=s||o.relative[" "],l=s?1:0,h=bt(function(t){return t===e},a,!0),u=bt(function(t){return-1<F(e,t)},a,!0),d=[function(t,i,o){var n=!s&&(o||i!==c)||((e=i).nodeType?h(t,i,o):u(t,i,o));return e=null,n}];l<r;l++)if(i=o.relative[t[l].type])d=[bt(wt(d),i)];else{if((i=o.filter[t[l].type].apply(null,t[l].matches))[b]){for(n=++l;n<r&&!o.relative[t[n].type];n++);return St(1<l&&wt(d),1<l&&xt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(V,"$1"),i,l<n&&Ct(t.slice(l,n)),n<r&&Ct(t=t.slice(n)),n<r&&xt(t))}d.push(i)}return wt(d)}return vt.prototype=o.filters=o.pseudos,o.setFilters=new vt,s=at.tokenize=function(t,e){var i,n,r,s,a,l,c,h=k[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],c=o.preFilter;a;){for(s in i&&!(n=Y.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(r=[])),i=!1,(n=j.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(V," ")}),a=a.slice(i.length)),o.filter)!(n=q[s].exec(a))||c[s]&&!(n=c[s](n))||(i=n.shift(),r.push({value:i,type:s,matches:n}),a=a.slice(i.length));if(!i)break}return e?a.length:a?at.error(t):k(t,l).slice(0)},a=at.compile=function(t,e){var i,n,r,a,l,h,u=[],g=[],m=A[t+" "];if(!m){for(e||(e=s(t)),i=e.length;i--;)(m=Ct(e[i]))[b]?u.push(m):g.push(m);(m=A(t,(n=g,a=0<(r=u).length,l=0<n.length,h=function(t,e,i,s,h){var u,g,m,y=0,v="0",x=t&&[],b=[],w=c,S=t||l&&o.find.TAG("*",h),C=_+=null==w?1:Math.random()||.1,k=S.length;for(h&&(c=e==p||e||h);v!==k&&null!=(u=S[v]);v++){if(l&&u){for(g=0,e||u.ownerDocument==p||(d(u),i=!f);m=n[g++];)if(m(u,e||p,i)){s.push(u);break}h&&(_=C)}a&&((u=!m&&u)&&y--,t&&x.push(u))}if(y+=v,a&&v!==y){for(g=0;m=r[g++];)m(x,b,e,i);if(t){if(0<y)for(;v--;)x[v]||b[v]||(b[v]=P.call(s));b=_t(b)}D.apply(s,b),h&&!t&&0<b.length&&1<y+r.length&&at.uniqueSort(s)}return h&&(_=C,c=w),x},a?ct(h):h))).selector=t}return m},l=at.select=function(t,e,i,n){var r,l,c,h,u,d="function"==typeof t&&t,p=!n&&s(t=d.selector||t);if(i=i||[],1===p.length){if(2<(l=p[0]=p[0].slice(0)).length&&"ID"===(c=l[0]).type&&9===e.nodeType&&f&&o.relative[l[1].type]){if(!(e=(o.find.ID(c.matches[0].replace(et,it),e)||[])[0]))return i;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(r=q.needsContext.test(t)?0:l.length;r--&&!o.relative[h=(c=l[r]).type];)if((u=o.find[h])&&(n=u(c.matches[0].replace(et,it),tt.test(l[0].type)&&yt(e.parentNode)||e))){if(l.splice(r,1),!(t=n.length&&xt(l)))return D.apply(i,n),i;break}}return(d||a(t,p))(n,e,!f,i,!e||tt.test(t)&&yt(e.parentNode)||e),i},i.sortStable=b.split("").sort(T).join("")===b,i.detectDuplicates=!!u,d(),i.sortDetached=ht(function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))}),ht(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),i.attributes&&ht(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ht(function(t){return null==t.getAttribute("disabled")})||ut(O,function(t,e,i){var o;if(!i)return!0===t[e]?e.toLowerCase():(o=t.getAttributeNode(e))&&o.specified?o.value:null}),at}(t);w.find=S,w.expr=S.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=S.uniqueSort,w.text=S.getText,w.isXMLDoc=S.isXML,w.contains=S.contains,w.escapeSelector=S.escape;var C=function(t,e,i){for(var o=[],n=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(n&&w(t).is(i))break;o.push(t)}return o},k=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},A=w.expr.match.needsContext;function E(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,e,i){return g(e)?w.grep(t,function(t,o){return!!e.call(t,o,t)!==i}):e.nodeType?w.grep(t,function(t){return t===e!==i}):"string"!=typeof e?w.grep(t,function(t){return-1<a.call(e,t)!==i}):w.filter(e,t,i)}w.filter=function(t,e,i){var o=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===o.nodeType?w.find.matchesSelector(o,t)?[o]:[]:w.find.matches(t,w.grep(e,function(t){return 1===t.nodeType}))},w.fn.extend({find:function(t){var e,i,o=this.length,n=this;if("string"!=typeof t)return this.pushStack(w(t).filter(function(){for(e=0;e<o;e++)if(w.contains(n[e],this))return!0}));for(i=this.pushStack([]),e=0;e<o;e++)w.find(t,n[e],i);return 1<o?w.uniqueSort(i):i},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&A.test(t)?w(t):t||[],!1).length}});var L,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,i){var o,n;if(!t)return this;if(i=i||L,"string"==typeof t){if(!(o="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:P.exec(t))||!o[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(o[1]){if(w.merge(this,w.parseHTML(o[1],(e=e instanceof w?e[0]:e)&&e.nodeType?e.ownerDocument||e:m,!0)),T.test(o[1])&&w.isPlainObject(e))for(o in e)g(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return(n=m.getElementById(o[2]))&&(this[0]=n,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==i.ready?i.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,L=w(m);var I=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(w.contains(this,e[t]))return!0})},closest:function(t,e){var i,o=0,n=this.length,r=[],s="string"!=typeof t&&w(t);if(!A.test(t))for(;o<n;o++)for(i=this[o];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?-1<s.index(i):1===i.nodeType&&w.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(1<r.length?w.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?a.call(w(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C(t,"parentNode")},parentsUntil:function(t,e,i){return C(t,"parentNode",i)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return C(t,"nextSibling")},prevAll:function(t){return C(t,"previousSibling")},nextUntil:function(t,e,i){return C(t,"nextSibling",i)},prevUntil:function(t,e,i){return C(t,"previousSibling",i)},siblings:function(t){return k((t.parentNode||{}).firstChild,t)},children:function(t){return k(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(E(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},function(t,e){w.fn[t]=function(i,o){var n=w.map(this,e,i);return"Until"!==t.slice(-5)&&(o=i),o&&"string"==typeof o&&(n=w.filter(o,n)),1<this.length&&(D[t]||w.uniqueSort(n),I.test(t)&&n.reverse()),this.pushStack(n)}});var F=/[^\x20\t\r\n\f]+/g;function O(t){return t}function R(t){throw t}function G(t,e,i,o){var n;try{t&&g(n=t.promise)?n.call(t).done(e).fail(i):t&&g(n=t.then)?n.call(t,e,i):e.apply(void 0,[t].slice(o))}catch(t){i.apply(void 0,[t])}}w.Callbacks=function(t){var e;t="string"==typeof t?(e={},w.each(t.match(F)||[],function(t,i){e[i]=!0}),e):w.extend({},t);var i,o,n,r,s=[],a=[],l=-1,c=function(){for(r=r||t.once,n=i=!0;a.length;l=-1)for(o=a.shift();++l<s.length;)!1===s[l].apply(o[0],o[1])&&t.stopOnFalse&&(l=s.length,o=!1);t.memory||(o=!1),i=!1,r&&(s=o?[]:"")},h={add:function(){return s&&(o&&!i&&(l=s.length-1,a.push(o)),function e(i){w.each(i,function(i,o){g(o)?t.unique&&h.has(o)||s.push(o):o&&o.length&&"string"!==x(o)&&e(o)})}(arguments),o&&!i&&c()),this},remove:function(){return w.each(arguments,function(t,e){for(var i;-1<(i=w.inArray(e,s,i));)s.splice(i,1),i<=l&&l--}),this},has:function(t){return t?-1<w.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=o="",this},disabled:function(){return!s},lock:function(){return r=a=[],o||i||(s=o=""),this},locked:function(){return!!r},fireWith:function(t,e){return r||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),i||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},w.extend({Deferred:function(e){var i=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],o="pending",n={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return n.then(null,t)},pipe:function(){var t=arguments;return w.Deferred(function(e){w.each(i,function(i,o){var n=g(t[o[4]])&&t[o[4]];r[o[1]](function(){var t=n&&n.apply(this,arguments);t&&g(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[o[0]+"With"](this,n?[t]:arguments)})}),t=null}).promise()},then:function(e,o,n){var r=0;function s(e,i,o,n){return function(){var a=this,l=arguments,c=function(){var t,c;if(!(e<r)){if((t=o.apply(a,l))===i.promise())throw new TypeError("Thenable self-resolution");g(c=t&&("object"==typeof t||"function"==typeof t)&&t.then)?n?c.call(t,s(r,i,O,n),s(r,i,R,n)):(r++,c.call(t,s(r,i,O,n),s(r,i,R,n),s(r,i,O,i.notifyWith))):(o!==O&&(a=void 0,l=[t]),(n||i.resolveWith)(a,l))}},h=n?c:function(){try{c()}catch(c){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(c,h.stackTrace),r<=e+1&&(o!==R&&(a=void 0,l=[c]),i.rejectWith(a,l))}};e?h():(w.Deferred.getStackHook&&(h.stackTrace=w.Deferred.getStackHook()),t.setTimeout(h))}}return w.Deferred(function(t){i[0][3].add(s(0,t,g(n)?n:O,t.notifyWith)),i[1][3].add(s(0,t,g(e)?e:O)),i[2][3].add(s(0,t,g(o)?o:R))}).promise()},promise:function(t){return null!=t?w.extend(t,n):n}},r={};return w.each(i,function(t,e){var s=e[2],a=e[5];n[e[1]]=s.add,a&&s.add(function(){o=a},i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),s.add(e[3].fire),r[e[0]]=function(){return r[e[0]+"With"](this===r?void 0:this,arguments),this},r[e[0]+"With"]=s.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(t){var e=arguments.length,i=e,o=Array(i),r=n.call(arguments),s=w.Deferred(),a=function(t){return function(i){o[t]=this,r[t]=1<arguments.length?n.call(arguments):i,--e||s.resolveWith(o,r)}};if(e<=1&&(G(t,s.done(a(i)).resolve,s.reject,!e),"pending"===s.state()||g(r[i]&&r[i].then)))return s.then();for(;i--;)G(r[i],a(i),s.reject);return s.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&B.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},w.readyException=function(e){t.setTimeout(function(){throw e})};var z=w.Deferred();function H(){m.removeEventListener("DOMContentLoaded",H),t.removeEventListener("load",H),w.ready()}w.fn.ready=function(t){return z.then(t).catch(function(t){w.readyException(t)}),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0)!==t&&0<--w.readyWait||z.resolveWith(m,[w])}}),w.ready.then=z.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?t.setTimeout(w.ready):(m.addEventListener("DOMContentLoaded",H),t.addEventListener("load",H));var V=function(t,e,i,o,n,r,s){var a=0,l=t.length,c=null==i;if("object"===x(i))for(a in n=!0,i)V(t,e,a,i[a],!0,r,s);else if(void 0!==o&&(n=!0,g(o)||(s=!0),c&&(s?(e.call(t,o),e=null):(c=e,e=function(t,e,i){return c.call(w(t),i)})),e))for(;a<l;a++)e(t[a],i,s?o:o.call(t[a],a,e(t[a],i)));return n?t:c?e.call(t):l?e(t[0],i):r},Y=/^-ms-/,j=/-([a-z])/g;function X(t,e){return e.toUpperCase()}function W(t){return t.replace(Y,"ms-").replace(j,X)}var U=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function q(){this.expando=w.expando+q.uid++}q.uid=1,q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},U(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var o,n=this.cache(t);if("string"==typeof e)n[W(e)]=i;else for(o in e)n[W(o)]=e[o];return n},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][W(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,o=t[this.expando];if(void 0!==o){if(void 0!==e){i=(e=Array.isArray(e)?e.map(W):(e=W(e))in o?[e]:e.match(F)||[]).length;for(;i--;)delete o[e[i]]}(void 0===e||w.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var Z=new q,$=new q,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function J(t,e,i){var o,n;if(void 0===i&&1===t.nodeType)if(o="data-"+e.replace(K,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(o))){try{i="true"===(n=i)||"false"!==n&&("null"===n?null:n===+n+""?+n:Q.test(n)?JSON.parse(n):n)}catch(t){}$.set(t,e,i)}else i=void 0;return i}w.extend({hasData:function(t){return $.hasData(t)||Z.hasData(t)},data:function(t,e,i){return $.access(t,e,i)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,i){return Z.access(t,e,i)},_removeData:function(t,e){Z.remove(t,e)}}),w.fn.extend({data:function(t,e){var i,o,n,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(n=$.get(r),1===r.nodeType&&!Z.get(r,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(o=s[i].name).indexOf("data-")&&(o=W(o.slice(5)),J(r,o,n[o]));Z.set(r,"hasDataAttrs",!0)}return n}return"object"==typeof t?this.each(function(){$.set(this,t)}):V(this,function(e){var i;if(r&&void 0===e)return void 0!==(i=$.get(r,t))||void 0!==(i=J(r,t))?i:void 0;this.each(function(){$.set(this,t,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){$.remove(this,t)})}}),w.extend({queue:function(t,e,i){var o;if(t)return o=Z.get(t,e=(e||"fx")+"queue"),i&&(!o||Array.isArray(i)?o=Z.access(t,e,w.makeArray(i)):o.push(i)),o||[]},dequeue:function(t,e){var i=w.queue(t,e=e||"fx"),o=i.length,n=i.shift(),r=w._queueHooks(t,e);"inprogress"===n&&(n=i.shift(),o--),n&&("fx"===e&&i.unshift("inprogress"),delete r.stop,n.call(t,function(){w.dequeue(t,e)},r)),!o&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Z.get(t,i)||Z.access(t,i,{empty:w.Callbacks("once memory").add(function(){Z.remove(t,[e+"queue",i])})})}}),w.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?w.queue(this[0],t):void 0===e?this:this.each(function(){var i=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&w.dequeue(this,t)})},dequeue:function(t){return this.each(function(){w.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,o=1,n=w.Deferred(),r=this,s=this.length,a=function(){--o||n.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=Z.get(r[s],t+"queueHooks"))&&i.empty&&(o++,i.empty.add(a));return a(),n.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],ot=m.documentElement,nt=function(t){return w.contains(t.ownerDocument,t)},rt={composed:!0};ot.getRootNode&&(nt=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(rt)===t.ownerDocument});var st=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&nt(t)&&"none"===w.css(t,"display")};function at(t,e,i,o){var n,r,s=20,a=o?function(){return o.cur()}:function(){return w.css(t,e,"")},l=a(),c=i&&i[3]||(w.cssNumber[e]?"":"px"),h=t.nodeType&&(w.cssNumber[e]||"px"!==c&&+l)&&et.exec(w.css(t,e));if(h&&h[3]!==c){for(c=c||h[3],h=+(l/=2)||1;s--;)w.style(t,e,h+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),h/=r;w.style(t,e,(h*=2)+c),i=i||[]}return i&&(h=+h||+l||0,n=i[1]?h+(i[1]+1)*i[2]:+i[2],o&&(o.unit=c,o.start=h,o.end=n)),n}var lt={};function ct(t,e){for(var i,o,n,r,s,a,l,c=[],h=0,u=t.length;h<u;h++)(o=t[h]).style&&(i=o.style.display,e?("none"===i&&(c[h]=Z.get(o,"display")||null,c[h]||(o.style.display="")),""===o.style.display&&st(o)&&(c[h]=(l=s=r=void 0,s=(n=o).ownerDocument,(l=lt[a=n.nodeName])||(r=s.body.appendChild(s.createElement(a)),l=w.css(r,"display"),r.parentNode.removeChild(r),"none"===l&&(l="block"),lt[a]=l)))):"none"!==i&&(c[h]="none",Z.set(o,"display",i)));for(h=0;h<u;h++)null!=c[h]&&(t[h].style.display=c[h]);return t}w.fn.extend({show:function(){return ct(this,!0)},hide:function(){return ct(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){st(this)?w(this).show():w(this).hide()})}});var ht,ut,dt=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,gt=/^$|^module$|\/(?:java|ecma)script/i;ht=m.createDocumentFragment().appendChild(m.createElement("div")),(ut=m.createElement("input")).setAttribute("type","radio"),ut.setAttribute("checked","checked"),ut.setAttribute("name","t"),ht.appendChild(ut),p.checkClone=ht.cloneNode(!0).cloneNode(!0).lastChild.checked,ht.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!ht.cloneNode(!0).lastChild.defaultValue,ht.innerHTML="<option></option>",p.option=!!ht.lastChild;var ft={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&E(t,e)?w.merge([t],i):i}function yt(t,e){for(var i=0,o=t.length;i<o;i++)Z.set(t[i],"globalEval",!e||Z.get(e[i],"globalEval"))}ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td,p.option||(ft.optgroup=ft.option=[1,"<select multiple='multiple'>","</select>"]);var vt=/<|&#?\w+;/;function xt(t,e,i,o,n){for(var r,s,a,l,c,h,u=e.createDocumentFragment(),d=[],p=0,g=t.length;p<g;p++)if((r=t[p])||0===r)if("object"===x(r))w.merge(d,r.nodeType?[r]:r);else if(vt.test(r)){for(s=s||u.appendChild(e.createElement("div")),a=(pt.exec(r)||["",""])[1].toLowerCase(),s.innerHTML=(l=ft[a]||ft._default)[1]+w.htmlPrefilter(r)+l[2],h=l[0];h--;)s=s.lastChild;w.merge(d,s.childNodes),(s=u.firstChild).textContent=""}else d.push(e.createTextNode(r));for(u.textContent="",p=0;r=d[p++];)if(o&&-1<w.inArray(r,o))n&&n.push(r);else if(c=nt(r),s=mt(u.appendChild(r),"script"),c&&yt(s),i)for(h=0;r=s[h++];)gt.test(r.type||"")&&i.push(r);return u}var bt=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function _t(){return!1}function St(t,e){return t===function(){try{return m.activeElement}catch(t){}}()==("focus"===e)}function Ct(t,e,i,o,n,r){var s,a;if("object"==typeof e){for(a in"string"!=typeof i&&(o=o||i,i=void 0),e)Ct(t,a,i,o,e[a],r);return t}if(null==o&&null==n?(n=i,o=i=void 0):null==n&&("string"==typeof i?(n=o,o=void 0):(n=o,o=i,i=void 0)),!1===n)n=_t;else if(!n)return t;return 1===r&&(s=n,(n=function(t){return w().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=w.guid++)),t.each(function(){w.event.add(this,e,n,o,i)})}function kt(t,e,i){i?(Z.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var o,r,s=Z.get(this,e);if(1&t.isTrigger&&this[e]){if(s.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(s=n.call(arguments),Z.set(this,e,s),o=i(this,e),this[e](),s!==(r=Z.get(this,e))||o?Z.set(this,e,!1):r={},s!==r)return t.stopImmediatePropagation(),t.preventDefault(),r&&r.value}else s.length&&(Z.set(this,e,{value:w.event.trigger(w.extend(s[0],w.Event.prototype),s.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Z.get(t,e)&&w.event.add(t,e,wt)}w.event={global:{},add:function(t,e,i,o,n){var r,s,a,l,c,h,u,d,p,g,f,m=Z.get(t);if(U(t))for(i.handler&&(i=(r=i).handler,n=r.selector),n&&w.find.matchesSelector(ot,n),i.guid||(i.guid=w.guid++),(l=m.events)||(l=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(F)||[""]).length;c--;)p=f=(a=bt.exec(e[c])||[])[1],g=(a[2]||"").split(".").sort(),p&&(u=w.event.special[p]||{},u=w.event.special[p=(n?u.delegateType:u.bindType)||p]||{},h=w.extend({type:p,origType:f,data:o,handler:i,guid:i.guid,selector:n,needsContext:n&&w.expr.match.needsContext.test(n),namespace:g.join(".")},r),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,o,g,s)||t.addEventListener&&t.addEventListener(p,s)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),n?d.splice(d.delegateCount++,0,h):d.push(h),w.event.global[p]=!0)},remove:function(t,e,i,o,n){var r,s,a,l,c,h,u,d,p,g,f,m=Z.hasData(t)&&Z.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(F)||[""]).length;c--;)if(p=f=(a=bt.exec(e[c])||[])[1],g=(a[2]||"").split(".").sort(),p){for(u=w.event.special[p]||{},d=l[p=(o?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)h=d[r],!n&&f!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||o&&o!==h.selector&&("**"!==o||!h.selector)||(d.splice(r,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));s&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,g,m.handle)||w.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)w.event.remove(t,p+e[c],i,o,!0);w.isEmptyObject(l)&&Z.remove(t,"handle events")}},dispatch:function(t){var e,i,o,n,r,s,a=new Array(arguments.length),l=w.event.fix(t),c=(Z.get(this,"events")||Object.create(null))[l.type]||[],h=w.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,l)){for(s=w.event.handlers.call(this,l,c),e=0;(n=s[e++])&&!l.isPropagationStopped();)for(l.currentTarget=n.elem,i=0;(r=n.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(o=((w.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,a))&&!1===(l.result=o)&&(l.preventDefault(),l.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i,o,n,r,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],s={},i=0;i<l;i++)void 0===s[n=(o=e[i]).selector+" "]&&(s[n]=o.needsContext?-1<w(n,this).index(c):w.find(n,this,null,[c]).length),s[n]&&r.push(o);r.length&&a.push({elem:c,handlers:r})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return dt.test(e.type)&&e.click&&E(e,"input")&&kt(e,"click",wt),!1},trigger:function(t){var e=this||t;return dt.test(e.type)&&e.click&&E(e,"input")&&kt(e,"click"),!0},_default:function(t){var e=t.target;return dt.test(e.type)&&e.click&&E(e,"input")&&Z.get(e,"click")||E(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:_t,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:_t,isPropagationStopped:_t,isImmediatePropagationStopped:_t,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(t,e){w.event.special[t]={setup:function(){return kt(this,t,St),!1},trigger:function(){return kt(this,t),!0},_default:function(){return!0},delegateType:e}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,o=t.relatedTarget,n=t.handleObj;return o&&(o===this||w.contains(this,o))||(t.type=n.origType,i=n.handler.apply(this,arguments),t.type=e),i}}}),w.fn.extend({on:function(t,e,i,o){return Ct(this,t,e,i,o)},one:function(t,e,i,o){return Ct(this,t,e,i,o,1)},off:function(t,e,i){var o,n;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,w(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(n in t)this.off(n,e,t[n]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=_t),this.each(function(){w.event.remove(this,t,i,e)})}});var At=/<script|<style|<link/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Mt(t,e){return E(t,"table")&&E(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Pt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function It(t,e){var i,o,n,r,s,a;if(1===e.nodeType){if(Z.hasData(t)&&(a=Z.get(t).events))for(n in Z.remove(e,"handle events"),a)for(i=0,o=a[n].length;i<o;i++)w.event.add(e,n,a[n][i]);$.hasData(t)&&(r=$.access(t),s=w.extend({},r),$.set(e,s))}}function Dt(t,e,i,o){e=r(e);var n,s,a,l,c,h,u=0,d=t.length,f=d-1,m=e[0],y=g(m);if(y||1<d&&"string"==typeof m&&!p.checkClone&&Et.test(m))return t.each(function(n){var r=t.eq(n);y&&(e[0]=m.call(this,n,r.html())),Dt(r,e,i,o)});if(d&&(s=(n=xt(e,t[0].ownerDocument,!1,t,o)).firstChild,1===n.childNodes.length&&(n=s),s||o)){for(l=(a=w.map(mt(n,"script"),Lt)).length;u<d;u++)c=n,u!==f&&(c=w.clone(c,!0,!0),l&&w.merge(a,mt(c,"script"))),i.call(t[u],c,u);if(l)for(h=a[a.length-1].ownerDocument,w.map(a,Pt),u=0;u<l;u++)gt.test((c=a[u]).type||"")&&!Z.access(c,"globalEval")&&w.contains(h,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?w._evalUrl&&!c.noModule&&w._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},h):v(c.textContent.replace(Tt,""),c,h))}return t}function Nt(t,e,i){for(var o,n=e?w.filter(e,t):t,r=0;null!=(o=n[r]);r++)i||1!==o.nodeType||w.cleanData(mt(o)),o.parentNode&&(i&&nt(o)&&yt(mt(o,"script")),o.parentNode.removeChild(o));return t}w.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var o,n,r,s,a,l,c,h=t.cloneNode(!0),u=nt(t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(s=mt(h),o=0,n=(r=mt(t)).length;o<n;o++)a=r[o],"input"===(c=(l=s[o]).nodeName.toLowerCase())&&dt.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(e)if(i)for(r=r||mt(t),s=s||mt(h),o=0,n=r.length;o<n;o++)It(r[o],s[o]);else It(t,h);return 0<(s=mt(h,"script")).length&&yt(s,!u&&mt(t,"script")),h},cleanData:function(t){for(var e,i,o,n=w.event.special,r=0;void 0!==(i=t[r]);r++)if(U(i)){if(e=i[Z.expando]){if(e.events)for(o in e.events)n[o]?w.event.remove(i,o):w.removeEvent(i,o,e.handle);i[Z.expando]=void 0}i[$.expando]&&(i[$.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Nt(this,t,!0)},remove:function(t){return Nt(this,t)},text:function(t){return V(this,function(t){return void 0===t?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Dt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)})},prepend:function(){return Dt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Dt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Dt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return w.clone(this,t,e)})},html:function(t){return V(this,function(t){var e=this[0]||{},i=0,o=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!At.test(t)&&!ft[(pt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;i<o;i++)1===(e=this[i]||{}).nodeType&&(w.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Dt(this,arguments,function(e){var i=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(mt(this)),i&&i.replaceChild(e,this))},t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){w.fn[t]=function(t){for(var i,o=[],n=w(t),r=n.length-1,a=0;a<=r;a++)i=a===r?this:this.clone(!0),w(n[a])[e](i),s.apply(o,i.get());return this.pushStack(o)}});var Ft=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Ot=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Rt=function(t,e,i){var o,n,r={};for(n in e)r[n]=t.style[n],t.style[n]=e[n];for(n in o=i.call(t),e)t.style[n]=r[n];return o},Gt=new RegExp(it.join("|"),"i");function Bt(t,e,i){var o,n,r,s,a=t.style;return(i=i||Ot(t))&&(""!==(s=i.getPropertyValue(e)||i[e])||nt(t)||(s=w.style(t,e)),!p.pixelBoxStyles()&&Ft.test(s)&&Gt.test(e)&&(o=a.width,n=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=o,a.minWidth=n,a.maxWidth=r)),void 0!==s?s+"":s}function zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(h){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ot.appendChild(c).appendChild(h);var e=t.getComputedStyle(h);o="1%"!==e.top,l=12===i(e.marginLeft),h.style.right="60%",s=36===i(e.right),n=36===i(e.width),h.style.position="absolute",r=12===i(h.offsetWidth/3),ot.removeChild(c),h=null}}function i(t){return Math.round(parseFloat(t))}var o,n,r,s,a,l,c=m.createElement("div"),h=m.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===h.style.backgroundClip,w.extend(p,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),o},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,i,o,n;return null==a&&(e=m.createElement("table"),i=m.createElement("tr"),o=m.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="border:1px solid",i.style.height="1px",o.style.height="9px",o.style.display="block",ot.appendChild(e).appendChild(i).appendChild(o),n=t.getComputedStyle(i),a=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===i.offsetHeight,ot.removeChild(e)),a}}))}();var Ht=["Webkit","Moz","ms"],Vt=m.createElement("div").style,Yt={};function jt(t){return w.cssProps[t]||Yt[t]||(t in Vt?t:Yt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Ht.length;i--;)if((t=Ht[i]+e)in Vt)return t}(t)||t)}var Xt=/^(none|table(?!-c[ea]).+)/,Wt=/^--/,Ut={position:"absolute",visibility:"hidden",display:"block"},qt={letterSpacing:"0",fontWeight:"400"};function Zt(t,e,i){var o=et.exec(e);return o?Math.max(0,o[2]-(i||0))+(o[3]||"px"):e}function $t(t,e,i,o,n,r){var s="width"===e?1:0,a=0,l=0;if(i===(o?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=w.css(t,i+it[s],!0,n)),o?("content"===i&&(l-=w.css(t,"padding"+it[s],!0,n)),"margin"!==i&&(l-=w.css(t,"border"+it[s]+"Width",!0,n))):(l+=w.css(t,"padding"+it[s],!0,n),"padding"!==i?l+=w.css(t,"border"+it[s]+"Width",!0,n):a+=w.css(t,"border"+it[s]+"Width",!0,n));return!o&&0<=r&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))||0),l}function Qt(t,e,i){var o=Ot(t),n=(!p.boxSizingReliable()||i)&&"border-box"===w.css(t,"boxSizing",!1,o),r=n,s=Bt(t,e,o),a="offset"+e[0].toUpperCase()+e.slice(1);if(Ft.test(s)){if(!i)return s;s="auto"}return(!p.boxSizingReliable()&&n||!p.reliableTrDimensions()&&E(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===w.css(t,"display",!1,o))&&t.getClientRects().length&&(n="border-box"===w.css(t,"boxSizing",!1,o),(r=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+$t(t,e,i||(n?"border":"content"),r,o,s)+"px"}function Kt(t,e,i,o,n){return new Kt.prototype.init(t,e,i,o,n)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Bt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var n,r,s,a=W(e),l=Wt.test(e),c=t.style;if(l||(e=jt(a)),s=w.cssHooks[e]||w.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(n=s.get(t,!1,o))?n:c[e];"string"==(r=typeof i)&&(n=et.exec(i))&&n[1]&&(i=at(t,e,n),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=n&&n[3]||(w.cssNumber[a]?"":"px")),p.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,o))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,o){var n,r,s,a=W(e);return Wt.test(e)||(e=jt(a)),(s=w.cssHooks[e]||w.cssHooks[a])&&"get"in s&&(n=s.get(t,!0,i)),void 0===n&&(n=Bt(t,e,o)),"normal"===n&&e in qt&&(n=qt[e]),""===i||i?(r=parseFloat(n),!0===i||isFinite(r)?r||0:n):n}}),w.each(["height","width"],function(t,e){w.cssHooks[e]={get:function(t,i,o){if(i)return!Xt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Qt(t,e,o):Rt(t,Ut,function(){return Qt(t,e,o)})},set:function(t,i,o){var n,r=Ot(t),s=!p.scrollboxSize()&&"absolute"===r.position,a=(s||o)&&"border-box"===w.css(t,"boxSizing",!1,r),l=o?$t(t,e,o,a,r):0;return a&&s&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-$t(t,e,"border",!1,r)-.5)),l&&(n=et.exec(i))&&"px"!==(n[3]||"px")&&(t.style[e]=i,i=w.css(t,e)),Zt(0,i,l)}}}),w.cssHooks.marginLeft=zt(p.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Bt(t,"marginLeft"))||t.getBoundingClientRect().left-Rt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(t,e){w.cssHooks[t+e]={expand:function(i){for(var o=0,n={},r="string"==typeof i?i.split(" "):[i];o<4;o++)n[t+it[o]+e]=r[o]||r[o-2]||r[0];return n}},"margin"!==t&&(w.cssHooks[t+e].set=Zt)}),w.fn.extend({css:function(t,e){return V(this,function(t,e,i){var o,n,r={},s=0;if(Array.isArray(e)){for(o=Ot(t),n=e.length;s<n;s++)r[e[s]]=w.css(t,e[s],!1,o);return r}return void 0!==i?w.style(t,e,i):w.css(t,e)},t,e,1<arguments.length)}}),((w.Tween=Kt).prototype={constructor:Kt,init:function(t,e,i,o,n,r){this.elem=t,this.prop=i,this.easing=n||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=o,this.unit=r||(w.cssNumber[i]?"":"px")},cur:function(){var t=Kt.propHooks[this.prop];return t&&t.get?t.get(this):Kt.propHooks._default.get(this)},run:function(t){var e,i=Kt.propHooks[this.prop];return this.pos=e=this.options.duration?w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Kt.propHooks._default.set(this),this}}).init.prototype=Kt.prototype,(Kt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[jt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Kt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=Kt.prototype.init,w.fx.step={};var Jt,te,ee,ie,oe=/^(?:toggle|show|hide)$/,ne=/queueHooks$/;function re(){te&&(!1===m.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(re):t.setTimeout(re,w.fx.interval),w.fx.tick())}function se(){return t.setTimeout(function(){Jt=void 0}),Jt=Date.now()}function ae(t,e){var i,o=0,n={height:t};for(e=e?1:0;o<4;o+=2-e)n["margin"+(i=it[o])]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function le(t,e,i){for(var o,n=(ce.tweeners[e]||[]).concat(ce.tweeners["*"]),r=0,s=n.length;r<s;r++)if(o=n[r].call(i,e,t))return o}function ce(t,e,i){var o,n,r=0,s=ce.prefilters.length,a=w.Deferred().always(function(){delete l.elem}),l=function(){if(n)return!1;for(var e=Jt||se(),i=Math.max(0,c.startTime+c.duration-e),o=1-(i/c.duration||0),r=0,s=c.tweens.length;r<s;r++)c.tweens[r].run(o);return a.notifyWith(t,[c,o,i]),o<1&&s?i:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},i),originalProperties:e,originalOptions:i,startTime:Jt||se(),duration:i.duration,tweens:[],createTween:function(e,i){var o=w.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(o),o},stop:function(e){var i=0,o=e?c.tweens.length:0;if(n)return this;for(n=!0;i<o;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),h=c.props;for(function(t,e){var i,o,n,r,s;for(i in t)if(n=e[o=W(i)],r=t[i],Array.isArray(r)&&(n=r[1],r=t[i]=r[0]),i!==o&&(t[o]=r,delete t[i]),(s=w.cssHooks[o])&&"expand"in s)for(i in r=s.expand(r),delete t[o],r)i in t||(t[i]=r[i],e[i]=n);else e[o]=n}(h,c.opts.specialEasing);r<s;r++)if(o=ce.prefilters[r].call(c,t,h,c.opts))return g(o.stop)&&(w._queueHooks(c.elem,c.opts.queue).stop=o.stop.bind(o)),o;return w.map(h,le,c),g(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),w.fx.timer(w.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}w.Animation=w.extend(ce,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return at(i.elem,t,et.exec(e),i),i}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(F);for(var i,o=0,n=t.length;o<n;o++)(ce.tweeners[i=t[o]]=ce.tweeners[i]||[]).unshift(e)},prefilters:[function(t,e,i){var o,n,r,s,a,l,c,h,u="width"in e||"height"in e,d=this,p={},g=t.style,f=t.nodeType&&st(t),m=Z.get(t,"fxshow");for(o in i.queue||(null==(s=w._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,w.queue(t,"fx").length||s.empty.fire()})})),e)if(oe.test(n=e[o])){if(delete e[o],r=r||"toggle"===n,n===(f?"hide":"show")){if("show"!==n||!m||void 0===m[o])continue;f=!0}p[o]=m&&m[o]||w.style(t,o)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(p))for(o in u&&1===t.nodeType&&(i.overflow=[g.overflow,g.overflowX,g.overflowY],null==(c=m&&m.display)&&(c=Z.get(t,"display")),"none"===(h=w.css(t,"display"))&&(c?h=c:(ct([t],!0),c=t.style.display||c,h=w.css(t,"display"),ct([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===w.css(t,"float")&&(l||(d.done(function(){g.display=c}),null==c&&(c="none"===(h=g.display)?"":h)),g.display="inline-block")),i.overflow&&(g.overflow="hidden",d.always(function(){g.overflow=i.overflow[0],g.overflowX=i.overflow[1],g.overflowY=i.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(f=m.hidden):m=Z.access(t,"fxshow",{display:c}),r&&(m.hidden=!f),f&&ct([t],!0),d.done(function(){for(o in f||ct([t]),Z.remove(t,"fxshow"),p)w.style(t,o,p[o])})),l=le(f?m[o]:0,o,d),o in m||(m[o]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ce.prefilters.unshift(t):ce.prefilters.push(t)}}),w.speed=function(t,e,i){var o=t&&"object"==typeof t?w.extend({},t):{complete:i||!i&&e||g(t)&&t,duration:t,easing:i&&e||e&&!g(e)&&e};return w.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration=o.duration in w.fx.speeds?w.fx.speeds[o.duration]:w.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){g(o.old)&&o.old.call(this),o.queue&&w.dequeue(this,o.queue)},o},w.fn.extend({fadeTo:function(t,e,i,o){return this.filter(st).css("opacity",0).show().end().animate({opacity:e},t,i,o)},animate:function(t,e,i,o){var n=w.isEmptyObject(t),r=w.speed(e,i,o),s=function(){var e=ce(this,w.extend({},t),r);(n||Z.get(this,"finish"))&&e.stop(!0)};return s.finish=s,n||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,i){var o=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",r=w.timers,s=Z.get(this);if(n)s[n]&&s[n].stop&&o(s[n]);else for(n in s)s[n]&&s[n].stop&&ne.test(n)&&o(s[n]);for(n=r.length;n--;)r[n].elem!==this||null!=t&&r[n].queue!==t||(r[n].anim.stop(i),e=!1,r.splice(n,1));!e&&i||w.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=Z.get(this),o=i[t+"queue"],n=i[t+"queueHooks"],r=w.timers,s=o?o.length:0;for(i.finish=!0,w.queue(this,t,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)o[e]&&o[e].finish&&o[e].finish.call(this);delete i.finish})}}),w.each(["toggle","show","hide"],function(t,e){var i=w.fn[e];w.fn[e]=function(t,o,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ae(e,!0),t,o,n)}}),w.each({slideDown:ae("show"),slideUp:ae("hide"),slideToggle:ae("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){w.fn[t]=function(t,i,o){return this.animate(e,t,i,o)}}),w.timers=[],w.fx.tick=function(){var t,e=0,i=w.timers;for(Jt=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||w.fx.stop(),Jt=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){te||(te=!0,re())},w.fx.stop=function(){te=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,i){return e=w.fx&&w.fx.speeds[e]||e,this.queue(i=i||"fx",function(i,o){var n=t.setTimeout(i,e);o.stop=function(){t.clearTimeout(n)}})},ee=m.createElement("input"),ie=m.createElement("select").appendChild(m.createElement("option")),ee.type="checkbox",p.checkOn=""!==ee.value,p.optSelected=ie.selected,(ee=m.createElement("input")).value="t",ee.type="radio",p.radioValue="t"===ee.value;var he,ue=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return V(this,w.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){w.removeAttr(this,t)})}}),w.extend({attr:function(t,e,i){var o,n,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?w.prop(t,e,i):(1===r&&w.isXMLDoc(t)||(n=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?he:void 0)),void 0!==i?null===i?void w.removeAttr(t,e):n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:(t.setAttribute(e,i+""),i):n&&"get"in n&&null!==(o=n.get(t,e))?o:null==(o=w.find.attr(t,e))?void 0:o)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&E(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,o=0,n=e&&e.match(F);if(n&&1===t.nodeType)for(;i=n[o++];)t.removeAttribute(i)}}),he={set:function(t,e,i){return!1===e?w.removeAttr(t,i):t.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),function(t,e){var i=ue[e]||w.find.attr;ue[e]=function(t,e,o){var n,r,s=e.toLowerCase();return o||(r=ue[s],ue[s]=n,n=null!=i(t,e,o)?s:null,ue[s]=r),n}});var de=/^(?:input|select|textarea|button)$/i,pe=/^(?:a|area)$/i;function ge(t){return(t.match(F)||[]).join(" ")}function fe(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}w.fn.extend({prop:function(t,e){return V(this,w.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[w.propFix[t]||t]})}}),w.extend({prop:function(t,e,i){var o,n,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&w.isXMLDoc(t)||(n=w.propHooks[e=w.propFix[e]||e]),void 0!==i?n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:t[e]=i:n&&"get"in n&&null!==(o=n.get(t,e))?o:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||pe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(w.propHooks.selected={get:function(t){return null},set:function(t){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(t){var e,i,o,n,r,s,a,l=0;if(g(t))return this.each(function(e){w(this).addClass(t.call(this,e,fe(this)))});if((e=me(t)).length)for(;i=this[l++];)if(n=fe(i),o=1===i.nodeType&&" "+ge(n)+" "){for(s=0;r=e[s++];)o.indexOf(" "+r+" ")<0&&(o+=r+" ");n!==(a=ge(o))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,o,n,r,s,a,l=0;if(g(t))return this.each(function(e){w(this).removeClass(t.call(this,e,fe(this)))});if(!arguments.length)return this.attr("class","");if((e=me(t)).length)for(;i=this[l++];)if(n=fe(i),o=1===i.nodeType&&" "+ge(n)+" "){for(s=0;r=e[s++];)for(;-1<o.indexOf(" "+r+" ");)o=o.replace(" "+r+" "," ");n!==(a=ge(o))&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t,o="string"===i||Array.isArray(t);return"boolean"==typeof e&&o?e?this.addClass(t):this.removeClass(t):g(t)?this.each(function(i){w(this).toggleClass(t.call(this,i,fe(this),e),e)}):this.each(function(){var e,n,r,s;if(o)for(n=0,r=w(this),s=me(t);e=s[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||((e=fe(this))&&Z.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Z.get(this,"__className__")||""))})},hasClass:function(t){var e,i,o=0;for(e=" "+t+" ";i=this[o++];)if(1===i.nodeType&&-1<(" "+ge(fe(i))+" ").indexOf(e))return!0;return!1}});var ye=/\r/g;w.fn.extend({val:function(t){var e,i,o,n=this[0];return arguments.length?(o=g(t),this.each(function(i){var n;1===this.nodeType&&(null==(n=o?t.call(this,i,w(this).val()):t)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=w.map(n,function(t){return null==t?"":t+""})),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,n,"value")||(this.value=n))})):n?(e=w.valHooks[n.type]||w.valHooks[n.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(n,"value"))?i:"string"==typeof(i=n.value)?i.replace(ye,""):null==i?"":i:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ge(w.text(t))}},select:{get:function(t){var e,i,o,n=t.options,r=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?r+1:n.length;for(o=r<0?l:s?r:0;o<l;o++)if(((i=n[o]).selected||o===r)&&!i.disabled&&(!i.parentNode.disabled||!E(i.parentNode,"optgroup"))){if(e=w(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,o,n=t.options,r=w.makeArray(e),s=n.length;s--;)((o=n[s]).selected=-1<w.inArray(w.valHooks.option.get(o),r))&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<w.inArray(w(t).val(),e)}},p.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),p.focusin="onfocusin"in t;var ve=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,i,o,n){var r,s,a,l,c,u,d,p,y=[o||m],v=h.call(e,"type")?e.type:e,x=h.call(e,"namespace")?e.namespace.split("."):[];if(s=p=a=o=o||m,3!==o.nodeType&&8!==o.nodeType&&!ve.test(v+w.event.triggered)&&(-1<v.indexOf(".")&&(v=(x=v.split(".")).shift(),x.sort()),c=v.indexOf(":")<0&&"on"+v,(e=e[w.expando]?e:new w.Event(v,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=x.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=o),i=null==i?[e]:w.makeArray(i,[e]),d=w.event.special[v]||{},n||!d.trigger||!1!==d.trigger.apply(o,i))){if(!n&&!d.noBubble&&!f(o)){for(ve.test((l=d.delegateType||v)+v)||(s=s.parentNode);s;s=s.parentNode)y.push(s),a=s;a===(o.ownerDocument||m)&&y.push(a.defaultView||a.parentWindow||t)}for(r=0;(s=y[r++])&&!e.isPropagationStopped();)p=s,e.type=1<r?l:d.bindType||v,(u=(Z.get(s,"events")||Object.create(null))[e.type]&&Z.get(s,"handle"))&&u.apply(s,i),(u=c&&s[c])&&u.apply&&U(s)&&(e.result=u.apply(s,i),!1===e.result&&e.preventDefault());return e.type=v,n||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(y.pop(),i)||!U(o)||c&&g(o[v])&&!f(o)&&((a=o[c])&&(o[c]=null),w.event.triggered=v,e.isPropagationStopped()&&p.addEventListener(v,xe),o[v](),e.isPropagationStopped()&&p.removeEventListener(v,xe),w.event.triggered=void 0,a&&(o[c]=a)),e.result}},simulate:function(t,e,i){var o=w.extend(new w.Event,i,{type:t,isSimulated:!0});w.event.trigger(o,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each(function(){w.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return w.event.trigger(t,e,i,!0)}}),p.focusin||w.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var o=this.ownerDocument||this.document||this,n=Z.access(o,e);n||o.addEventListener(t,i,!0),Z.access(o,e,(n||0)+1)},teardown:function(){var o=this.ownerDocument||this.document||this,n=Z.access(o,e)-1;n?Z.access(o,e,n):(o.removeEventListener(t,i,!0),Z.remove(o,e))}}});var be=t.location,we={guid:Date.now()},_e=/\?/;w.parseXML=function(e){var i,o;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){}return o=i&&i.getElementsByTagName("parsererror")[0],i&&!o||w.error("Invalid XML: "+(o?w.map(o.childNodes,function(t){return t.textContent}).join("\n"):e)),i};var Se=/\[\]$/,Ce=/\r?\n/g,ke=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;function Ee(t,e,i,o){var n;if(Array.isArray(e))w.each(e,function(e,n){i||Se.test(t)?o(t,n):Ee(t+"["+("object"==typeof n&&null!=n?e:"")+"]",n,i,o)});else if(i||"object"!==x(e))o(t,e);else for(n in e)Ee(t+"["+n+"]",e[n],i,o)}w.param=function(t,e){var i,o=[],n=function(t,e){var i=g(e)?e():e;o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,function(){n(this.name,this.value)});else for(i in t)Ee(i,t[i],e,n);return o.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Ae.test(this.nodeName)&&!ke.test(t)&&(this.checked||!dt.test(t))}).map(function(t,e){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,function(t){return{name:e.name,value:t.replace(Ce,"\r\n")}}):{name:e.name,value:i.replace(Ce,"\r\n")}}).get()}});var Te=/%20/g,Me=/#.*$/,Le=/([?&])_=[^&]*/,Pe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ie=/^(?:GET|HEAD)$/,De=/^\/\//,Ne={},Fe={},Oe="*/".concat("*"),Re=m.createElement("a");function Ge(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var o,n=0,r=e.toLowerCase().match(F)||[];if(g(i))for(;o=r[n++];)"+"===o[0]?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(i)):(t[o]=t[o]||[]).push(i)}}function Be(t,e,i,o){var n={},r=t===Fe;function s(a){var l;return n[a]=!0,w.each(t[a]||[],function(t,a){var c=a(e,i,o);return"string"!=typeof c||r||n[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),l}return s(e.dataTypes[0])||!n["*"]&&s("*")}function ze(t,e){var i,o,n=w.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((n[i]?t:o||(o={}))[i]=e[i]);return o&&w.extend(!0,t,o),t}Re.href=be.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ze(ze(t,w.ajaxSettings),e):ze(w.ajaxSettings,t)},ajaxPrefilter:Ge(Ne),ajaxTransport:Ge(Fe),ajax:function(e,i){"object"==typeof e&&(i=e,e=void 0);var o,n,r,s,a,l,c,h,u,d,p=w.ajaxSetup({},i=i||{}),g=p.context||p,f=p.context&&(g.nodeType||g.jquery)?w(g):w.event,y=w.Deferred(),v=w.Callbacks("once memory"),x=p.statusCode||{},b={},_={},S="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Pe.exec(r);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(t,e){return null==c&&(t=_[t.toLowerCase()]=_[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)C.always(t[C.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||S;return o&&o.abort(e),k(0,e),this}};if(y.promise(C),p.url=((e||p.url||be.href)+"").replace(De,be.protocol+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){l=m.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Re.protocol+"//"+Re.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),Be(Ne,p,i,C),c)return C;for(u in(h=w.event&&p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ie.test(p.type),n=p.url.replace(Me,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Te,"+")):(d=p.url.slice(n.length),p.data&&(p.processData||"string"==typeof p.data)&&(n+=(_e.test(n)?"&":"?")+p.data,delete p.data),!1===p.cache&&(n=n.replace(Le,"$1"),d=(_e.test(n)?"&":"?")+"_="+we.guid+++d),p.url=n+d),p.ifModified&&(w.lastModified[n]&&C.setRequestHeader("If-Modified-Since",w.lastModified[n]),w.etag[n]&&C.setRequestHeader("If-None-Match",w.etag[n])),(p.data&&p.hasContent&&!1!==p.contentType||i.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Oe+"; q=0.01":""):p.accepts["*"]),p.headers)C.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(g,C,p)||c))return C.abort();if(S="abort",v.add(p.complete),C.done(p.success),C.fail(p.error),o=Be(Fe,p,i,C)){if(C.readyState=1,h&&f.trigger("ajaxSend",[C,p]),c)return C;p.async&&0<p.timeout&&(a=t.setTimeout(function(){C.abort("timeout")},p.timeout));try{c=!1,o.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,i,s,l){var u,d,m,b,_,S=i;c||(c=!0,a&&t.clearTimeout(a),o=void 0,r=l||"",C.readyState=0<e?4:0,u=200<=e&&e<300||304===e,s&&(b=function(t,e,i){for(var o,n,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(n in a)if(a[n]&&a[n].test(o)){l.unshift(n);break}if(l[0]in i)r=l[0];else{for(n in i){if(!l[0]||t.converters[n+" "+l[0]]){r=n;break}s||(s=n)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),i[r]}(p,C,s)),!u&&-1<w.inArray("script",p.dataTypes)&&w.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),b=function(t,e,i,o){var n,r,s,a,l,c={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=h.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&o&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(n in c)if((a=n.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[n]:!0!==c[n]&&(r=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(p,b,C,u),u?(p.ifModified&&((_=C.getResponseHeader("Last-Modified"))&&(w.lastModified[n]=_),(_=C.getResponseHeader("etag"))&&(w.etag[n]=_)),204===e||"HEAD"===p.type?S="nocontent":304===e?S="notmodified":(S=b.state,d=b.data,u=!(m=b.error))):(m=S,!e&&S||(S="error",e<0&&(e=0))),C.status=e,C.statusText=(i||S)+"",u?y.resolveWith(g,[d,S,C]):y.rejectWith(g,[C,S,m]),C.statusCode(x),x=void 0,h&&f.trigger(u?"ajaxSuccess":"ajaxError",[C,p,u?d:m]),v.fireWith(g,[C,S]),h&&(f.trigger("ajaxComplete",[C,p]),--w.active||w.event.trigger("ajaxStop")))}return C},getJSON:function(t,e,i){return w.get(t,e,i,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],function(t,e){w[e]=function(t,i,o,n){return g(i)&&(n=n||o,o=i,i=void 0),w.ajax(w.extend({url:t,type:e,dataType:n,data:i,success:o},w.isPlainObject(t)&&t))}}),w.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),w._evalUrl=function(t,e,i){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e,i)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return g(t)?this.each(function(e){w(this).wrapInner(t.call(this,e))}):this.each(function(){var e=w(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=g(t);return this.each(function(i){w(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var He={0:200,1223:204},Ve=w.ajaxSettings.xhr();p.cors=!!Ve&&"withCredentials"in Ve,p.ajax=Ve=!!Ve,w.ajaxTransport(function(e){var i,o;if(p.cors||Ve&&!e.crossDomain)return{send:function(n,r){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)a.setRequestHeader(s,n[s]);i=function(t){return function(){i&&(i=o=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(He[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),o=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=o:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){i&&o()})},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(n){if(i)throw n}},abort:function(){i&&i()}}}),w.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),w.ajaxTransport("script",function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(o,n){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&n("error"===t.type?404:200,t.type)}),m.head.appendChild(e[0])},abort:function(){i&&i()}}});var Ye,je=[],Xe=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=je.pop()||w.expando+"_"+we.guid++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",function(e,i,o){var n,r,s,a=!1!==e.jsonp&&(Xe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xe.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Xe,"$1"+n):!1!==e.jsonp&&(e.url+=(_e.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return s||w.error(n+" was not called"),s[0]},e.dataTypes[0]="json",r=t[n],t[n]=function(){s=arguments},o.always(function(){void 0===r?w(t).removeProp(n):t[n]=r,e[n]&&(e.jsonpCallback=i.jsonpCallback,je.push(n)),s&&g(r)&&r(s[0]),s=r=void 0}),"script"}),p.createHTMLDocument=((Ye=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ye.childNodes.length),w.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(p.createHTMLDocument?((o=(e=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,e.head.appendChild(o)):e=m),r=!i&&[],(n=T.exec(t))?[e.createElement(n[1])]:(n=xt([t],e,r),r&&r.length&&w(r).remove(),w.merge([],n.childNodes)));var o,n,r},w.fn.load=function(t,e,i){var o,n,r,s=this,a=t.indexOf(" ");return-1<a&&(o=ge(t.slice(a)),t=t.slice(0,a)),g(e)?(i=e,e=void 0):e&&"object"==typeof e&&(n="POST"),0<s.length&&w.ajax({url:t,type:n||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(o?w("<div>").append(w.parseHTML(t)).find(o):t)}).always(i&&function(t,e){s.each(function(){i.apply(this,r||[t.responseText,e,t])})}),this},w.expr.pseudos.animated=function(t){return w.grep(w.timers,function(e){return t===e.elem}).length},w.offset={setOffset:function(t,e,i){var o,n,r,s,a,l,c=w.css(t,"position"),h=w(t),u={};"static"===c&&(t.style.position="relative"),a=h.offset(),r=w.css(t,"top"),l=w.css(t,"left"),("absolute"===c||"fixed"===c)&&-1<(r+l).indexOf("auto")?(s=(o=h.position()).top,n=o.left):(s=parseFloat(r)||0,n=parseFloat(l)||0),g(e)&&(e=e.call(t,i,w.extend({},a))),null!=e.top&&(u.top=e.top-a.top+s),null!=e.left&&(u.left=e.left-a.left+n),"using"in e?e.using.call(t,u):h.css(u)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){w.offset.setOffset(this,t,e)});var e,i,o=this[0];return o?o.getClientRects().length?{top:(e=o.getBoundingClientRect()).top+(i=o.ownerDocument.defaultView).pageYOffset,left:e.left+i.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,o=this[0],n={top:0,left:0};if("fixed"===w.css(o,"position"))e=o.getBoundingClientRect();else{for(e=this.offset(),i=o.ownerDocument,t=o.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==o&&1===t.nodeType&&((n=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),n.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-n.top-w.css(o,"marginTop",!0),left:e.left-n.left-w.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||ot})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;w.fn[t]=function(o){return V(this,function(t,o,n){var r;if(f(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===n)return r?r[e]:t[o];r?r.scrollTo(i?r.pageXOffset:n,i?n:r.pageYOffset):t[o]=n},t,o,arguments.length)}}),w.each(["top","left"],function(t,e){w.cssHooks[e]=zt(p.pixelPosition,function(t,i){if(i)return i=Bt(t,e),Ft.test(i)?w(t).position()[e]+"px":i})}),w.each({Height:"height",Width:"width"},function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,o){w.fn[o]=function(n,r){var s=arguments.length&&(i||"boolean"!=typeof n),a=i||(!0===n||!0===r?"margin":"border");return V(this,function(e,i,n){var r;return f(e)?0===o.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?w.css(e,i,a):w.style(e,i,n,a)},e,s?n:void 0,s)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){w.fn[e]=function(t){return this.on(e,t)}}),w.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,o){return this.on(e,t,i,o)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){w.fn[e]=function(t,i){return 0<arguments.length?this.on(e,null,t,i):this.trigger(e)}});var We=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(t,e){var i,o,r;if("string"==typeof e&&(i=t[e],e=t,t=i),g(t))return o=n.call(arguments,2),(r=function(){return t.apply(e||this,o.concat(n.call(arguments)))}).guid=t.guid=t.guid||w.guid++,r},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=E,w.isFunction=g,w.isWindow=f,w.camelCase=W,w.type=x,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},w.trim=function(t){return null==t?"":(t+"").replace(We,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Ue=t.jQuery,qe=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=qe),e&&t.jQuery===w&&(t.jQuery=Ue),w},void 0===e&&(t.jQuery=t.$=w),w}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Popper=e()}(this,function(){"use strict";var t="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,e=function(){for(var e=["Edge","Trident","Firefox"],i=0;i<e.length;i+=1)if(t&&navigator.userAgent.indexOf(e[i])>=0)return 1;return 0}(),i=t&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var i=!1;return function(){i||(i=!0,setTimeout(function(){i=!1,t()},e))}};function o(t){return t&&"[object Function]"==={}.toString.call(t)}function n(t,e){if(1!==t.nodeType)return[];var i=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?i[e]:i}function r(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function s(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=n(t);return/(auto|scroll|overlay)/.test(e.overflow+e.overflowY+e.overflowX)?t:s(r(t))}function a(t){return t&&t.referenceNode?t.referenceNode:t}var l=t&&!(!window.MSInputMethodContext||!document.documentMode),c=t&&/MSIE 10/.test(navigator.userAgent);function h(t){return 11===t?l:10===t?c:l||c}function u(t){if(!t)return document.documentElement;for(var e=h(10)?document.body:null,i=t.offsetParent||null;i===e&&t.nextElementSibling;)i=(t=t.nextElementSibling).offsetParent;var o=i&&i.nodeName;return o&&"BODY"!==o&&"HTML"!==o?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===n(i,"position")?u(i):i:t?t.ownerDocument.documentElement:document.documentElement}function d(t){return null!==t.parentNode?d(t.parentNode):t}function p(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var i=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,o=i?t:e,n=i?e:t,r=document.createRange();r.setStart(o,0),r.setEnd(n,0);var s,a,l=r.commonAncestorContainer;if(t!==l&&e!==l||o.contains(n))return"BODY"===(a=(s=l).nodeName)||"HTML"!==a&&u(s.firstElementChild)!==s?u(l):l;var c=d(t);return c.host?p(c.host,e):p(t,d(e).host)}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",i="top"===e?"scrollTop":"scrollLeft",o=t.nodeName;if("BODY"===o||"HTML"===o){var n=t.ownerDocument.documentElement,r=t.ownerDocument.scrollingElement||n;return r[i]}return t[i]}function f(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=g(e,"top"),n=g(e,"left"),r=i?-1:1;return t.top+=o*r,t.bottom+=o*r,t.left+=n*r,t.right+=n*r,t}function m(t,e){var i="x"===e?"Left":"Top",o="Left"===i?"Right":"Bottom";return parseFloat(t["border"+i+"Width"])+parseFloat(t["border"+o+"Width"])}function y(t,e,i,o){return Math.max(e["offset"+t],e["scroll"+t],i["client"+t],i["offset"+t],i["scroll"+t],h(10)?parseInt(i["offset"+t])+parseInt(o["margin"+("Height"===t?"Top":"Left")])+parseInt(o["margin"+("Height"===t?"Bottom":"Right")]):0)}function v(t){var e=t.body,i=t.documentElement,o=h(10)&&getComputedStyle(i);return{height:y("Height",e,i,o),width:y("Width",e,i,o)}}var x=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},b=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),w=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t};function S(t){return _({},t,{right:t.left+t.width,bottom:t.top+t.height})}function C(t){var e={};try{if(h(10)){e=t.getBoundingClientRect();var i=g(t,"top"),o=g(t,"left");e.top+=i,e.left+=o,e.bottom+=i,e.right+=o}else e=t.getBoundingClientRect()}catch(u){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},s="HTML"===t.nodeName?v(t.ownerDocument):{},a=t.offsetWidth-(s.width||t.clientWidth||r.width),l=t.offsetHeight-(s.height||t.clientHeight||r.height);if(a||l){var c=n(t);a-=m(c,"x"),l-=m(c,"y"),r.width-=a,r.height-=l}return S(r)}function k(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=h(10),r="HTML"===e.nodeName,a=C(t),l=C(e),c=s(t),u=n(e),d=parseFloat(u.borderTopWidth),p=parseFloat(u.borderLeftWidth);i&&r&&(l.top=Math.max(l.top,0),l.left=Math.max(l.left,0));var g=S({top:a.top-l.top-d,left:a.left-l.left-p,width:a.width,height:a.height});if(g.marginTop=0,g.marginLeft=0,!o&&r){var m=parseFloat(u.marginTop),y=parseFloat(u.marginLeft);g.top-=d-m,g.bottom-=d-m,g.left-=p-y,g.right-=p-y,g.marginTop=m,g.marginLeft=y}return(o&&!i?e.contains(c):e===c&&"BODY"!==c.nodeName)&&(g=f(g,e)),g}function A(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.ownerDocument.documentElement,o=k(t,i),n=Math.max(i.clientWidth,window.innerWidth||0),r=Math.max(i.clientHeight,window.innerHeight||0),s=e?0:g(i),a=e?0:g(i,"left"),l={top:s-o.top+o.marginTop,left:a-o.left+o.marginLeft,width:n,height:r};return S(l)}function E(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===n(t,"position"))return!0;var i=r(t);return!!i&&E(i)}function T(t){if(!t||!t.parentElement||h())return document.documentElement;for(var e=t.parentElement;e&&"none"===n(e,"transform");)e=e.parentElement;return e||document.documentElement}function M(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l={top:0,left:0},c=n?T(t):p(t,a(e));if("viewport"===o)l=A(c,n);else{var h=void 0;"scrollParent"===o?"BODY"===(h=s(r(e))).nodeName&&(h=t.ownerDocument.documentElement):h="window"===o?t.ownerDocument.documentElement:o;var u=k(h,c,n);if("HTML"!==h.nodeName||E(c))l=u;else{var d=v(t.ownerDocument),g=d.height,f=d.width;l.top+=u.top-u.marginTop,l.bottom=g+u.top,l.left+=u.left-u.marginLeft,l.right=f+u.left}}var m="number"==typeof(i=i||0);return l.left+=m?i:i.left||0,l.top+=m?i:i.top||0,l.right-=m?i:i.right||0,l.bottom-=m?i:i.bottom||0,l}function L(t){return t.width*t.height}function P(t,e,i,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=M(i,o,r,n),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},l=Object.keys(a).map(function(t){return _({key:t},a[t],{area:L(a[t])})}).sort(function(t,e){return e.area-t.area}),c=l.filter(function(t){return t.width>=i.clientWidth&&t.height>=i.clientHeight}),h=c.length>0?c[0].key:l[0].key,u=t.split("-")[1];return h+(u?"-"+u:"")}function I(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=o?T(e):p(e,a(i));return k(i,n,o)}function D(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),i=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),o=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+o,height:t.offsetHeight+i}}function N(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function F(t,e,i){i=i.split("-")[0];var o=D(t),n={width:o.width,height:o.height},r=-1!==["right","left"].indexOf(i),s=r?"top":"left",a=r?"left":"top",l=r?"height":"width",c=r?"width":"height";return n[s]=e[s]+e[l]/2-o[l]/2,n[a]=i===a?e[a]-o[c]:e[N(a)],n}function O(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function R(t,e,i){return(void 0===i?t:t.slice(0,function(t,e,i){if(Array.prototype.findIndex)return t.findIndex(function(t){return t.name===i});var o=O(t,function(t){return t.name===i});return t.indexOf(o)}(t,0,i))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=t.function||t.fn;t.enabled&&o(i)&&(e.offsets.popper=S(e.offsets.popper),e.offsets.reference=S(e.offsets.reference),e=i(e,t))}),e}function G(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=I(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=P(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=F(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=R(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function B(t,e){return t.some(function(t){return t.enabled&&t.name===e})}function z(t){for(var e=[!1,"ms","Webkit","Moz","O"],i=t.charAt(0).toUpperCase()+t.slice(1),o=0;o<e.length;o++){var n=e[o],r=n?""+n+i:t;if(void 0!==document.body.style[r])return r}return null}function H(){return this.state.isDestroyed=!0,B(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[z("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function V(t){var e=t.ownerDocument;return e?e.defaultView:window}function Y(t,e,i,o){var n="BODY"===t.nodeName,r=n?t.ownerDocument.defaultView:t;r.addEventListener(e,i,{passive:!0}),n||Y(s(r.parentNode),e,i,o),o.push(r)}function j(t,e,i,o){i.updateBound=o,V(t).addEventListener("resize",i.updateBound,{passive:!0});var n=s(t);return Y(n,"scroll",i.updateBound,i.scrollParents),i.scrollElement=n,i.eventsEnabled=!0,i}function X(){this.state.eventsEnabled||(this.state=j(this.reference,0,this.state,this.scheduleUpdate))}function W(){var t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.state,V(this.reference).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function U(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function q(t,e){Object.keys(e).forEach(function(i){var o="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&U(e[i])&&(o="px"),t.style[i]=e[i]+o})}var Z=t&&/Firefox/i.test(navigator.userAgent);function $(t,e,i){var o=O(t,function(t){return t.name===e}),n=!!o&&t.some(function(t){return t.name===i&&t.enabled&&t.order<o.order});if(!n){var r="`"+e+"`";console.warn("`"+i+"` modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return n}var Q=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],K=Q.slice(3);function J(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=K.indexOf(t),o=K.slice(i+1).concat(K.slice(0,i));return e?o.reverse():o}var tt={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,i=e.split("-")[0],o=e.split("-")[1];if(o){var n=t.offsets,r=n.reference,s=n.popper,a=-1!==["bottom","top"].indexOf(i),l=a?"left":"top",c=a?"width":"height",h={start:w({},l,r[l]),end:w({},l,r[l]+r[c]-s[c])};t.offsets.popper=_({},s,h[o])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var i,o=e.offset,n=t.offsets,r=n.popper,s=n.reference,a=t.placement.split("-")[0];return i=U(+o)?[+o,0]:function(t,e,i,o){var n=[0,0],r=-1!==["right","left"].indexOf(o),s=t.split(/(\+|\-)/).map(function(t){return t.trim()}),a=s.indexOf(O(s,function(t){return-1!==t.search(/,|\s/)}));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==a?[s.slice(0,a).concat([s[a].split(l)[0]]),[s[a].split(l)[1]].concat(s.slice(a+1))]:[s];return(c=c.map(function(t,o){var n=(1===o?!r:r)?"height":"width",s=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,i,o){var n=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+n[1],s=n[2];if(!r)return t;if(0===s.indexOf("%")){var a=void 0;switch(s){case"%p":a=i;break;case"%":case"%r":default:a=o}return S(a)[e]/100*r}return"vh"===s||"vw"===s?("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r:r}(t,n,e,i)})})).forEach(function(t,e){t.forEach(function(i,o){U(i)&&(n[e]+=i*("-"===t[o-1]?-1:1))})}),n}(o,r,s,a),"left"===a?(r.top+=i[0],r.left-=i[1]):"right"===a?(r.top+=i[0],r.left+=i[1]):"top"===a?(r.left+=i[0],r.top-=i[1]):"bottom"===a&&(r.left+=i[0],r.top+=i[1]),t.popper=r,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var i=e.boundariesElement||u(t.instance.popper);t.instance.reference===i&&(i=u(i));var o=z("transform"),n=t.instance.popper.style,r=n.top,s=n.left,a=n[o];n.top="",n.left="",n[o]="";var l=M(t.instance.popper,t.instance.reference,e.padding,i,t.positionFixed);n.top=r,n.left=s,n[o]=a,e.boundaries=l;var c=t.offsets.popper,h={primary:function(t){var i=c[t];return c[t]<l[t]&&!e.escapeWithReference&&(i=Math.max(c[t],l[t])),w({},t,i)},secondary:function(t){var i="right"===t?"left":"top",o=c[i];return c[t]>l[t]&&!e.escapeWithReference&&(o=Math.min(c[i],l[t]-("right"===t?c.width:c.height))),w({},i,o)}};return e.priority.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";c=_({},c,h[e](t))}),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,i=e.popper,o=e.reference,n=t.placement.split("-")[0],r=Math.floor,s=-1!==["top","bottom"].indexOf(n),a=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return i[a]<r(o[l])&&(t.offsets.popper[l]=r(o[l])-i[c]),i[l]>r(o[a])&&(t.offsets.popper[l]=r(o[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var i;if(!$(t.instance.modifiers,"arrow","keepTogether"))return t;var o=e.element;if("string"==typeof o){if(!(o=t.instance.popper.querySelector(o)))return t}else if(!t.instance.popper.contains(o))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],s=t.offsets,a=s.popper,l=s.reference,c=-1!==["left","right"].indexOf(r),h=c?"height":"width",u=c?"Top":"Left",d=u.toLowerCase(),p=c?"left":"top",g=c?"bottom":"right",f=D(o)[h];l[g]-f<a[d]&&(t.offsets.popper[d]-=a[d]-(l[g]-f)),l[d]+f>a[g]&&(t.offsets.popper[d]+=l[d]+f-a[g]),t.offsets.popper=S(t.offsets.popper);var m=l[d]+l[h]/2-f/2,y=n(t.instance.popper),v=parseFloat(y["margin"+u]),x=parseFloat(y["border"+u+"Width"]),b=m-t.offsets.popper[d]-v-x;return b=Math.max(Math.min(a[h]-f,b),0),t.arrowElement=o,t.offsets.arrow=(w(i={},d,Math.round(b)),w(i,p,""),i),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(B(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var i=M(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),o=t.placement.split("-")[0],n=N(o),r=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case"flip":s=[o,n];break;case"clockwise":s=J(o);break;case"counterclockwise":s=J(o,!0);break;default:s=e.behavior}return s.forEach(function(a,l){if(o!==a||s.length===l+1)return t;o=t.placement.split("-")[0],n=N(o);var c=t.offsets.popper,h=t.offsets.reference,u=Math.floor,d="left"===o&&u(c.right)>u(h.left)||"right"===o&&u(c.left)<u(h.right)||"top"===o&&u(c.bottom)>u(h.top)||"bottom"===o&&u(c.top)<u(h.bottom),p=u(c.left)<u(i.left),g=u(c.right)>u(i.right),f=u(c.top)<u(i.top),m=u(c.bottom)>u(i.bottom),y="left"===o&&p||"right"===o&&g||"top"===o&&f||"bottom"===o&&m,v=-1!==["top","bottom"].indexOf(o),x=!!e.flipVariations&&(v&&"start"===r&&p||v&&"end"===r&&g||!v&&"start"===r&&f||!v&&"end"===r&&m)||!!e.flipVariationsByContent&&(v&&"start"===r&&g||v&&"end"===r&&p||!v&&"start"===r&&m||!v&&"end"===r&&f);(d||y||x)&&(t.flipped=!0,(d||y)&&(o=s[l+1]),x&&(r=function(t){return"end"===t?"start":"start"===t?"end":t}(r)),t.placement=o+(r?"-"+r:""),t.offsets.popper=_({},t.offsets.popper,F(t.instance.popper,t.offsets.reference,t.placement)),t=R(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,i=e.split("-")[0],o=t.offsets,n=o.popper,r=o.reference,s=-1!==["left","right"].indexOf(i),a=-1===["top","left"].indexOf(i);return n[s?"left":"top"]=r[i]-(a?n[s?"width":"height"]:0),t.placement=N(e),t.offsets.popper=S(n),t}},hide:{order:800,enabled:!0,fn:function(t){if(!$(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,i=O(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<i.top||e.left>i.right||e.top>i.bottom||e.right<i.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var i=e.x,o=e.y,n=t.offsets.popper,r=O(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,a,l=void 0!==r?r:e.gpuAcceleration,c=u(t.instance.popper),h=C(c),d={position:n.position},p=function(t,e){var i=t.offsets,o=i.popper,n=Math.round,r=Math.floor,s=function(t){return t},a=n(i.reference.width),l=n(o.width),c=-1!==["left","right"].indexOf(t.placement),h=-1!==t.placement.indexOf("-"),u=e?c||h||a%2==l%2?n:r:s,d=e?n:s;return{left:u(a%2==1&&l%2==1&&!h&&e?o.left-1:o.left),top:d(o.top),bottom:d(o.bottom),right:u(o.right)}}(t,window.devicePixelRatio<2||!Z),g="bottom"===i?"top":"bottom",f="right"===o?"left":"right",m=z("transform");if(a="bottom"===g?"HTML"===c.nodeName?-c.clientHeight+p.bottom:-h.height+p.bottom:p.top,s="right"===f?"HTML"===c.nodeName?-c.clientWidth+p.right:-h.width+p.right:p.left,l&&m)d[m]="translate3d("+s+"px, "+a+"px, 0)",d[g]=0,d[f]=0,d.willChange="transform";else{var y="right"===f?-1:1;d[g]=a*("bottom"===g?-1:1),d[f]=s*y,d.willChange=g+", "+f}return t.attributes=_({},{"x-placement":t.placement},t.attributes),t.styles=_({},d,t.styles),t.arrowStyles=_({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,i;return q(t.instance.popper,t.styles),e=t.instance.popper,i=t.attributes,Object.keys(i).forEach(function(t){!1!==i[t]?e.setAttribute(t,i[t]):e.removeAttribute(t)}),t.arrowElement&&Object.keys(t.arrowStyles).length&&q(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,i,o,n){var r=I(n,e,t,i.positionFixed),s=P(i.placement,r,e,t,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return e.setAttribute("x-placement",s),q(e,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}}},et=function(){function t(e,n){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};x(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=i(this.update.bind(this)),this.options=_({},t.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(_({},t.Defaults.modifiers,s.modifiers)).forEach(function(e){r.options.modifiers[e]=_({},t.Defaults.modifiers[e]||{},s.modifiers?s.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return _({name:t},r.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&o(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return b(t,[{key:"update",value:function(){return G.call(this)}},{key:"destroy",value:function(){return H.call(this)}},{key:"enableEventListeners",value:function(){return X.call(this)}},{key:"disableEventListeners",value:function(){return W.call(this)}}]),t}();return et.Utils=("undefined"!=typeof window?window:global).PopperUtils,et.placements=Q,et.Defaults=tt,et}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["jquery","popper.js"],e):e((t=t||self).jQuery,t.Popper)}(this,function(t,e){"use strict";var i=Math.max;function o(t){return{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()}function n(t,e){const i=t.nodeName.toLowerCase();if(-1!==e.indexOf(i))return-1===ht.indexOf(i)||!(!t.nodeValue.match(ut)&&!t.nodeValue.match(dt));const o=e.filter(t=>t instanceof RegExp);for(let n=0,r=o.length;n<r;n++)if(i.match(o[n]))return!0;return!1}function r(t,e,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);const o=(new window.DOMParser).parseFromString(t,"text/html"),r=Object.keys(e),s=[].slice.call(o.body.querySelectorAll("*"));for(let a=0,l=s.length;a<l;a++){const t=s[a],i=t.nodeName.toLowerCase();if(-1===r.indexOf(t.nodeName.toLowerCase())){t.parentNode.removeChild(t);continue}const o=[].slice.call(t.attributes),l=[].concat(e["*"]||[],e[i]||[]);o.forEach(e=>{n(e,l)||t.removeAttribute(e.nodeName)})}return o.body.innerHTML}function s(t,e){for(var i,o=0;o<e.length;o++)(i=e[o]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;const l="transitionend",c={TRANSITION_END:"bsTransitionEnd",getUID(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement(t){let e=t.getAttribute("data-target");if(!e||"#"===e){const i=t.getAttribute("href");e=i&&"#"!==i?i.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement(e){if(!e)return 0;let i=t(e).css("transition-duration"),o=t(e).css("transition-delay");const n=parseFloat(i),r=parseFloat(o);return n||r?(i=i.split(",")[0],o=o.split(",")[0],1e3*(parseFloat(i)+parseFloat(o))):0},reflow:t=>t.offsetHeight,triggerTransitionEnd(e){t(e).trigger(l)},supportsTransitionEnd:()=>!0,isElement:t=>(t[0]||t).nodeType,typeCheckConfig(t,e,i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){const r=i[n],s=e[n],a=s&&c.isElement(s)?"element":o(s);if(!new RegExp(r).test(a))throw new Error(`${t.toUpperCase()}: Option "${n}" provided type "${a}" but expected type "${r}".`)}},findShadowRoot(t){if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?c.findShadowRoot(t.parentNode):null}};t.fn.emulateTransitionEnd=function(e){let i=!1;return t(this).one(c.TRANSITION_END,()=>{i=!0}),setTimeout(()=>{i||c.triggerTransitionEnd(this)},e),this},t.event.special[c.TRANSITION_END]={bindType:l,delegateType:l,handle(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}};const h="bs.alert",u=`.${h}`,d=t.fn.alert,p={CLOSE:`close${u}`,CLOSED:`closed${u}`,CLICK_DATA_API:`click${u}.data-api`};class g{constructor(t){this._element=t}static get VERSION(){return"4.3.1"}close(t){let e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)}dispose(){t.removeData(this._element,h),this._element=null}_getRootElement(e){const i=c.getSelectorFromElement(e);let o=!1;return i&&(o=document.querySelector(i)),o||(o=t(e).closest(".alert")[0]),o}_triggerCloseEvent(e){const i=t.Event(p.CLOSE);return t(e).trigger(i),i}_removeElement(e){if(t(e).removeClass("show"),!t(e).hasClass("fade"))return void this._destroyElement(e);const i=c.getTransitionDurationFromElement(e);t(e).one(c.TRANSITION_END,t=>this._destroyElement(e,t)).emulateTransitionEnd(i)}_destroyElement(e){t(e).detach().trigger(p.CLOSED).remove()}static _jQueryInterface(e){return this.each(function(){const i=t(this);let o=i.data(h);o||(o=new g(this),i.data(h,o)),"close"===e&&o[e](this)})}static _handleDismiss(t){return function(e){e&&e.preventDefault(),t.close(this)}}}t(document).on(p.CLICK_DATA_API,'[data-dismiss="alert"]',g._handleDismiss(new g)),t.fn.alert=g._jQueryInterface,t.fn.alert.Constructor=g,t.fn.alert.noConflict=()=>(t.fn.alert=d,g._jQueryInterface);const f="bs.button",m=`.${f}`,y=".data-api",v=t.fn.button,x="active",b='[data-toggle^="button"]',w=".btn",_={CLICK_DATA_API:`click${m}${y}`,FOCUS_BLUR_DATA_API:`focus${m}${y} blur${m}${y}`};class S{constructor(t){this._element=t}static get VERSION(){return"4.3.1"}toggle(){let e=!0,i=!0;const o=t(this._element).closest('[data-toggle="buttons"]')[0];if(o){const n=this._element.querySelector('input:not([type="hidden"])');if(n){if("radio"===n.type)if(n.checked&&this._element.classList.contains(x))e=!1;else{const e=o.querySelector(".active");e&&t(e).removeClass(x)}if(e){if(n.hasAttribute("disabled")||o.hasAttribute("disabled")||n.classList.contains("disabled")||o.classList.contains("disabled"))return;n.checked=!this._element.classList.contains(x),t(n).trigger("change")}n.focus(),i=!1}}i&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(x)),e&&t(this._element).toggleClass(x)}dispose(){t.removeData(this._element,f),this._element=null}static _jQueryInterface(e){return this.each(function(){let i=t(this).data(f);i||(i=new S(this),t(this).data(f,i)),"toggle"===e&&i[e]()})}}t(document).on(_.CLICK_DATA_API,b,e=>{e.preventDefault();let i=e.target;t(i).hasClass("btn")||(i=t(i).closest(w)),S._jQueryInterface.call(t(i),"toggle")}).on(_.FOCUS_BLUR_DATA_API,b,e=>{const i=t(e.target).closest(w)[0];t(i).toggleClass("focus",/^focus(in)?$/.test(e.type))}),t.fn.button=S._jQueryInterface,t.fn.button.Constructor=S,t.fn.button.noConflict=()=>(t.fn.button=v,S._jQueryInterface);const C="carousel",k="bs.carousel",A=`.${k}`,E=".data-api",T=t.fn.carousel,M={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},L={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},P="next",I="prev",D={SLIDE:`slide${A}`,SLID:`slid${A}`,KEYDOWN:`keydown${A}`,MOUSEENTER:`mouseenter${A}`,MOUSELEAVE:`mouseleave${A}`,TOUCHSTART:`touchstart${A}`,TOUCHMOVE:`touchmove${A}`,TOUCHEND:`touchend${A}`,POINTERDOWN:`pointerdown${A}`,POINTERUP:`pointerup${A}`,DRAG_START:`dragstart${A}`,LOAD_DATA_API:`load${A}${E}`,CLICK_DATA_API:`click${A}${E}`},N="active",F=".active.carousel-item",O={TOUCH:"touch",PEN:"pen"};class R{constructor(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=!(!window.PointerEvent&&!window.MSPointerEvent),this._addEventListeners()}static get VERSION(){return"4.3.1"}static get Default(){return M}next(){this._isSliding||this._slide(P)}nextWhenVisible(){!document.hidden&&t(this._element).is(":visible")&&"hidden"!==t(this._element).css("visibility")&&this.next()}prev(){this._isSliding||this._slide(I)}pause(t){t||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(c.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(e){this._activeElement=this._element.querySelector(F);const i=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||0>e)){if(this._isSliding)return void t(this._element).one(D.SLID,()=>this.to(e));if(i===e)return this.pause(),void this.cycle();this._slide(e>i?P:I,this._items[e])}}dispose(){t(this._element).off(A),t.removeData(this._element,k),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null}_getConfig(t){return t={...M,...t},c.typeCheckConfig(C,t,L),t}_handleSwipe(){const t=Math.abs(this.touchDeltaX);if(!(t<=40)){const e=t/this.touchDeltaX;0<e&&this.prev(),0>e&&this.next()}}_addEventListeners(){this._config.keyboard&&t(this._element).on(D.KEYDOWN,t=>this._keydown(t)),"hover"===this._config.pause&&t(this._element).on(D.MOUSEENTER,t=>this.pause(t)).on(D.MOUSELEAVE,t=>this.cycle(t)),this._config.touch&&this._addTouchEventListeners()}_addTouchEventListeners(){if(!this._touchSupported)return;const e=t=>{this._pointerEvent&&O[t.originalEvent.pointerType.toUpperCase()]?this.touchStartX=t.originalEvent.clientX:!this._pointerEvent&&(this.touchStartX=t.originalEvent.touches[0].clientX)},i=t=>{this.touchDeltaX=t.originalEvent.touches&&1<t.originalEvent.touches.length?0:t.originalEvent.touches[0].clientX-this.touchStartX},o=t=>{this._pointerEvent&&O[t.originalEvent.pointerType.toUpperCase()]&&(this.touchDeltaX=t.originalEvent.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(t=>this.cycle(t),500+this._config.interval))};t(this._element.querySelectorAll(".carousel-item img")).on(D.DRAG_START,t=>t.preventDefault()),this._pointerEvent?(t(this._element).on(D.POINTERDOWN,t=>e(t)),t(this._element).on(D.POINTERUP,t=>o(t)),this._element.classList.add("pointer-event")):(t(this._element).on(D.TOUCHSTART,t=>e(t)),t(this._element).on(D.TOUCHMOVE,t=>i(t)),t(this._element).on(D.TOUCHEND,t=>o(t)))}_keydown(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}}_getItemIndex(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(t)}_getItemByDirection(t,e){const i=t===P,o=t===I,n=this._getItemIndex(e);if((o&&0===n||i&&n===this._items.length-1)&&!this._config.wrap)return e;const r=(n+(t===I?-1:1))%this._items.length;return-1===r?this._items[this._items.length-1]:this._items[r]}_triggerSlideEvent(e,i){const o=this._getItemIndex(e),n=this._getItemIndex(this._element.querySelector(F)),r=t.Event(D.SLIDE,{relatedTarget:e,direction:i,from:n,to:o});return t(this._element).trigger(r),r}_setActiveIndicatorElement(e){if(this._indicatorsElement){const i=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));t(i).removeClass(N);const o=this._indicatorsElement.children[this._getItemIndex(e)];o&&t(o).addClass(N)}}_slide(e,i){const o=this._element.querySelector(F),n=this._getItemIndex(o),r=i||o&&this._getItemByDirection(e,o),s=this._getItemIndex(r),a=!!this._interval;let l,h,u;if(e===P?(l="carousel-item-left",h="carousel-item-next",u="left"):(l="carousel-item-right",h="carousel-item-prev",u="right"),r&&t(r).hasClass(N))return void(this._isSliding=!1);if(this._triggerSlideEvent(r,u).isDefaultPrevented())return;if(!o||!r)return;this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(r);const d=t.Event(D.SLID,{relatedTarget:r,direction:u,from:n,to:s});if(t(this._element).hasClass("slide")){t(r).addClass(h),c.reflow(r),t(o).addClass(l),t(r).addClass(l);const e=parseInt(r.getAttribute("data-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval;const i=c.getTransitionDurationFromElement(o);t(o).one(c.TRANSITION_END,()=>{t(r).removeClass(`${l} ${h}`).addClass(N),t(o).removeClass(`active ${h} ${l}`),this._isSliding=!1,setTimeout(()=>t(this._element).trigger(d),0)}).emulateTransitionEnd(i)}else t(o).removeClass(N),t(r).addClass(N),this._isSliding=!1,t(this._element).trigger(d);a&&this.cycle()}static _jQueryInterface(e){return this.each(function(){let i=t(this).data(k),o={...M,...t(this).data()};"object"==typeof e&&(o={...o,...e});const n="string"==typeof e?e:o.slide;if(i||(i=new R(this,o),t(this).data(k,i)),"number"==typeof e)i.to(e);else if("string"==typeof n){if(void 0===i[n])throw new TypeError(`No method named "${n}"`);i[n]()}else o.interval&&o.ride&&(i.pause(),i.cycle())})}static _dataApiClickHandler(e){const i=c.getSelectorFromElement(this);if(!i)return;const o=t(i)[0];if(!o||!t(o).hasClass("carousel"))return;const n={...t(o).data(),...t(this).data()},r=this.getAttribute("data-slide-to");r&&(n.interval=!1),R._jQueryInterface.call(t(o),n),r&&t(o).data(k).to(r),e.preventDefault()}}t(document).on(D.CLICK_DATA_API,"[data-slide], [data-slide-to]",R._dataApiClickHandler),t(window).on(D.LOAD_DATA_API,()=>{const e=[].slice.call(document.querySelectorAll('[data-ride="carousel"]'));for(let i=0,o=e.length;i<o;i++){const o=t(e[i]);R._jQueryInterface.call(o,o.data())}}),t.fn.carousel=R._jQueryInterface,t.fn.carousel.Constructor=R,t.fn.carousel.noConflict=()=>(t.fn[C]=T,R._jQueryInterface);const G="collapse",B="bs.collapse",z=`.${B}`,H=t.fn.collapse,V={toggle:!0,parent:""},Y={toggle:"boolean",parent:"(string|element)"},j={SHOW:`show${z}`,SHOWN:`shown${z}`,HIDE:`hide${z}`,HIDDEN:`hidden${z}`,CLICK_DATA_API:`click${z}.data-api`},X="show",W="collapse",U="collapsing",q="collapsed",Z="width",$='[data-toggle="collapse"]';class Q{constructor(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll(`[data-toggle="collapse"][href="#${t.id}"],[data-toggle="collapse"][data-target="#${t.id}"]`));const i=[].slice.call(document.querySelectorAll($));for(let o=0,n=i.length;o<n;o++){const e=i[o],n=c.getSelectorFromElement(e),r=[].slice.call(document.querySelectorAll(n)).filter(e=>e===t);null!==n&&0<r.length&&(this._selector=n,this._triggerArray.push(e))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get VERSION(){return"4.3.1"}static get Default(){return V}toggle(){t(this._element).hasClass(X)?this.hide():this.show()}show(){if(this._isTransitioning||t(this._element).hasClass(X))return;let e,i;if(this._parent&&(e=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(t=>"string"==typeof this._config.parent?t.getAttribute("data-parent")===this._config.parent:t.classList.contains(W)),0===e.length&&(e=null)),e&&(i=t(e).not(this._selector).data(B),i&&i._isTransitioning))return;const o=t.Event(j.SHOW);if(t(this._element).trigger(o),o.isDefaultPrevented())return;e&&(Q._jQueryInterface.call(t(e).not(this._selector),"hide"),!i&&t(e).data(B,null));const n=this._getDimension();t(this._element).removeClass(W).addClass(U),this._element.style[n]=0,this._triggerArray.length&&t(this._triggerArray).removeClass(q).attr("aria-expanded",!0),this.setTransitioning(!0);const r=n[0].toUpperCase()+n.slice(1),s=c.getTransitionDurationFromElement(this._element);t(this._element).one(c.TRANSITION_END,()=>{t(this._element).removeClass(U).addClass(W).addClass(X),this._element.style[n]="",this.setTransitioning(!1),t(this._element).trigger(j.SHOWN)}).emulateTransitionEnd(s),this._element.style[n]=`${this._element[`scroll${r}`]}px`}hide(){if(!this._isTransitioning&&t(this._element).hasClass(X)){const e=t.Event(j.HIDE);if(t(this._element).trigger(e),!e.isDefaultPrevented()){const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,c.reflow(this._element),t(this._element).addClass(U).removeClass(W).removeClass(X);const i=this._triggerArray.length;if(0<i)for(let r=0;r<i;r++){const e=this._triggerArray[r],i=c.getSelectorFromElement(e);null!==i&&(t([].slice.call(document.querySelectorAll(i))).hasClass(X)||t(e).addClass(q).attr("aria-expanded",!1))}this.setTransitioning(!0);const o=()=>{this.setTransitioning(!1),t(this._element).removeClass(U).addClass(W).trigger(j.HIDDEN)};this._element.style[e]="";const n=c.getTransitionDurationFromElement(this._element);t(this._element).one(c.TRANSITION_END,o).emulateTransitionEnd(n)}}}setTransitioning(t){this._isTransitioning=t}dispose(){t.removeData(this._element,B),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null}_getConfig(t){return(t={...V,...t}).toggle=!!t.toggle,c.typeCheckConfig(G,t,Y),t}_getDimension(){return t(this._element).hasClass(Z)?Z:"height"}_getParent(){let e;c.isElement(this._config.parent)?(e=this._config.parent,void 0!==this._config.parent.jquery&&(e=this._config.parent[0])):e=document.querySelector(this._config.parent);const i=[].slice.call(e.querySelectorAll(`[data-toggle="collapse"][data-parent="${this._config.parent}"]`));return t(i).each((t,e)=>{this._addAriaAndCollapsedClass(Q._getTargetFromElement(e),[e])}),e}_addAriaAndCollapsedClass(e,i){const o=t(e).hasClass(X);i.length&&t(i).toggleClass(q,!o).attr("aria-expanded",o)}static _getTargetFromElement(t){const e=c.getSelectorFromElement(t);return e?document.querySelector(e):null}static _jQueryInterface(e){return this.each(function(){const i=t(this);let o=i.data(B);const n={...V,...i.data(),..."object"==typeof e&&e?e:{}};if(!o&&n.toggle&&/show|hide/.test(e)&&(n.toggle=!1),o||(o=new Q(this,n),i.data(B,o)),"string"==typeof e){if(void 0===o[e])throw new TypeError(`No method named "${e}"`);o[e]()}})}}t(document).on(j.CLICK_DATA_API,$,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();const i=t(this),o=c.getSelectorFromElement(this),n=[].slice.call(document.querySelectorAll(o));t(n).each(function(){const e=t(this),o=e.data(B)?"toggle":i.data();Q._jQueryInterface.call(e,o)})}),t.fn.collapse=Q._jQueryInterface,t.fn.collapse.Constructor=Q,t.fn.collapse.noConflict=()=>(t.fn[G]=H,Q._jQueryInterface);const K="modal",J="bs.modal",tt=`.${J}`,et=t.fn.modal,it={backdrop:!0,keyboard:!0,focus:!0,show:!0},ot={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},nt={HIDE:`hide${tt}`,HIDDEN:`hidden${tt}`,SHOW:`show${tt}`,SHOWN:`shown${tt}`,FOCUSIN:`focusin${tt}`,RESIZE:`resize${tt}`,CLICK_DISMISS:`click.dismiss${tt}`,KEYDOWN_DISMISS:`keydown.dismiss${tt}`,MOUSEUP_DISMISS:`mouseup.dismiss${tt}`,MOUSEDOWN_DISMISS:`mousedown.dismiss${tt}`,CLICK_DATA_API:`click${tt}.data-api`},rt="modal-open",st="fade",at="show",lt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top";class ct{constructor(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}static get VERSION(){return"4.3.1"}static get Default(){return it}toggle(t){return this._isShown?this.hide():this.show(t)}show(e){if(!this._isShown&&!this._isTransitioning){t(this._element).hasClass(st)&&(this._isTransitioning=!0);const i=t.Event(nt.SHOW,{relatedTarget:e});t(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(nt.CLICK_DISMISS,'[data-dismiss="modal"]',t=>this.hide(t)),t(this._dialog).on(nt.MOUSEDOWN_DISMISS,()=>{t(this._element).one(nt.MOUSEUP_DISMISS,e=>{t(e.target).is(this._element)&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(e)))}}hide(e){if(e&&e.preventDefault(),this._isShown&&!this._isTransitioning){const e=t.Event(nt.HIDE);if(t(this._element).trigger(e),this._isShown&&!e.isDefaultPrevented()){this._isShown=!1;const e=t(this._element).hasClass(st);if(e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),t(document).off(nt.FOCUSIN),t(this._element).removeClass(at),t(this._element).off(nt.CLICK_DISMISS),t(this._dialog).off(nt.MOUSEDOWN_DISMISS),e){const e=c.getTransitionDurationFromElement(this._element);t(this._element).one(c.TRANSITION_END,t=>this._hideModal(t)).emulateTransitionEnd(e)}else this._hideModal()}}}dispose(){[window,this._element,this._dialog].forEach(e=>t(e).off(tt)),t(document).off(nt.FOCUSIN),t.removeData(this._element,J),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null}handleUpdate(){this._adjustDialog()}_getConfig(t){return t={...it,...t},c.typeCheckConfig(K,t,ot),t}_showElement(e){const i=t(this._element).hasClass(st);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),t(this._dialog).hasClass("modal-dialog-scrollable")?this._dialog.querySelector(".modal-body").scrollTop=0:this._element.scrollTop=0,i&&c.reflow(this._element),t(this._element).addClass(at),this._config.focus&&this._enforceFocus();const o=t.Event(nt.SHOWN,{relatedTarget:e}),n=()=>{this._config.focus&&this._element.focus(),this._isTransitioning=!1,t(this._element).trigger(o)};if(i){const e=c.getTransitionDurationFromElement(this._dialog);t(this._dialog).one(c.TRANSITION_END,n).emulateTransitionEnd(e)}else n()}_enforceFocus(){t(document).off(nt.FOCUSIN).on(nt.FOCUSIN,e=>{document!==e.target&&this._element!==e.target&&0===t(this._element).has(e.target).length&&this._element.focus()})}_setEscapeEvent(){this._isShown&&this._config.keyboard?t(this._element).on(nt.KEYDOWN_DISMISS,t=>{27===t.which&&(t.preventDefault(),this.hide())}):!this._isShown&&t(this._element).off(nt.KEYDOWN_DISMISS)}_setResizeEvent(){this._isShown?t(window).on(nt.RESIZE,t=>this.handleUpdate(t)):t(window).off(nt.RESIZE)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(()=>{t(document.body).removeClass(rt),this._resetAdjustments(),this._resetScrollbar(),t(this._element).trigger(nt.HIDDEN)})}_removeBackdrop(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)}_showBackdrop(e){const i=t(this._element).hasClass(st)?st:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",i&&this._backdrop.classList.add(i),t(this._backdrop).appendTo(document.body),t(this._element).on(nt.CLICK_DISMISS,t=>this._ignoreBackdropClick?void(this._ignoreBackdropClick=!1):void(t.target!==t.currentTarget||("static"===this._config.backdrop?this._element.focus():this.hide()))),i&&c.reflow(this._backdrop),t(this._backdrop).addClass(at),!e)return;if(!i)return void e();const o=c.getTransitionDurationFromElement(this._backdrop);t(this._backdrop).one(c.TRANSITION_END,e).emulateTransitionEnd(o)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(at);const i=()=>{this._removeBackdrop(),e&&e()};if(t(this._element).hasClass(st)){const e=c.getTransitionDurationFromElement(this._backdrop);t(this._backdrop).one(c.TRANSITION_END,i).emulateTransitionEnd(e)}else i()}else e&&e()}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=`${this._scrollbarWidth}px`),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=`${this._scrollbarWidth}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}_checkScrollbar(){const t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}_setScrollbar(){if(this._isBodyOverflowing){const e=[].slice.call(document.querySelectorAll(lt)),i=[].slice.call(document.querySelectorAll(".sticky-top"));t(e).each((e,i)=>{const o=i.style.paddingRight,n=t(i).css("padding-right");t(i).data("padding-right",o).css("padding-right",`${parseFloat(n)+this._scrollbarWidth}px`)}),t(i).each((e,i)=>{const o=i.style.marginRight,n=t(i).css("margin-right");t(i).data("margin-right",o).css("margin-right",parseFloat(n)-this._scrollbarWidth+"px")});const o=document.body.style.paddingRight,n=t(document.body).css("padding-right");t(document.body).data("padding-right",o).css("padding-right",`${parseFloat(n)+this._scrollbarWidth}px`)}t(document.body).addClass(rt)}_resetScrollbar(){const e=[].slice.call(document.querySelectorAll(lt));t(e).each((e,i)=>{const o=t(i).data("padding-right");t(i).removeData("padding-right"),i.style.paddingRight=o||""});const i=[].slice.call(document.querySelectorAll(".sticky-top"));t(i).each((e,i)=>{const o=t(i).data("margin-right");void 0!==o&&t(i).css("margin-right",o).removeData("margin-right")});const o=t(document.body).data("padding-right");t(document.body).removeData("padding-right"),document.body.style.paddingRight=o||""}_getScrollbarWidth(){const t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e}static _jQueryInterface(e,i){return this.each(function(){let o=t(this).data(J);const n={...it,...t(this).data(),..."object"==typeof e&&e?e:{}};if(o||(o=new ct(this,n),t(this).data(J,o)),"string"==typeof e){if(void 0===o[e])throw new TypeError(`No method named "${e}"`);o[e](i)}else n.show&&o.show(i)})}}t(document).on(nt.CLICK_DATA_API,'[data-toggle="modal"]',function(e){let i;const o=c.getSelectorFromElement(this);o&&(i=document.querySelector(o));const n=t(i).data(J)?"toggle":{...t(i).data(),...t(this).data()};("A"===this.tagName||"AREA"===this.tagName)&&e.preventDefault();const r=t(i).one(nt.SHOW,e=>{e.isDefaultPrevented()||r.one(nt.HIDDEN,()=>{t(this).is(":visible")&&this.focus()})});ct._jQueryInterface.call(t(i),n,this)}),t.fn.modal=ct._jQueryInterface,t.fn.modal.Constructor=ct,t.fn.modal.noConflict=()=>(t.fn[K]=et,ct._jQueryInterface);const ht=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],ut=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,dt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,pt="tooltip",gt="bs.tooltip",ft=`.${gt}`,mt=t.fn[pt],yt="bs-tooltip",vt=new RegExp(`(^|\\s)${yt}\\S+`,"g"),xt=["sanitize","whiteList","sanitizeFn"],bt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},wt={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},_t={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},St="show",Ct="out",kt={HIDE:`hide${ft}`,HIDDEN:`hidden${ft}`,SHOW:`show${ft}`,SHOWN:`shown${ft}`,INSERTED:`inserted${ft}`,CLICK:`click${ft}`,FOCUSIN:`focusin${ft}`,FOCUSOUT:`focusout${ft}`,MOUSEENTER:`mouseenter${ft}`,MOUSELEAVE:`mouseleave${ft}`},At="fade",Et="show",Tt="hover",Mt="focus";class Lt{constructor(t,i){if(void 0===e)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(i),this.tip=null,this._setListeners()}static get VERSION(){return"4.3.1"}static get Default(){return _t}static get NAME(){return pt}static get DATA_KEY(){return gt}static get Event(){return kt}static get EVENT_KEY(){return ft}static get DefaultType(){return bt}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(this._isEnabled)if(e){const i=this.constructor.DATA_KEY;let o=t(e.currentTarget).data(i);o||(o=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,o)),o._activeTrigger.click=!o._activeTrigger.click,o._isWithActiveTrigger()?o._enter(null,o):o._leave(null,o)}else{if(t(this.getTipElement()).hasClass(Et))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null}show(){if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");const i=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){t(this.element).trigger(i);const o=c.findShadowRoot(this.element),n=t.contains(null===o?this.element.ownerDocument.documentElement:o,this.element);if(i.isDefaultPrevented()||!n)return;const r=this.getTipElement(),s=c.getUID(this.constructor.NAME);r.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&t(r).addClass(At);const a="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,l=this._getAttachment(a);this.addAttachmentClass(l);const h=this._getContainer();t(r).data(this.constructor.DATA_KEY,this),t.contains(this.element.ownerDocument.documentElement,this.tip)||t(r).appendTo(h),t(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new e(this.element,r,{placement:l,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:t=>{t.originalPlacement!==t.placement&&this._handlePopperPlacementChange(t)},onUpdate:t=>this._handlePopperPlacementChange(t)}),t(r).addClass(Et),"ontouchstart"in document.documentElement&&t(document.body).children().on("mouseover",null,t.noop);const u=()=>{this.config.animation&&this._fixTransition();const e=this._hoverState;this._hoverState=null,t(this.element).trigger(this.constructor.Event.SHOWN),e===Ct&&this._leave(null,this)};if(t(this.tip).hasClass(At)){const e=c.getTransitionDurationFromElement(this.tip);t(this.tip).one(c.TRANSITION_END,u).emulateTransitionEnd(e)}else u()}}hide(e){const i=this.getTipElement(),o=t.Event(this.constructor.Event.HIDE),n=()=>{this._hoverState!==St&&i.parentNode&&i.parentNode.removeChild(i),this._cleanTipClass(),this.element.removeAttribute("aria-describedby"),t(this.element).trigger(this.constructor.Event.HIDDEN),null!==this._popper&&this._popper.destroy(),e&&e()};if(t(this.element).trigger(o),!o.isDefaultPrevented()){if(t(i).removeClass(Et),"ontouchstart"in document.documentElement&&t(document.body).children().off("mouseover",null,t.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,t(this.tip).hasClass(At)){const e=c.getTransitionDurationFromElement(i);t(i).one(c.TRANSITION_END,n).emulateTransitionEnd(e)}else n();this._hoverState=""}}update(){null!==this._popper&&this._popper.scheduleUpdate()}isWithContent(){return!!this.getTitle()}addAttachmentClass(e){t(this.getTipElement()).addClass(`${yt}-${e}`)}getTipElement(){return this.tip=this.tip||t(this.config.template)[0],this.tip}setContent(){const e=this.getTipElement();this.setElementContent(t(e.querySelectorAll(".tooltip-inner")),this.getTitle()),t(e).removeClass("fade show")}setElementContent(e,i){return"object"==typeof i&&(i.nodeType||i.jquery)?void(this.config.html?!t(i).parent().is(e)&&e.empty().append(i):e.text(t(i).text())):void(this.config.html?(this.config.sanitize&&(i=r(i,this.config.whiteList,this.config.sanitizeFn)),e.html(i)):e.text(i))}getTitle(){let t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t}_getOffset(){const t={};return"function"==typeof this.config.offset?t.fn=t=>(t.offsets={...t.offsets,...this.config.offset(t.offsets,this.element)||{}},t):t.offset=this.config.offset,t}_getContainer(){return!1===this.config.container?document.body:c.isElement(this.config.container)?t(this.config.container):t(document).find(this.config.container)}_getAttachment(t){return wt[t.toUpperCase()]}_setListeners(){this.config.trigger.split(" ").forEach(e=>{if("click"===e)t(this.element).on(this.constructor.Event.CLICK,this.config.selector,t=>this.toggle(t));else if("manual"!==e){const i=e===Tt?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,o=e===Tt?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;t(this.element).on(i,this.config.selector,t=>this._enter(t)).on(o,this.config.selector,t=>this._leave(t))}}),t(this.element).closest(".modal").on("hide.bs.modal",()=>{this.element&&this.hide()}),this.config.selector?this.config={...this.config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}_enter(e,i){const o=this.constructor.DATA_KEY;return(i=i||t(e.currentTarget).data(o))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(o,i)),e&&(i._activeTrigger["focusin"===e.type?Mt:Tt]=!0),t(i.getTipElement()).hasClass(Et)||i._hoverState===St?void(i._hoverState=St):(clearTimeout(i._timeout),i._hoverState=St,i.config.delay&&i.config.delay.show?void(i._timeout=setTimeout(()=>{i._hoverState===St&&i.show()},i.config.delay.show)):void i.show())}_leave(e,i){const o=this.constructor.DATA_KEY;if((i=i||t(e.currentTarget).data(o))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(o,i)),e&&(i._activeTrigger["focusout"===e.type?Mt:Tt]=!1),!i._isWithActiveTrigger())return clearTimeout(i._timeout),i._hoverState=Ct,i.config.delay&&i.config.delay.hide?void(i._timeout=setTimeout(()=>{i._hoverState===Ct&&i.hide()},i.config.delay.hide)):void i.hide()}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(e){const i=t(this.element).data();return Object.keys(i).forEach(t=>{-1!==xt.indexOf(t)&&delete i[t]}),"number"==typeof(e={...this.constructor.Default,...i,..."object"==typeof e&&e?e:{}}).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),c.typeCheckConfig(pt,e,this.constructor.DefaultType),e.sanitize&&(e.template=r(e.template,e.whiteList,e.sanitizeFn)),e}_getDelegateConfig(){const t={};if(this.config)for(const e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t}_cleanTipClass(){const e=t(this.getTipElement()),i=e.attr("class").match(vt);null!==i&&i.length&&e.removeClass(i.join(""))}_handlePopperPlacementChange(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))}_fixTransition(){const e=this.getTipElement(),i=this.config.animation;null!==e.getAttribute("x-placement")||(t(e).removeClass(At),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)}static _jQueryInterface(e){return this.each(function(){let i=t(this).data(gt);if((i||!/dispose|hide/.test(e))&&(i||(i=new Lt(this,"object"==typeof e&&e),t(this).data(gt,i)),"string"==typeof e)){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}})}}t.fn[pt]=Lt._jQueryInterface,t.fn[pt].Constructor=Lt,t.fn[pt].noConflict=()=>(t.fn[pt]=mt,Lt._jQueryInterface);const Pt="popover",It="bs.popover",Dt=`.${It}`,Nt=t.fn.popover,Ft="bs-popover",Ot=new RegExp(`(^|\\s)${Ft}\\S+`,"g"),Rt={...Lt.Default,placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},Gt={...Lt.DefaultType,content:"(string|element|function)"},Bt={HIDE:`hide${Dt}`,HIDDEN:`hidden${Dt}`,SHOW:`show${Dt}`,SHOWN:`shown${Dt}`,INSERTED:`inserted${Dt}`,CLICK:`click${Dt}`,FOCUSIN:`focusin${Dt}`,FOCUSOUT:`focusout${Dt}`,MOUSEENTER:`mouseenter${Dt}`,MOUSELEAVE:`mouseleave${Dt}`};class zt extends Lt{static get VERSION(){return"4.3.1"}static get Default(){return Rt}static get NAME(){return Pt}static get DATA_KEY(){return It}static get Event(){return Bt}static get EVENT_KEY(){return Dt}static get DefaultType(){return Gt}isWithContent(){return this.getTitle()||this._getContent()}addAttachmentClass(e){t(this.getTipElement()).addClass(`${Ft}-${e}`)}getTipElement(){return this.tip=this.tip||t(this.config.template)[0],this.tip}setContent(){const e=t(this.getTipElement());this.setElementContent(e.find(".popover-header"),this.getTitle());let i=this._getContent();"function"==typeof i&&(i=i.call(this.element)),this.setElementContent(e.find(".popover-body"),i),e.removeClass("fade show")}_getContent(){return this.element.getAttribute("data-content")||this.config.content}_cleanTipClass(){const e=t(this.getTipElement()),i=e.attr("class").match(Ot);null!==i&&0<i.length&&e.removeClass(i.join(""))}static _jQueryInterface(e){return this.each(function(){let i=t(this).data(It);const o="object"==typeof e?e:null;if((i||!/dispose|hide/.test(e))&&(i||(i=new zt(this,o),t(this).data(It,i)),"string"==typeof e)){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}})}}t.fn.popover=zt._jQueryInterface,t.fn.popover.Constructor=zt,t.fn.popover.noConflict=()=>(t.fn[Pt]=Nt,zt._jQueryInterface);const Ht="scrollspy",Vt="bs.scrollspy",Yt=`.${Vt}`,jt=t.fn.scrollspy,Xt={offset:10,method:"auto",target:""},Wt={offset:"number",method:"string",target:"(string|element)"},Ut={ACTIVATE:`activate${Yt}`,SCROLL:`scroll${Yt}`,LOAD_DATA_API:`load${Yt}.data-api`},qt="active",Zt=".nav, .list-group",$t="position";class Qt{constructor(e,i){this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(i),this._selector=`${this._config.target} .nav-link,${this._config.target} .list-group-item,${this._config.target} .dropdown-item`,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(Ut.SCROLL,t=>this._process(t)),this.refresh(),this._process()}static get VERSION(){return"4.3.1"}static get Default(){return Xt}refresh(){const e="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":$t:this._config.method,i=e===$t?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(o=>{let n;const r=c.getSelectorFromElement(o);if(r&&(n=document.querySelector(r)),n){const o=n.getBoundingClientRect();if(o.width||o.height)return[t(n)[e]().top+i,r]}return null}).filter(t=>t).sort((t,e)=>t[0]-e[0]).forEach(t=>{this._offsets.push(t[0]),this._targets.push(t[1])})}dispose(){t.removeData(this._element,Vt),t(this._scrollElement).off(Yt),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null}_getConfig(e){if("string"!=typeof(e={...Xt,..."object"==typeof e&&e?e:{}}).target){let i=t(e.target).attr("id");i||(i=c.getUID(Ht),t(e.target).attr("id",i)),e.target=`#${i}`}return c.typeCheckConfig(Ht,e,Wt),e}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||i(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=i){const t=this._targets[this._targets.length-1];this._activeTarget!==t&&this._activate(t)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;)this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}_activate(e){this._activeTarget=e,this._clear();const i=this._selector.split(",").map(t=>`${t}[data-target="${e}"],${t}[href="${e}"]`),o=t([].slice.call(document.querySelectorAll(i.join(","))));o.hasClass("dropdown-item")?(o.closest(".dropdown").find(".dropdown-toggle").addClass(qt),o.addClass(qt)):(o.addClass(qt),o.parents(Zt).prev(".nav-link, .list-group-item").addClass(qt),o.parents(Zt).prev(".nav-item").children(".nav-link").addClass(qt)),t(this._scrollElement).trigger(Ut.ACTIVATE,{relatedTarget:e})}_clear(){[].slice.call(document.querySelectorAll(this._selector)).filter(t=>t.classList.contains(qt)).forEach(t=>t.classList.remove(qt))}static _jQueryInterface(e){return this.each(function(){let i=t(this).data(Vt);if(i||(i=new Qt(this,"object"==typeof e&&e),t(this).data(Vt,i)),"string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}})}}t(window).on(Ut.LOAD_DATA_API,()=>{const e=[].slice.call(document.querySelectorAll('[data-spy="scroll"]'));for(let i=e.length;i--;){const o=t(e[i]);Qt._jQueryInterface.call(o,o.data())}}),t.fn.scrollspy=Qt._jQueryInterface,t.fn.scrollspy.Constructor=Qt,t.fn.scrollspy.noConflict=()=>(t.fn[Ht]=jt,Qt._jQueryInterface);const Kt="bs.tab",Jt=`.${Kt}`,te=t.fn.tab,ee={HIDE:`hide${Jt}`,HIDDEN:`hidden${Jt}`,SHOW:`show${Jt}`,SHOWN:`shown${Jt}`,CLICK_DATA_API:`click${Jt}.data-api`},ie="active",oe="fade",ne="show",re=".active",se="> li > .active";class ae{constructor(t){this._element=t}static get VERSION(){return"4.3.1"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(ie)||t(this._element).hasClass("disabled"))return;let e,i;const o=t(this._element).closest(".nav, .list-group")[0],n=c.getSelectorFromElement(this._element);if(o){const e="UL"===o.nodeName||"OL"===o.nodeName?se:re;i=t.makeArray(t(o).find(e)),i=i[i.length-1]}const r=t.Event(ee.HIDE,{relatedTarget:this._element}),s=t.Event(ee.SHOW,{relatedTarget:i});if(i&&t(i).trigger(r),t(this._element).trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){n&&(e=document.querySelector(n)),this._activate(this._element,o);const r=()=>{const e=t.Event(ee.HIDDEN,{relatedTarget:this._element}),o=t.Event(ee.SHOWN,{relatedTarget:i});t(i).trigger(e),t(this._element).trigger(o)};e?this._activate(e,e.parentNode,r):r()}}dispose(){t.removeData(this._element,Kt),this._element=null}_activate(e,i,o){const n=(!i||"UL"!==i.nodeName&&"OL"!==i.nodeName?t(i).children(re):t(i).find(se))[0],r=o&&n&&t(n).hasClass(oe),s=()=>this._transitionComplete(e,n,o);if(n&&r){const e=c.getTransitionDurationFromElement(n);t(n).removeClass(ne).one(c.TRANSITION_END,s).emulateTransitionEnd(e)}else s()}_transitionComplete(e,i,o){if(i){t(i).removeClass(ie);const e=t(i.parentNode).find("> .dropdown-menu .active")[0];e&&t(e).removeClass(ie),"tab"===i.getAttribute("role")&&i.setAttribute("aria-selected",!1)}if(t(e).addClass(ie),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),c.reflow(e),e.classList.contains(oe)&&e.classList.add(ne),e.parentNode&&t(e.parentNode).hasClass("dropdown-menu")){const i=t(e).closest(".dropdown")[0];if(i){const e=[].slice.call(i.querySelectorAll(".dropdown-toggle"));t(e).addClass(ie)}e.setAttribute("aria-expanded",!0)}o&&o()}static _jQueryInterface(e){return this.each(function(){const i=t(this);let o=i.data(Kt);if(o||(o=new ae(this),i.data(Kt,o)),"string"==typeof e){if(void 0===o[e])throw new TypeError(`No method named "${e}"`);o[e]()}})}}t(document).on(ee.CLICK_DATA_API,'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(e){e.preventDefault(),ae._jQueryInterface.call(t(this),"show")}),t.fn.tab=ae._jQueryInterface,t.fn.tab.Constructor=ae,t.fn.tab.noConflict=()=>(t.fn.tab=te,ae._jQueryInterface);var le=function(){var t=!1,e="",i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};return function(){for(var o in t=function(){if(window.QUnit)return!1;var t=document.createElement("bmd");for(var e in i)if(void 0!==t.style[e])return i[e];return!1}(),i)e+=" "+i[o]}(),{transitionEndSupported:function(){return t},transitionEndSelector:function(){return e},isChar:function(t){return!(void 0!==t.which&&(!("number"==typeof t.which&&0<t.which)||t.ctrlKey||t.metaKey||t.altKey||8===t.which||9===t.which||13===t.which||16===t.which||17===t.which||20===t.which||27===t.which))},assert:function(t,e,i){if(e)throw void 0===!t&&t.css("border","1px solid red"),console.error(i,t),i},describe:function(t){return void 0===t?"undefined":0===t.length?"(no matching elements)":t[0].outerHTML.split(">")[0]+">"}}}(jQuery),ce=function(t){var e="is-filled",i="is-focused",o=".bmd-form-group",n={};return function(){function r(e,i,o){for(var r in void 0===o&&(o={}),this.$element=e,this.config=t.extend(!0,{},n,i),o)this[r]=o[r]}var s=r.prototype;return s.dispose=function(t){this.$element.data(t,null),this.$element=null,this.config=null},s.addFormGroupFocus=function(){this.$element.prop("disabled")||this.$bmdFormGroup.addClass(i)},s.removeFormGroupFocus=function(){this.$bmdFormGroup.removeClass(i)},s.removeIsFilled=function(){this.$bmdFormGroup.removeClass(e)},s.addIsFilled=function(){this.$bmdFormGroup.addClass(e)},s.findMdbFormGroup=function(e){void 0===e&&(e=!0);var i=this.$element.closest(o);return 0===i.length&&e&&t.error("Failed to find .bmd-form-group for "+le.describe(this.$element)),i},r}()}(jQuery),he=function(t){var e="has-danger",i=".form-group",o="label[class^='bmd-label'], label[class*=' bmd-label']",n={validate:!1,formGroup:{required:!1},bmdFormGroup:{template:"<span class='bmd-form-group'></span>",create:!0,required:!0},label:{required:!1,selectors:[".form-control-label","> label"],className:"bmd-label-static"},requiredClasses:[],invalidComponentMatches:[],convertInputSizeVariations:!0},r={"form-control-lg":"bmd-form-group-lg","form-control-sm":"bmd-form-group-sm"};return function(s){function l(e,i,o){var r;return void 0===o&&(o={}),(r=s.call(this,e,t.extend(!0,{},n,i),o)||this)._rejectInvalidComponentMatches(),r.rejectWithoutRequiredStructure(),r._rejectWithoutRequiredClasses(),r.$formGroup=r.findFormGroup(r.config.formGroup.required),r.$bmdFormGroup=r.resolveMdbFormGroup(),r.$bmdLabel=r.resolveMdbLabel(),r.resolveMdbFormGroupSizing(),r.addFocusListener(),r.addChangeListener(),""!=r.$element.val()&&r.addIsFilled(),r}a(l,s);var c=l.prototype;return c.dispose=function(t){s.prototype.dispose.call(this,t),this.$bmdFormGroup=null,this.$formGroup=null},c.rejectWithoutRequiredStructure=function(){},c.addFocusListener=function(){var t=this;this.$element.on("focus",function(){t.addFormGroupFocus()}).on("blur",function(){t.removeFormGroupFocus()})},c.addChangeListener=function(){var t=this;this.$element.on("keydown paste",function(e){le.isChar(e)&&t.addIsFilled()}).on("keyup change",function(){t.isEmpty()?t.removeIsFilled():t.addIsFilled(),t.config.validate&&(void 0===t.$element[0].checkValidity||t.$element[0].checkValidity()?t.removeHasDanger():t.addHasDanger())})},c.addHasDanger=function(){this.$bmdFormGroup.addClass(e)},c.removeHasDanger=function(){this.$bmdFormGroup.removeClass(e)},c.isEmpty=function(){return null===this.$element.val()||void 0===this.$element.val()||""===this.$element.val()},c.resolveMdbFormGroup=function(){var t=this.findMdbFormGroup(!1);return(void 0===t||0===t.length)&&(!this.config.bmdFormGroup.create||void 0!==this.$formGroup&&0!==this.$formGroup.length?this.$formGroup.addClass("bmd-form-group"):this.outerElement().parent().hasClass("input-group")?this.outerElement().parent().wrap(this.config.bmdFormGroup.template):this.outerElement().wrap(this.config.bmdFormGroup.template),t=this.findMdbFormGroup(this.config.bmdFormGroup.required)),t},c.outerElement=function(){return this.$element},c.resolveMdbLabel=function(){var t=this.$bmdFormGroup.find(o);return void 0!==t&&0!==t.length||void 0===(t=this.findMdbLabel(this.config.label.required))||0===t.length||t.addClass(this.config.label.className),t},c.findMdbLabel=function(e){void 0===e&&(e=!0);var i=null,n=this.config.label.selectors,r=Array.isArray(n),s=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(s>=n.length)break;a=n[s++]}else{if((s=n.next()).done)break;a=s.value}var l=a;if(void 0!==(i=t.isFunction(l)?l(this):this.$bmdFormGroup.find(l))&&0<i.length)break}return 0===i.length&&e&&t.error("Failed to find "+o+" within form-group for "+le.describe(this.$element)),i},c.findFormGroup=function(e){void 0===e&&(e=!0);var o=this.$element.closest(i);return 0===o.length&&e&&t.error("Failed to find "+i+" for "+le.describe(this.$element)),o},c.resolveMdbFormGroupSizing=function(){if(this.config.convertInputSizeVariations)for(var t in r)this.$element.hasClass(t)&&this.$bmdFormGroup.addClass(r[t])},c._rejectInvalidComponentMatches=function(){var t=this.config.invalidComponentMatches,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var o;if(e){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}o.rejectMatch(this.constructor.name,this.$element)}},c._rejectWithoutRequiredClasses=function(){var t=this.config.requiredClasses,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var o;if(e){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}var n=o;if(-1!==n.indexOf("||")){var r=n.split("||"),s=Array.isArray(r),a=0;for(r=s?r:r[Symbol.iterator]();;){var l;if(s){if(a>=r.length)break;l=r[a++]}else{if((a=r.next()).done)break;l=a.value}if(this.$element.hasClass(l))break}}else this.$element.hasClass(n)}},l}(ce)}(jQuery),ue=function(t){var e={label:{required:!1}};return function(i){function o(o,n,r){var s;return(s=i.call(this,o,t.extend(!0,{},e,n),r)||this).decorateMarkup(),s}a(o,i);var n=o.prototype;return n.decorateMarkup=function(){var e=t(this.config.template);this.$element.after(e),!1!==this.config.ripples&&e.bmdRipples()},n.outerElement=function(){return this.$element.parent().closest("."+this.outerClass)},n.rejectWithoutRequiredStructure=function(){le.assert(this.$element,"label"===!this.$element.parent().prop("tagName"),this.constructor.name+"'s "+le.describe(this.$element)+" parent element should be <label>."),le.assert(this.$element,!this.outerElement().hasClass(this.outerClass),this.constructor.name+"'s "+le.describe(this.$element)+" outer element should have class "+this.outerClass+".")},n.addFocusListener=function(){var t=this;this.$element.closest("label").hover(function(){t.addFormGroupFocus()},function(){t.removeFormGroupFocus()})},n.addChangeListener=function(){var t=this;this.$element.change(function(){t.$element.blur()})},o}(he)}(jQuery),de=function(t){var e="bmd.checkbox",i="bmd"+("c".toUpperCase()+"checkbox".slice(1)),o=t.fn[i],n={template:"<span class='checkbox-decorator'><span class='check'></span></span>"},r=function(i){function o(e,o,r){return void 0===r&&(r={inputType:"checkbox",outerClass:"checkbox"}),i.call(this,e,t.extend(!0,n,o),r)||this}return a(o,i),o.prototype.dispose=function(t){void 0===t&&(t=e),i.prototype.dispose.call(this,t)},o.matches=function(t){return"checkbox"===t.attr("type")},o.rejectMatch=function(t,e){le.assert(this.$element,this.matches(e),t+" component element "+le.describe(e)+" is invalid for type='checkbox'.")},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(ue);return t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface},r}(jQuery),pe=(function(t){var e="bmd.checkboxInline",i="bmd"+("c".toUpperCase()+"checkboxInline".slice(1)),o=t.fn[i],n={bmdFormGroup:{create:!1,required:!1}},r=function(i){function o(e,o,r){return void 0===r&&(r={inputType:"checkbox",outerClass:"checkbox-inline"}),i.call(this,e,t.extend(!0,{},n,o),r)||this}return a(o,i),o.prototype.dispose=function(){i.prototype.dispose.call(this,e)},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(de);t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface}}(jQuery),function(t){var e="bmd.collapseInline",i="bmd"+("c".toUpperCase()+"collapseInline".slice(1)),o=t.fn[i],n="width",r={},s=function(i){function o(e,o){var s;(s=i.call(this,e,t.extend(!0,{},r,o))||this).$bmdFormGroup=s.findMdbFormGroup(!0);var a=e.data("target");s.$collapse=t(a),le.assert(e,0===s.$collapse.length,"Cannot find collapse target for "+le.describe(e)),le.assert(s.$collapse,!s.$collapse.hasClass("collapse"),le.describe(s.$collapse)+" is expected to have the 'collapse' class.  It is being targeted by "+le.describe(e));var l=s.$bmdFormGroup.find("input, select, textarea");return 0<l.length&&(s.$input=l.first()),s.$collapse.hasClass(n)||s.$collapse.addClass(n),s.$input&&(s.$collapse.on("shown.bs.collapse",function(){s.$input.focus()}),s.$input.blur(function(){s.$collapse.collapse("hide")})),s}return a(o,i),o.prototype.dispose=function(){i.prototype.dispose.call(this,e),this.$bmdFormGroup=null,this.$collapse=null,this.$input=null},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(ce);t.fn[i]=s._jQueryInterface,t.fn[i].Constructor=s,t.fn[i].noConflict=function(){return t.fn[i]=o,s._jQueryInterface}}(jQuery),function(t){var e="bmd.file",i="bmd"+("f".toUpperCase()+"file".slice(1)),o=t.fn[i],n={},r=function(i){function o(e,o){var r;return(r=i.call(this,e,t.extend(!0,n,o))||this).$bmdFormGroup.addClass("is-file"),r}a(o,i);var r=o.prototype;return r.dispose=function(){i.prototype.dispose.call(this,e)},o.matches=function(t){return"file"===t.attr("type")},o.rejectMatch=function(t,e){le.assert(this.$element,this.matches(e),t+" component element "+le.describe(e)+" is invalid for type='file'.")},r.outerElement=function(){return this.$element.parent().closest(".file")},r.rejectWithoutRequiredStructure=function(){le.assert(this.$element,"label"===!this.outerElement().prop("tagName"),this.constructor.name+"'s "+le.describe(this.$element)+" parent element "+le.describe(this.outerElement())+" should be <label>."),le.assert(this.$element,!this.outerElement().hasClass("file"),this.constructor.name+"'s "+le.describe(this.$element)+" parent element "+le.describe(this.outerElement())+" should have class .file.")},r.addFocusListener=function(){var t=this;this.$bmdFormGroup.on("focus",function(){t.addFormGroupFocus()}).on("blur",function(){t.removeFormGroupFocus()})},r.addChangeListener=function(){var e=this;this.$element.on("change",function(){var i="";t.each(e.$element.files,function(t,e){i+=e.name+"  , "}),(i=i.substring(0,i.length-2))?e.addIsFilled():e.removeIsFilled(),e.$bmdFormGroup.find("input.form-control[readonly]").val(i)})},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(he);t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface}}(jQuery),function(t){var e="bmd.radio",i="bmd"+("r".toUpperCase()+"radio".slice(1)),o=t.fn[i],n={template:"<span class='bmd-radio'></span>"},r=function(i){function o(e,o,r){return void 0===r&&(r={inputType:"radio",outerClass:"radio"}),i.call(this,e,t.extend(!0,n,o),r)||this}return a(o,i),o.prototype.dispose=function(t){void 0===t&&(t=e),i.prototype.dispose.call(this,t)},o.matches=function(t){return"radio"===t.attr("type")},o.rejectMatch=function(t,e){le.assert(this.$element,this.matches(e),t+" component element "+le.describe(e)+" is invalid for type='radio'.")},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(ue);return t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface},r}(jQuery)),ge=(function(t){var e="bmd.radioInline",i="bmd"+("r".toUpperCase()+"radioInline".slice(1)),o=t.fn[i],n={bmdFormGroup:{create:!1,required:!1}},r=function(i){function o(e,o,r){return void 0===r&&(r={inputType:"radio",outerClass:"radio-inline"}),i.call(this,e,t.extend(!0,{},n,o),r)||this}return a(o,i),o.prototype.dispose=function(){i.prototype.dispose.call(this,e)},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(pe);t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface}}(jQuery),function(t){var e={requiredClasses:["form-control"]};return function(i){function o(o,n){var r;return(r=i.call(this,o,t.extend(!0,e,n))||this).isEmpty()&&r.removeIsFilled(),r}return a(o,i),o}(he)}(jQuery)),fe=(function(t){var e="bmd.select",i="bmd"+("s".toUpperCase()+"select".slice(1)),o=t.fn[i],n={requiredClasses:["form-control||custom-select"]},r=function(i){function o(e,o){var r;return(r=i.call(this,e,t.extend(!0,n,o))||this).addIsFilled(),r}return a(o,i),o.prototype.dispose=function(){i.prototype.dispose.call(this,e)},o.matches=function(t){return"select"===t.prop("tagName")},o.rejectMatch=function(t,e){le.assert(this.$element,this.matches(e),t+" component element "+le.describe(e)+" is invalid for <select>.")},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(ge);t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface}}(jQuery),function(t){var e="bmd.switch",i="bmd"+("s".toUpperCase()+"switch".slice(1)),o=t.fn[i],n={template:"<span class='bmd-switch-track'></span>"},r=function(i){function o(e,o,r){return void 0===r&&(r={inputType:"checkbox",outerClass:"switch"}),i.call(this,e,t.extend(!0,{},n,o),r)||this}return a(o,i),o.prototype.dispose=function(){i.prototype.dispose.call(this,e)},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(de);t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface}}(jQuery),function(t){var e="bmd.text",i="bmd"+("t".toUpperCase()+"text".slice(1)),o=t.fn[i],n={},r=function(i){function o(e,o){return i.call(this,e,t.extend(!0,n,o))||this}return a(o,i),o.prototype.dispose=function(t){void 0===t&&(t=e),i.prototype.dispose.call(this,t)},o.matches=function(t){return"text"===t.attr("type")},o.rejectMatch=function(t,e){le.assert(this.$element,this.matches(e),t+" component element "+le.describe(e)+" is invalid for type='text'.")},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(ge);t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface}}(jQuery),function(t){var e="bmd.textarea",i="bmd"+("t".toUpperCase()+"textarea".slice(1)),o=t.fn[i],n={},r=function(i){function o(e,o){return i.call(this,e,t.extend(!0,n,o))||this}return a(o,i),o.prototype.dispose=function(){i.prototype.dispose.call(this,e)},o.matches=function(t){return"textarea"===t.prop("tagName")},o.rejectMatch=function(t,e){le.assert(this.$element,this.matches(e),t+" component element "+le.describe(e)+" is invalid for <textarea>.")},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(ge);t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface}}(jQuery),function(t){if("undefined"==typeof Popper)throw new Error("Bootstrap dropdown require Popper.js (https://popper.js.org)");var e="bs.dropdown",i="."+e,o=".data-api",n=t.fn.dropdown,r=new RegExp("38|40|27"),a={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,CLICK:"click"+i,CLICK_DATA_API:"click"+i+o,KEYDOWN_DATA_API:"keydown"+i+o,KEYUP_DATA_API:"keyup"+i+o,TRANSITION_END:"transitionend webkitTransitionEnd oTransitionEnd animationend webkitAnimationEnd oAnimationEnd"},l="disabled",h="show",u="hiding",d="dropup",p="dropdown-menu-right",g='[data-toggle="dropdown"]',f=".dropdown-menu",m={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end"},y={placement:m.BOTTOM,offset:0,flip:!0},v={placement:"string",offset:"(number|string)",flip:"boolean"},x=function(){function o(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var n=o.prototype;return n.toggle=function(){var e=this;if(!this._element.disabled&&!t(this._element).hasClass(l)){var i=o._getParentFromElement(this._element),n=t(this._menu).hasClass(h);if(o._clearMenus(),!n){var r={relatedTarget:this._element},s=t.Event(a.SHOW,r);if(t(i).trigger(s),!s.isDefaultPrevented()){var c=this._element;t(i).hasClass(d)&&(t(this._menu).hasClass("dropdown-menu-left")||t(this._menu).hasClass(p))&&(c=i),this._popper=new Popper(c,this._menu,this._getPopperConfig()),"ontouchstart"in document.documentElement&&!t(i).closest(".navbar-nav").length&&t("body").children().on("mouseover",null,t.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),t(this._menu).one(a.TRANSITION_END,function(){t(i).trigger(t.Event(a.SHOWN,r)),t(e._menu).removeClass("showing")}),t(this._menu).addClass("show showing"),t(i).addClass(h)}}}},n.dispose=function(){t.removeData(this._element,e),t(this._element).off(i),this._element=null,this._menu=null,null!==this._popper&&this._popper.destroy(),this._popper=null},n.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},n._addEventListeners=function(){var e=this;t(this._element).on(a.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},n._getConfig=function(e){var i=t(this._element).data();return void 0!==i.placement&&(i.placement=m[i.placement.toUpperCase()]),e=t.extend({},this.constructor.Default,t(this._element).data(),e),c.typeCheckConfig("dropdown",e,this.constructor.DefaultType),e},n._getMenuElement=function(){if(!this._menu){var e=o._getParentFromElement(this._element);this._menu=t(e).find(f)[0]}return this._menu},n._getPlacement=function(){var e=t(this._element).parent(),i=this._config.placement;return e.hasClass(d)||this._config.placement===m.TOP?(i=m.TOP,t(this._menu).hasClass(p)&&(i=m.TOPEND)):t(this._menu).hasClass(p)&&(i=m.BOTTOMEND),i},n._detectNavbar=function(){return 0<t(this._element).closest(".navbar").length},n._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:{offset:this._config.offset},flip:{enabled:this._config.flip}}};return this._inNavbar&&(t.modifiers.applyStyle={enabled:!this._inNavbar}),t},o._jQueryInterface=function(i){return this.each(function(){var n=t(this).data(e);if(n||(n=new o(this,"object"==typeof i?i:null),t(this).data(e,n)),"string"==typeof i){if(void 0===n[i])throw new Error('No method named "'+i+'"');n[i]()}})},o._clearMenus=function(i){if(!i||3!==i.which&&("keyup"!==i.type||9===i.which))for(var n=t.makeArray(t(g)),r=function(r){var s=o._getParentFromElement(n[r]),l=t(n[r]).data(e),c={relatedTarget:n[r]};if(!l)return"continue";var d=l._menu;if(!t(s).hasClass(h))return"continue";if(i&&("click"===i.type&&/input|textarea/i.test(i.target.tagName)||"keyup"===i.type&&9===i.which)&&t.contains(s,i.target))return"continue";var p=t.Event(a.HIDE,c);return t(s).trigger(p),p.isDefaultPrevented()?"continue":("ontouchstart"in document.documentElement&&t("body").children().off("mouseover",null,t.noop),n[r].setAttribute("aria-expanded","false"),t(d).addClass(u).removeClass(h),t(s).removeClass(h),void t(d).one(a.TRANSITION_END,function(){t(s).trigger(t.Event(a.HIDDEN,c)),t(d).removeClass(u)}))},s=0;s<n.length;s++)r(s)},o._getParentFromElement=function(e){var i,o=c.getSelectorFromElement(e);return o&&(i=t(o)[0]),i||e.parentNode},o._dataApiKeydownHandler=function(e){if(!(!r.test(e.which)||/button/i.test(e.target.tagName)&&32===e.which||/input|textarea/i.test(e.target.tagName)||(e.preventDefault(),e.stopPropagation(),this.disabled||t(this).hasClass(l)))){var i=o._getParentFromElement(this),n=t(i).hasClass(h);if(!n&&(27!==e.which||32!==e.which)||n&&(27===e.which||32===e.which)){if(27===e.which){var s=t(i).find(g)[0];t(s).trigger("focus")}return void t(this).trigger("click")}var a=t(i).find(".dropdown-menu .dropdown-item:not(.disabled)").get();if(a.length){var c=a.indexOf(e.target);38===e.which&&0<c&&c--,40===e.which&&c<a.length-1&&c++,0>c&&(c=0),a[c].focus()}}},function(t,e,i){i&&s(t,i)}(o,0,[{key:"VERSION",get:function(){return"4.1.0"}},{key:"Default",get:function(){return y}},{key:"DefaultType",get:function(){return v}}]),o}();t(document).on(a.KEYDOWN_DATA_API,g,x._dataApiKeydownHandler).on(a.KEYDOWN_DATA_API,f,x._dataApiKeydownHandler).on(a.CLICK_DATA_API+" "+a.KEYUP_DATA_API,x._clearMenus).on(a.CLICK_DATA_API,g,function(e){e.preventDefault(),e.stopPropagation(),x._jQueryInterface.call(t(this),"toggle")}).on(a.CLICK_DATA_API,".dropdown form",function(t){t.stopPropagation()}),t.fn.dropdown=x._jQueryInterface,t.fn.dropdown.Constructor=x,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=n,x._jQueryInterface}}(jQuery),function(t){var e="bmd-layout-canvas",i="bmd-layout-backdrop",o={CANVAS:"."+e,CONTAINER:".bmd-layout-container",BACKDROP:"."+i},n={canvas:{create:!0,required:!0,template:'<div class="'+e+'"></div>'},backdrop:{create:!0,required:!0,template:'<div class="'+i+'"></div>'}};return function(e){function i(i,o,r){var s;return void 0===r&&(r={}),(s=e.call(this,i,t.extend(!0,{},n,o),r)||this).$container=s.findContainer(!0),s.$backdrop=s.resolveBackdrop(),s.resolveCanvas(),s}a(i,e);var r=i.prototype;return r.dispose=function(t){e.prototype.dispose.call(this,t),this.$container=null,this.$backdrop=null},r.resolveCanvas=function(){var t=this.findCanvas(!1);return(void 0===t||0===t.length)&&(this.config.canvas.create&&this.$container.wrap(this.config.canvas.template),t=this.findCanvas(this.config.canvas.required)),t},r.findCanvas=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=this.$container);var n=i.closest(o.CANVAS);return 0===n.length&&e&&t.error("Failed to find "+o.CANVAS+" for "+le.describe(i)),n},r.resolveBackdrop=function(){var t=this.findBackdrop(!1);return(void 0===t||0===t.length)&&(this.config.backdrop.create&&this.$container.append(this.config.backdrop.template),t=this.findBackdrop(this.config.backdrop.required)),t},r.findBackdrop=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=this.$container);var n=i.find("> "+o.BACKDROP);return 0===n.length&&e&&t.error("Failed to find "+o.BACKDROP+" for "+le.describe(i)),n},r.findContainer=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=this.$element);var n=i.closest(o.CONTAINER);return 0===n.length&&e&&t.error("Failed to find "+o.CONTAINER+" for "+le.describe(i)),n},i}(ce)}(jQuery));(function(t){var e="bmd.drawer",i="bmd"+("d".toUpperCase()+"drawer".slice(1)),o=t.fn[i],n="bmd-drawer-in",r={focusSelector:"a, button, input"},s=function(i){function o(e,o){var n;return(n=i.call(this,e,t.extend(!0,{},r,o))||this).$toggles=t('[data-toggle="drawer"][href="#'+n.$element[0].id+'"], [data-toggle="drawer"][data-target="#'+n.$element[0].id+'"]'),n._addAria(),n.$backdrop.keydown(function(t){27===t.which&&n.hide()}).click(function(){n.hide()}),n.$element.keydown(function(t){27===t.which&&n.hide()}),n.$toggles.click(function(){n.toggle()}),n}a(o,i);var s=o.prototype;return s.dispose=function(){i.prototype.dispose.call(this,e),this.$toggles=null},s.toggle=function(){this._isOpen()?this.hide():this.show()},s.show=function(){if(!this._isForcedClosed()&&!this._isOpen()){t(".bmd-layout-drawer").hide(),this.$element.show(),this.$toggles.attr("aria-expanded",!0),this.$element.attr("aria-expanded",!0),this.$element.attr("aria-hidden",!1);var e=this.$element.find(this.config.focusSelector);0<e.length&&e.first().focus(),this.$container.addClass(n),this.$backdrop.addClass("in")}},s.hide=function(){this._isOpen()&&(this.$toggles.attr("aria-expanded",!1),this.$element.attr("aria-expanded",!1),this.$element.attr("aria-hidden",!0),this.$container.removeClass(n),this.$backdrop.removeClass("in"))},s._isOpen=function(){return this.$container.hasClass(n)},s._isForcedClosed=function(){return this.$container.hasClass("bmd-drawer-out")},s._addAria=function(){var t=this._isOpen();this.$element.attr("aria-expanded",t),this.$element.attr("aria-hidden",t),this.$toggles.length&&this.$toggles.attr("aria-expanded",t)},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(fe);t.fn[i]=s._jQueryInterface,t.fn[i].Constructor=s,t.fn[i].noConflict=function(){return t.fn[i]=o,s._jQueryInterface}})(jQuery),function(t){var e="bmd.ripples",o="bmd"+("r".toUpperCase()+"ripples".slice(1)),n=t.fn[o],r="ripple-container",s="ripple-decorator",a={CONTAINER:"."+r,DECORATOR:"."+s},l={container:{template:"<div class='"+r+"'></div>"},decorator:{template:"<div class='"+s+"'></div>"},trigger:{start:"mousedown touchstart",end:"mouseup mouseleave touchend"},touchUserAgentRegex:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,duration:500},c=function(){function o(e,i){var o=this;this.$element=e,this.config=t.extend(!0,{},l,i),this.$element.on(this.config.trigger.start,function(t){o._onStartRipple(t)})}var n=o.prototype;return n.dispose=function(){this.$element.data(e,null),this.$element=null,this.$container=null,this.$decorator=null,this.config=null},n._onStartRipple=function(t){var e=this;if(!this._isTouch()||"mousedown"!==t.type){this._findOrCreateContainer();var i=this._getRelY(t),o=this._getRelX(t);(i||o)&&(this.$decorator.css({left:o,top:i,"background-color":this._getRipplesColor()}),this._forceStyleApplication(),this.rippleOn(),setTimeout(function(){e.rippleEnd()},this.config.duration),this.$element.on(this.config.trigger.end,function(){e.$decorator&&(e.$decorator.data("mousedown","off"),"off"===e.$decorator.data("animating")&&e.rippleOut())}))}},n._findOrCreateContainer=function(){(!this.$container||0<!this.$container.length)&&(this.$element.append(this.config.container.template),this.$container=this.$element.find(a.CONTAINER)),this.$container.append(this.config.decorator.template),this.$decorator=this.$container.find(a.DECORATOR)},n._forceStyleApplication=function(){return window.getComputedStyle(this.$decorator[0]).opacity},n._getRelX=function(t){var e=this.$container.offset();return this._isTouch()?1===(t=t.originalEvent).touches.length&&t.touches[0].pageX-e.left:t.pageX-e.left},n._getRelY=function(t){var e=this.$container.offset();return this._isTouch()?1===(t=t.originalEvent).touches.length&&t.touches[0].pageY-e.top:t.pageY-e.top},n._getRipplesColor=function(){return this.$element.data("ripple-color")?this.$element.data("ripple-color"):window.getComputedStyle(this.$element[0]).color},n._isTouch=function(){return this.config.touchUserAgentRegex.test(navigator.userAgent)},n.rippleEnd=function(){this.$decorator&&(this.$decorator.data("animating","off"),"off"===this.$decorator.data("mousedown")&&this.rippleOut(this.$decorator))},n.rippleOut=function(){var t=this;this.$decorator.off(),le.transitionEndSupported()?this.$decorator.addClass("ripple-out"):this.$decorator.animate({opacity:0},100,function(){t.$decorator.trigger("transitionend")}),this.$decorator.on(le.transitionEndSelector(),function(){t.$decorator&&(t.$decorator.remove(),t.$decorator=null)})},n.rippleOn=function(){var t=this,e=this._getNewSize();le.transitionEndSupported()?this.$decorator.css({"-ms-transform":"scale("+e+")","-moz-transform":"scale("+e+")","-webkit-transform":"scale("+e+")",transform:"scale("+e+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on"):this.$decorator.animate({width:2*i(this.$element.outerWidth(),this.$element.outerHeight()),height:2*i(this.$element.outerWidth(),this.$element.outerHeight()),"margin-left":-1*i(this.$element.outerWidth(),this.$element.outerHeight()),"margin-top":-1*i(this.$element.outerWidth(),this.$element.outerHeight()),opacity:.2},this.config.duration,function(){t.$decorator.trigger("transitionend")})},n._getNewSize=function(){return i(this.$element.outerWidth(),this.$element.outerHeight())/this.$decorator.outerWidth()*2.5},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}();t.fn[o]=c._jQueryInterface,t.fn[o].Constructor=c,t.fn[o].noConflict=function(){return t.fn[o]=n,c._jQueryInterface}}(jQuery),function(t){var e="bmd.autofill",i="bmd"+("a".toUpperCase()+"autofill".slice(1)),o=t.fn[i],n="bmd.last_value",r={},s=function(i){function o(e,o){var n;return(n=i.call(this,e,t.extend(!0,{},r,o))||this)._watchLoading(),n._attachEventHandlers(),n}a(o,i);var s=o.prototype;return s.dispose=function(){i.prototype.dispose.call(this,e)},s._watchLoading=function(){var t=this;setTimeout(function(){clearInterval(t._onLoading)},1e4)},s._onLoading=function(){setInterval(function(){t("input[type!=checkbox]").each(function(e,i){var o=t(i),r=o.data(n);void 0===r&&(r=o.attr("value")),void 0===r&&(r="");var s=o.val();s!==r&&o.trigger("change"),o.data(n,s)})},100)},s._attachEventHandlers=function(){var e=null;t(document).on("focus","input",function(i){var o=t(i.currentTarget).closest("form").find("input").not("[type=file], [type=date]");e=setInterval(function(){o.each(function(e,i){var o=t(i),r=o.data(n);void 0===r&&(r=o.attr("value")),void 0===r&&(r="");var s=o.val();s!==r&&o.trigger("change"),o.data(n,s)})},100)}).on("blur",".form-group input",function(){clearInterval(e)})},o._jQueryInterface=function(i){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new o(n,i),n.data(e,r))})},o}(ce);t.fn[i]=s._jQueryInterface,t.fn[i].Constructor=s,t.fn[i].noConflict=function(){return t.fn[i]=o,s._jQueryInterface}}(jQuery),Popper.Defaults.modifiers.computeStyle.gpuAcceleration=!1,function(t){var e="bmd.bootstrapMaterialDesign",i="bootstrapMaterialDesign",o=t.fn[i],n={global:{validate:!1,label:{className:"bmd-label-static"}},autofill:{selector:"body"},checkbox:{selector:".checkbox > label > input[type=checkbox]"},checkboxInline:{selector:"label.checkbox-inline > input[type=checkbox]"},collapseInline:{selector:'.bmd-collapse-inline [data-toggle="collapse"]'},drawer:{selector:".bmd-layout-drawer"},file:{selector:"input[type=file]"},radio:{selector:".radio > label > input[type=radio]"},radioInline:{selector:"label.radio-inline > input[type=radio]"},ripples:{selector:[".btn:not(.btn-link):not(.ripple-none)",".card-image:not(.ripple-none)",".navbar a:not(.ripple-none)",".dropdown-menu a:not(.ripple-none)",".nav-tabs a:not(.ripple-none)",".pagination li:not(.active):not(.disabled) a:not(.ripple-none)",".ripple"]},select:{selector:["select"]},switch:{selector:".switch > label > input[type=checkbox]"},text:{selector:["input:not([type=hidden]):not([type=checkbox]):not([type=radio]):not([type=file]):not([type=button]):not([type=submit]):not([type=reset])"]},textarea:{selector:["textarea"]},arrive:!0,instantiation:["ripples","checkbox","checkboxInline","collapseInline","drawer","radio","radioInline","switch","text","textarea","select","autofill"]},r=function(){function i(e,i){var o=this;this.$element=e,this.config=t.extend(!0,{},n,i);var r=t(document),s=function(){if(l){if(c>=a.length)return"break";h=a[c++]}else{if((c=a.next()).done)return"break";h=c.value}var e=h,i=o.config[e];if(i){var n=o._resolveSelector(i);i=t.extend(!0,{},o.config.global,i);var s="bmd"+(e.charAt(0).toUpperCase()+e.slice(1));try{t(n)[s](i),document.arrive&&o.config.arrive&&r.arrive(n,function(){t(this)[s](i)})}catch(o){throw console.error("Failed to instantiate component: $('"+n+"')["+s+"]("+i+")",o,"\nSelected elements: ",t(n)),o}}},a=this.config.instantiation,l=Array.isArray(a),c=0;for(a=l?a:a[Symbol.iterator]();;){var h;if("break"===s())break}}var o=i.prototype;return o.dispose=function(){this.$element.data(e,null),this.$element=null,this.config=null},o._resolveSelector=function(t){var e=t.selector;return Array.isArray(e)&&(e=e.join(", ")),e},i._jQueryInterface=function(o){return this.each(function(){var n=t(this),r=n.data(e);r||(r=new i(n,o),n.data(e,r))})},i}();t.fn[i]=r._jQueryInterface,t.fn[i].Constructor=r,t.fn[i].noConflict=function(){return t.fn[i]=o,r._jQueryInterface}}(jQuery)});var Arrive=function(t,e,i){"use strict";if(t.MutationObserver&&"undefined"!=typeof HTMLElement){var o,n=0,r=(o=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector,{matchesSelector:function(t,e){return t instanceof HTMLElement&&o.call(t,e)},addMethod:function(t,e,i){var o=t[e];t[e]=function(){return i.length==arguments.length?i.apply(this,arguments):"function"==typeof o?o.apply(this,arguments):void 0}},callCallbacks:function(t,e){e&&e.options.onceOnly&&1==e.firedElems.length&&(t=[t[0]]);for(var i,o=0;i=t[o];o++)i&&i.callback&&i.callback.call(i.elem,i.elem);e&&e.options.onceOnly&&1==e.firedElems.length&&e.me.unbindEventWithSelectorAndCallback.call(e.target,e.selector,e.callback)},checkChildNodesRecursively:function(t,e,i,o){for(var n,s=0;n=t[s];s++)i(n,e,o)&&o.push({callback:e.callback,elem:n}),n.childNodes.length>0&&r.checkChildNodesRecursively(n.childNodes,e,i,o)},mergeArrays:function(t,e){var i,o={};for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);for(i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);return o},toElementsArray:function(e){return void 0===e||"number"==typeof e.length&&e!==t||(e=[e]),e}}),s=function(){var t=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return t.prototype.addEvent=function(t,e,i,o){var n={target:t,selector:e,options:i,callback:o,firedElems:[]};return this._beforeAdding&&this._beforeAdding(n),this._eventsBucket.push(n),n},t.prototype.removeEvent=function(t){for(var e,i=this._eventsBucket.length-1;e=this._eventsBucket[i];i--)if(t(e)){this._beforeRemoving&&this._beforeRemoving(e);var o=this._eventsBucket.splice(i,1);o&&o.length&&(o[0].callback=null)}},t.prototype.beforeAdding=function(t){this._beforeAdding=t},t.prototype.beforeRemoving=function(t){this._beforeRemoving=t},t}(),a=function(e,o){var n=new s,a=this,l={fireOnAttributesModification:!1};return n.beforeAdding(function(i){var n,r=i.target;r!==t.document&&r!==t||(r=document.getElementsByTagName("html")[0]),n=new MutationObserver(function(t){o.call(this,t,i)});var s=e(i.options);n.observe(r,s),i.observer=n,i.me=a}),n.beforeRemoving(function(t){t.observer.disconnect()}),this.bindEvent=function(t,e,i){e=r.mergeArrays(l,e);for(var o=r.toElementsArray(this),s=0;s<o.length;s++)n.addEvent(o[s],t,e,i)},this.unbindEvent=function(){var t=r.toElementsArray(this);n.removeEvent(function(e){for(var o=0;o<t.length;o++)if(this===i||e.target===t[o])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(t){var e=r.toElementsArray(this),o=t;n.removeEvent("function"==typeof t?function(t){for(var n=0;n<e.length;n++)if((this===i||t.target===e[n])&&t.callback===o)return!0;return!1}:function(o){for(var n=0;n<e.length;n++)if((this===i||o.target===e[n])&&o.selector===t)return!0;return!1})},this.unbindEventWithSelectorAndCallback=function(t,e){var o=r.toElementsArray(this);n.removeEvent(function(n){for(var r=0;r<o.length;r++)if((this===i||n.target===o[r])&&n.selector===t&&n.callback===e)return!0;return!1})},this},l=new function(){var t={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};function e(t,e,o){return!(!r.matchesSelector(t,e.selector)||(t._id===i&&(t._id=n++),-1!=e.firedElems.indexOf(t._id))||(e.firedElems.push(t._id),0))}var o=(l=new a(function(t){var e={attributes:!1,childList:!0,subtree:!0};return t.fireOnAttributesModification&&(e.attributes=!0),e},function(t,i){t.forEach(function(t){var o=t.addedNodes,n=t.target,s=[];null!==o&&o.length>0?r.checkChildNodesRecursively(o,i,e,s):"attributes"===t.type&&e(n,i)&&s.push({callback:i.callback,elem:n}),r.callCallbacks(s,i)})})).bindEvent;return l.bindEvent=function(e,i,n){void 0===n?(n=i,i=t):i=r.mergeArrays(t,i);var s=r.toElementsArray(this);if(i.existing){for(var a=[],l=0;l<s.length;l++)for(var c=s[l].querySelectorAll(e),h=0;h<c.length;h++)a.push({callback:n,elem:c[h]});if(i.onceOnly&&a.length)return n.call(a[0].elem,a[0].elem);setTimeout(r.callCallbacks,1,a)}o.call(this,e,i,n)},l},c=new function(){var t={};function e(t,e){return r.matchesSelector(t,e.selector)}var i=(c=new a(function(){return{childList:!0,subtree:!0}},function(t,i){t.forEach(function(t){var o=t.removedNodes,n=[];null!==o&&o.length>0&&r.checkChildNodesRecursively(o,i,e,n),r.callCallbacks(n,i)})})).bindEvent;return c.bindEvent=function(e,o,n){void 0===n?(n=o,o=t):o=r.mergeArrays(t,o),i.call(this,e,o,n)},c};e&&d(e.fn),d(HTMLElement.prototype),d(NodeList.prototype),d(HTMLCollection.prototype),d(HTMLDocument.prototype),d(Window.prototype);var h={};return u(l,h,"unbindAllArrive"),u(c,h,"unbindAllLeave"),h}function u(t,e,i){r.addMethod(e,i,t.unbindEvent),r.addMethod(e,i,t.unbindEventWithSelectorOrCallback),r.addMethod(e,i,t.unbindEventWithSelectorAndCallback)}function d(t){t.arrive=l.bindEvent,u(l,t,"unbindArrive"),t.leave=c.bindEvent,u(c,t,"unbindLeave")}}(window,"undefined"==typeof jQuery?null:jQuery,void 0);function projectVectorOnVector(t,e){var i=(t[0]*e[0]+t[1]*e[1])/(e[0]*e[0]+e[1]*e[1]);return[e[0]*i,e[1]*i]}function countVector(t,e){return[e[0]-t[0],e[1]-t[1]]}function movePoint(t,e){return[t[0]+e[0],t[1]+e[1]]}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";var t,e;function i(){return t.apply(null,arguments)}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(r(t,e))return!1;return!0}function a(t){return void 0===t}function l(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function c(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var i,o=[];for(i=0;i<t.length;++i)o.push(e(t[i],i));return o}function u(t,e){for(var i in e)r(e,i)&&(t[i]=e[i]);return r(e,"toString")&&(t.toString=e.toString),r(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,i,o){return _e(t,e,i,o,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function g(t){if(null==t._isValid){var i=p(t),o=e.call(i.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&i.overflow<0&&!i.empty&&!i.invalidEra&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&o);if(t._strict&&(n=n&&0===i.charsLeftOver&&0===i.unusedTokens.length&&void 0===i.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function f(t){var e=d(NaN);return null!=t?u(p(e),t):p(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){var e,i=Object(this),o=i.length>>>0;for(e=0;e<o;e++)if(e in i&&t.call(this,i[e],e,i))return!0;return!1};var m=i.momentProperties=[],y=!1;function v(t,e){var i,o,n;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=p(e)),a(e._locale)||(t._locale=e._locale),m.length>0)for(i=0;i<m.length;i++)a(n=e[o=m[i]])||(t[o]=n);return t}function x(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,i.updateOffset(this),y=!1)}function b(t){return t instanceof x||null!=t&&null!=t._isAMomentObject}function w(t){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function _(t,e){var o=!0;return u(function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),o){var n,s,a,l=[];for(s=0;s<arguments.length;s++){if(n="","object"==typeof arguments[s]){for(a in n+="\n["+s+"] ",arguments[0])r(arguments[0],a)&&(n+=a+": "+arguments[0][a]+", ");n=n.slice(0,-2)}else n=arguments[s];l.push(n)}w(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),o=!1}return e.apply(this,arguments)},e)}var S,C={};function k(t,e){null!=i.deprecationHandler&&i.deprecationHandler(t,e),C[t]||(w(e),C[t]=!0)}function A(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function E(t,e){var i,o=u({},t);for(i in e)r(e,i)&&(n(t[i])&&n(e[i])?(o[i]={},u(o[i],t[i]),u(o[i],e[i])):null!=e[i]?o[i]=e[i]:delete o[i]);for(i in t)r(t,i)&&!r(e,i)&&n(t[i])&&(o[i]=u({},o[i]));return o}function T(t){null!=t&&this.set(t)}function M(t,e,i){var o=""+Math.abs(t);return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,e-o.length)).toString().substr(1)+o}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,S=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)r(t,e)&&i.push(e);return i};var L=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,I={},D={};function N(t,e,i,o){var n=o;"string"==typeof o&&(n=function(){return this[o]()}),t&&(D[t]=n),e&&(D[e[0]]=function(){return M(n.apply(this,arguments),e[1],e[2])}),i&&(D[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function F(t,e){return t.isValid()?(e=O(e,t.localeData()),I[e]=I[e]||function(t){var e,i,o,n=t.match(L);for(e=0,i=n.length;e<i;e++)n[e]=D[n[e]]?D[n[e]]:(o=n[e]).match(/\[[\s\S]/)?o.replace(/^\[|\]$/g,""):o.replace(/\\/g,"");return function(e){var o,r="";for(o=0;o<i;o++)r+=A(n[o])?n[o].call(e,t):n[o];return r}}(e),I[e](t)):t.localeData().invalidDate()}function O(t,e){var i=5;function o(t){return e.longDateFormat(t)||t}for(P.lastIndex=0;i>=0&&P.test(t);)t=t.replace(P,o),P.lastIndex=0,i-=1;return t}var R={};function G(t,e){var i=t.toLowerCase();R[i]=R[i+"s"]=R[e]=t}function B(t){return"string"==typeof t?R[t]||R[t.toLowerCase()]:void 0}function z(t){var e,i,o={};for(i in t)r(t,i)&&(e=B(i))&&(o[e]=t[i]);return o}var H={};function V(t,e){H[t]=e}function Y(t){return t%4==0&&t%100!=0||t%400==0}function j(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function X(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=j(e)),i}function W(t,e){return function(o){return null!=o?(q(this,t,o),i.updateOffset(this,e),this):U(this,t)}}function U(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function q(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&Y(t.year())&&1===t.month()&&29===t.date()?(i=X(i),t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),bt(i,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](i))}var Z,$=/\d/,Q=/\d\d/,K=/\d{3}/,J=/\d{4}/,tt=/[+-]?\d{6}/,et=/\d\d?/,it=/\d\d\d\d?/,ot=/\d\d\d\d\d\d?/,nt=/\d{1,3}/,rt=/\d{1,4}/,st=/[+-]?\d{1,6}/,at=/\d+/,lt=/[+-]?\d+/,ct=/Z|[+-]\d\d:?\d\d/gi,ht=/Z|[+-]\d\d(?::?\d\d)?/gi,ut=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function dt(t,e,i){Z[t]=A(e)?e:function(t,o){return t&&i?i:e}}function pt(t,e){return r(Z,t)?Z[t](e._strict,e._locale):new RegExp(gt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,o,n){return e||i||o||n})))}function gt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}Z={};var ft,mt={};function yt(t,e){var i,o=e;for("string"==typeof t&&(t=[t]),l(e)&&(o=function(t,i){i[e]=X(t)}),i=0;i<t.length;i++)mt[t[i]]=o}function vt(t,e){yt(t,function(t,i,o,n){o._w=o._w||{},e(t,o._w,o,n)})}function xt(t,e,i){null!=e&&r(mt,t)&&mt[t](e,i._a,i,t)}function bt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=(e%12+12)%12;return t+=(e-i)/12,1===i?Y(t)?29:28:31-i%7%2}ft=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},N("M",["MM",2],"Mo",function(){return this.month()+1}),N("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),N("MMMM",0,0,function(t){return this.localeData().months(this,t)}),G("month","M"),V("month",8),dt("M",et),dt("MM",et,Q),dt("MMM",function(t,e){return e.monthsShortRegex(t)}),dt("MMMM",function(t,e){return e.monthsRegex(t)}),yt(["M","MM"],function(t,e){e[1]=X(t)-1}),yt(["MMM","MMMM"],function(t,e,i,o){var n=i._locale.monthsParse(t,o,i._strict);null!=n?e[1]=n:p(i).invalidMonth=t});var wt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),_t="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),St=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ct=ut,kt=ut;function At(t,e,i){var o,n,r,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;o<12;++o)r=d([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(n=ft.call(this._shortMonthsParse,s))?n:null:-1!==(n=ft.call(this._longMonthsParse,s))?n:null:"MMM"===e?-1!==(n=ft.call(this._shortMonthsParse,s))||-1!==(n=ft.call(this._longMonthsParse,s))?n:null:-1!==(n=ft.call(this._longMonthsParse,s))||-1!==(n=ft.call(this._shortMonthsParse,s))?n:null}function Et(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=X(e);else if(!l(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),bt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function Tt(t){return null!=t?(Et(this,t),i.updateOffset(this,!0),this):U(this,"Month")}function Mt(){function t(t,e){return e.length-t.length}var e,i,o=[],n=[],r=[];for(e=0;e<12;e++)i=d([2e3,e]),o.push(this.monthsShort(i,"")),n.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(o.sort(t),n.sort(t),r.sort(t),e=0;e<12;e++)o[e]=gt(o[e]),n[e]=gt(n[e]);for(e=0;e<24;e++)r[e]=gt(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Lt(t){return Y(t)?366:365}N("Y",0,0,function(){var t=this.year();return t<=9999?M(t,4):"+"+t}),N(0,["YY",2],0,function(){return this.year()%100}),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),G("year","y"),V("year",1),dt("Y",lt),dt("YY",et,Q),dt("YYYY",rt,J),dt("YYYYY",st,tt),dt("YYYYYY",st,tt),yt(["YYYYY","YYYYYY"],0),yt("YYYY",function(t,e){e[0]=2===t.length?i.parseTwoDigitYear(t):X(t)}),yt("YY",function(t,e){e[0]=i.parseTwoDigitYear(t)}),yt("Y",function(t,e){e[0]=parseInt(t,10)}),i.parseTwoDigitYear=function(t){return X(t)+(X(t)>68?1900:2e3)};var Pt=W("FullYear",!0);function It(t,e,i,o,n,r,s){var a;return t<100&&t>=0?(a=new Date(t+400,e,i,o,n,r,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,i,o,n,r,s),a}function Dt(t){var e,i;return t<100&&t>=0?((i=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Nt(t,e,i){var o=7+e-i;return-(7+Dt(t,0,o).getUTCDay()-e)%7+o-1}function Ft(t,e,i,o,n){var r,s,a=1+7*(e-1)+(7+i-o)%7+Nt(t,o,n);return a<=0?s=Lt(r=t-1)+a:a>Lt(t)?(r=t+1,s=a-Lt(t)):(r=t,s=a),{year:r,dayOfYear:s}}function Ot(t,e,i){var o,n,r=Nt(t.year(),e,i),s=Math.floor((t.dayOfYear()-r-1)/7)+1;return s<1?o=s+Rt(n=t.year()-1,e,i):s>Rt(t.year(),e,i)?(o=s-Rt(t.year(),e,i),n=t.year()+1):(n=t.year(),o=s),{week:o,year:n}}function Rt(t,e,i){var o=Nt(t,e,i),n=Nt(t+1,e,i);return(Lt(t)-o+n)/7}function Gt(t,e){return t.slice(e,7).concat(t.slice(0,e))}N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),G("week","w"),G("isoWeek","W"),V("week",5),V("isoWeek",5),dt("w",et),dt("ww",et,Q),dt("W",et),dt("WW",et,Q),vt(["w","ww","W","WW"],function(t,e,i,o){e[o.substr(0,1)]=X(t)}),N("d",0,"do","day"),N("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),N("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),N("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),G("day","d"),G("weekday","e"),G("isoWeekday","E"),V("day",11),V("weekday",11),V("isoWeekday",11),dt("d",et),dt("e",et),dt("E",et),dt("dd",function(t,e){return e.weekdaysMinRegex(t)}),dt("ddd",function(t,e){return e.weekdaysShortRegex(t)}),dt("dddd",function(t,e){return e.weekdaysRegex(t)}),vt(["dd","ddd","dddd"],function(t,e,i,o){var n=i._locale.weekdaysParse(t,o,i._strict);null!=n?e.d=n:p(i).invalidWeekday=t}),vt(["d","e","E"],function(t,e,i,o){e[o]=X(t)});var Bt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),zt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ht="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Vt=ut,Yt=ut,jt=ut;function Xt(t,e,i){var o,n,r,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;o<7;++o)r=d([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(n=ft.call(this._weekdaysParse,s))?n:null:"ddd"===e?-1!==(n=ft.call(this._shortWeekdaysParse,s))?n:null:-1!==(n=ft.call(this._minWeekdaysParse,s))?n:null:"dddd"===e?-1!==(n=ft.call(this._weekdaysParse,s))||-1!==(n=ft.call(this._shortWeekdaysParse,s))||-1!==(n=ft.call(this._minWeekdaysParse,s))?n:null:"ddd"===e?-1!==(n=ft.call(this._shortWeekdaysParse,s))||-1!==(n=ft.call(this._weekdaysParse,s))||-1!==(n=ft.call(this._minWeekdaysParse,s))?n:null:-1!==(n=ft.call(this._minWeekdaysParse,s))||-1!==(n=ft.call(this._weekdaysParse,s))||-1!==(n=ft.call(this._shortWeekdaysParse,s))?n:null}function Wt(){function t(t,e){return e.length-t.length}var e,i,o,n,r,s=[],a=[],l=[],c=[];for(e=0;e<7;e++)i=d([2e3,1]).day(e),o=gt(this.weekdaysMin(i,"")),n=gt(this.weekdaysShort(i,"")),r=gt(this.weekdays(i,"")),s.push(o),a.push(n),l.push(r),c.push(o),c.push(n),c.push(r);s.sort(t),a.sort(t),l.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ut(){return this.hours()%12||12}function qt(t,e){N(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Zt(t,e){return e._meridiemParse}N("H",["HH",2],0,"hour"),N("h",["hh",2],0,Ut),N("k",["kk",2],0,function(){return this.hours()||24}),N("hmm",0,0,function(){return""+Ut.apply(this)+M(this.minutes(),2)}),N("hmmss",0,0,function(){return""+Ut.apply(this)+M(this.minutes(),2)+M(this.seconds(),2)}),N("Hmm",0,0,function(){return""+this.hours()+M(this.minutes(),2)}),N("Hmmss",0,0,function(){return""+this.hours()+M(this.minutes(),2)+M(this.seconds(),2)}),qt("a",!0),qt("A",!1),G("hour","h"),V("hour",13),dt("a",Zt),dt("A",Zt),dt("H",et),dt("h",et),dt("k",et),dt("HH",et,Q),dt("hh",et,Q),dt("kk",et,Q),dt("hmm",it),dt("hmmss",ot),dt("Hmm",it),dt("Hmmss",ot),yt(["H","HH"],3),yt(["k","kk"],function(t,e,i){var o=X(t);e[3]=24===o?0:o}),yt(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),yt(["h","hh"],function(t,e,i){e[3]=X(t),p(i).bigHour=!0}),yt("hmm",function(t,e,i){var o=t.length-2;e[3]=X(t.substr(0,o)),e[4]=X(t.substr(o)),p(i).bigHour=!0}),yt("hmmss",function(t,e,i){var o=t.length-4,n=t.length-2;e[3]=X(t.substr(0,o)),e[4]=X(t.substr(o,2)),e[5]=X(t.substr(n)),p(i).bigHour=!0}),yt("Hmm",function(t,e,i){var o=t.length-2;e[3]=X(t.substr(0,o)),e[4]=X(t.substr(o))}),yt("Hmmss",function(t,e,i){var o=t.length-4,n=t.length-2;e[3]=X(t.substr(0,o)),e[4]=X(t.substr(o,2)),e[5]=X(t.substr(n))});var $t,Qt=W("Hours",!0),Kt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:wt,monthsShort:_t,week:{dow:0,doy:6},weekdays:Bt,weekdaysMin:Ht,weekdaysShort:zt,meridiemParse:/[ap]\.?m?\.?/i},Jt={},te={};function ee(t,e){var i,o=Math.min(t.length,e.length);for(i=0;i<o;i+=1)if(t[i]!==e[i])return i;return o}function ie(t){return t?t.toLowerCase().replace("_","-"):t}function oe(t){var e=null;if(void 0===Jt[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=$t._abbr,require("./locale/"+t),ne(e)}catch(i){Jt[t]=null}return Jt[t]}function ne(t,e){var i;return t&&((i=a(e)?se(t):re(t,e))?$t=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),$t._abbr}function re(t,e){if(null!==e){var i,o=Kt;if(e.abbr=t,null!=Jt[t])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),o=Jt[t]._config;else if(null!=e.parentLocale)if(null!=Jt[e.parentLocale])o=Jt[e.parentLocale]._config;else{if(null==(i=oe(e.parentLocale)))return te[e.parentLocale]||(te[e.parentLocale]=[]),te[e.parentLocale].push({name:t,config:e}),null;o=i._config}return Jt[t]=new T(E(o,e)),te[t]&&te[t].forEach(function(t){re(t.name,t.config)}),ne(t),Jt[t]}return delete Jt[t],null}function se(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return $t;if(!o(t)){if(e=oe(t))return e;t=[t]}return function(t){for(var e,i,o,n,r=0;r<t.length;){for(e=(n=ie(t[r]).split("-")).length,i=(i=ie(t[r+1]))?i.split("-"):null;e>0;){if(o=oe(n.slice(0,e).join("-")))return o;if(i&&i.length>=e&&ee(n,i)>=e-1)break;e--}r++}return $t}(t)}function ae(t){var e,i=t._a;return i&&-2===p(t).overflow&&(e=i[1]<0||i[1]>11?1:i[2]<1||i[2]>bt(i[0],i[1])?2:i[3]<0||i[3]>24||24===i[3]&&(0!==i[4]||0!==i[5]||0!==i[6])?3:i[4]<0||i[4]>59?4:i[5]<0||i[5]>59?5:i[6]<0||i[6]>999?6:-1,p(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),p(t)._overflowWeeks&&-1===e&&(e=7),p(t)._overflowWeekday&&-1===e&&(e=8),p(t).overflow=e),t}var le=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ce=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/Z|[+-]\d\d(?::?\d\d)?/,ue=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],de=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pe=/^\/?Date\((-?\d+)/i,ge=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,fe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function me(t){var e,i,o,n,r,s,a=t._i,l=le.exec(a)||ce.exec(a);if(l){for(p(t).iso=!0,e=0,i=ue.length;e<i;e++)if(ue[e][1].exec(l[1])){n=ue[e][0],o=!1!==ue[e][2];break}if(null==n)return void(t._isValid=!1);if(l[3]){for(e=0,i=de.length;e<i;e++)if(de[e][1].exec(l[3])){r=(l[2]||" ")+de[e][0];break}if(null==r)return void(t._isValid=!1)}if(!o&&null!=r)return void(t._isValid=!1);if(l[4]){if(!he.exec(l[4]))return void(t._isValid=!1);s="Z"}t._f=n+(r||"")+(s||""),be(t)}else t._isValid=!1}function ye(t){var e,i,o,n,r,s,a,l,c,h=ge.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(h){if(i=h[3],o=h[2],n=h[5],r=h[6],s=h[7],a=[(l=h[4],c=parseInt(l,10),c<=49?2e3+c:c<=999?1900+c:c),_t.indexOf(i),parseInt(o,10),parseInt(n,10),parseInt(r,10)],s&&a.push(parseInt(s,10)),!function(t,e,i){return!t||zt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(i).weekdayMismatch=!0,i._isValid=!1,!1)}(h[1],e=a,t))return;t._a=e,t._tzm=function(t,e,i){if(t)return fe[t];if(e)return 0;var o=parseInt(i,10),n=o%100;return(o-n)/100*60+n}(h[8],h[9],h[10]),t._d=Dt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function ve(t,e,i){return null!=t?t:null!=e?e:i}function xe(t){var e,o,n,r,s,a=[];if(!t._d){for(n=function(t){var e=new Date(i.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,i,o,n,r,s,a,l,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(r=1,s=4,i=ve(e.GG,t._a[0],Ot(Se(),1,4).year),o=ve(e.W,1),((n=ve(e.E,1))<1||n>7)&&(l=!0)):(r=t._locale._week.dow,s=t._locale._week.doy,c=Ot(Se(),r,s),i=ve(e.gg,t._a[0],c.year),o=ve(e.w,c.week),null!=e.d?((n=e.d)<0||n>6)&&(l=!0):null!=e.e?(n=e.e+r,(e.e<0||e.e>6)&&(l=!0)):n=r),o<1||o>Rt(i,r,s)?p(t)._overflowWeeks=!0:null!=l?p(t)._overflowWeekday=!0:(a=Ft(i,o,n,r,s),t._a[0]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(s=ve(t._a[0],n[0]),(t._dayOfYear>Lt(s)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),o=Dt(s,0,t._dayOfYear),t._a[1]=o.getUTCMonth(),t._a[2]=o.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=n[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Dt:It).apply(null,a),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(p(t).weekdayMismatch=!0)}}function be(t){if(t._f!==i.ISO_8601)if(t._f!==i.RFC_2822){t._a=[],p(t).empty=!0;var e,o,n,r,s,a,l=""+t._i,c=l.length,h=0;for(n=O(t._f,t._locale).match(L)||[],e=0;e<n.length;e++)(o=(l.match(pt(r=n[e],t))||[])[0])&&((s=l.substr(0,l.indexOf(o))).length>0&&p(t).unusedInput.push(s),l=l.slice(l.indexOf(o)+o.length),h+=o.length),D[r]?(o?p(t).empty=!1:p(t).unusedTokens.push(r),xt(r,o,t)):t._strict&&!o&&p(t).unusedTokens.push(r);p(t).charsLeftOver=c-h,l.length>0&&p(t).unusedInput.push(l),t._a[3]<=12&&!0===p(t).bigHour&&t._a[3]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[3]=function(t,e,i){var o;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?((o=t.isPM(i))&&e<12&&(e+=12),o||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(a=p(t).era)&&(t._a[0]=t._locale.erasConvertYear(a,t._a[0])),xe(t),ae(t)}else ye(t);else me(t)}function we(t){var e=t._i,r=t._f;return t._locale=t._locale||se(t._l),null===e||void 0===r&&""===e?f({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),b(e)?new x(ae(e)):(c(e)?t._d=e:o(r)?function(t){var e,i,o,n,r,s,a=!1;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(n=0;n<t._f.length;n++)r=0,s=!1,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[n],be(e),g(e)&&(s=!0),r+=p(e).charsLeftOver,r+=10*p(e).unusedTokens.length,p(e).score=r,a?r<o&&(o=r,i=e):(null==o||r<o||s)&&(o=r,i=e,s&&(a=!0));u(t,i||e)}(t):r?be(t):function(t){var e=t._i;a(e)?t._d=new Date(i.now()):c(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=pe.exec(t._i);null===e?(me(t),!1===t._isValid&&(delete t._isValid,ye(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:i.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):o(e)?(t._a=h(e.slice(0),function(t){return parseInt(t,10)}),xe(t)):n(e)?function(t){if(!t._d){var e=z(t._i);t._a=h([e.year,e.month,void 0===e.day?e.date:e.day,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),xe(t)}}(t):l(e)?t._d=new Date(e):i.createFromInputFallback(t)}(t),g(t)||(t._d=null),t))}function _e(t,e,i,r,a){var l,c={};return!0!==e&&!1!==e||(r=e,e=void 0),!0!==i&&!1!==i||(r=i,i=void 0),(n(t)&&s(t)||o(t)&&0===t.length)&&(t=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=a,c._l=i,c._i=t,c._f=e,c._strict=r,(l=new x(ae(we(c))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function Se(t,e,i,o){return _e(t,e,i,o,!1)}i.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),i.ISO_8601=function(){},i.RFC_2822=function(){};var Ce=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:f()}),ke=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:f()});function Ae(t,e){var i,n;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return Se();for(i=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](i)||(i=e[n]);return i}var Ee=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Te(t){var e=z(t),i=e.year||0,o=e.quarter||0,n=e.month||0,s=e.week||e.isoWeek||0,a=e.day||0,l=e.hour||0,c=e.minute||0,h=e.second||0,u=e.millisecond||0;this._isValid=function(t){var e,i,o=!1;for(e in t)if(r(t,e)&&(-1===ft.call(Ee,e)||null!=t[e]&&isNaN(t[e])))return!1;for(i=0;i<Ee.length;++i)if(t[Ee[i]]){if(o)return!1;parseFloat(t[Ee[i]])!==X(t[Ee[i]])&&(o=!0)}return!0}(e),this._milliseconds=+u+1e3*h+6e4*c+1e3*l*60*60,this._days=+a+7*s,this._months=+n+3*o+12*i,this._data={},this._locale=se(),this._bubble()}function Me(t){return t instanceof Te}function Le(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Pe(t,e){N(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+M(~~(t/60),2)+e+M(~~t%60,2)})}Pe("Z",":"),Pe("ZZ",""),dt("Z",ht),dt("ZZ",ht),yt(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=De(ht,t)});var Ie=/([\+\-]|\d\d)/gi;function De(t,e){var i,o,n=(e||"").match(t);return null===n?null:0===(o=60*(i=((n[n.length-1]||[])+"").match(Ie)||["-",0,0])[1]+X(i[2]))?0:"+"===i[0]?o:-o}function Ne(t,e){var o,n;return e._isUTC?(o=e.clone(),n=(b(t)||c(t)?t.valueOf():Se(t).valueOf())-o.valueOf(),o._d.setTime(o._d.valueOf()+n),i.updateOffset(o,!1),o):Se(t).local()}function Fe(t){return-Math.round(t._d.getTimezoneOffset())}function Oe(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Re=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ge=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Be(t,e){var i,o,n,s,a,c,h=t,u=null;return Me(t)?h={ms:t._milliseconds,d:t._days,M:t._months}:l(t)||!isNaN(+t)?(h={},e?h[e]=+t:h.milliseconds=+t):(u=Re.exec(t))?(i="-"===u[1]?-1:1,h={y:0,d:X(u[2])*i,h:X(u[3])*i,m:X(u[4])*i,s:X(u[5])*i,ms:X(Le(1e3*u[6]))*i}):(u=Ge.exec(t))?h={y:ze(u[2],i="-"===u[1]?-1:1),M:ze(u[3],i),w:ze(u[4],i),d:ze(u[5],i),h:ze(u[6],i),m:ze(u[7],i),s:ze(u[8],i)}:null==h?h={}:"object"==typeof h&&("from"in h||"to"in h)&&(s=Se(h.from),a=Se(h.to),n=s.isValid()&&a.isValid()?(a=Ne(a,s),s.isBefore(a)?c=He(s,a):((c=He(a,s)).milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0},(h={}).ms=n.milliseconds,h.M=n.months),o=new Te(h),Me(t)&&r(t,"_locale")&&(o._locale=t._locale),Me(t)&&r(t,"_isValid")&&(o._isValid=t._isValid),o}function ze(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function He(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Ve(t,e){return function(i,o){var n;return null===o||isNaN(+o)||(k(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=i,i=o,o=n),Ye(this,Be(i,o),t),this}}function Ye(t,e,o,n){var r=e._milliseconds,s=Le(e._days),a=Le(e._months);t.isValid()&&(n=null==n||n,a&&Et(t,U(t,"Month")+a*o),s&&q(t,"Date",U(t,"Date")+s*o),r&&t._d.setTime(t._d.valueOf()+r*o),n&&i.updateOffset(t,s||a))}Be.fn=Te.prototype,Be.invalid=function(){return Be(NaN)};var je=Ve(1,"add"),Xe=Ve(-1,"subtract");function We(t){return"string"==typeof t||t instanceof String}function Ue(t){return b(t)||c(t)||We(t)||l(t)||function(t){var e=o(t),i=!1;return e&&(i=0===t.filter(function(e){return!l(e)&&We(t)}).length),e&&i}(t)||function(t){var e,i=n(t)&&!s(t),o=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<a.length;e+=1)o=o||r(t,a[e]);return i&&o}(t)||null==t}function qe(t){var e,i=n(t)&&!s(t),o=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<a.length;e+=1)o=o||r(t,a[e]);return i&&o}function Ze(t,e){if(t.date()<e.date())return-Ze(e,t);var i=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(i,"months");return-(i+(e-o<0?(e-o)/(o-t.clone().add(i-1,"months")):(e-o)/(t.clone().add(i+1,"months")-o)))||0}function $e(t){var e;return void 0===t?this._locale._abbr:(null!=(e=se(t))&&(this._locale=e),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Qe=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function Ke(){return this._locale}var Je=1e3,ti=6e4,ei=36e5,ii=126227808e5;function oi(t,e){return(t%e+e)%e}function ni(t,e,i){return t<100&&t>=0?new Date(t+400,e,i)-ii:new Date(t,e,i).valueOf()}function ri(t,e,i){return t<100&&t>=0?Date.UTC(t+400,e,i)-ii:Date.UTC(t,e,i)}function si(t,e){return e.erasAbbrRegex(t)}function ai(){var t,e,i=[],o=[],n=[],r=[],s=this.eras();for(t=0,e=s.length;t<e;++t)o.push(gt(s[t].name)),i.push(gt(s[t].abbr)),n.push(gt(s[t].narrow)),r.push(gt(s[t].name)),r.push(gt(s[t].abbr)),r.push(gt(s[t].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+o.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function li(t,e){N(0,[t,t.length],0,e)}function ci(t,e,i,o,n){var r;return null==t?Ot(this,o,n).year:(e>(r=Rt(t,o,n))&&(e=r),hi.call(this,t,e,i,o,n))}function hi(t,e,i,o,n){var r=Ft(t,e,i,o,n),s=Dt(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}N("N",0,0,"eraAbbr"),N("NN",0,0,"eraAbbr"),N("NNN",0,0,"eraAbbr"),N("NNNN",0,0,"eraName"),N("NNNNN",0,0,"eraNarrow"),N("y",["y",1],"yo","eraYear"),N("y",["yy",2],0,"eraYear"),N("y",["yyy",3],0,"eraYear"),N("y",["yyyy",4],0,"eraYear"),dt("N",si),dt("NN",si),dt("NNN",si),dt("NNNN",function(t,e){return e.erasNameRegex(t)}),dt("NNNNN",function(t,e){return e.erasNarrowRegex(t)}),yt(["N","NN","NNN","NNNN","NNNNN"],function(t,e,i,o){var n=i._locale.erasParse(t,o,i._strict);n?p(i).era=n:p(i).invalidEra=t}),dt("y",at),dt("yy",at),dt("yyy",at),dt("yyyy",at),dt("yo",function(t,e){return e._eraYearOrdinalRegex||at}),yt(["y","yy","yyy","yyyy"],0),yt(["yo"],function(t,e,i,o){var n;i._locale._eraYearOrdinalRegex&&(n=t.match(i._locale._eraYearOrdinalRegex)),e[0]=i._locale.eraYearOrdinalParse?i._locale.eraYearOrdinalParse(t,n):parseInt(t,10)}),N(0,["gg",2],0,function(){return this.weekYear()%100}),N(0,["GG",2],0,function(){return this.isoWeekYear()%100}),li("gggg","weekYear"),li("ggggg","weekYear"),li("GGGG","isoWeekYear"),li("GGGGG","isoWeekYear"),G("weekYear","gg"),G("isoWeekYear","GG"),V("weekYear",1),V("isoWeekYear",1),dt("G",lt),dt("g",lt),dt("GG",et,Q),dt("gg",et,Q),dt("GGGG",rt,J),dt("gggg",rt,J),dt("GGGGG",st,tt),dt("ggggg",st,tt),vt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,o){e[o.substr(0,2)]=X(t)}),vt(["gg","GG"],function(t,e,o,n){e[n]=i.parseTwoDigitYear(t)}),N("Q",0,"Qo","quarter"),G("quarter","Q"),V("quarter",7),dt("Q",$),yt("Q",function(t,e){e[1]=3*(X(t)-1)}),N("D",["DD",2],"Do","date"),G("date","D"),V("date",9),dt("D",et),dt("DD",et,Q),dt("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),yt(["D","DD"],2),yt("Do",function(t,e){e[2]=X(t.match(et)[0])});var ui=W("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear"),G("dayOfYear","DDD"),V("dayOfYear",4),dt("DDD",nt),dt("DDDD",K),yt(["DDD","DDDD"],function(t,e,i){i._dayOfYear=X(t)}),N("m",["mm",2],0,"minute"),G("minute","m"),V("minute",14),dt("m",et),dt("mm",et,Q),yt(["m","mm"],4);var di=W("Minutes",!1);N("s",["ss",2],0,"second"),G("second","s"),V("second",15),dt("s",et),dt("ss",et,Q),yt(["s","ss"],5);var pi,gi,fi=W("Seconds",!1);for(N("S",0,0,function(){return~~(this.millisecond()/100)}),N(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,function(){return 10*this.millisecond()}),N(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),N(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),N(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),N(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),N(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),G("millisecond","ms"),V("millisecond",16),dt("S",nt,$),dt("SS",nt,Q),dt("SSS",nt,K),pi="SSSS";pi.length<=9;pi+="S")dt(pi,at);function mi(t,e){e[6]=X(1e3*("0."+t))}for(pi="S";pi.length<=9;pi+="S")yt(pi,mi);gi=W("Milliseconds",!1),N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var yi=x.prototype;function vi(t){return t}yi.add=je,yi.calendar=function(t,e){1===arguments.length&&(arguments[0]?Ue(arguments[0])?(t=arguments[0],e=void 0):qe(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var o=t||Se(),n=Ne(o,this).startOf("day"),r=i.calendarFormat(this,n)||"sameElse",s=e&&(A(e[r])?e[r].call(this,o):e[r]);return this.format(s||this.localeData().calendar(r,this,Se(o)))},yi.clone=function(){return new x(this)},yi.diff=function(t,e,i){var o,n,r;if(!this.isValid())return NaN;if(!(o=Ne(t,this)).isValid())return NaN;switch(n=6e4*(o.utcOffset()-this.utcOffset()),e=B(e)){case"year":r=Ze(this,o)/12;break;case"month":r=Ze(this,o);break;case"quarter":r=Ze(this,o)/3;break;case"second":r=(this-o)/1e3;break;case"minute":r=(this-o)/6e4;break;case"hour":r=(this-o)/36e5;break;case"day":r=(this-o-n)/864e5;break;case"week":r=(this-o-n)/6048e5;break;default:r=this-o}return i?r:j(r)},yi.endOf=function(t){var e,o;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;switch(o=this._isUTC?ri:ni,t){case"year":e=o(this.year()+1,0,1)-1;break;case"quarter":e=o(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=o(this.year(),this.month()+1,1)-1;break;case"week":e=o(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=o(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=o(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=ei-oi(e+(this._isUTC?0:this.utcOffset()*ti),ei)-1;break;case"minute":e=this._d.valueOf(),e+=ti-oi(e,ti)-1;break;case"second":e=this._d.valueOf(),e+=Je-oi(e,Je)-1}return this._d.setTime(e),i.updateOffset(this,!0),this},yi.format=function(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var e=F(this,t);return this.localeData().postformat(e)},yi.from=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||Se(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},yi.fromNow=function(t){return this.from(Se(),t)},yi.to=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||Se(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},yi.toNow=function(t){return this.to(Se(),t)},yi.get=function(t){return A(this[t=B(t)])?this[t]():this},yi.invalidAt=function(){return p(this).overflow},yi.isAfter=function(t,e){var i=b(t)?t:Se(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=B(e)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},yi.isBefore=function(t,e){var i=b(t)?t:Se(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=B(e)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},yi.isBetween=function(t,e,i,o){var n=b(t)?t:Se(t),r=b(e)?e:Se(e);return!!(this.isValid()&&n.isValid()&&r.isValid())&&("("===(o=o||"()")[0]?this.isAfter(n,i):!this.isBefore(n,i))&&(")"===o[1]?this.isBefore(r,i):!this.isAfter(r,i))},yi.isSame=function(t,e){var i,o=b(t)?t:Se(t);return!(!this.isValid()||!o.isValid())&&("millisecond"===(e=B(e)||"millisecond")?this.valueOf()===o.valueOf():(i=o.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},yi.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},yi.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},yi.isValid=function(){return g(this)},yi.lang=Qe,yi.locale=$e,yi.localeData=Ke,yi.max=ke,yi.min=Ce,yi.parsingFlags=function(){return u({},p(this))},yi.set=function(t,e){if("object"==typeof t){var i,o=function(t){var e,i=[];for(e in t)r(t,e)&&i.push({unit:e,priority:H[e]});return i.sort(function(t,e){return t.priority-e.priority}),i}(t=z(t));for(i=0;i<o.length;i++)this[o[i].unit](t[o[i].unit])}else if(A(this[t=B(t)]))return this[t](e);return this},yi.startOf=function(t){var e,o;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;switch(o=this._isUTC?ri:ni,t){case"year":e=o(this.year(),0,1);break;case"quarter":e=o(this.year(),this.month()-this.month()%3,1);break;case"month":e=o(this.year(),this.month(),1);break;case"week":e=o(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=o(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=o(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=oi(e+(this._isUTC?0:this.utcOffset()*ti),ei);break;case"minute":e=this._d.valueOf(),e-=oi(e,ti);break;case"second":e=this._d.valueOf(),e-=oi(e,Je)}return this._d.setTime(e),i.updateOffset(this,!0),this},yi.subtract=Xe,yi.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},yi.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},yi.toDate=function(){return new Date(this.valueOf())},yi.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?F(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",F(i,"Z")):F(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},yi.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,i="moment",o="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),t="["+i+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+o+'[")]')},"undefined"!=typeof Symbol&&null!=Symbol.for&&(yi[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),yi.toJSON=function(){return this.isValid()?this.toISOString():null},yi.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},yi.unix=function(){return Math.floor(this.valueOf()/1e3)},yi.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},yi.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},yi.eraName=function(){var t,e,i,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t){if(i=this.clone().startOf("day").valueOf(),o[t].since<=i&&i<=o[t].until)return o[t].name;if(o[t].until<=i&&i<=o[t].since)return o[t].name}return""},yi.eraNarrow=function(){var t,e,i,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t){if(i=this.clone().startOf("day").valueOf(),o[t].since<=i&&i<=o[t].until)return o[t].narrow;if(o[t].until<=i&&i<=o[t].since)return o[t].narrow}return""},yi.eraAbbr=function(){var t,e,i,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t){if(i=this.clone().startOf("day").valueOf(),o[t].since<=i&&i<=o[t].until)return o[t].abbr;if(o[t].until<=i&&i<=o[t].since)return o[t].abbr}return""},yi.eraYear=function(){var t,e,o,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(o=r[t].since<=r[t].until?1:-1,n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return(this.year()-i(r[t].since).year())*o+r[t].offset;return this.year()},yi.year=Pt,yi.isLeapYear=function(){return Y(this.year())},yi.weekYear=function(t){return ci.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},yi.isoWeekYear=function(t){return ci.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},yi.quarter=yi.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},yi.month=Tt,yi.daysInMonth=function(){return bt(this.year(),this.month())},yi.week=yi.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},yi.isoWeek=yi.isoWeeks=function(t){var e=Ot(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},yi.weeksInYear=function(){var t=this.localeData()._week;return Rt(this.year(),t.dow,t.doy)},yi.weeksInWeekYear=function(){var t=this.localeData()._week;return Rt(this.weekYear(),t.dow,t.doy)},yi.isoWeeksInYear=function(){return Rt(this.year(),1,4)},yi.isoWeeksInISOWeekYear=function(){return Rt(this.isoWeekYear(),1,4)},yi.date=ui,yi.day=yi.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},yi.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},yi.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},yi.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},yi.hour=yi.hours=Qt,yi.minute=yi.minutes=di,yi.second=yi.seconds=fi,yi.millisecond=yi.milliseconds=gi,yi.utcOffset=function(t,e,o){var n,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=De(ht,t)))return this}else Math.abs(t)<16&&!o&&(t*=60);return!this._isUTC&&e&&(n=Fe(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==t&&(!e||this._changeInProgress?Ye(this,Be(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Fe(this)},yi.utc=function(t){return this.utcOffset(0,t)},yi.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this},yi.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=De(ct,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},yi.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60==0)},yi.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},yi.isLocal=function(){return!!this.isValid()&&!this._isUTC},yi.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},yi.isUtc=Oe,yi.isUTC=Oe,yi.zoneAbbr=function(){return this._isUTC?"UTC":""},yi.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},yi.dates=_("dates accessor is deprecated. Use date instead.",ui),yi.months=_("months accessor is deprecated. Use month instead",Tt),yi.years=_("years accessor is deprecated. Use year instead",Pt),yi.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),yi.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t,e={};return v(e,this),(e=we(e))._a?(t=e._isUTC?d(e._a):Se(e._a),this._isDSTShifted=this.isValid()&&function(t,e,i){var o,n=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(o=0;o<n;o++)X(t[o])!==X(e[o])&&s++;return s+r}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var xi=T.prototype;function bi(t,e,i,o){var n=se(),r=d().set(o,e);return n[i](r,t)}function wi(t,e,i){if(l(t)&&(e=t,t=void 0),t=t||"",null!=e)return bi(t,e,i,"month");var o,n=[];for(o=0;o<12;o++)n[o]=bi(t,o,i,"month");return n}function _i(t,e,i,o){"boolean"==typeof t?(l(e)&&(i=e,e=void 0),e=e||""):(i=e=t,t=!1,l(e)&&(i=e,e=void 0),e=e||"");var n,r=se(),s=t?r._week.dow:0,a=[];if(null!=i)return bi(e,(i+s)%7,o,"day");for(n=0;n<7;n++)a[n]=bi(e,(n+s)%7,o,"day");return a}xi.calendar=function(t,e,i){var o=this._calendar[t]||this._calendar.sameElse;return A(o)?o.call(e,i):o},xi.longDateFormat=function(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.match(L).map(function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t}).join(""),this._longDateFormat[t])},xi.invalidDate=function(){return this._invalidDate},xi.ordinal=function(t){return this._ordinal.replace("%d",t)},xi.preparse=vi,xi.postformat=vi,xi.relativeTime=function(t,e,i,o){var n=this._relativeTime[i];return A(n)?n(t,e,i,o):n.replace(/%d/i,t)},xi.pastFuture=function(t,e){var i=this._relativeTime[t>0?"future":"past"];return A(i)?i(e):i.replace(/%s/i,e)},xi.set=function(t){var e,i;for(i in t)r(t,i)&&(A(e=t[i])?this[i]=e:this["_"+i]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},xi.eras=function(t,e){var o,n,r,s=this._eras||se("en")._eras;for(o=0,n=s.length;o<n;++o){switch(typeof s[o].since){case"string":r=i(s[o].since).startOf("day"),s[o].since=r.valueOf()}switch(typeof s[o].until){case"undefined":s[o].until=1/0;break;case"string":r=i(s[o].until).startOf("day").valueOf(),s[o].until=r.valueOf()}}return s},xi.erasParse=function(t,e,i){var o,n,r,s,a,l=this.eras();for(t=t.toUpperCase(),o=0,n=l.length;o<n;++o)if(r=l[o].name.toUpperCase(),s=l[o].abbr.toUpperCase(),a=l[o].narrow.toUpperCase(),i)switch(e){case"N":case"NN":case"NNN":if(s===t)return l[o];break;case"NNNN":if(r===t)return l[o];break;case"NNNNN":if(a===t)return l[o]}else if([r,s,a].indexOf(t)>=0)return l[o]},xi.erasConvertYear=function(t,e){var o=t.since<=t.until?1:-1;return void 0===e?i(t.since).year():i(t.since).year()+(e-t.offset)*o},xi.erasAbbrRegex=function(t){return r(this,"_erasAbbrRegex")||ai.call(this),t?this._erasAbbrRegex:this._erasRegex},xi.erasNameRegex=function(t){return r(this,"_erasNameRegex")||ai.call(this),t?this._erasNameRegex:this._erasRegex},xi.erasNarrowRegex=function(t){return r(this,"_erasNarrowRegex")||ai.call(this),t?this._erasNarrowRegex:this._erasRegex},xi.months=function(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||St).test(e)?"format":"standalone"][t.month()]:o(this._months)?this._months:this._months.standalone},xi.monthsShort=function(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[St.test(e)?"format":"standalone"][t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},xi.monthsParse=function(t,e,i){var o,n,r;if(this._monthsParseExact)return At.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),o=0;o<12;o++){if(n=d([2e3,o]),i&&!this._longMonthsParse[o]&&(this._longMonthsParse[o]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[o]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[o]||(r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[o]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[o].test(t))return o;if(i&&"MMM"===e&&this._shortMonthsParse[o].test(t))return o;if(!i&&this._monthsParse[o].test(t))return o}},xi.monthsRegex=function(t){return this._monthsParseExact?(r(this,"_monthsRegex")||Mt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(r(this,"_monthsRegex")||(this._monthsRegex=kt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},xi.monthsShortRegex=function(t){return this._monthsParseExact?(r(this,"_monthsRegex")||Mt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(r(this,"_monthsShortRegex")||(this._monthsShortRegex=Ct),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},xi.week=function(t){return Ot(t,this._week.dow,this._week.doy).week},xi.firstDayOfYear=function(){return this._week.doy},xi.firstDayOfWeek=function(){return this._week.dow},xi.weekdays=function(t,e){var i=o(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Gt(i,this._week.dow):t?i[t.day()]:i},xi.weekdaysMin=function(t){return!0===t?Gt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},xi.weekdaysShort=function(t){return!0===t?Gt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},xi.weekdaysParse=function(t,e,i){var o,n,r;if(this._weekdaysParseExact)return Xt.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),o=0;o<7;o++){if(n=d([2e3,1]).day(o),i&&!this._fullWeekdaysParse[o]&&(this._fullWeekdaysParse[o]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[o]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[o]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[o]||(r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[o]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[o].test(t))return o;if(i&&"ddd"===e&&this._shortWeekdaysParse[o].test(t))return o;if(i&&"dd"===e&&this._minWeekdaysParse[o].test(t))return o;if(!i&&this._weekdaysParse[o].test(t))return o}},xi.weekdaysRegex=function(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(r(this,"_weekdaysRegex")||(this._weekdaysRegex=Vt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},xi.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(r(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Yt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},xi.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(r(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=jt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},xi.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},xi.meridiem=function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},ne("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===X(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),i.lang=_("moment.lang is deprecated. Use moment.locale instead.",ne),i.langData=_("moment.langData is deprecated. Use moment.localeData instead.",se);var Si=Math.abs;function Ci(t,e,i,o){var n=Be(e,i);return t._milliseconds+=o*n._milliseconds,t._days+=o*n._days,t._months+=o*n._months,t._bubble()}function ki(t){return t<0?Math.floor(t):Math.ceil(t)}function Ai(t){return 4800*t/146097}function Ei(t){return 146097*t/4800}function Ti(t){return function(){return this.as(t)}}var Mi=Ti("ms"),Li=Ti("s"),Pi=Ti("m"),Ii=Ti("h"),Di=Ti("d"),Ni=Ti("w"),Fi=Ti("M"),Oi=Ti("Q"),Ri=Ti("y");function Gi(t){return function(){return this.isValid()?this._data[t]:NaN}}var Bi=Gi("milliseconds"),zi=Gi("seconds"),Hi=Gi("minutes"),Vi=Gi("hours"),Yi=Gi("days"),ji=Gi("months"),Xi=Gi("years"),Wi=Math.round,Ui={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function qi(t,e,i,o,n){return n.relativeTime(e||1,!!i,t,o)}var Zi=Math.abs;function $i(t){return(t>0)-(t<0)||+t}function Qi(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,o,n,r,s,a,l=Zi(this._milliseconds)/1e3,c=Zi(this._days),h=Zi(this._months),u=this.asSeconds();return u?(t=j(l/60),e=j(t/60),l%=60,t%=60,i=j(h/12),h%=12,o=l?l.toFixed(3).replace(/\.?0+$/,""):"",n=u<0?"-":"",r=$i(this._months)!==$i(u)?"-":"",s=$i(this._days)!==$i(u)?"-":"",a=$i(this._milliseconds)!==$i(u)?"-":"",n+"P"+(i?r+i+"Y":"")+(h?r+h+"M":"")+(c?s+c+"D":"")+(e||t||l?"T":"")+(e?a+e+"H":"")+(t?a+t+"M":"")+(l?a+o+"S":"")):"P0D"}var Ki=Te.prototype;return Ki.isValid=function(){return this._isValid},Ki.abs=function(){var t=this._data;return this._milliseconds=Si(this._milliseconds),this._days=Si(this._days),this._months=Si(this._months),t.milliseconds=Si(t.milliseconds),t.seconds=Si(t.seconds),t.minutes=Si(t.minutes),t.hours=Si(t.hours),t.months=Si(t.months),t.years=Si(t.years),this},Ki.add=function(t,e){return Ci(this,t,e,1)},Ki.subtract=function(t,e){return Ci(this,t,e,-1)},Ki.as=function(t){if(!this.isValid())return NaN;var e,i,o=this._milliseconds;if("month"===(t=B(t))||"quarter"===t||"year"===t)switch(i=this._months+Ai(e=this._days+o/864e5),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(Ei(this._months)),t){case"week":return e/7+o/6048e5;case"day":return e+o/864e5;case"hour":return 24*e+o/36e5;case"minute":return 1440*e+o/6e4;case"second":return 86400*e+o/1e3;case"millisecond":return Math.floor(864e5*e)+o;default:throw new Error("Unknown unit "+t)}},Ki.asMilliseconds=Mi,Ki.asSeconds=Li,Ki.asMinutes=Pi,Ki.asHours=Ii,Ki.asDays=Di,Ki.asWeeks=Ni,Ki.asMonths=Fi,Ki.asQuarters=Oi,Ki.asYears=Ri,Ki.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*X(this._months/12):NaN},Ki._bubble=function(){var t,e,i,o,n,r=this._milliseconds,s=this._days,a=this._months,l=this._data;return r>=0&&s>=0&&a>=0||r<=0&&s<=0&&a<=0||(r+=864e5*ki(Ei(a)+s),s=0,a=0),l.milliseconds=r%1e3,t=j(r/1e3),l.seconds=t%60,e=j(t/60),l.minutes=e%60,i=j(e/60),l.hours=i%24,s+=j(i/24),a+=n=j(Ai(s)),s-=ki(Ei(n)),o=j(a/12),a%=12,l.days=s,l.months=a,l.years=o,this},Ki.clone=function(){return Be(this)},Ki.get=function(t){return t=B(t),this.isValid()?this[t+"s"]():NaN},Ki.milliseconds=Bi,Ki.seconds=zi,Ki.minutes=Hi,Ki.hours=Vi,Ki.days=Yi,Ki.weeks=function(){return j(this.days()/7)},Ki.months=ji,Ki.years=Xi,Ki.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var i,o,n=!1,r=Ui;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(n=t),"object"==typeof e&&(r=Object.assign({},Ui,e),null!=e.s&&null==e.ss&&(r.ss=e.s-1)),o=function(t,e,i,o){var n=Be(t).abs(),r=Wi(n.as("s")),s=Wi(n.as("m")),a=Wi(n.as("h")),l=Wi(n.as("d")),c=Wi(n.as("M")),h=Wi(n.as("w")),u=Wi(n.as("y")),d=r<=i.ss&&["s",r]||r<i.s&&["ss",r]||s<=1&&["m"]||s<i.m&&["mm",s]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(d=d||h<=1&&["w"]||h<i.w&&["ww",h]),(d=d||c<=1&&["M"]||c<i.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=e,d[3]=+t>0,d[4]=o,qi.apply(null,d)}(this,!n,r,i=this.localeData()),n&&(o=i.pastFuture(+this,o)),i.postformat(o)},Ki.toISOString=Qi,Ki.toString=Qi,Ki.toJSON=Qi,Ki.locale=$e,Ki.localeData=Ke,Ki.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qi),Ki.lang=Qe,N("X",0,0,"unix"),N("x",0,0,"valueOf"),dt("x",lt),dt("X",/[+-]?\d+(\.\d{1,3})?/),yt("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t))}),yt("x",function(t,e,i){i._d=new Date(X(t))}),i.version="2.29.1",t=Se,i.fn=yi,i.min=function(){var t=[].slice.call(arguments,0);return Ae("isBefore",t)},i.max=function(){var t=[].slice.call(arguments,0);return Ae("isAfter",t)},i.now=function(){return Date.now?Date.now():+new Date},i.utc=d,i.unix=function(t){return Se(1e3*t)},i.months=function(t,e){return wi(t,e,"months")},i.isDate=c,i.locale=ne,i.invalid=f,i.duration=Be,i.isMoment=b,i.weekdays=function(t,e,i){return _i(t,e,i,"weekdays")},i.parseZone=function(){return Se.apply(null,arguments).parseZone()},i.localeData=se,i.isDuration=Me,i.monthsShort=function(t,e){return wi(t,e,"monthsShort")},i.weekdaysMin=function(t,e,i){return _i(t,e,i,"weekdaysMin")},i.defineLocale=re,i.updateLocale=function(t,e){if(null!=e){var i,o,n=Kt;null!=Jt[t]&&null!=Jt[t].parentLocale?Jt[t].set(E(Jt[t]._config,e)):(null!=(o=oe(t))&&(n=o._config),e=E(n,e),null==o&&(e.abbr=t),(i=new T(e)).parentLocale=Jt[t],Jt[t]=i),ne(t)}else null!=Jt[t]&&(null!=Jt[t].parentLocale?(Jt[t]=Jt[t].parentLocale,t===ne()&&ne(t)):null!=Jt[t]&&delete Jt[t]);return Jt[t]},i.locales=function(){return S(Jt)},i.weekdaysShort=function(t,e,i){return _i(t,e,i,"weekdaysShort")},i.normalizeUnits=B,i.relativeTimeRounding=function(t){return void 0===t?Wi:"function"==typeof t&&(Wi=t,!0)},i.relativeTimeThreshold=function(t,e){return void 0!==Ui[t]&&(void 0===e?Ui[t]:(Ui[t]=e,"s"===t&&(Ui.ss=e-1),!0))},i.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},i.prototype=yi,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).PerfectScrollbar=e()}(this,function(){"use strict";var t=Math.abs,e=Math.floor;function i(t){return getComputedStyle(t)}function o(t,e){for(var i in e){var o=e[i];"number"==typeof o&&(o+="px"),t.style[i]=o}return t}function n(t){var e=document.createElement("div");return e.className=t,e}function r(t,e){if(!x)throw new Error("No element matching method supported");return x.call(t,e)}function s(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function a(t,e){return Array.prototype.filter.call(t.children,function(t){return r(t,e)})}function l(t,e){var i=t.element.classList,o=b.state.scrolling(e);i.contains(o)?clearTimeout(w[e]):i.add(o)}function c(t,e){w[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(b.state.scrolling(e))},t.settings.scrollingThreshold)}function h(t,e){l(t,e),c(t,e)}function u(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function d(t,e,i,o,n){var r;if(void 0===o&&(o=!0),void 0===n&&(n=!1),"top"===e)r=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");r=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(t,e,i,o,n){var r=i[0],s=i[1],a=i[2],l=i[3],c=i[4],d=i[5];void 0===o&&(o=!0),void 0===n&&(n=!1);var p=t.element;t.reach[l]=null,1>p[a]&&(t.reach[l]="start"),p[a]>t[r]-t[s]-1&&(t.reach[l]="end"),e&&(p.dispatchEvent(u("ps-scroll-"+l)),0>e?p.dispatchEvent(u("ps-scroll-"+c)):0<e&&p.dispatchEvent(u("ps-scroll-"+d)),o&&h(t,l)),t.reach[l]&&(e||n)&&p.dispatchEvent(u("ps-"+l+"-reach-"+t.reach[l]))}(t,i,r,o,n)}function p(t){return parseInt(t,10)||0}function g(t){return r(t,"input,[contenteditable]")||r(t,"select,[contenteditable]")||r(t,"textarea,[contenteditable]")||r(t,"button,[contenteditable]")}function f(t){var i=Math.ceil,o=t.element,n=e(o.scrollTop),r=o.getBoundingClientRect();t.containerWidth=i(r.width),t.containerHeight=i(r.height),t.contentWidth=o.scrollWidth,t.contentHeight=o.scrollHeight,o.contains(t.scrollbarXRail)||(a(o,b.element.rail("x")).forEach(function(t){return s(t)}),o.appendChild(t.scrollbarXRail)),o.contains(t.scrollbarYRail)||(a(o,b.element.rail("y")).forEach(function(t){return s(t)}),o.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=m(t,p(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=p((t.negativeScrollAdjustment+o.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=m(t,p(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=p(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),y(o,t),t.scrollbarXActive?o.classList.add(b.state.active("x")):(o.classList.remove(b.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,o.scrollLeft=!0===t.isRtl?t.contentWidth:0),t.scrollbarYActive?o.classList.add(b.state.active("y")):(o.classList.remove(b.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,o.scrollTop=0)}function m(t,e){var i=Math.min,o=Math.max;return t.settings.minScrollbarLength&&(e=o(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=i(e,t.settings.maxScrollbarLength)),e}function y(t,i){var n={width:i.railXWidth},r=e(t.scrollTop);n.left=i.isRtl?i.negativeScrollAdjustment+t.scrollLeft+i.containerWidth-i.contentWidth:t.scrollLeft,i.isScrollbarXUsingBottom?n.bottom=i.scrollbarXBottom-r:n.top=i.scrollbarXTop+r,o(i.scrollbarXRail,n);var s={top:r,height:i.railYHeight};i.isScrollbarYUsingRight?s.right=i.isRtl?i.contentWidth-(i.negativeScrollAdjustment+t.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth-9:i.scrollbarYRight-t.scrollLeft:s.left=i.isRtl?i.negativeScrollAdjustment+t.scrollLeft+2*i.containerWidth-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth:i.scrollbarYLeft+t.scrollLeft,o(i.scrollbarYRail,s),o(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth}),o(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth})}function v(t,e){function i(e){e.touches&&e.touches[0]&&(e[a]=e.touches[0].pageY),y[p]=v+w*(e[a]-x),l(t,g),f(t),e.stopPropagation(),e.preventDefault()}function o(){c(t,g),t[m].classList.remove(b.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",i)}function n(e,n){v=y[p],n&&e.touches&&(e[a]=e.touches[0].pageY),x=e[a],w=(t[s]-t[r])/(t[h]-t[d]),n?t.event.bind(t.ownerDocument,"touchmove",i):(t.event.bind(t.ownerDocument,"mousemove",i),t.event.once(t.ownerDocument,"mouseup",o),e.preventDefault()),t[m].classList.add(b.state.clicking),e.stopPropagation()}var r=e[0],s=e[1],a=e[2],h=e[3],u=e[4],d=e[5],p=e[6],g=e[7],m=e[8],y=t.element,v=null,x=null,w=null;t.event.bind(t[u],"mousedown",function(t){n(t)}),t.event.bind(t[u],"touchstart",function(t){n(t,!0)})}var x="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),b={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},w={x:null,y:null},_=function(t){this.element=t,this.handlers={}},S={isEmpty:{configurable:!0}};_.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},_.prototype.unbind=function(t,e){var i=this;this.handlers[t]=this.handlers[t].filter(function(o){return!(!e||o===e)||(i.element.removeEventListener(t,o,!1),!1)})},_.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},S.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return 0===t.handlers[e].length})},Object.defineProperties(_.prototype,S);var C=function(){this.eventElements=[]};C.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return e||(e=new _(t),this.eventElements.push(e)),e},C.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i)},C.prototype.unbind=function(t,e,i){var o=this.eventElement(t);o.unbind(e,i),o.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(o),1)},C.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]},C.prototype.once=function(t,e,i){var o=this.eventElement(t),n=function(t){o.unbind(e,n),i(t)};o.bind(e,n)};var k={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&0<window.navigator.maxTouchPoints||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},A={"click-rail":function(t){t.event.bind(t.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var i=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top;t.element.scrollTop+=(i>t.scrollbarYTop?1:-1)*t.containerHeight,f(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var i=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left;t.element.scrollLeft+=(i>t.scrollbarXLeft?1:-1)*t.containerWidth,f(t),e.stopPropagation()})},"drag-thumb":function(t){v(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),v(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(t){var i=t.element,o=function(){return r(i,":hover")},n=function(){return r(t.scrollbarX,":focus")||r(t.scrollbarY,":focus")};t.event.bind(t.ownerDocument,"keydown",function(r){if(!(r.isDefaultPrevented&&r.isDefaultPrevented()||r.defaultPrevented)&&(o()||n())){var s=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(s){if("IFRAME"===s.tagName)s=s.contentDocument.activeElement;else for(;s.shadowRoot;)s=s.shadowRoot.activeElement;if(g(s))return}var a=0,l=0;switch(r.which){case 37:a=r.metaKey?-t.contentWidth:r.altKey?-t.containerWidth:-30;break;case 38:l=r.metaKey?t.contentHeight:r.altKey?t.containerHeight:30;break;case 39:a=r.metaKey?t.contentWidth:r.altKey?t.containerWidth:30;break;case 40:l=r.metaKey?-t.contentHeight:r.altKey?-t.containerHeight:-30;break;case 32:l=r.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&0!==a||t.settings.suppressScrollY&&0!==l||(i.scrollTop-=l,i.scrollLeft+=a,f(t),function(o,n){var r=e(i.scrollTop);if(0===o){if(!t.scrollbarYActive)return!1;if(0===r&&0<n||r>=t.contentHeight-t.containerHeight&&0>n)return!t.settings.wheelPropagation}var s=i.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===s&&0>o||s>=t.contentWidth-t.containerWidth&&0<o)return!t.settings.wheelPropagation}return!0}(a,l)&&r.preventDefault())}})},wheel:function(o){function n(t,e,o){if(!k.isWebKit&&s.querySelector("select:focus"))return!0;if(!s.contains(t))return!1;for(var n=t;n&&n!==s;){if(n.classList.contains(b.element.consuming))return!0;var r=i(n);if(o&&r.overflowY.match(/(scroll|auto)/)){var a=n.scrollHeight-n.clientHeight;if(0<a&&(0<n.scrollTop&&0>o||n.scrollTop<a&&0<o))return!0}if(e&&r.overflowX.match(/(scroll|auto)/)){var l=n.scrollWidth-n.clientWidth;if(0<l&&(0<n.scrollLeft&&0>e||n.scrollLeft<l&&0<e))return!0}n=n.parentNode}return!1}function r(i){var r=function(t){var e=t.deltaX,i=-1*t.deltaY;return(void 0===e||void 0===i)&&(e=-1*t.wheelDeltaX/6,i=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,i*=10),e!=e&&i!=i&&(e=0,i=t.wheelDelta),t.shiftKey?[-i,-e]:[e,i]}(i),a=r[0],l=r[1];if(!n(i.target,a,l)){var c=!1;o.settings.useBothWheelAxes?o.scrollbarYActive&&!o.scrollbarXActive?(l?s.scrollTop-=l*o.settings.wheelSpeed:s.scrollTop+=a*o.settings.wheelSpeed,c=!0):o.scrollbarXActive&&!o.scrollbarYActive&&(a?s.scrollLeft+=a*o.settings.wheelSpeed:s.scrollLeft-=l*o.settings.wheelSpeed,c=!0):(s.scrollTop-=l*o.settings.wheelSpeed,s.scrollLeft+=a*o.settings.wheelSpeed),f(o),(c=c||function(i,n){var r=e(s.scrollTop),a=0===s.scrollTop,l=r+s.offsetHeight===s.scrollHeight,c=0===s.scrollLeft,h=s.scrollLeft+s.offsetWidth===s.scrollWidth;return!(t(n)>t(i)?a||l:c||h)||!o.settings.wheelPropagation}(a,l))&&!i.ctrlKey&&(i.stopPropagation(),i.preventDefault())}}var s=o.element;void 0===window.onwheel?void 0!==window.onmousewheel&&o.event.bind(s,"mousewheel",r):o.event.bind(s,"wheel",r)},touch:function(o){function n(i,n){var r=e(d.scrollTop),s=d.scrollLeft,a=t(i),l=t(n);if(l>a){if(0>n&&r===o.contentHeight-o.containerHeight||0<n&&0===r)return 0===window.scrollY&&0<n&&k.isChrome}else if(a>l&&(0>i&&s===o.contentWidth-o.containerWidth||0<i&&0===s))return!0;return!0}function r(t,e){d.scrollTop-=e,d.scrollLeft-=t,f(o)}function s(t){return t.targetTouches?t.targetTouches[0]:t}function a(t){return!(t.pointerType&&"pen"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function l(t){if(a(t)){var e=s(t);p.pageX=e.pageX,p.pageY=e.pageY,g=(new Date).getTime(),null!==y&&clearInterval(y)}}function c(t,e,o){if(!d.contains(t))return!1;for(var n=t;n&&n!==d;){if(n.classList.contains(b.element.consuming))return!0;var r=i(n);if(o&&r.overflowY.match(/(scroll|auto)/)){var s=n.scrollHeight-n.clientHeight;if(0<s&&(0<n.scrollTop&&0>o||n.scrollTop<s&&0<o))return!0}if(e&&r.overflowX.match(/(scroll|auto)/)){var a=n.scrollWidth-n.clientWidth;if(0<a&&(0<n.scrollLeft&&0>e||n.scrollLeft<a&&0<e))return!0}n=n.parentNode}return!1}function h(t){if(a(t)){var e=s(t),i={pageX:e.pageX,pageY:e.pageY},o=i.pageX-p.pageX,l=i.pageY-p.pageY;if(c(t.target,o,l))return;r(o,l),p=i;var h=(new Date).getTime(),u=h-g;0<u&&(m.x=o/u,m.y=l/u,g=h),n(o,l)&&t.preventDefault()}}function u(){o.settings.swipeEasing&&(clearInterval(y),y=setInterval(function(){return o.isInitialized?void clearInterval(y):m.x||m.y?.01>t(m.x)&&.01>t(m.y)?void clearInterval(y):(r(30*m.x,30*m.y),m.x*=.8,void(m.y*=.8)):void clearInterval(y)},10))}if(k.supportsTouch||k.supportsIePointer){var d=o.element,p={},g=0,m={},y=null;k.supportsTouch?(o.event.bind(d,"touchstart",l),o.event.bind(d,"touchmove",h),o.event.bind(d,"touchend",u)):k.supportsIePointer&&(window.PointerEvent?(o.event.bind(d,"pointerdown",l),o.event.bind(d,"pointermove",h),o.event.bind(d,"pointerup",u)):window.MSPointerEvent&&(o.event.bind(d,"MSPointerDown",l),o.event.bind(d,"MSPointerMove",h),o.event.bind(d,"MSPointerUp",u)))}}},E=function(t,r){var s=this;if(void 0===r&&(r={}),"string"==typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var a in this.element=t,t.classList.add(b.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},r)this.settings[a]=r[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var l=function(){return t.classList.add(b.state.focus)},c=function(){return t.classList.remove(b.state.focus)};this.isRtl="rtl"===i(t).direction,!0===this.isRtl&&t.classList.add(b.rtl),this.isNegativeScroll=function(){var e,i=t.scrollLeft;return t.scrollLeft=-1,e=0>t.scrollLeft,t.scrollLeft=i,e}(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new C,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=n(b.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=n(b.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",l),this.event.bind(this.scrollbarX,"blur",c),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var h=i(this.scrollbarXRail);this.scrollbarXBottom=parseInt(h.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=p(h.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=p(h.borderLeftWidth)+p(h.borderRightWidth),o(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=p(h.marginLeft)+p(h.marginRight),o(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=n(b.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=n(b.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",l),this.event.bind(this.scrollbarY,"blur",c),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var u=i(this.scrollbarYRail);this.scrollbarYRight=parseInt(u.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=p(u.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var e=i(t);return p(e.width)+p(e.paddingLeft)+p(e.paddingRight)+p(e.borderLeftWidth)+p(e.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=p(u.borderTopWidth)+p(u.borderBottomWidth),o(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=p(u.marginTop)+p(u.marginBottom),o(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:0>=t.scrollLeft?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:0>=t.scrollTop?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(t){return A[t](s)}),this.lastScrollTop=e(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(t){return s.onScroll(t)}),f(this)};return E.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,o(this.scrollbarXRail,{display:"block"}),o(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=p(i(this.scrollbarXRail).marginLeft)+p(i(this.scrollbarXRail).marginRight),this.railYMarginHeight=p(i(this.scrollbarYRail).marginTop)+p(i(this.scrollbarYRail).marginBottom),o(this.scrollbarXRail,{display:"none"}),o(this.scrollbarYRail,{display:"none"}),f(this),d(this,"top",0,!1,!0),d(this,"left",0,!1,!0),o(this.scrollbarXRail,{display:""}),o(this.scrollbarYRail,{display:""}))},E.prototype.onScroll=function(){this.isAlive&&(f(this),d(this,"top",this.element.scrollTop-this.lastScrollTop),d(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=e(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},E.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),s(this.scrollbarX),s(this.scrollbarY),s(this.scrollbarXRail),s(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},E.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")},E}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){var e={element:"body",position:null,type:"info",allow_dismiss:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};function i(i,o,n){n=t.extend(!0,{},o={content:{message:"object"==typeof o?o.message:o,title:o.title?o.title:"",icon:o.icon?o.icon:"",url:o.url?o.url:"#",target:o.target?o.target:"-"}},n),this.settings=t.extend(!0,{},e,n),this._defaults=e,"-"==this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),this.init()}String.format=function(){for(var t=arguments[0],e=1;e<arguments.length;e++)t=t.replace(RegExp("\\{"+(e-1)+"\\}","gm"),arguments[e]);return t},t.extend(i.prototype,{init:function(){var t=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(e,i){var o={};for(var e in"string"==typeof e?o[e]=i:o=e,o)switch(e){case"type":this.$ele.removeClass("alert-"+t.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+t.settings.type),t.settings.type=o[e],this.$ele.addClass("alert-"+o[e]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+o[e]);break;case"icon":var n=this.$ele.find('[data-notify="icon"]');"class"==t.settings.icon_type.toLowerCase()?n.removeClass(t.settings.content.icon).addClass(o[e]):(n.is("img")||n.find("img"),n.attr("src",o[e]));break;case"progress":this.$ele.data("notify-delay",t.settings.delay-t.settings.delay*(o[e]/100)),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",o[e]).css("width",o[e]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",o[e]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",o[e]);break;default:this.$ele.find('[data-notify="'+e+'"]').html(o[e])}var r=this.$ele.outerHeight()+parseInt(t.settings.spacing)+parseInt(t.settings.offset.y);t.reposition(r)},close:function(){t.close()}}},buildNotify:function(){var e=this.settings.content;this.$ele=t(String.format(this.settings.template,this.settings.type,e.title,e.message,e.url,e.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"==this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var e=this,i=this.settings.offset.y,o={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},n=!1,r=this.settings;switch(t('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return i=Math.max(i,parseInt(t(this).css(r.placement.from))+parseInt(t(this).outerHeight())+parseInt(r.spacing))}),1==this.settings.newest_on_top&&(i=this.settings.offset.y),o[this.settings.placement.from]=i+"px",this.settings.placement.align){case"left":case"right":o[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":o.left=0,o.right=0}this.$ele.css(o).addClass(this.settings.animate.enter),t.each(Array("webkit-","moz-","o-","ms-",""),function(t,i){e.$ele[0].style[i+"AnimationIterationCount"]=1}),t(this.settings.element).append(this.$ele),1==this.settings.newest_on_top&&(i=parseInt(i)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(i)),t.isFunction(e.settings.onShow)&&e.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(t){n=!0}).one(this.animations.end,function(i){t.isFunction(e.settings.onShown)&&e.settings.onShown.call(this)}),setTimeout(function(){n||t.isFunction(e.settings.onShown)&&e.settings.onShown.call(this)},600)},bind:function(){var e=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){e.close()}),this.$ele.mouseover(function(e){t(this).data("data-hover","true")}).mouseout(function(e){t(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){e.$ele.data("notify-delay",e.settings.delay);var i=setInterval(function(){var t=parseInt(e.$ele.data("notify-delay"))-e.settings.timer;if("false"===e.$ele.data("data-hover")&&"pause"==e.settings.mouse_over||"pause"!=e.settings.mouse_over){var o=(e.settings.delay-t)/e.settings.delay*100;e.$ele.data("notify-delay",t),e.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",o).css("width",o+"%")}t<=-e.settings.timer&&(clearInterval(i),e.close())},e.settings.timer)}},close:function(){var e=this,i=parseInt(this.$ele.css(this.settings.placement.from)),o=!1;this.$ele.data("closing","true").addClass(this.settings.animate.exit),e.reposition(i),t.isFunction(e.settings.onClose)&&e.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(t){o=!0}).one(this.animations.end,function(i){t(this).remove(),t.isFunction(e.settings.onClosed)&&e.settings.onClosed.call(this)}),setTimeout(function(){o||(e.$ele.remove(),e.settings.onClosed&&e.settings.onClosed(e.$ele))},600)},reposition:function(e){var i=this,o='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',n=this.$ele.nextAll(o);1==this.settings.newest_on_top&&(n=this.$ele.prevAll(o)),n.each(function(){t(this).css(i.settings.placement.from,e),e=parseInt(e)+parseInt(i.settings.spacing)+t(this).outerHeight()})}}),t.notify=function(t,e){return new i(this,t,e).notify},t.notifyDefaults=function(i){return e=t.extend(!0,{},e,i)},t.notifyClose=function(e){void 0===e||"all"==e?t("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):t('[data-notify-position="'+e+'"]').find('[data-notify="dismiss"]').trigger("click")}}),function(t,e){"function"==typeof define&&define.amd?define("Chartist",[],function(){return t.Chartist=e()}):"object"==typeof module&&module.exports?module.exports=e():t.Chartist=e()}(this,function(){var t={version:"0.11.4"};return function(t,e){"use strict";var i=t.window,o=t.document;e.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},e.noop=function(t){return t},e.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},e.extend=function(t){var i,o,n;for(t=t||{},i=1;i<arguments.length;i++)for(var r in o=arguments[i])t[r]="object"!=typeof(n=o[r])||null===n||n instanceof Array?n:e.extend(t[r],n);return t},e.replaceAll=function(t,e,i){return t.replace(new RegExp(e,"g"),i)},e.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},e.quantity=function(t){if("string"==typeof t){var e=/^(\d+)\s*(.*)$/g.exec(t);return{value:+e[1],unit:e[2]||void 0}}return{value:t}},e.querySelector=function(t){return t instanceof Node?t:o.querySelector(t)},e.times=function(t){return Array.apply(null,new Array(t))},e.sum=function(t,e){return t+(e||0)},e.mapMultiply=function(t){return function(e){return e*t}},e.mapAdd=function(t){return function(e){return e+t}},e.serialMap=function(t,i){var o=[],n=Math.max.apply(null,t.map(function(t){return t.length}));return e.times(n).forEach(function(e,n){var r=t.map(function(t){return t[n]});o[n]=i.apply(null,r)}),o},e.roundWithPrecision=function(t,i){var o=Math.pow(10,i||e.precision);return Math.round(t*o)/o},e.precision=8,e.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},e.serialize=function(t){return null==t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(e.escapingMap).reduce(function(t,i){return e.replaceAll(t,i,e.escapingMap[i])},t))},e.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(e.escapingMap).reduce(function(t,i){return e.replaceAll(t,e.escapingMap[i],i)},t);try{t=void 0!==(t=JSON.parse(t)).data?t.data:t}catch(i){}return t},e.createSvg=function(t,i,o,n){var r;return i=i||"100%",o=o||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter(function(t){return t.getAttributeNS(e.namespaces.xmlns,"ct")}).forEach(function(e){t.removeChild(e)}),(r=new e.Svg("svg").attr({width:i,height:o}).addClass(n))._node.style.width=i,r._node.style.height=o,t.appendChild(r._node),r},e.normalizeData=function(t,i,o){var n,r={raw:t,normalized:{}};return r.normalized.series=e.getDataArray({series:t.series||[]},i,o),n=r.normalized.series.every(function(t){return t instanceof Array})?Math.max.apply(null,r.normalized.series.map(function(t){return t.length})):r.normalized.series.length,r.normalized.labels=(t.labels||[]).slice(),Array.prototype.push.apply(r.normalized.labels,e.times(Math.max(0,n-r.normalized.labels.length)).map(function(){return""})),i&&e.reverseData(r.normalized),r},e.safeHasProperty=function(t,e){return null!==t&&"object"==typeof t&&t.hasOwnProperty(e)},e.isDataHoleValue=function(t){return null==t||"number"==typeof t&&isNaN(t)},e.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},e.getDataArray=function(t,i,o){return t.series.map(function t(i){if(e.safeHasProperty(i,"value"))return t(i.value);if(e.safeHasProperty(i,"data"))return t(i.data);if(i instanceof Array)return i.map(t);if(!e.isDataHoleValue(i)){if(o){var n={};return"string"==typeof o?n[o]=e.getNumberOrUndefined(i):n.y=e.getNumberOrUndefined(i),n.x=i.hasOwnProperty("x")?e.getNumberOrUndefined(i.x):n.x,n.y=i.hasOwnProperty("y")?e.getNumberOrUndefined(i.y):n.y,n}return e.getNumberOrUndefined(i)}})},e.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},e.getMetaData=function(t,e){var i=t.data?t.data[e]:t[e];return i?i.meta:void 0},e.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},e.projectLength=function(t,e,i){return e/i.range*t},e.getAvailableHeight=function(t,i){return Math.max((e.quantity(i.height).value||t.height())-(i.chartPadding.top+i.chartPadding.bottom)-i.axisX.offset,0)},e.getHighLow=function(t,i,o){var n={high:void 0===(i=e.extend({},i,o?i["axis"+o.toUpperCase()]:{})).high?-Number.MAX_VALUE:+i.high,low:void 0===i.low?Number.MAX_VALUE:+i.low},r=void 0===i.high,s=void 0===i.low;return(r||s)&&function t(e){if(void 0!==e)if(e instanceof Array)for(var i=0;i<e.length;i++)t(e[i]);else{var a=o?+e[o]:+e;r&&a>n.high&&(n.high=a),s&&a<n.low&&(n.low=a)}}(t),(i.referenceValue||0===i.referenceValue)&&(n.high=Math.max(i.referenceValue,n.high),n.low=Math.min(i.referenceValue,n.low)),n.high<=n.low&&(0===n.low?n.high=1:n.low<0?n.high=0:(n.high>0||(n.high=1),n.low=0)),n},e.isNumeric=function(t){return null!==t&&isFinite(t)},e.isFalseyButZero=function(t){return!t&&0!==t},e.getNumberOrUndefined=function(t){return e.isNumeric(t)?+t:void 0},e.isMultiValue=function(t){return"object"==typeof t&&("x"in t||"y"in t)},e.getMultiValue=function(t,i){return e.isMultiValue(t)?e.getNumberOrUndefined(t[i||"y"]):e.getNumberOrUndefined(t)},e.rho=function(t){if(1===t)return t;function e(t,i){return t%i==0?i:e(i,t%i)}function i(t){return t*t+1}var o,n=2,r=2;if(t%2==0)return 2;do{n=i(n)%t,r=i(i(r))%t,o=e(Math.abs(n-r),t)}while(1===o);return o},e.getBounds=function(t,i,o,n){var r,s,a,l=0,c={high:i.high,low:i.low};c.valueRange=c.high-c.low,c.oom=e.orderOfMagnitude(c.valueRange),c.step=Math.pow(10,c.oom),c.min=Math.floor(c.low/c.step)*c.step,c.max=Math.ceil(c.high/c.step)*c.step,c.range=c.max-c.min,c.numberOfSteps=Math.round(c.range/c.step);var h=e.projectLength(t,c.step,c)<o,u=n?e.rho(c.range):0;if(n&&e.projectLength(t,1,c)>=o)c.step=1;else if(n&&u<c.step&&e.projectLength(t,u,c)>=o)c.step=u;else for(;;){if(h&&e.projectLength(t,c.step,c)<=o)c.step*=2;else{if(h||!(e.projectLength(t,c.step/2,c)>=o))break;if(c.step/=2,n&&c.step%1!=0){c.step*=2;break}}if(l++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var d=2221e-19;function p(t,e){return t===(t+=e)&&(t*=1+(e>0?d:-d)),t}for(c.step=Math.max(c.step,d),s=c.min,a=c.max;s+c.step<=c.low;)s=p(s,c.step);for(;a-c.step>=c.high;)a=p(a,-c.step);c.min=s,c.max=a,c.range=c.max-c.min;var g=[];for(r=c.min;r<=c.max;r=p(r,c.step)){var f=e.roundWithPrecision(r);f!==g[g.length-1]&&g.push(f)}return c.values=g,c},e.polarToCartesian=function(t,e,i,o){var n=(o-90)*Math.PI/180;return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}},e.createChartRect=function(t,i,o){var n=!(!i.axisX&&!i.axisY),r=n?i.axisY.offset:0,s=n?i.axisX.offset:0,a=t.width()||e.quantity(i.width).value||0,l=t.height()||e.quantity(i.height).value||0,c=e.normalizePadding(i.chartPadding,o);a=Math.max(a,r+c.left+c.right),l=Math.max(l,s+c.top+c.bottom);var h={padding:c,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return n?("start"===i.axisX.position?(h.y2=c.top+s,h.y1=Math.max(l-c.bottom,h.y2+1)):(h.y2=c.top,h.y1=Math.max(l-c.bottom-s,h.y2+1)),"start"===i.axisY.position?(h.x1=c.left+r,h.x2=Math.max(a-c.right,h.x1+1)):(h.x1=c.left,h.x2=Math.max(a-c.right-r,h.x1+1))):(h.x1=c.left,h.x2=Math.max(a-c.right,h.x1+1),h.y2=c.top,h.y1=Math.max(l-c.bottom,h.y2+1)),h},e.createGrid=function(t,i,o,n,r,s,a,l){var c={};c[o.units.pos+"1"]=t,c[o.units.pos+"2"]=t,c[o.counterUnits.pos+"1"]=n,c[o.counterUnits.pos+"2"]=n+r;var h=s.elem("line",c,a.join(" "));l.emit("draw",e.extend({type:"grid",axis:o,index:i,group:s,element:h},c))},e.createGridBackground=function(t,e,i,o){var n=t.elem("rect",{x:e.x1,y:e.y2,width:e.width(),height:e.height()},i,!0);o.emit("draw",{type:"gridBackground",group:t,element:n})},e.createLabel=function(t,i,n,r,s,a,l,c,h,u,d){var p,g={};if(g[s.units.pos]=t+l[s.units.pos],g[s.counterUnits.pos]=l[s.counterUnits.pos],g[s.units.len]=i,g[s.counterUnits.len]=Math.max(0,a-10),u){var f=o.createElement("span");f.className=h.join(" "),f.setAttribute("xmlns",e.namespaces.xhtml),f.innerText=r[n],f.style[s.units.len]=Math.round(g[s.units.len])+"px",f.style[s.counterUnits.len]=Math.round(g[s.counterUnits.len])+"px",p=c.foreignObject(f,e.extend({style:"overflow: visible;"},g))}else p=c.elem("text",g,h.join(" ")).text(r[n]);d.emit("draw",e.extend({type:"label",axis:s,index:n,group:c,element:p,text:r[n]},g))},e.getSeriesOption=function(t,e,i){if(t.name&&e.series&&e.series[t.name]){var o=e.series[t.name];return o.hasOwnProperty(i)?o[i]:e[i]}return e[i]},e.optionsProvider=function(t,o,n){var r,s,a=e.extend({},t),l=[];function c(t){var l=r;if(r=e.extend({},a),o)for(s=0;s<o.length;s++)i.matchMedia(o[s][0]).matches&&(r=e.extend(r,o[s][1]));n&&t&&n.emit("optionsChanged",{previousOptions:l,currentOptions:r})}if(!i.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(o)for(s=0;s<o.length;s++){var h=i.matchMedia(o[s][0]);h.addListener(c),l.push(h)}return c(),{removeMediaQueryListeners:function(){l.forEach(function(t){t.removeListener(c)})},getCurrentOptions:function(){return e.extend({},r)}}},e.splitIntoSegments=function(t,i,o){o=e.extend({},{increasingX:!1,fillHoles:!1},o);for(var n=[],r=!0,s=0;s<t.length;s+=2)void 0===e.getMultiValue(i[s/2].value)?o.fillHoles||(r=!0):(o.increasingX&&s>=2&&t[s]<=t[s-2]&&(r=!0),r&&(n.push({pathCoordinates:[],valueData:[]}),r=!1),n[n.length-1].pathCoordinates.push(t[s],t[s+1]),n[n.length-1].valueData.push(i[s/2]));return n}}(this||global,t),function(t,e){"use strict";e.Interpolation={},e.Interpolation.none=function(t){return t=e.extend({},{fillHoles:!1},t),function(i,o){for(var n=new e.Svg.Path,r=!0,s=0;s<i.length;s+=2){var a=i[s],l=i[s+1],c=o[s/2];void 0!==e.getMultiValue(c.value)?(r?n.move(a,l,!1,c):n.line(a,l,!1,c),r=!1):t.fillHoles||(r=!0)}return n}},e.Interpolation.simple=function(t){t=e.extend({},{divisor:2,fillHoles:!1},t);var i=1/Math.max(1,t.divisor);return function(o,n){for(var r,s,a,l=new e.Svg.Path,c=0;c<o.length;c+=2){var h=o[c],u=o[c+1],d=(h-r)*i,p=n[c/2];void 0!==p.value?(void 0===a?l.move(h,u,!1,p):l.curve(r+d,s,h-d,u,h,u,!1,p),r=h,s=u,a=p):t.fillHoles||(r=h=a=void 0)}return l}},e.Interpolation.cardinal=function(t){t=e.extend({},{tension:1,fillHoles:!1},t);var i=Math.min(1,Math.max(0,t.tension)),o=1-i;return function n(r,s){var a=e.splitIntoSegments(r,s,{fillHoles:t.fillHoles});if(a.length){if(a.length>1){var l=[];return a.forEach(function(t){l.push(n(t.pathCoordinates,t.valueData))}),e.Svg.Path.join(l)}if(s=a[0].valueData,(r=a[0].pathCoordinates).length<=4)return e.Interpolation.none()(r,s);for(var c=(new e.Svg.Path).move(r[0],r[1],!1,s[0]),h=0,u=r.length;u-2>h;h+=2){var d=[{x:+r[h-2],y:+r[h-1]},{x:+r[h],y:+r[h+1]},{x:+r[h+2],y:+r[h+3]},{x:+r[h+4],y:+r[h+5]}];u-4===h?d[3]=d[2]:h||(d[0]={x:+r[h],y:+r[h+1]}),c.curve(i*(6*d[1].x-d[0].x+d[2].x)/6+o*d[2].x,i*(6*d[1].y-d[0].y+d[2].y)/6+o*d[2].y,i*(d[1].x+6*d[2].x-d[3].x)/6+o*d[2].x,i*(d[1].y+6*d[2].y-d[3].y)/6+o*d[2].y,d[2].x,d[2].y,!1,s[(h+2)/2])}return c}return e.Interpolation.none()([])}},e.Interpolation.monotoneCubic=function(t){return t=e.extend({},{fillHoles:!1},t),function i(o,n){var r=e.splitIntoSegments(o,n,{fillHoles:t.fillHoles,increasingX:!0});if(r.length){if(r.length>1){var s=[];return r.forEach(function(t){s.push(i(t.pathCoordinates,t.valueData))}),e.Svg.Path.join(s)}if(n=r[0].valueData,(o=r[0].pathCoordinates).length<=4)return e.Interpolation.none()(o,n);var a,l,c=[],h=[],u=o.length/2,d=[],p=[],g=[],f=[];for(a=0;a<u;a++)c[a]=o[2*a],h[a]=o[2*a+1];for(a=0;a<u-1;a++)g[a]=h[a+1]-h[a],f[a]=c[a+1]-c[a],p[a]=g[a]/f[a];for(d[0]=p[0],d[u-1]=p[u-2],a=1;a<u-1;a++)0===p[a]||0===p[a-1]||p[a-1]>0!=p[a]>0?d[a]=0:(d[a]=3*(f[a-1]+f[a])/((2*f[a]+f[a-1])/p[a-1]+(f[a]+2*f[a-1])/p[a]),isFinite(d[a])||(d[a]=0));for(l=(new e.Svg.Path).move(c[0],h[0],!1,n[0]),a=0;a<u-1;a++)l.curve(c[a]+f[a]/3,h[a]+d[a]*f[a]/3,c[a+1]-f[a]/3,h[a+1]-d[a+1]*f[a]/3,c[a+1],h[a+1],!1,n[a+1]);return l}return e.Interpolation.none()([])}},e.Interpolation.step=function(t){return t=e.extend({},{postpone:!0,fillHoles:!1},t),function(i,o){for(var n,r,s,a=new e.Svg.Path,l=0;l<i.length;l+=2){var c=i[l],h=i[l+1],u=o[l/2];void 0!==u.value?(void 0===s?a.move(c,h,!1,u):(t.postpone?a.line(c,r,!1,s):a.line(n,h,!1,u),a.line(c,h,!1,u)),n=c,r=h,s=u):t.fillHoles||(n=r=s=void 0)}return a}}}(this||global,t),function(t,e){"use strict";e.EventEmitter=function(){var t=[];return{addEventHandler:function(e,i){t[e]=t[e]||[],t[e].push(i)},removeEventHandler:function(e,i){t[e]&&(i?(t[e].splice(t[e].indexOf(i),1),0===t[e].length&&delete t[e]):delete t[e])},emit:function(e,i){t[e]&&t[e].forEach(function(t){t(i)}),t["*"]&&t["*"].forEach(function(t){t(e,i)})}}}}(this||global,t),function(t,e){"use strict";function i(t){var e=[];if(t.length)for(var i=0;i<t.length;i++)e.push(t[i]);return e}e.Class={extend:function(t,i){var o=i||this.prototype||e.Class,n=Object.create(o);e.Class.cloneDefinitions(n,t);var r=function(){var t,i=n.constructor||function(){};return t=this===e?Object.create(n):this,i.apply(t,Array.prototype.slice.call(arguments,0)),t};return r.prototype=n,r.super=o,r.extend=this.extend,r},cloneDefinitions:function(){var t=i(arguments),e=t[0];return t.splice(1,t.length-1).forEach(function(t){Object.getOwnPropertyNames(t).forEach(function(i){delete e[i],Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}),e}}}(this||global,t),function(t,e){"use strict";var i=t.window;function o(){i.addEventListener("resize",this.resizeListener),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",(function(){this.update()}).bind(this)),this.options.plugins&&this.options.plugins.forEach((function(t){t instanceof Array?t[0](this,t[1]):t(this)}).bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}e.Base=e.Class.extend({constructor:function(t,i,n,r,s){this.container=e.querySelector(t),this.data=i||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=n,this.options=r,this.responsiveOptions=s,this.eventEmitter=e.EventEmitter(),this.supportsForeignObject=e.Svg.isSupported("Extensibility"),this.supportsAnimations=e.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=(function(){this.update()}).bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(o.bind(this),0)},optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:function(t,i,o){return t&&(this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),i&&(this.options=e.extend({},o?this.options:this.defaultOptions,i),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this},detach:function(){return this.initializeTimeoutId?i.clearTimeout(this.initializeTimeoutId):(i.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this},on:function(t,e){return this.eventEmitter.addEventHandler(t,e),this},off:function(t,e){return this.eventEmitter.removeEventHandler(t,e),this},version:e.version,supportsForeignObject:!1})}(this||global,t),function(t,e){"use strict";var i=t.document;e.Svg=e.Class.extend({constructor:function(t,o,n,r,s){t instanceof Element?this._node=t:(this._node=i.createElementNS(e.namespaces.svg,t),"svg"===t&&this.attr({"xmlns:ct":e.namespaces.ct})),o&&this.attr(o),n&&this.addClass(n),r&&(s&&r._node.firstChild?r._node.insertBefore(this._node,r._node.firstChild):r._node.appendChild(this._node))},attr:function(t,i){return"string"==typeof t?i?this._node.getAttributeNS(i,t):this._node.getAttribute(t):(Object.keys(t).forEach((function(i){if(void 0!==t[i])if(-1!==i.indexOf(":")){var o=i.split(":");this._node.setAttributeNS(e.namespaces[o[0]],i,t[i])}else this._node.setAttribute(i,t[i])}).bind(this)),this)},elem:function(t,i,o,n){return new e.Svg(t,i,o,this,n)},parent:function(){return this._node.parentNode instanceof SVGElement?new e.Svg(this._node.parentNode):null},root:function(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new e.Svg(t)},querySelector:function(t){var i=this._node.querySelector(t);return i?new e.Svg(i):null},querySelectorAll:function(t){var i=this._node.querySelectorAll(t);return i.length?new e.Svg.List(i):null},getNode:function(){return this._node},foreignObject:function(t,o,n,r){if("string"==typeof t){var s=i.createElement("div");s.innerHTML=t,t=s.firstChild}t.setAttribute("xmlns",e.namespaces.xmlns);var a=this.elem("foreignObject",o,n,r);return a._node.appendChild(t),a},text:function(t){return this._node.appendChild(i.createTextNode(t)),this},empty:function(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this},remove:function(){return this._node.parentNode.removeChild(this._node),this.parent()},replace:function(t){return this._node.parentNode.replaceChild(t._node,this._node),t},append:function(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this},classes:function(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]},addClass:function(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter(function(t,e,i){return i.indexOf(t)===e}).join(" ")),this},removeClass:function(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(t){return-1===e.indexOf(t)}).join(" ")),this},removeAllClasses:function(){return this._node.setAttribute("class",""),this},height:function(){return this._node.getBoundingClientRect().height},width:function(){return this._node.getBoundingClientRect().width},animate:function(t,i,o){return void 0===i&&(i=!0),Object.keys(t).forEach((function(n){function r(t,i){var r,s,a,l={};t.easing&&(a=t.easing instanceof Array?t.easing:e.Svg.Easing[t.easing],delete t.easing),t.begin=e.ensureUnit(t.begin,"ms"),t.dur=e.ensureUnit(t.dur,"ms"),a&&(t.calcMode="spline",t.keySplines=a.join(" "),t.keyTimes="0;1"),i&&(t.fill="freeze",l[n]=t.from,this.attr(l),s=e.quantity(t.begin||0).value,t.begin="indefinite"),r=this.elem("animate",e.extend({attributeName:n},t)),i&&setTimeout((function(){try{r._node.beginElement()}catch(e){l[n]=t.to,this.attr(l),r.remove()}}).bind(this),s),o&&r._node.addEventListener("beginEvent",(function(){o.emit("animationBegin",{element:this,animate:r._node,params:t})}).bind(this)),r._node.addEventListener("endEvent",(function(){o&&o.emit("animationEnd",{element:this,animate:r._node,params:t}),i&&(l[n]=t.to,this.attr(l),r.remove())}).bind(this))}t[n]instanceof Array?t[n].forEach((function(t){r.bind(this)(t,!1)}).bind(this)):r.bind(this)(t[n],i)}).bind(this)),this}}),e.Svg.isSupported=function(t){return i.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+t,"1.1")},e.Svg.Easing={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},e.Svg.List=e.Class.extend({constructor:function(t){var i=this;this.svgElements=[];for(var o=0;o<t.length;o++)this.svgElements.push(new e.Svg(t[o]));Object.keys(e.Svg.prototype).filter(function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)}).forEach(function(t){i[t]=function(){var o=Array.prototype.slice.call(arguments,0);return i.svgElements.forEach(function(i){e.Svg.prototype[t].apply(i,o)}),i}})}})}(this||global,t),function(t,e){"use strict";var i={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},o={accuracy:3};function n(t,i,o,n,r,s){var a=e.extend({command:r?t.toLowerCase():t.toUpperCase()},i,s?{data:s}:{});o.splice(n,0,a)}function r(t,e){t.forEach(function(o,n){i[o.command.toLowerCase()].forEach(function(i,r){e(o,i,n,r,t)})})}e.Svg.Path=e.Class.extend({constructor:function(t,i){this.pathElements=[],this.pos=0,this.close=t,this.options=e.extend({},o,i)},position:function(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos},remove:function(t){return this.pathElements.splice(this.pos,t),this},move:function(t,e,i,o){return n("M",{x:+t,y:+e},this.pathElements,this.pos++,i,o),this},line:function(t,e,i,o){return n("L",{x:+t,y:+e},this.pathElements,this.pos++,i,o),this},curve:function(t,e,i,o,r,s,a,l){return n("C",{x1:+t,y1:+e,x2:+i,y2:+o,x:+r,y:+s},this.pathElements,this.pos++,a,l),this},arc:function(t,e,i,o,r,s,a,l,c){return n("A",{rx:+t,ry:+e,xAr:+i,lAf:+o,sf:+r,x:+s,y:+a},this.pathElements,this.pos++,l,c),this},scale:function(t,e){return r(this.pathElements,function(i,o){i[o]*="x"===o[0]?t:e}),this},translate:function(t,e){return r(this.pathElements,function(i,o){i[o]+="x"===o[0]?t:e}),this},transform:function(t){return r(this.pathElements,function(e,i,o,n,r){var s=t(e,i,o,n,r);(s||0===s)&&(e[i]=s)}),this},parse:function(t){var o=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t},[]);"Z"===o[o.length-1][0].toUpperCase()&&o.pop();var n=o.map(function(t){var o=t.shift(),n=i[o.toLowerCase()];return e.extend({command:o},n.reduce(function(e,i,o){return e[i]=+t[o],e},{}))}),r=[this.pos,0];return Array.prototype.push.apply(r,n),Array.prototype.splice.apply(this.pathElements,r),this.pos+=n.length,this},stringify:function(){var t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce((function(e,o){var n=i[o.command.toLowerCase()].map((function(e){return this.options.accuracy?Math.round(o[e]*t)/t:o[e]}).bind(this));return e+o.command+n.join(",")}).bind(this),"")+(this.close?"Z":"")},clone:function(t){var i=new e.Svg.Path(t||this.close);return i.pos=this.pos,i.pathElements=this.pathElements.slice().map(function(t){return e.extend({},t)}),i.options=e.extend({},this.options),i},splitByCommand:function(t){var i=[new e.Svg.Path];return this.pathElements.forEach(function(o){o.command===t.toUpperCase()&&0!==i[i.length-1].pathElements.length&&i.push(new e.Svg.Path),i[i.length-1].pathElements.push(o)}),i}}),e.Svg.Path.elementDescriptions=i,e.Svg.Path.join=function(t,i,o){for(var n=new e.Svg.Path(i,o),r=0;r<t.length;r++)for(var s=t[r],a=0;a<s.pathElements.length;a++)n.pathElements.push(s.pathElements[a]);return n}}(this||global,t),function(t,e){"use strict";var i={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};e.Axis=e.Class.extend({constructor:function(t,e,o,n){this.units=t,this.counterUnits=t===i.x?i.y:i.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.ticks=o,this.options=n},createGridAndLabels:function(t,i,o,n,r){var s=n["axis"+this.units.pos.toUpperCase()],a=this.ticks.map(this.projectValue.bind(this)),l=this.ticks.map(s.labelInterpolationFnc);a.forEach((function(c,h){var u,d={x:0,y:0};u=a[h+1]?a[h+1]-c:Math.max(this.axisLength-c,30),e.isFalseyButZero(l[h])&&""!==l[h]||("x"===this.units.pos?(c=this.chartRect.x1+c,d.x=n.axisX.labelOffset.x,d.y="start"===n.axisX.position?this.chartRect.padding.top+n.axisX.labelOffset.y+(o?5:20):this.chartRect.y1+n.axisX.labelOffset.y+(o?5:20)):(c=this.chartRect.y1-c,d.y=n.axisY.labelOffset.y-(o?u:0),d.x="start"===n.axisY.position?o?this.chartRect.padding.left+n.axisY.labelOffset.x:this.chartRect.x1-10:this.chartRect.x2+n.axisY.labelOffset.x+10),s.showGrid&&e.createGrid(c,h,this,this.gridOffset,this.chartRect[this.counterUnits.len](),t,[n.classNames.grid,n.classNames[this.units.dir]],r),s.showLabel&&e.createLabel(c,u,h,l,this,s.offset,d,i,[n.classNames.label,n.classNames[this.units.dir],"start"===s.position?n.classNames[s.position]:n.classNames.end],o,r))}).bind(this))},projectValue:function(t,e,i){throw new Error("Base axis can't be instantiated!")}}),e.Axis.units=i}(this||global,t),function(t,e){"use strict";e.AutoScaleAxis=e.Axis.extend({constructor:function(t,i,o,n){var r=n.highLow||e.getHighLow(i,n,t.pos);this.bounds=e.getBounds(o[t.rectEnd]-o[t.rectStart],r,n.scaleMinSpace||20,n.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},e.AutoScaleAxis.super.constructor.call(this,t,o,this.bounds.values,n)},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.bounds.min)/this.bounds.range}})}(this||global,t),function(t,e){"use strict";e.FixedScaleAxis=e.Axis.extend({constructor:function(t,i,o,n){var r=n.highLow||e.getHighLow(i,n,t.pos);this.divisor=n.divisor||1,this.ticks=n.ticks||e.times(this.divisor).map((function(t,e){return r.low+(r.high-r.low)/this.divisor*e}).bind(this)),this.ticks.sort(function(t,e){return t-e}),this.range={min:r.low,max:r.high},e.FixedScaleAxis.super.constructor.call(this,t,o,this.ticks,n),this.stepLength=this.axisLength/this.divisor},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}})}(this||global,t),function(t,e){"use strict";e.StepAxis=e.Axis.extend({constructor:function(t,i,o,n){e.StepAxis.super.constructor.call(this,t,o,n.ticks,n);var r=Math.max(1,n.ticks.length-(n.stretch?1:0));this.stepLength=this.axisLength/r},projectValue:function(t,e){return this.stepLength*e}})}(this||global,t),function(t,e){"use strict";var i={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Line=e.Base.extend({constructor:function(t,o,n,r){e.Line.super.constructor.call(this,t,o,i,e.extend({},i,n),r)},createChart:function(t){var o=e.normalizeData(this.data,t.reverseData,!0);this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart);var n,r,s=this.svg.elem("g").addClass(t.classNames.gridGroup),a=this.svg.elem("g"),l=this.svg.elem("g").addClass(t.classNames.labelGroup),c=e.createChartRect(this.svg,t,i.padding);n=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,o.normalized.series,c,e.extend({},t.axisX,{ticks:o.normalized.labels,stretch:t.fullWidth})):t.axisX.type.call(e,e.Axis.units.x,o.normalized.series,c,t.axisX),r=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,o.normalized.series,c,e.extend({},t.axisY,{high:e.isNumeric(t.high)?t.high:t.axisY.high,low:e.isNumeric(t.low)?t.low:t.axisY.low})):t.axisY.type.call(e,e.Axis.units.y,o.normalized.series,c,t.axisY),n.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),r.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(s,c,t.classNames.gridBackground,this.eventEmitter),o.raw.series.forEach((function(i,s){var l=a.elem("g");l.attr({"ct:series-name":i.name,"ct:meta":e.serialize(i.meta)}),l.addClass([t.classNames.series,i.className||t.classNames.series+"-"+e.alphaNumerate(s)].join(" "));var h=[],u=[];o.normalized.series[s].forEach((function(t,a){var l={x:c.x1+n.projectValue(t,a,o.normalized.series[s]),y:c.y1-r.projectValue(t,a,o.normalized.series[s])};h.push(l.x,l.y),u.push({value:t,valueIndex:a,meta:e.getMetaData(i,a)})}).bind(this));var d={lineSmooth:e.getSeriesOption(i,t,"lineSmooth"),showPoint:e.getSeriesOption(i,t,"showPoint"),showLine:e.getSeriesOption(i,t,"showLine"),showArea:e.getSeriesOption(i,t,"showArea"),areaBase:e.getSeriesOption(i,t,"areaBase")},p=("function"==typeof d.lineSmooth?d.lineSmooth:d.lineSmooth?e.Interpolation.monotoneCubic():e.Interpolation.none())(h,u);if(d.showPoint&&p.pathElements.forEach((function(o){var a=l.elem("line",{x1:o.x,y1:o.y,x2:o.x+.01,y2:o.y},t.classNames.point).attr({"ct:value":[o.data.value.x,o.data.value.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(o.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:o.data.value,index:o.data.valueIndex,meta:o.data.meta,series:i,seriesIndex:s,axisX:n,axisY:r,group:l,element:a,x:o.x,y:o.y})}).bind(this)),d.showLine){var g=l.elem("path",{d:p.stringify()},t.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:o.normalized.series[s],path:p.clone(),chartRect:c,index:s,series:i,seriesIndex:s,seriesMeta:i.meta,axisX:n,axisY:r,group:l,element:g})}if(d.showArea&&r.range){var f=Math.max(Math.min(d.areaBase,r.range.max),r.range.min),m=c.y1-r.projectValue(f);p.splitByCommand("M").filter(function(t){return t.pathElements.length>1}).map(function(t){var e=t.pathElements[0],i=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,m).line(e.x,e.y).position(t.pathElements.length+1).line(i.x,m)}).forEach((function(e){var a=l.elem("path",{d:e.stringify()},t.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:o.normalized.series[s],path:e.clone(),series:i,seriesIndex:s,axisX:n,axisY:r,chartRect:c,index:s,group:l,element:a})}).bind(this))}}).bind(this)),this.eventEmitter.emit("created",{bounds:r.bounds,chartRect:c,axisX:n,axisY:r,svg:this.svg,options:t})}})}(this||global,t),function(t,e){"use strict";var i={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Bar=e.Base.extend({constructor:function(t,o,n,r){e.Bar.super.constructor.call(this,t,o,i,e.extend({},i,n),r)},createChart:function(t){var o,n;t.distributeSeries?(o=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y")).normalized.series=o.normalized.series.map(function(t){return[t]}):o=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y"),this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:""));var r=this.svg.elem("g").addClass(t.classNames.gridGroup),s=this.svg.elem("g"),a=this.svg.elem("g").addClass(t.classNames.labelGroup);if(t.stackBars&&0!==o.normalized.series.length){var l=e.serialMap(o.normalized.series,function(){return Array.prototype.slice.call(arguments).map(function(t){return t}).reduce(function(t,e){return{x:t.x+(e&&e.x)||0,y:t.y+(e&&e.y)||0}},{x:0,y:0})});n=e.getHighLow([l],t,t.horizontalBars?"x":"y")}else n=e.getHighLow(o.normalized.series,t,t.horizontalBars?"x":"y");n.high=+t.high||(0===t.high?0:n.high),n.low=+t.low||(0===t.low?0:n.low);var c,h,u,d,p,g=e.createChartRect(this.svg,t,i.padding);h=t.distributeSeries&&t.stackBars?o.normalized.labels.slice(0,1):o.normalized.labels,t.horizontalBars?(c=d=void 0===t.axisX.type?new e.AutoScaleAxis(e.Axis.units.x,o.normalized.series,g,e.extend({},t.axisX,{highLow:n,referenceValue:0})):t.axisX.type.call(e,e.Axis.units.x,o.normalized.series,g,e.extend({},t.axisX,{highLow:n,referenceValue:0})),u=p=void 0===t.axisY.type?new e.StepAxis(e.Axis.units.y,o.normalized.series,g,{ticks:h}):t.axisY.type.call(e,e.Axis.units.y,o.normalized.series,g,t.axisY)):(u=d=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,o.normalized.series,g,{ticks:h}):t.axisX.type.call(e,e.Axis.units.x,o.normalized.series,g,t.axisX),c=p=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,o.normalized.series,g,e.extend({},t.axisY,{highLow:n,referenceValue:0})):t.axisY.type.call(e,e.Axis.units.y,o.normalized.series,g,e.extend({},t.axisY,{highLow:n,referenceValue:0})));var f=t.horizontalBars?g.x1+c.projectValue(0):g.y1-c.projectValue(0),m=[];u.createGridAndLabels(r,a,this.supportsForeignObject,t,this.eventEmitter),c.createGridAndLabels(r,a,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(r,g,t.classNames.gridBackground,this.eventEmitter),o.raw.series.forEach((function(i,n){var r,a,l=n-(o.raw.series.length-1)/2;r=t.distributeSeries&&!t.stackBars?u.axisLength/o.normalized.series.length/2:t.distributeSeries&&t.stackBars?u.axisLength/2:u.axisLength/o.normalized.series[n].length/2,(a=s.elem("g")).attr({"ct:series-name":i.name,"ct:meta":e.serialize(i.meta)}),a.addClass([t.classNames.series,i.className||t.classNames.series+"-"+e.alphaNumerate(n)].join(" ")),o.normalized.series[n].forEach((function(s,h){var y,v,x,b;if(b=t.distributeSeries&&!t.stackBars?n:t.distributeSeries&&t.stackBars?0:h,y=t.horizontalBars?{x:g.x1+c.projectValue(s&&s.x?s.x:0,h,o.normalized.series[n]),y:g.y1-u.projectValue(s&&s.y?s.y:0,b,o.normalized.series[n])}:{x:g.x1+u.projectValue(s&&s.x?s.x:0,b,o.normalized.series[n]),y:g.y1-c.projectValue(s&&s.y?s.y:0,h,o.normalized.series[n])},u instanceof e.StepAxis&&(u.options.stretch||(y[u.units.pos]+=r*(t.horizontalBars?-1:1)),y[u.units.pos]+=t.stackBars||t.distributeSeries?0:l*t.seriesBarDistance*(t.horizontalBars?-1:1)),m[h]=(x=m[h]||f)-(f-y[u.counterUnits.pos]),void 0!==s){var w={};w[u.units.pos+"1"]=y[u.units.pos],w[u.units.pos+"2"]=y[u.units.pos],!t.stackBars||"accumulate"!==t.stackMode&&t.stackMode?(w[u.counterUnits.pos+"1"]=f,w[u.counterUnits.pos+"2"]=y[u.counterUnits.pos]):(w[u.counterUnits.pos+"1"]=x,w[u.counterUnits.pos+"2"]=m[h]),w.x1=Math.min(Math.max(w.x1,g.x1),g.x2),w.x2=Math.min(Math.max(w.x2,g.x1),g.x2),w.y1=Math.min(Math.max(w.y1,g.y2),g.y1),w.y2=Math.min(Math.max(w.y2,g.y2),g.y1);var _=e.getMetaData(i,h);v=a.elem("line",w,t.classNames.bar).attr({"ct:value":[s.x,s.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(_)}),this.eventEmitter.emit("draw",e.extend({type:"bar",value:s,index:h,meta:_,series:i,seriesIndex:n,axisX:d,axisY:p,chartRect:g,group:a,element:v},w))}}).bind(this))}).bind(this)),this.eventEmitter.emit("created",{bounds:c.bounds,chartRect:g,axisX:d,axisY:p,svg:this.svg,options:t})}})}(this||global,t),function(t,e){"use strict";var i={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:e.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};function o(t,e,i){var o=e.x>t.x;return o&&"explode"===i||!o&&"implode"===i?"start":o&&"implode"===i||!o&&"explode"===i?"end":"middle"}e.Pie=e.Base.extend({constructor:function(t,o,n,r){e.Pie.super.constructor.call(this,t,o,i,e.extend({},i,n),r)},createChart:function(t){var n,r,s,a,l,c=e.normalizeData(this.data),h=[],u=t.startAngle;this.svg=e.createSvg(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie),r=e.createChartRect(this.svg,t,i.padding),s=Math.min(r.width()/2,r.height()/2),l=t.total||c.normalized.series.reduce(function(t,e){return t+e},0);var d=e.quantity(t.donutWidth);"%"===d.unit&&(d.value*=s/100),s-=t.donut&&!t.donutSolid?d.value/2:0,a="outside"===t.labelPosition||t.donut&&!t.donutSolid?s:"center"===t.labelPosition?0:t.donutSolid?s-d.value/2:s/2,a+=t.labelOffset;var p={x:r.x1+r.width()/2,y:r.y2+r.height()/2},g=1===c.raw.series.filter(function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t}).length;c.raw.series.forEach((function(t,e){h[e]=this.svg.elem("g",null,null)}).bind(this)),t.showLabel&&(n=this.svg.elem("g",null,null)),c.raw.series.forEach((function(i,r){if(0!==c.normalized.series[r]||!t.ignoreEmptyValues){h[r].attr({"ct:series-name":i.name}),h[r].addClass([t.classNames.series,i.className||t.classNames.series+"-"+e.alphaNumerate(r)].join(" "));var f=l>0?u+c.normalized.series[r]/l*360:0,m=Math.max(0,u-(0===r||g?0:.2));f-m>=359.99&&(f=m+359.99);var y,v,x,b=e.polarToCartesian(p.x,p.y,s,m),w=e.polarToCartesian(p.x,p.y,s,f),_=new e.Svg.Path(!t.donut||t.donutSolid).move(w.x,w.y).arc(s,s,0,f-u>180,0,b.x,b.y);t.donut?t.donutSolid&&(y=e.polarToCartesian(p.x,p.y,x=s-d.value,u-(0===r||g?0:.2)),v=e.polarToCartesian(p.x,p.y,x,f),_.line(y.x,y.y),_.arc(x,x,0,f-u>180,1,v.x,v.y)):_.line(p.x,p.y);var S=t.classNames.slicePie;t.donut&&(S=t.classNames.sliceDonut,t.donutSolid&&(S=t.classNames.sliceDonutSolid));var C=h[r].elem("path",{d:_.stringify()},S);if(C.attr({"ct:value":c.normalized.series[r],"ct:meta":e.serialize(i.meta)}),t.donut&&!t.donutSolid&&(C._node.style.strokeWidth=d.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:c.normalized.series[r],totalDataSum:l,index:r,meta:i.meta,series:i,group:h[r],element:C,path:_.clone(),center:p,radius:s,startAngle:u,endAngle:f}),t.showLabel){var k,A;k=1===c.raw.series.length?{x:p.x,y:p.y}:e.polarToCartesian(p.x,p.y,a,u+(f-u)/2),A=c.normalized.labels&&!e.isFalseyButZero(c.normalized.labels[r])?c.normalized.labels[r]:c.normalized.series[r];var E=t.labelInterpolationFnc(A,r);if(E||0===E){var T=n.elem("text",{dx:k.x,dy:k.y,"text-anchor":o(p,k,t.labelDirection)},t.classNames.label).text(""+E);this.eventEmitter.emit("draw",{type:"label",index:r,group:n,element:T,text:""+E,x:k.x,y:k.y})}}u=f}}).bind(this)),this.eventEmitter.emit("created",{chartRect:r,svg:this.svg,options:t})},determineAnchorPosition:o})}(this||global,t),t}),window.ol&&!ol.ext&&(ol.ext={}),ol.ext.inherits=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},window.ol&&(ol.inherits||(ol.inherits=ol.ext.inherits)),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),ol.ext.Ajax=function(t){t=t||{},ol.Object.call(this),this._auth=t.auth,this.set("dataType",t.dataType||"JSON")},ol.ext.inherits(ol.ext.Ajax,ol.Object),ol.ext.Ajax.get=function(t){var e=new ol.ext.Ajax(t);t.success&&e.on("success",function(e){t.success(e.response,e)}),t.error&&e.on("error",function(e){t.error(e)}),e.send(t.url,t.data,t.options)},ol.ext.Ajax.getCORS=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.send(),i.onreadystatechange=function(){this.readyState==this.HEADERS_RECEIVED&&e(i.getResponseHeader("Access-Control-Allow-Origin"))}},ol.ext.Ajax.prototype.send=function(t,e,i){var o=this,n=!1!==(i=i||{}).encode;n&&(t=encodeURI(t));var r="";for(var s in e)e.hasOwnProperty(s)&&void 0!==e[s]&&(r+=(r?"&":"?")+s+"="+(n?encodeURIComponent(e[s]):e[s]));this._request&&!1!==i.abort&&this._request.abort();var a=this._request=new XMLHttpRequest;a.open("GET",t+r,!0),i.timeout&&(a.timeout=i.timeout),this._auth&&a.setRequestHeader("Authorization","Basic "+this._auth),this.dispatchEvent({type:"loadstart"}),a.onload=function(){if(o._request=null,o.dispatchEvent({type:"loadend"}),this.status>=200&&this.status<400){var t;try{switch(o.get("dataType")){case"JSON":t=JSON.parse(this.response);break;default:t=this.response}}catch(e){return void o.dispatchEvent({type:"error",status:0,statusText:"parsererror",error:e,options:i,jqXHR:this})}o.dispatchEvent({type:"success",response:t,status:this.status,statusText:this.statusText,options:i,jqXHR:this})}else o.dispatchEvent({type:"error",status:this.status,statusText:this.statusText,options:i,jqXHR:this})},a.ontimeout=function(){o._request=null,o.dispatchEvent({type:"loadend"}),o.dispatchEvent({type:"error",status:this.status,statusText:"Timeout",options:i,jqXHR:this})},a.onerror=function(){o._request=null,o.dispatchEvent({type:"loadend"}),o.dispatchEvent({type:"error",status:this.status,statusText:this.statusText,options:i,jqXHR:this})},a.send()},ol.ext.SVGFilter=function(t){t=t||{},ol.Object.call(this),ol.ext.SVGFilter.prototype.svg||(ol.ext.SVGFilter.prototype.svg=document.createElementNS(this.NS,"svg"),ol.ext.SVGFilter.prototype.svg.setAttribute("version","1.1"),ol.ext.SVGFilter.prototype.svg.setAttribute("width",0),ol.ext.SVGFilter.prototype.svg.setAttribute("height",0),ol.ext.SVGFilter.prototype.svg.style.position="absolute",document.body.appendChild(ol.ext.SVGFilter.prototype.svg)),this.element=document.createElementNS(this.NS,"filter"),this._id=t.id||"_ol_SVGFilter_"+ol.ext.SVGFilter.prototype._id++,this.element.setAttribute("id",this._id),t.color&&this.element.setAttribute("color-interpolation-filters",t.color),t.operation&&this.addOperation(t.operation),ol.ext.SVGFilter.prototype.svg.appendChild(this.element)},ol.ext.inherits(ol.ext.SVGFilter,ol.Object),ol.ext.SVGFilter.prototype.NS="http://www.w3.org/2000/svg",ol.ext.SVGFilter.prototype.svg=null,ol.ext.SVGFilter.prototype._id=0,ol.ext.SVGFilter.prototype.getId=function(){return this._id},ol.ext.SVGFilter.prototype.remove=function(){this.element.remove()},ol.ext.SVGFilter.prototype.addOperation=function(t){t instanceof Array?t.forEach((function(t){this.addOperation(t)}).bind(this)):(t instanceof ol.ext.SVGOperation||(t=new ol.ext.SVGOperation(t)),this.element.appendChild(t.geElement()))},ol.ext.SVGFilter.prototype.grayscale=function(t){this.addOperation({feoperation:"feColorMatrix",type:"saturate",values:t||0})},ol.ext.SVGFilter.prototype.luminanceToAlpha=function(t){t=t||{},this.addOperation({feoperation:"feColorMatrix",type:"luminanceToAlpha"}),t.gamma&&this.addOperation({feoperation:"feComponentTransfer",operations:[{feoperation:"feFuncA",type:"gamma",amplitude:t.gamma,exponent:1,offset:0}]})},ol.ext.SVGFilter.prototype.applyTo=function(t){var e=document.createElement("CANVAS");return e.width=t.naturalWidth||t.width,e.height=t.naturalHeight||t.height,e.getContext("2d").filter="url(#"+this.getId()+")",e.getContext("2d").drawImage(t,0,0),e},ol.ext.SVGOperation=function(t){"string"==typeof t&&(t={feoperation:t}),t&&t.feoperation?(ol.Object.call(this),this._name=t.feoperation,this.element=document.createElementNS(this.NS,this._name),this.setProperties(t),t.operations instanceof Array&&this.appendChild(t.operations)):console.error("[SVGOperation]: no operation defined.")},ol.ext.inherits(ol.ext.SVGOperation,ol.Object),ol.ext.SVGOperation.prototype.NS="http://www.w3.org/2000/svg",ol.ext.SVGOperation.prototype.getName=function(){return this._name},ol.ext.SVGOperation.prototype.set=function(t,e){/^feoperation$|^operations$/.test(t)||(ol.Object.prototype.set.call(this,t,e),this.element.setAttribute(t,e))},ol.ext.SVGOperation.prototype.setProperties=function(t){for(var e in t=t||{})this.set(e,t[e])},ol.ext.SVGOperation.prototype.geElement=function(){return this.element},ol.ext.SVGOperation.prototype.appendChild=function(t){t instanceof Array?t.forEach((function(t){this.appendChild(t)}).bind(this)):(t instanceof ol.ext.SVGOperation||(t=new ol.ext.SVGOperation(t)),this.element.appendChild(t.geElement()))},ol.View.prototype.flyTo&&console.warn("[OL-EXT] ol/View~View.flyTo redefinition"),ol.View.prototype.flyTo=function(t,e){t=t||{},this.cancelAnimations();var i="function"==typeof e?e:function(){},o=t.duration||2e3,n=t.zoomAt||Math.min(t.zoom||100,this.getZoom())-2,r=t.zoom||this.getZoom(),s=t.center||this.getCenter();this.animate({center:s,duration:o,easing:t.easing,anchor:t.anchor,rotation:t.rotation}),this.animate({zoom:n,duration:o/2,easing:t.easing,anchor:t.anchor},{zoom:r,duration:o/2,easing:t.easing,anchor:t.anchor},i)},ol.View.prototype.takeTour=function(t,e){e=e||{};var i=-1,o=(function(n){if(n){var r=t[++i];if("function"==typeof e.step&&e.step(i,t),r){r instanceof Array&&(r={center:[r[0],r[1]],zoom:r[2],type:r[3]});var s=0===i?0:e.delay||750;r.easing||(r.easing=e.easing),r.type||(r.type=e.type),setTimeout((function(){switch(r.type){case"moveTo":this.animate(r,o);break;case"flightTo":default:this.flyTo(r,o)}}).bind(this),s)}else"function"==typeof e.done&&e.done(!0)}else"function"==typeof e.done&&e.done(!1)}).bind(this);o(!0)},ol.color.toHSL=function(t,e){void 0===e&&(e=100),Array.isArray(t)||(t=ol.color.asArray(t));var i,o,n=t[0]/255,r=t[1]/255,s=t[2]/255,a=Math.max(n,r,s),l=Math.min(n,r,s),c=(a+l)/2;if(a===l)i=o=0;else{var h=a-l;switch(o=c>.5?h/(2-a-l):h/(a+l),a){case n:i=(r-s)/h+(r<s?6:0);break;case r:i=(s-n)/h+2;break;case s:i=(n-r)/h+4}}var u=[Math.round(60*i*e)/e,Math.round(100*o*e)/e,Math.round(100*c*e)/e];return t.length>3&&(u[3]=t[3]),u},ol.color.fromHSL=function(t,e){void 0===e&&(e=1e3);var i,o,n,r=t[0]/360,s=t[1]/100,a=t[2]/100;if(0==s)i=o=n=a;else{var l=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},c=a<.5?a*(1+s):a+s-a*s,h=2*a-c;i=l(h,c,r+1/3),o=l(h,c,r),n=l(h,c,r-1/3)}var u=[Math.round(255*i*e)/e,Math.round(255*o*e)/e,Math.round(255*n*e)/e];return t.length>3&&(u[3]=t[3]),u},ol.color.toHSV=function(t,e){void 0===e&&(e=100),Array.isArray(t)||(t=ol.color.asArray(t));var i,o,n=t[0]/255,r=t[1]/255,s=t[2]/255,a=Math.max(n,r,s),l=Math.min(n,r,s),c=a,h=a-l;if(o=0==a?0:h/a,a==l)i=0;else switch(a){case n:i=(r-s)/h+(r<s?6:0);break;case r:i=(s-n)/h+2;break;case s:i=(n-r)/h+4}var u=[Math.round(60*i*e)/e,Math.round(100*o*e)/e,Math.round(100*c*e)/e];return t.length>3&&(u[3]=t[3]),u},ol.color.fromHSV=function(t,e){void 0===e&&(e=1e3);var i,o,n,r=t[0]/360,s=t[1]/100,a=t[2]/100,l=Math.floor(6*r),c=6*r-l,h=a*(1-s),u=a*(1-c*s),d=a*(1-(1-c)*s);switch(l%6){case 0:i=a,o=d,n=h;break;case 1:i=u,o=a,n=h;break;case 2:i=h,o=a,n=d;break;case 3:i=h,o=u,n=a;break;case 4:i=d,o=h,n=a;break;case 5:i=a,o=h,n=u}var p=[Math.round(255*i*e)/e,Math.round(255*o*e)/e,Math.round(255*n*e)/e];return t.length>3&&(p[3]=t[3]),p},ol.color.toHexa=function(t){return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1)},ol.ext.element={},ol.ext.element.create=function(t,e){var i;if(e=e||{},"TEXT"===t)i=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(i);else for(var o in i=document.createElement(t),/button/i.test(t)&&i.setAttribute("type","button"),e)switch(o){case"className":e.className&&e.className.trim&&i.setAttribute("class",e.className.trim());break;case"text":i.innerText=e.text;break;case"html":e.html instanceof Element?i.appendChild(e.html):void 0!==e.html&&(i.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(i);break;case"options":if(/select/i.test(t))for(var n in e.options)ol.ext.element.create("OPTION",{html:n,value:e.options[n],parent:i});break;case"style":this.setStyle(i,e.style);break;case"change":case"click":ol.ext.element.addListener(i,o,e[o]);break;case"on":for(var r in e.on)ol.ext.element.addListener(i,r,e.on[r]);break;case"checked":i.checked=!!e.checked;break;default:i.setAttribute(o,e[o])}return i},ol.ext.element.createSwitch=function(t){var e=ol.ext.element.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),i=Object.assign({input:e},t||{});return new ol.ext.input.Switch(i),e},ol.ext.element.createCheck=function(t){var e=ol.ext.element.create("INPUT",{name:t.name,type:"radio"===t.type?"radio":"checkbox",on:t.on,parent:t.parent});console.log(e);var i=Object.assign({input:e},t||{});return"radio"===t.type?new ol.ext.input.Radio(i):new ol.ext.input.Checkbox(i),e},ol.ext.element.setHTML=function(t,e){e instanceof Element?t.appendChild(e):void 0!==e&&(t.innerHTML=e)},ol.ext.element.appendText=function(t,e){t.appendChild(document.createTextNode(e||""))},ol.ext.element.addListener=function(t,e,i,o){"string"==typeof e&&(e=e.split(" ")),e.forEach(function(e){t.addEventListener(e,i,o)})},ol.ext.element.removeListener=function(t,e,i){"string"==typeof e&&(e=e.split(" ")),e.forEach(function(e){t.removeEventListener(e,i)})},ol.ext.element.show=function(t){t.style.display=""},ol.ext.element.hide=function(t){t.style.display="none"},ol.ext.element.hidden=function(t){return"none"===ol.ext.element.getStyle(t,"display")},ol.ext.element.toggle=function(t){t.style.display="none"===t.style.display?"":"none"},ol.ext.element.setStyle=function(t,e){for(var i in e)switch(i){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":t.style[i]="number"==typeof e[i]?e[i]+"px":e[i];break;default:t.style[i]=e[i]}},ol.ext.element.getStyle=function(t,e){var i,o=(t.ownerDocument||document).defaultView;if(o&&o.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),i=o.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}),/^\d+(em|pt|%|ex)?$/i.test(i=t.currentStyle[e])))return function(e){var i=t.style.left,o=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft+"px",t.style.left=i,t.runtimeStyle.left=o,e}(i);return/px$/.test(i)?parseInt(i):i},ol.ext.element.outerHeight=function(t){return t.offsetHeight+ol.ext.element.getStyle(t,"marginBottom")},ol.ext.element.outerWidth=function(t){return t.offsetWidth+ol.ext.element.getStyle(t,"marginLeft")},ol.ext.element.offsetRect=function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},ol.ext.element.getFixedOffset=function(t){var e={left:0,top:0},i=function(t){if(!t)return e;if("absolute"===ol.ext.element.getStyle(t,"position")&&"none"!==ol.ext.element.getStyle(t,"transform")){var o=t.getBoundingClientRect();return e.left+=o.left,e.top+=o.top,e}return console.log(t,e),i(t.offsetParent)};return i(t.offsetParent)},ol.ext.element.positionRect=function(t,e){var i=0,o=0,n=function(r){if(r)return i+=r.offsetLeft,o+=r.offsetTop,n(r.offsetParent);var s={top:t.offsetTop+o,left:t.offsetLeft+i};return e&&(s.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),s.bottom=s.top+t.offsetHeight,s.right=s.top+t.offsetWidth,s};return n(t.offsetParent)},ol.ext.element.scrollDiv=function(t,e){var i,o,n,r,s,a=!1,l=0,c=0,h="function"==typeof(e=e||{}).onmove?e.onmove:function(){},u=e.vertical?"screenY":"screenX",d=e.vertical?"scrollTop":"scrollLeft",p=!1,g=0,f=function(){s&&(g++,setTimeout(m))},m=function(){if(s){if(--g)return;var e=t.clientHeight,i=t.scrollHeight;s.style.height=100*(o=e/i)+"%",s.style.top=t.scrollTop/i*100+"%",r.style.height=e+"px",e>i-.5?r.classList.add("ol-100pc"):r.classList.remove("ol-100pc")}},y=function(e){e.target.classList.contains("ol-noscroll")||(p=!1,a=e[u],c=new Date,t.classList.add("ol-move"),e.preventDefault(),window.addEventListener("pointermove",v),ol.ext.element.addListener(window,["pointerup","pointercancel"],w))},v=function(e){if(p=!0,!1!==a){var r=(n?-1/o:1)*(a-e[u]);t[d]+=r,(i=new Date)-c&&(l=(l+r/(i-c))/2),a=e[u],c=i,r&&h(!0)}},x=function(e){var i=e>0?Math.min(100,e/2):Math.max(-100,e/2);e-=i,t[d]+=i,-1<e&&e<1?(p?setTimeout(function(){t.classList.remove("ol-move")}):t.classList.remove("ol-move"),p=!1,h(!1)):setTimeout(function(){x(e)},40)};if(e.vertical&&e.minibar){var b=function(i){t.removeEventListener("pointermove",b),t.parentNode.classList.add("ol-miniscroll"),s=ol.ext.element.create("DIV"),r=ol.ext.element.create("DIV",{className:"ol-scroll",html:s}),t.parentNode.insertBefore(r,t),s.addEventListener("pointerdown",function(t){n=!0,y(t)}),e.mousewheel&&(ol.ext.element.addListener(r,["mousewheel","DOMMouseScroll","onmousewheel"],function(t){_(t)}),ol.ext.element.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],function(t){_(t)})),t.parentNode.addEventListener("pointerenter",f),window.addEventListener("resize",f),!1!==i&&f()};t.parentNode?b(!1):t.addEventListener("pointermove",b),t.addEventListener("scroll",function(){f()})}t.style["touch-action"]="none",t.style.overflow="hidden",t.classList.add("ol-scrolldiv"),ol.ext.element.addListener(t,["pointerdown"],function(t){n=!1,y(t)}),t.addEventListener("click",function(e){t.classList.contains("ol-move")&&(e.preventDefault(),e.stopPropagation())},!0);var w=function(i){(c=new Date-c)>100||n?l=0:c>0&&(l=((l||0)+(a-i[u])/c)/2),x(!1===e.animate?0:200*l),a=!1,l=0,c=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout(function(){t.classList.remove("ol-hasClick")},500)),n=!1,window.removeEventListener("pointermove",v),ol.ext.element.removeListener(window,["pointerup","pointercancel"],w)},_=function(e){var i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return t.classList.add("ol-move"),t[d]-=30*i,t.classList.remove("ol-move"),!1};return e.mousewheel&&ol.ext.element.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],_),{refresh:f}},ol.ext.element.dispatchEvent=function(t,e){var i;try{i=new CustomEvent(t)}catch(o){(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,{})}e.dispatchEvent(i)},ol.ext.getMapCanvas=function(t){if(!t)return null;var e=t.getViewport().getElementsByClassName("ol-fixedoverlay")[0];return e||(t.getViewport().querySelector(".ol-layers")?((e=document.createElement("canvas")).className="ol-fixedoverlay",t.getViewport().querySelector(".ol-layers").after(e),t.on("precompose",function(i){e.width=t.getSize()[0]*i.frameState.pixelRatio,e.height=t.getSize()[1]*i.frameState.pixelRatio})):e=t.getViewport().querySelector("canvas")),e},window.ol&&(ol.util?ol.util.VERSION||(ol.util.VERSION=ol.VERSION||"6.1.0"):ol.util={VERSION:ol.VERSION||"5.3.0"}),ol.ext.olVersion=ol.util.VERSION.split("."),ol.ext.olVersion=100*parseInt(ol.ext.olVersion[0])+parseInt(ol.ext.olVersion[1]),ol.ext.getVectorContextStyle=function(t,e){var i=t.frameState.pixelRatio;if(ol.ext.olVersion>605&&1!==i&&e.getImage()instanceof ol.style.Icon){var o=(e=e.clone()).getImage();o.setScale(o.getScale()*i);var n=o.getAnchor();if(o.setDisplacement){var r=o.getDisplacement();r&&(r[0]-=n[0]/i,r[1]+=n[1]/i,o.setAnchor([0,0]))}else n&&(n[0]/=i,n[1]/=i)}return e},window.ol&&(window.ol.ext.imageLoader={}),ol.ext.imageLoader.loadBILImage=function(t,e,i){var o=[parseInt(t.replace(/.*WIDTH=(\d*).*/i,"$1")),parseInt(t.replace(/.*HEIGHT=(\d*).*/i,"$1"))],n=new XMLHttpRequest;n.responseType="blob",n.addEventListener("loadend",function(){var t=this.response;if(void 0!==t){var n=new FileReader;n.addEventListener("loadend",t=>{var i=new Float32Array(t.target.result);e(i,o)}),n.readAsArrayBuffer(t)}else i()}),n.addEventListener("error",function(){i()}),n.open("GET",t),n.send()},ol.ext.imageLoader.loadImage=function(t,e,i){var o=new XMLHttpRequest;o.responseType="blob",o.addEventListener("loadend",function(){var t=this.response;if(void 0!==t){var o=new Image;o.onload=function(){e(o,[o.naturalWidth,o.naturalHeight])},o.src=URL.createObjectURL(t)}else i()}),o.addEventListener("error",function(){i()}),o.open("GET",t),o.send()},ol.ext.imageLoader.pixelTransform=function(t){return function(e,i){ol.ext.imageLoader.loadImage(i,function(i,o){var n=document.createElement("canvas");n.width=o[0],n.height=o[1];var r=n.getContext("2d");r.drawImage(i,0,0);for(var s=r.getImageData(0,0,o[0],o[1]),a=s.data,l=0;l<a.length;l+=4)t(a,l,o);r.putImageData(s,0,0),e.setImage(n)},function(){e.setState(3)})}},ol.ext.imageLoader.grayscale=function(){return ol.ext.imageLoader.pixelTransform(function(t,e){t[e]=t[e+1]=t[e+2]=parseInt(3*t[e]+4*t[e+1]+t[e+2]>>>3)})},ol.ext.imageLoader.transparent=function(t){var e,i;t instanceof Array&&(e=t[0],i=t[1]);var o=e=ol.color.asArray(e);return i?(i=ol.color.asArray(i),o=[Math.min(e[0],i[0]),Math.min(e[1],i[1]),Math.min(e[2],i[2])],i=[Math.max(e[0],i[0]),Math.max(e[1],i[1]),Math.max(e[2],i[2])],ol.ext.imageLoader.pixelTransform(function(t,n){t[n]>=e[0]&&t[n]<=i[0]&&t[n+1]>=o[1]&&t[n+1]<=i[1]&&t[n+2]>=o[2]&&t[n+2]<=i[2]&&(t[n+3]=0)})):ol.ext.imageLoader.pixelTransform(function(t,e){t[e]===o[0]&&t[e+1]===o[1]&&t[e+2]===o[2]&&(t[e+3]=0)})},ol.ext.imageLoader.seaLevelMap=function(t,e){e=e||{};var i=Math.max(t+.01,.01),o=e.color?ol.color.asArray(e.color):[135,203,249],n="number"==typeof e.minValue?e.minValue:-1/0,r=!1!==e.opacity;return ol.ext.imageLoader.elevationMap(function(t){return t<i&&t>n?[o[0],o[1],o[2],r?255*(i-t)/i:255]:[0,0,0,0]})},ol.ext.imageLoader.shadedRelief=function(){var t=Math.PI/4,e=2*Math.PI-Math.PI/4;return function(i,o){ol.ext.imageLoader.loadBILImage(o,function(o,n){var r=document.createElement("canvas"),s=r.getContext("2d"),a=r.width=n[0],l=r.height=n[1],c=s.getImageData(0,0,a,l),h=c.data;function u(t,e){return t+e*a}for(var d=0;d<a;d++)for(var p=0;p<l;p++){var g=u(d,Math.max(0,p-1)),f=u(Math.max(0,d-1),p),m=u(Math.min(a-1,d+1),p),y=u(d,Math.min(l,p+1)),v=(o[m]-o[f])/3,x=(o[y]-o[g])/3,b=Math.sqrt(v*v+x*x),w=Math.acos(v/b);0==b&&(w=0);var _=0;v>0?x>0?_=w+1.5*Math.PI:x<0?_=1.5*Math.PI-w:w=1.5*Math.PI:v<0?_=x<0?w+.5*Math.PI:x>0?.5*Math.PI-w:.5*Math.PI:x<0?_=Math.PI:x>0&&(_=0);var S=Math.cos(_-e)*Math.cos(.5*Math.PI-Math.atan(b))*Math.cos(t)+Math.sin(.5*Math.PI-Math.atan(b))*Math.sin(t);S<0&&(S=0),S=Math.sqrt(.8*S+.5);var C=4*u(d,p);h[C]=h[C+1]=h[C+2]=0,h[C+3]=255-255*S}s.putImageData(c,0,0),i.setImage(r)},function(){i.setState(3)})}},ol.ext.imageLoader.elevationMap=function(t){return"function"!=typeof t&&(t=ol.ext.getPixelFromElevation),function(e,i){ol.ext.imageLoader.loadBILImage(i,function(i,o){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=o[0],n.height=o[1];for(var s=r.getImageData(0,0,o[0],o[1]),a=s.data,l=0;l<i.length;l++){var c=t(i[l]);a[4*l]=c[0],a[4*l+1]=c[1],a[4*l+2]=c[2],a[4*l+3]=c[3]}r.putImageData(s,0,0),e.setImage(n)},function(){e.setState(3)})}},ol.ext.getPixelFromElevation=function(t){var e=Math.round(100*t+12e5);return[e>>16,e%65536>>8,e%256,255]},ol.ext.getElevationFromPixel=function(t){return.01*((t[0]<<16)+(t[1]<<8)+t[2])-12e3},ol.matrix3D={},ol.matrix3D.getTransform=function(t){var e,i,o=window.getComputedStyle(t,null),n=(o.getPropertyValue("-webkit-transform")||o.getPropertyValue("-moz-transform")||o.getPropertyValue("-ms-transform")||o.getPropertyValue("-o-transform")||o.getPropertyValue("transform")).split("(")[1].split(")")[0].split(","),r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];if(16===n.length)for(e=0;e<4;++e)for(i=0;i<4;++i)r[i][e]=+n[4*e+i];else for(e=0;e<3;++e)for(i=0;i<2;++i)r[i][e]=+n[2*e+i];return r},ol.matrix3D.getTransformOrigin=function(t){for(var e=window.getComputedStyle(t,null),i=(e.getPropertyValue("-webkit-transform-origin")||e.getPropertyValue("-moz-transform-origin")||e.getPropertyValue("-ms-transform-origin")||e.getPropertyValue("-o-transform-origin")||e.getPropertyValue("transform-origin")).split(" "),o=[0,0,0,1],n=0;n<i.length;++n)o[n]=parseInt(i[n]);return o},ol.matrix3D.translateMatrix=function(t,e,i){return[[1,0,0,t],[0,1,0,e],[0,0,1,i],[0,0,0,1]]},ol.matrix3D.identity=function(){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]},ol.matrix3D.roundTo=function(t,e){e||(e=1e-10);for(var i=[[],[],[],[]],o=0;o<4;o++)for(var n=0;n<4;n++)i[o][n]=Math.round(t[o][n]/e)*e;return i},ol.matrix3D.multiply=function(t,e){for(var i=[[],[],[],[]],o=0;o<4;++o)for(var n=0;n<4;++n){for(var r=0,s=0;s<4;++s)r+=t[s][o]*e[n][s];i[n][o]=r}return i},ol.matrix3D.computeTransformMatrix=function(t,e){var i=ol.matrix3D.translateMatrix(-e[0],-e[1],-e[2]),o=ol.matrix3D.translateMatrix(e[0],e[1],e[2]),n=ol.matrix3D.multiply(i,t);return ol.matrix3D.multiply(n,o)},ol.matrix3D.transformVertex=function(t,e){for(var i=[e[0],e[1],0,1],o=[],n=0;n<4;++n){o[n]=0;for(var r=0;r<4;++r)o[n]+=+t[n][r]*i[r]}return o},ol.matrix3D.projectVertex=function(t){for(var e=[],i=0;i<4;++i)e[i]=t[i]/t[3];return e},ol.matrix3D.inverse=function(t){var e=t[0][0]*t[1][1]-t[1][0]*t[0][1],i=t[0][0]*t[1][2]-t[1][0]*t[0][2],o=t[0][0]*t[1][3]-t[1][0]*t[0][3],n=t[0][1]*t[1][2]-t[1][1]*t[0][2],r=t[0][1]*t[1][3]-t[1][1]*t[0][3],s=t[0][2]*t[1][3]-t[1][2]*t[0][3],a=t[2][2]*t[3][3]-t[3][2]*t[2][3],l=t[2][1]*t[3][3]-t[3][1]*t[2][3],c=t[2][1]*t[3][2]-t[3][1]*t[2][2],h=t[2][0]*t[3][3]-t[3][0]*t[2][3],u=t[2][0]*t[3][2]-t[3][0]*t[2][2],d=t[2][0]*t[3][1]-t[3][0]*t[2][1],p=1/(e*a-i*l+o*c+n*h-r*u+s*d);if(isNaN(p)||p===1/0)throw new Error("Inverse determinant attempted to divide by zero.");return[[(t[1][1]*a-t[1][2]*l+t[1][3]*c)*p,(-t[0][1]*a+t[0][2]*l-t[0][3]*c)*p,(t[3][1]*s-t[3][2]*r+t[3][3]*n)*p,(-t[2][1]*s+t[2][2]*r-t[2][3]*n)*p],[(-t[1][0]*a+t[1][2]*h-t[1][3]*u)*p,(t[0][0]*a-t[0][2]*h+t[0][3]*u)*p,(-t[3][0]*s+t[3][2]*o-t[3][3]*i)*p,(t[2][0]*s-t[2][2]*o+t[2][3]*i)*p],[(t[1][0]*l-t[1][1]*h+t[1][3]*d)*p,(-t[0][0]*l+t[0][1]*h-t[0][3]*d)*p,(t[3][0]*r-t[3][1]*o+t[3][3]*e)*p,(-t[2][0]*r+t[2][1]*o-t[2][3]*e)*p],[(-t[1][0]*c+t[1][1]*u-t[1][2]*d)*p,(t[0][0]*c-t[0][1]*u+t[0][2]*d)*p,(-t[3][0]*n+t[3][1]*i-t[3][2]*e)*p,(t[2][0]*n-t[2][1]*i+t[2][2]*e)*p]]},window.ol&&!ol.sphere&&(ol.sphere={},ol.sphere.getDistance=function(t,e,i){return new ol.Sphere(i||6371008.8).haversineDistance(t,e)},ol.sphere.getArea=ol.Sphere.getArea,ol.sphere.getLength=ol.Sphere.getLength),ol.ext.SVGFilter.Laplacian=function(t){t=t||{},ol.ext.SVGFilter.call(this,{id:t.id});var e={feoperation:"feConvolveMatrix",in:"SourceGraphic",preserveAlpha:!0,result:"C1"};e.kernelMatrix=4===t.neighbours?[0,-1,0,-1,4,-1,0,-1,0]:[-1,-1,-1,-1,8,-1,-1,-1,-1],this.addOperation(e),t.grayscale?this.grayscale():t.alpha&&this.luminanceToAlpha({gamma:t.gamma})},ol.ext.inherits(ol.ext.SVGFilter.Laplacian,ol.ext.SVGFilter),ol.ext.SVGFilter.Prewitt=function(t){t=t||{},ol.ext.SVGFilter.call(this,{id:t.id,color:"sRGB"});var e={feoperation:"feConvolveMatrix",in:"SourceGraphic",preserveAlpha:!0,order:3,kernelMatrix:[-1,-1,-1,0,0,0,1,1,1],result:"V1"};this.addOperation(e),e.kernelMatrix=[1,1,1,0,0,0,-1,-1,-1],e.result="V2",this.addOperation(e),e.kernelMatrix=[-1,0,1,-1,0,1,-1,0,1],e.result="H1",this.addOperation(e),e.kernelMatrix=[1,-0,-1,1,0,-1,1,0,-1],e.result="H2",this.addOperation(e),this.addOperation({feoperation:"feComposite",operator:"arithmetic",in:"V1",in2:"V2",k2:1,k3:1,result:"V"}),this.addOperation({feoperation:"feComposite",operator:"arithmetic",in:"H1",in2:"H2",k2:1,k3:1,result:"H"}),this.addOperation({feoperation:"feBlend",mode:"lighten",in:"H",in2:"V"}),t.grayscale?this.grayscale():t.alpha&&this.luminanceToAlpha()},ol.ext.inherits(ol.ext.SVGFilter.Prewitt,ol.ext.SVGFilter),ol.ext.SVGFilter.Roberts=function(t){t=t||{},ol.ext.SVGFilter.call(this,{id:t.id,color:"sRGB"});var e={feoperation:"feConvolveMatrix",in:"SourceGraphic",preserveAlpha:!0,order:3,kernelMatrix:[-1,0,0,0,0,0,0,0,1],result:"V1"};this.addOperation(e),e.kernelMatrix=[1,0,0,0,0,0,0,0,-1],e.result="V2",this.addOperation(e),e.kernelMatrix=[0,0,1,0,0,0,-1,0,0],e.result="H1",this.addOperation(e),e.kernelMatrix=[0,-0,-1,0,0,0,1,0,0],e.result="H2",this.addOperation(e),this.addOperation({feoperation:"feComposite",operator:"arithmetic",in:"V1",in2:"V2",k2:1,k3:1,result:"V"}),this.addOperation({feoperation:"feComposite",operator:"arithmetic",in:"H1",in2:"H2",k2:1,k3:1,result:"H"}),this.addOperation({feoperation:"feBlend",mode:"lighten",in:"H",in2:"V"}),t.grayscale?this.grayscale():t.alpha&&this.luminanceToAlpha()},ol.ext.inherits(ol.ext.SVGFilter.Roberts,ol.ext.SVGFilter),ol.ext.SVGFilter.Sobel=function(t){t=t||{},ol.ext.SVGFilter.call(this,{id:t.id,color:"sRGB"});var e={feoperation:"feConvolveMatrix",in:"SourceGraphic",preserveAlpha:!0,order:3,kernelMatrix:[-1,-2,-1,0,0,0,1,2,1],result:"V1"};this.addOperation(e),e.kernelMatrix=[1,2,1,0,0,0,-1,-2,-1],e.result="V2",this.addOperation(e),e.kernelMatrix=[-1,0,1,-2,0,2,-1,0,1],e.result="H1",this.addOperation(e),e.kernelMatrix=[1,-0,-1,2,0,-2,1,0,-1],e.result="H2",this.addOperation(e),this.addOperation({feoperation:"feComposite",operator:"arithmetic",in:"V1",in2:"V2",k2:1,k3:1,result:"V"}),this.addOperation({feoperation:"feComposite",operator:"arithmetic",in:"H1",in2:"H2",k2:1,k3:1,result:"H"}),this.addOperation({feoperation:"feBlend",mode:"lighten",in:"H",in2:"V"}),t.grayscale?this.grayscale():t.alpha&&this.luminanceToAlpha({gamma:t.gamma})},ol.ext.inherits(ol.ext.SVGFilter.Sobel,ol.ext.SVGFilter),window.ol&&(ol.ext.input={}),ol.ext.input.Base=function(t){t=t||{},ol.Object.call(this);var e=this.input=t.input;e||(e=this.input=document.createElement("INPUT"),t.type&&e.setAttribute("type",t.type),void 0!==t.min&&e.setAttribute("min",t.min),void 0!==t.max&&e.setAttribute("max",t.max),void 0!==t.step&&e.setAttribute("step",t.step),t.parent&&t.parent.appendChild(e)),t.disabled&&(e.disabled=!0),void 0!==t.checked&&(e.checked=!!t.checked),void 0!==t.val&&(e.value=t.val),t.hidden&&(e.style.display="none")},ol.ext.inherits(ol.ext.input.Base,ol.Object),ol.ext.input.Base.prototype._listenDrag=function(t,e){var i=(function(i){this.moving=!0;var o=(function(i){"pointerup"===i.type&&(document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",o),document.removeEventListener("pointercancel",o),setTimeout((function(){this.moving=!1}).bind(this))),i.target===t&&e(i),i.stopPropagation(),i.preventDefault()}).bind(this);document.addEventListener("pointermove",o,!1),document.addEventListener("pointerup",o,!1),document.addEventListener("pointercancel",o,!1),i.stopPropagation(),i.preventDefault()}).bind(this);t.addEventListener("mousedown",i,!1),t.addEventListener("touchstart",i,!1)},ol.ext.input.Base.prototype.setValue=function(t){void 0!==t&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))},ol.ext.input.Base.prototype.getValue=function(){return this.input.value},ol.ext.input.Base.prototype.getInputElement=function(){return this.input},ol.ext.input.Slider=function(t){t=t||{},ol.ext.input.Base.call(this,t),this.set("overflow",!!t.overflow),this.element=ol.ext.element.create("DIV",{className:"ol-input-slider"+(t.type?" ol-"+t.type:"")+(t.className?" "+t.className:"")}),t.fixed&&this.element.classList.add("ol-fixed");var e=this.input;e.parentNode&&e.parentNode.insertBefore(this.element,e),this.element.appendChild(e),"right"===t.align&&this.element.classList.add("ol-right");var i=ol.ext.element.create("DIV",{className:"ol-popup",parent:this.element});t.before&&ol.ext.element.create("DIV",{className:"ol-before",html:t.before,parent:i});var o=this.slider=ol.ext.element.create("DIV",{className:"ol-slider",parent:i});ol.ext.element.create("DIV",{className:"ol-back",parent:this.slider});var n=ol.ext.element.create("DIV",{className:"ol-cursor",parent:o});t.after&&ol.ext.element.create("DIV",{className:"ol-after",html:t.after,parent:i});var r=void 0!==t.min?t.min:parseFloat(e.min)||0,s=void 0!==t.max?t.max:parseFloat(e.max)||1,a=void 0!==t.step?t.step:parseFloat(e.step)||1;this._listenDrag(o,(function(t){var i=Math.max(0,Math.min(t.offsetX/o.clientWidth,1));n.style.left=Math.max(0,Math.min(100,Math.round(100*i)))+"%";var l=e.value=Math.round((i*(s-r)+r)/a)*a;this.dispatchEvent({type:"change:value",value:l})}).bind(this));var l=(function(){var t=parseFloat(e.value)||0;this.get("overflow")||(t=Math.max(r,Math.min(s,t))),t!=e.value&&(e.value=t),n.style.left=Math.max(0,Math.min(100,Math.round((t-r)/(s-r)*100)))+"%",this.dispatchEvent({type:"change:value",value:t})}).bind(this);e.addEventListener("change",l),l()},ol.ext.inherits(ol.ext.input.Slider,ol.ext.input.Base),ol.ext.input.PopupBase=function(t){switch((t=t||{}).hidden=!1!==t.hidden,ol.ext.input.Base.call(this,t),this.set("autoClose",!1!==t.autoClose),this.element=ol.ext.element.create("DIV",{className:("ol-ext-popup-input "+(t.className||"")).trim()}),t.position){case"inline":break;case"static":case"fixed":this.element.classList.add("ol-popup"),this.element.classList.add("ol-popup-fixed"),this._fixed="fixed"===t.position;break;default:this.element.classList.add("ol-popup")}var e=this.input;e.parentNode&&e.parentNode.insertBefore(this.element,e),this.element.addEventListener("click",(function(){this.isCollapsed()&&setTimeout((function(){this.collapse(!1)}).bind(this))}).bind(this)),document.addEventListener("click",(function(){this.moving||this.collapse(!0)}).bind(this)),window.addEventListener("resize",(function(){this.collapse(!0)}).bind(this)),this._elt={},this._elt.popup=ol.ext.element.create("DIV",{className:"ol-popup",parent:this.element}),this._elt.popup.addEventListener("click",function(t){t.stopPropagation()})},ol.ext.inherits(ol.ext.input.PopupBase,ol.ext.input.Base),ol.ext.input.PopupBase.prototype.collapse=function(t){if(t!=this.isCollapsed()&&this.dispatchEvent({type:"change:visible",visible:!this.isCollapsed()}),this.dispatchEvent({type:"collapse",visible:!t}),t)this._elt.popup.classList.remove("ol-visible");else if(this._elt.popup.classList.add("ol-visible"),this._fixed){var e=this.element.getBoundingClientRect(),i=ol.ext.element.getFixedOffset(this.element);this._elt.popup.style.top=(e={bottom:e.bottom-i.top,left:e.left-i.left}).bottom+this._elt.popup.offsetHeight+i.top>document.documentElement.clientHeight?Math.max(document.documentElement.clientHeight-this._elt.popup.offsetHeight-i.top,0)+"px":e.bottom+"px",this._elt.popup.style.left=e.left+this._elt.popup.offsetWidth+i.left>document.documentElement.clientWidth?Math.max(document.documentElement.clientWidth-this._elt.popup.offsetWidth-i.left,0)+"px":e.left+"px"}},ol.ext.input.PopupBase.prototype.isCollapsed=function(){return!this._elt.popup.classList.contains("ol-visible")},ol.ext.input.PopupBase.prototype.toggle=function(){this.collapse(!this.isCollapsed())},ol.ext.input.Checkbox=function(t){t=t||{},ol.ext.input.Base.call(this,t);var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):void 0!==t.html&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox "+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",(function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}).bind(this))},ol.ext.inherits(ol.ext.input.Checkbox,ol.ext.input.Base),ol.ext.input.Checkbox.prototype.isChecked=function(){return this.input.checked},ol.ext.input.Collection=function(t){ol.Object.call(this),this.element=ol.ext.element.create("UL",{className:("ol-collection-list "+(t.className||"")).trim(),parent:t.target}),this.collection=t.collection,this._title="function"==typeof t.getTitle?t.getTitle:function(t){return t.title},this.refresh(),this.collection.on("change:length",(function(){if(!this._reorder){this.refresh();var t=this.getSelectPosition();this.dispatchEvent(t<0?{type:"item:select",position:-1,item:null}:{type:"item:order",position:t,item:this._currentItem})}}).bind(this))},ol.ext.inherits(ol.ext.input.Collection,ol.Object),ol.ext.input.Collection.prototype.select=function(t){if(t!==this._currentItem){var e=-1;this._listElt.forEach(function(i,o){i.item!==t?i.li.classList.remove("ol-select"):(i.li.classList.add("ol-select"),e=o)}),this._currentItem=e>=0?t:null,this.dispatchEvent({type:"item:select",position:e,item:this._currentItem})}},ol.ext.input.Collection.prototype.selectAt=function(t){this.select(this.collection.item(t))},ol.ext.input.Collection.prototype.getSelect=function(){return this._currentItem},ol.ext.input.Collection.prototype.getSelectPosition=function(){return this.collection.getArray().indexOf(this._currentItem)},ol.ext.input.Collection.prototype.refresh=function(){this.element.innerHTML="",this._listElt=[],this.collection.forEach((t,e)=>{var i=ol.ext.element.create("LI",{html:this._title(t),className:this._currentItem===t?"ol-select":"","data-position":e,on:{click:(function(){this.select(t)}).bind(this),dblclick:(function(){this.dispatchEvent({type:"item:dblclick",position:e,item:t})}).bind(this)},parent:this.element});this._listElt.push({li:i,item:t});var o=ol.ext.element.create("DIV",{className:"ol-noscroll ol-order",parent:i}),n=e,r=(function(t){for(var e="touch"===t.pointerType?document.elementFromPoint(t.clientX,t.clientY):t.target;e&&e.parentNode!==this.element;)e=e.parentNode;if(e&&e!==i){var o=parseInt(e.getAttribute("data-position"));e.getAttribute("data-position")<n?(e.insertAdjacentElement("beforebegin",i),n=o):(e.insertAdjacentElement("afterend",i),n=o+1)}}).bind(this),s=(function(){document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",s),document.removeEventListener("pointercancel",s),n!==e&&(this._reorder=!0,this.collection.removeAt(e),this.collection.insertAt(n>e?n-1:n,t),this._reorder=!1,this.dispatchEvent({type:"item:order",position:n>e?n-1:n,oldPosition:e,item:t}),this.refresh())}).bind(this);o.addEventListener("pointerdown",(function(){this.select(t),document.addEventListener("pointermove",r),document.addEventListener("pointerup",s),document.addEventListener("pointercancel",s)}).bind(this))})},ol.ext.input.Color=function(t){(t=t||{}).hidden=!1!==t.hidden,t.className=("ol-ext-colorpicker "+(t.hastab?"ol-tab ":"")+(t.className||"")).trim(),ol.ext.input.PopupBase.call(this,t),!1===t.opacity&&this.element.classList.add("ol-nopacity"),this._cursor={};var e=this._hsv={};this._elt.vignet=ol.ext.element.create("DIV",{className:"ol-vignet",parent:this.element});var i=ol.ext.element.create("DIV",{className:"ol-tabbar",parent:this._elt.popup});ol.ext.element.create("DIV",{className:"ol-tab",html:t.paletteLabel||"palette",click:(function(){this.element.classList.remove("ol-picker-tab")}).bind(this),parent:i}),ol.ext.element.create("DIV",{className:"ol-tab",html:t.pickerLabel||"picker",click:(function(){this.element.classList.add("ol-picker-tab")}).bind(this),parent:i});var o=ol.ext.element.create("DIV",{className:"ol-container",parent:this._elt.popup}),n=this._elt.picker=ol.ext.element.create("DIV",{className:"ol-picker",parent:o}),r=this._cursor.picker=ol.ext.element.create("DIV",{className:"ol-cursor",parent:n});this._listenDrag(n,(function(t){var i=Math.max(0,Math.min(t.offsetX/n.clientWidth,1)),o=Math.max(0,Math.min(t.offsetY/n.clientHeight,1));r.style.left=Math.round(100*i)+"%",r.style.top=Math.round(100*o)+"%",e.s=100*i,e.v=100-100*o,this.setColor()}).bind(this));var s=ol.ext.element.create("DIV",{className:"ol-slider",parent:o});this._elt.slider=ol.ext.element.create("DIV",{parent:s});var a=this._cursor.slide=ol.ext.element.create("DIV",{className:"ol-cursor",parent:s});this._listenDrag(s,(function(t){var i=Math.max(0,Math.min(t.offsetX/s.clientWidth,1));e.a=100*i,a.style.left=Math.round(100*i)+"%",this.setColor()}).bind(this));var l=ol.ext.element.create("DIV",{className:"ol-tint",parent:o}),c=this._cursor.tint=ol.ext.element.create("DIV",{className:"ol-cursor",parent:l});this._listenDrag(l,(function(t){var i=Math.max(0,Math.min(t.offsetY/l.clientHeight,1));e.h=360*i,c.style.top=Math.round(100*i)+"%",this.setColor()}).bind(this)),ol.ext.element.create("DIV",{className:"ol-clear",click:(function(){this.setColor([0,0,0,0])}).bind(this),parent:o});var h,u=ol.ext.element.create("DIV",{className:"ol-rgb",parent:o}),d=(function(){var t=Math.max(0,Math.min(255,parseInt(this._elt.r.value))),e=Math.max(0,Math.min(255,parseInt(this._elt.g.value))),i=Math.max(0,Math.min(255,parseInt(this._elt.b.value))),o=Math.max(0,Math.min(1,parseFloat(this._elt.a.value)));this.setColor([t,e,i,o])}).bind(this);for(this._elt.r=ol.ext.element.create("INPUT",{type:"number",lang:"en-GB",change:d,min:0,max:255,parent:u}),this._elt.g=ol.ext.element.create("INPUT",{type:"number",lang:"en-GB",change:d,min:0,max:255,parent:u}),this._elt.b=ol.ext.element.create("INPUT",{type:"number",lang:"en-GB",change:d,min:0,max:255,parent:u}),this._elt.a=ol.ext.element.create("INPUT",{type:"number",lang:"en-GB",change:d,min:0,max:1,step:.1,parent:u}),this._elt.txtColor=ol.ext.element.create("INPUT",{type:"text",className:"ol-txt-color",change:(function(){var t;this._elt.txtColor.classList.remove("ol-error");try{t=ol.color.asArray(this._elt.txtColor.value)}catch(e){this._elt.txtColor.classList.add("ol-error")}t&&this.setColor(t)}).bind(this),parent:o}),ol.ext.element.create("BUTTON",{html:"OK",click:(function(){this._addCustomColor(this.getColor()),this.collapse(!0)}).bind(this),parent:o}),this._paletteColor={},this._elt.palette=ol.ext.element.create("DIV",{className:"ol-palette",parent:this._elt.popup}),h=0;h<8;h++){var p=Math.round(255-255*h/7);this.addPaletteColor([p,p,p],p)}var g=["#f00","#f90","#ff0","#0f0","#0ff","#48e","#00f","#f0f"];for(g.forEach((function(t){this.addPaletteColor(t,ol.color.toHexa(ol.color.asArray(t)))}).bind(this)),h=0;h<5;h++)g.forEach((function(t){t=[(t=ol.color.toHSV(ol.color.asArray(t)))[0],h/4*80+20,100-h/4*60],t=ol.color.fromHSV(t,1),this.addPaletteColor(t,ol.color.toHexa(t))}).bind(this));ol.ext.element.create("HR",{parent:this._elt.palette}),ol.ext.input.Color.customColorList||(ol.ext.input.Color.customColorList=new ol.Collection,JSON.parse(localStorage.getItem("ol-ext@colorpicker")||"[]").forEach(function(t){ol.ext.input.Color.customColorList.push(t)}),ol.ext.input.Color.customColorList.on(["add","remove"],function(){localStorage.setItem("ol-ext@colorpicker",JSON.stringify(ol.ext.input.Color.customColorList.getArray()))})),ol.ext.input.Color.customColorList.on("add",(function(t){this.addPaletteColor(this.getColorFromID(t.element))}).bind(this)),ol.ext.input.Color.customColorList.on("remove",(function(t){this._paletteColor[t.element]&&this._paletteColor[t.element].element.remove(),delete this._paletteColor[t.element]}).bind(this)),ol.ext.input.Color.customColorList.forEach((function(t){this._addCustomColor(this.getColorFromID(t))}).bind(this)),this.setColor(t.color||[0,0,0,0]),this._currentColor=this.getColorID(this.getColor()),this.on("color",(function(){this._addCustomColor(this.getColor()),this._currentColor=this.getColorID(this.getColor()),this.setColor()}).bind(this)),this.on("collapse",(function(t){if(t.visible)this._currentColor=this.getColorID(this.getColor());else{var e=this.getColor();this._currentColor!==this.getColorID(e)&&this.dispatchEvent({type:"color",color:e})}}).bind(this))},ol.ext.inherits(ol.ext.input.Color,ol.ext.input.PopupBase),ol.ext.input.Color.customColorList=null,ol.ext.input.Color.prototype.addPaletteColor=function(t,e,i){try{t=ol.color.asArray(t)}catch(n){return}var o=this.getColorID(t);!this._paletteColor[o]&&t[3]&&(this._paletteColor[o]={color:t,element:ol.ext.element.create("DIV",{title:e||"",className:t[3]<1?"ol-alpha":"",style:{color:"rgb("+t.join(",")+")"},click:(function(){this.setColor(t),this.get("autoClose")&&this.collapse(!0)}).bind(this),parent:this._elt.palette})}),i&&this._selectPalette(t)},ol.ext.input.Color.prototype.showTab=function(t){"palette"===t?this.element.classList.remove("ol-picker-tab"):this.element.classList.add("ol-picker-tab")},ol.ext.input.Color.prototype.getTab=function(){return this.element.classList.contains("ol-picker-tab")?"picker":"palette"},ol.ext.input.Color.prototype._selectPalette=function(t){var e=this.getColorID(t);Object.keys(this._paletteColor).forEach((function(t){this._paletteColor[t].element.classList.remove("ol-select")}).bind(this)),this._paletteColor[e]&&this._paletteColor[e].element.classList.add("ol-select")},ol.ext.input.Color.prototype.setColor=function(t){var e=this._hsv;if(t){t=ol.color.asArray(t);var i=ol.color.toHSV(t);e.h=i[0],e.s=i[1],e.v=i[2],e.a=i.length>3?100*i[3]:100,this._cursor.picker.style.left=e.s+"%",this._cursor.picker.style.top=100-e.v+"%",this._cursor.tint.style.top=e.h/360*100+"%",this._cursor.slide.style.left=e.a+"%",this.isCollapsed()&&this.dispatchEvent({type:"color",color:t})}else e.a=Math.round(e.a),t=this.getColor();var o="rgba("+t.join(", ")+")";this._elt.picker.style.color="hsl("+e.h+", 100%, 50%)",this._elt.slider.style.backgroundImage="linear-gradient(45deg, transparent, rgba("+this.getColor(!1).join(",")+"))",this._elt.vignet.style.color=o,this._elt.r.value=t[0],this._elt.g.value=t[1],this._elt.b.value=t[2],this._elt.a.value=t[3],this._elt.txtColor.classList.remove("ol-error"),this._elt.txtColor.value=1===t[3]?ol.color.toHexa(t):o,this._selectPalette(t),this.input.value!==o&&(this.input.value=o,this.input.dispatchEvent(new Event("change")))},ol.ext.input.Color.prototype.getColor=function(t){return ol.color.fromHSV([this._hsv.h,this._hsv.s,this._hsv.v,!1!==t?this._hsv.a/100:1],1)},ol.ext.input.Color.prototype._addCustomColor=function(t){var e=this.getColorID(t);this._paletteColor[e]||t[3]&&(ol.ext.input.Color.customColorList.getArray().indexOf(e)<0&&(ol.ext.input.Color.customColorList.push(e),ol.ext.input.Color.customColorList.getLength()>24&&ol.ext.input.Color.customColorList.removeAt(0)),this.addPaletteColor(t))},ol.ext.input.Color.prototype.clearCustomColor=function(){ol.ext.input.Color.customColorList.clear()},ol.ext.input.Color.prototype.getColorID=function(t){return void 0===(t=ol.color.asArray(t))[3]&&(t[3]=1),t.join("-")},ol.ext.input.Color.prototype.getColorFromID=function(t){var e=t.split("-");return[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]},ol.ext.input.List=function(t){switch(t=t||{},ol.ext.input.Base.call(this,t),this._content=ol.ext.element.create("DIV"),this.element=ol.ext.element.create("DIV",{html:this._content,className:"ol-input-popup"}),this.set("hideOnClick",!1!==t.hideOnClick),t.className&&this.element.classList.add(t.className),t.fixed&&(this.element.classList.add("ol-fixed"),this.set("hideOnClick",!1)),t.align){case"middle":this.set("hideOnClick",!1);case"rigth":this.element.classList.add("ol-"+t.align)}var e=this.input;e.parentNode&&e.parentNode.insertBefore(this.element,e),this.element.appendChild(e);var i=this.popup=ol.ext.element.create("UL",{className:"ol-popup",parent:this.element}),o=[];t.options.forEach(t=>{o.push({value:t.value,element:ol.ext.element.create("LI",{html:t.html,title:t.title||t.value,className:"ol-option",click:(function(){this.setValue(t.value),this.get("hideOnClick")&&(i.style.display="none",setTimeout(function(){i.style.display=""},200))}).bind(this),parent:this.popup})})}),this.input.addEventListener("change",(function(){var t,e=this.input.value;o.forEach(function(i){i.value==e?(i.element.classList.add("ol-selected"),t=i.element):i.element.classList.remove("ol-selected")}),this.dispatchEvent({type:"change:value",value:this.getValue()}),this._content.innerHTML=t?t.innerHTML:""}).bind(this));var n=new Event("change");setTimeout((function(){this.input.dispatchEvent(n)}).bind(this))},ol.ext.inherits(ol.ext.input.List,ol.ext.input.Base),ol.ext.input.Radio=function(t){t=t||{},ol.ext.input.Checkbox.call(this,t),this.element.className=("ol-ext-check ol-ext-radio "+(t.className||"")).trim()},ol.ext.inherits(ol.ext.input.Radio,ol.ext.input.Checkbox),ol.ext.input.Size=function(t){(t=t||{}).options=[],(t.size||[0,2,3,5,8,13,21,34,55]).forEach(function(e){t.options.push({value:e,html:ol.ext.element.create("DIV",{className:"ol-option-"+e,style:{fontSize:e?e+"px":void 0}})})}),ol.ext.input.List.call(this,t),this._content.remove(),this.element.classList.add("ol-size")},ol.ext.inherits(ol.ext.input.Size,ol.ext.input.List),ol.ext.input.Size.prototype.getValue=function(){return parseFloat(ol.ext.input.List.prototype.getValue.call(this))},ol.ext.input.Switch=function(t){t=t||{},ol.ext.input.Checkbox.call(this,t),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()},ol.ext.inherits(ol.ext.input.Switch,ol.ext.input.Checkbox),ol.ext.input.Width=function(t){(t=t||{}).options=[],(t.size||[0,1,2,3,5,10,15,20]).forEach(function(e){t.options.push({value:e,html:ol.ext.element.create("DIV",{className:"ol-option-"+e,style:{height:e||void 0}})})}),ol.ext.input.List.call(this,t),this._content.remove(),this.element.classList.add("ol-width")},ol.ext.inherits(ol.ext.input.Width,ol.ext.input.List),ol.ext.input.Width.prototype.getValue=function(){return parseFloat(ol.ext.input.List.prototype.getValue.call(this))},window.ol&&!ol.legend&&(ol.legend={}),ol.legend.Legend=function(t){t=t||{},ol.Object.call(this),this._items=new ol.Collection;var e,i=[];this._items.on("add",(function(t){i.push({item:t.element,on:t.element.on("change",(function(){this.refresh()}).bind(this))}),e&&(clearTimeout(e),e=null),e=setTimeout((function(){this.refresh()}).bind(this),0)}).bind(this)),this._items.on("remove",(function(t){for(var o=0;o<i;o++)if(t.element===i[o].item){ol.Observable.unByKey(i[o].on),i.splice(o,1);break}e&&(clearTimeout(e),e=null),e=setTimeout((function(){this.refresh()}).bind(this),0)}).bind(this)),this._listElement=ol.ext.element.create("UL",{className:"ol-legend"}),this._canvas=document.createElement("canvas"),this.set("size",t.size||[40,25],!0),this.set("margin",0===t.margin?0:t.margin||10,!0),this._textStyle=t.textStyle||new ol.style.Text({font:"16px sans-serif",fill:new ol.style.Fill({color:"#333"}),backgroundFill:new ol.style.Fill({color:"rgba(255,255,255,.8)"})}),this._title=new ol.legend.Item({title:t.title||"",className:"ol-title"}),t.titleStyle?this._titleStyle=t.titleStyle:(this._titleStyle=this._textStyle.clone(),this._titleStyle.setFont("bold "+this._titleStyle.getFont())),this.setStyle(t.style),t.items instanceof Array&&t.items.forEach((function(t){this.addItem(t)}).bind(this)),this.refresh()},ol.ext.inherits(ol.legend.Legend,ol.Object),ol.legend.Legend.prototype.setTitle=function(t){this._title.setTitle(t),this.refresh()},ol.legend.Legend.prototype.getTitle=function(){return this._title.get("title")},ol.legend.Legend.prototype.getTextStyle=function(){return this._textStyle},ol.legend.Legend.prototype.set=function(t,e,i){ol.Object.prototype.set.call(this,t,e,i),i||this.refresh()},ol.legend.Legend.prototype.getListElement=function(){return this._listElement},ol.legend.Legend.prototype.getCanvas=function(){return this._canvas},ol.legend.Legend.prototype.setStyle=function(t){this._style=t,this.refresh()},ol.legend.Legend.prototype.addItem=function(t){t instanceof ol.legend.Item?this._items.push(t):this._items.push(new ol.legend.Item(t))},ol.legend.Legend.prototype.getItems=function(){return this._items},ol.legend.Legend.prototype._drawText=function(t,e,i,o){t.save(),t.scale(ol.has.DEVICE_PIXEL_RATIO,ol.has.DEVICE_PIXEL_RATIO);var n=(e=e||"").split("\n");1===n.length?t.fillText(e,i,o):(t.textBaseline="bottom",t.fillText(n[0],i,o),t.textBaseline="top",t.fillText(n[1],i,o)),t.restore()},ol.legend.Legend.prototype._measureText=function(t,e){var i=(e||"").split("\n");if(1===i.length)return t.measureText(e);var o=t.measureText(i[0]),n=t.measureText(i[1]);return{width:Math.max(o.width,n.width),height:o.height+n.height}},ol.legend.Legend.prototype.refresh=function(){var t=this._listElement;t.innerHTML="";var e=this.get("margin"),i=this.get("size")[0]+2*e,o=this.get("lineHeight")||this.get("size")[1]+2*e,n=this.getCanvas(),r=n.getContext("2d");r.textAlign="left",r.textBaseline="middle";var s=ol.has.DEVICE_PIXEL_RATIO;r.font=this._titleStyle.getFont();var a=this._measureText(r,this.getTitle("title")).width;this._items.forEach((function(t){t.get("feature")||t.get("typeGeom")?(r.font=t.get("textStyle")?t.get("textStyle").getFont():this._textStyle.getFont(),a=Math.max(a,this._measureText(r,t.get("title")).width+i)):(r.font=t.get("textStyle")?t.get("textStyle").getFont():this._titleStyle.getFont(),a=Math.max(a,this._measureText(r,t.get("title")).width))}).bind(this)),n.width=(a+2*e)*s,n.height=(this._items.getLength()+1)*o*s,n.style.height=(this._items.getLength()+1)*o+"px",r.textBaseline="middle",r.fillStyle=ol.color.asString(this._textStyle.getFill().getColor()),this.getTitle()&&(t.appendChild(this._title.getElement([i,o],(function(t){this.dispatchEvent({type:"select",index:-1,symbol:t,item:this._title})}).bind(this))),r.font=this._titleStyle.getFont(),r.textAlign="center",this._drawText(r,this.getTitle(),n.width/s/2,o/2)),this._items.forEach((function(a,l){var c=l+(this.getTitle()?1:0);t.appendChild(a.getElement([i,o],(function(t){this.dispatchEvent({type:"select",index:l,symbol:t,item:a})}).bind(this)));var h=a.getProperties();r.textAlign="left",h.feature||h.typeGeom?(n=this.getLegendImage(h,n,c),r.font=a.get("textStyle")?a.get("textStyle").getFont():this._textStyle.getFont(),this._drawText(r,a.get("title"),i+e,(l+1.5)*o)):(r.font=a.get("textStyle")?a.get("textStyle").getFont():this._titleStyle.getFont(),/\bcenter\b/.test(h.className)?(r.textAlign="center",this._drawText(r,a.get("title"),n.width/s/2,(l+1.5)*o)):this._drawText(r,a.get("title"),e,(l+1.5)*o))}).bind(this)),this.dispatchEvent({type:"refresh",width:i,height:(this._items.length+1)*o})},ol.legend.Legend.prototype.getLegendImage=function(t,e,i){return t=t||{},ol.legend.Legend.getLegendImage({className:t.className,feature:t.feature,typeGeom:t.typeGeom,style:t.style||this._style,properties:t.properties,margin:t.margin||this.get("margin"),size:t.size||this.get("size"),lineHeight:t.lineHeight||this.get("lineHeight"),onload:(function(){this.refresh()}).bind(this)},e,i)},ol.legend.Legend.getLegendImage=function(t,e,i){void 0===(t=t||{}).margin&&(t.margin=10);var o=t.size||[40,25];t.onload=t.onload||function(){setTimeout(function(){ol.legend.Legend.getLegendImage(t,e,i)},100)};var n=o[0]+2*t.margin,r=t.lineHeight||o[1]+2*t.margin,s=ol.has.DEVICE_PIXEL_RATIO;e||(i=0,(e=document.createElement("canvas")).width=n*s,e.height=r*s);var a=e.getContext("2d");a.save();var l,c=ol.render.toContext(a,{pixelRatio:s}),h=t.typeGeom,u=t.feature;!u&&h&&(u=/Point/.test(h)?new ol.Feature(new ol.geom.Point([0,0])):/LineString/.test(h)?new ol.Feature(new ol.geom.LineString([0,0])):new ol.Feature(new ol.geom.Polygon([[0,0]])),t.properties&&u.setProperties(t.properties)),u?("function"==typeof(l=u.getStyle())&&(l=l(u)),l||(l="function"==typeof t.style?t.style(u):t.style||[]),h=u.getGeometry().getType()):l=[],l instanceof Array||(l=[l]);var d,p,g=n/2,f=r/2,m=o[0]/2,y=o[1]/2;if("Point"===h){var v=null;for(d=0;p=l[d];d++){var x=p.getImage();if(x){var b=x.getImage();if(b&&b.complete&&!b.naturalWidth&&("function"==typeof t.onload&&b.addEventListener("load",function(){setTimeout(function(){t.onload()},100)}),x.load()),x.getAnchor){var w=x.getAnchor();if(w){var _=x.getSize(),S=w[0]-_[0],C=w[1]-_[1];v?ol.extent.extend(v,[S,C,S+_[0],C+_[1]]):v=[S,C,S+_[0],C+_[1]]}}}}v&&(g+=(v[2]+v[0])/2,f+=(v[3]+v[1])/2)}for(f+=i*r||0,d=0;p=l[d];d++)switch(c.setStyle(p),h){case ol.geom.Point:case"Point":case"MultiPoint":c.drawGeometry(new ol.geom.Point([g,f]));break;case ol.geom.LineString:case"LineString":case"MultiLineString":a.save(),a.rect(t.margin*s,0,o[0]*s,e.height),a.clip(),c.drawGeometry(new ol.geom.LineString([[g-m,f],[g+m,f]])),a.restore();break;case ol.geom.Polygon:case"Polygon":case"MultiPolygon":c.drawGeometry(new ol.geom.Polygon([[[g-m,f-y],[g+m,f-y],[g+m,f+y],[g-m,f+y],[g-m,f-y]]]))}return a.restore(),e},ol.legend.Item=function(t){t=t||{},ol.Object.call(this,t),t.feature&&this.set("feature",t.feature.clone())},ol.ext.inherits(ol.legend.Item,ol.Object),ol.legend.Item.prototype.setTitle=function(t){this.set("title",t||""),this.changed()},ol.legend.Item.prototype.getElement=function(t,e){var i=ol.ext.element.create("LI",{className:this.get("className"),click:function(t){e(!1),t.stopPropagation()},style:{height:t[1]+"px"},"aria-label":this.get("title")});return ol.ext.element.create("DIV",{click:function(t){e(!0),t.stopPropagation()},style:{width:t[0]+"px",height:t[1]+"px"},parent:i}),i},ol.control.CanvasBase=function(t){t||(t={}),this.setStyle(t.style),ol.control.Control.call(this,t)},ol.ext.inherits(ol.control.CanvasBase,ol.control.Control),ol.control.CanvasBase.prototype.setMap=function(t){this.getCanvas(t);var e=this.getMap();if(this._listener&&(ol.Observable.unByKey(this._listener),this._listener=null),ol.control.Control.prototype.setMap.call(this,t),e)try{e.renderSync()}catch(i){}t&&(this._listener=t.on("postcompose",this._draw.bind(this)))},ol.control.CanvasBase.prototype.getCanvas=function(t){return ol.ext.getMapCanvas(t)},ol.control.CanvasBase.prototype.getContext=function(t){var e=t.context;if(!e&&this.getMap()){var i=this.getMap().getViewport().getElementsByClassName("ol-fixedoverlay")[0];e=i?i.getContext("2d"):null}return e},ol.control.CanvasBase.prototype.setStyle=function(t){this._style=t||new ol.style.Style({})},ol.control.CanvasBase.prototype.getStyle=function(){return this._style},ol.control.CanvasBase.prototype.getStroke=function(){return this._style.getStroke()||this._style.setStroke(new ol.style.Stroke({color:"#000",width:1.25})),this._style.getStroke()},ol.control.CanvasBase.prototype.getFill=function(){return this._style.getFill()||this._style.setFill(new ol.style.Fill({color:"#fff"})),this._style.getFill()},ol.control.CanvasBase.prototype.getTextStroke=function(){var t=this._style.getText();return t||(t=new ol.style.Text({})),t.getStroke()||t.setStroke(new ol.style.Stroke({color:"#fff",width:3})),t.getStroke()},ol.control.CanvasBase.prototype.getTextFill=function(){var t=this._style.getText();return t||(t=new ol.style.Text({})),t.getFill()||t.setFill(new ol.style.Fill({color:"#fff"})),t.getFill()},ol.control.CanvasBase.prototype.getTextFont=function(){var t=this._style.getText();return t||(t=new ol.style.Text({})),t.getFont()||t.setFont("12px sans-serif"),t.getFont()},ol.control.CanvasBase.prototype._draw=function(){console.warn("[CanvasBase] draw function not implemented.")},ol.control.SelectBase=function(t){var e;t||(t={}),this._features=this.setFeatures(t.features),t.target?e=document.createElement("div"):((e=document.createElement("div")).className="ol-select ol-unselectable ol-control ol-collapsed",ol.ext.element.create("BUTTON",{type:"button",on:{"click touchstart":function(t){e.classList.toggle("ol-collapsed"),t.preventDefault()}},parent:e})),t.className&&e.classList.add(t.className);var i=t.content||ol.ext.element.create("DIV");e.appendChild(i),ol.ext.element.create("BUTTON",{html:t.btInfo||"OK",className:"ol-ok",on:{click:this.doSelect.bind(this)},parent:i}),ol.control.Control.call(this,{element:e,target:t.target}),this.setSources(t.source)},ol.ext.inherits(ol.control.SelectBase,ol.control.Control),ol.control.SelectBase.prototype.setSources=function(t){t?this.set("source",t instanceof Array?t:[t]):this.unset("source")},ol.control.SelectBase.prototype.setFeatures=function(t){this._features=t instanceof ol.Collection?t:null},ol.control.SelectBase.prototype.getFeatures=function(){return this._features},ol.control.SelectBase.prototype.operationsList={"=":"=","!=":"\u2260","<":"<","<=":"\u2264",">=":"\u2265",">":">",contain:"\u2282","!contain":"\u2284",regexp:"\u2243","!regexp":"\u2244"},ol.control.SelectBase.prototype._escape=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},ol.control.SelectBase.prototype._checkCondition=function(t,e,i){if(!e.attr)return!0;var o=t.get(e.attr),n=Number(o)==o&&Number(e.val)==e.val;switch(n&&(o=Number(o)),e.op){case"=":return n?o==e.val:new RegExp("^"+this._escape(e.val)+"$",i?"":"i").test(o);case"!=":return n?o!=e.val:!new RegExp("^"+this._escape(e.val)+"$",i?"":"i").test(o);case"<":return o<e.val;case"<=":return o<=e.val;case">":return o>e.val;case">=":return o>=e.val;case"contain":return new RegExp(this._escape(e.val),i?"":"i").test(o);case"!contain":return!new RegExp(this._escape(e.val),i?"":"i").test(o);case"regexp":return new RegExp(e.val,i?"":"i").test(o);case"!regexp":return!new RegExp(e.val,i?"":"i").test(o);default:return!1}},ol.control.SelectBase.prototype._selectFeatures=function(t,e,i,o,n){var r;i=i||[];for(var s=e.length-1;r=e[s];s--){for(var a,l=o,c=0;a=i[c];c++)a.attr&&(l=o?l&&this._checkCondition(r,a,n):l||this._checkCondition(r,a,n));l?t.push(r):this._features&&this._features.removeAt(s)}return t},ol.control.SelectBase.prototype.getSources=function(){if(this.get("source"))return this.get("source");var t=[];return this.getMap()&&function e(i){i.forEach(function(i){i.getLayers?e(i.getLayers()):i.getSource&&i.getSource()instanceof ol.source.Vector&&t.push(i.getSource())})}(this.getMap().getLayers()),t},ol.control.SelectBase.prototype.doSelect=function(t){var e=[];return(t=t||{}).features?this._selectFeatures(e,t.features,t.conditions,t.matchAll,t.useCase):this._features?this._selectFeatures(e,this._features.getArray(),t.conditions,t.matchAll,t.useCase):(t.sources||this.getSources()).forEach((function(i){this._selectFeatures(e,i.getFeatures(),t.conditions,t.matchAll,t.useCase)}).bind(this)),this.dispatchEvent({type:"select",features:e}),e},ol.control.Button=function(t){t=t||{};var e=document.createElement("div");e.className=(t.className||"")+" ol-button ol-unselectable ol-control";var i=this,o=this.button_=document.createElement(/ol-text-button/.test(t.className)?"div":"button");o.type="button",t.title&&(o.title=t.title),t.name&&(o.name=t.name),t.html instanceof Element?o.appendChild(t.html):o.innerHTML=t.html||"",o.addEventListener("click",function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),t.handleClick&&t.handleClick.call(i,e)}),e.appendChild(o),!t.title&&o.firstElementChild&&(o.title=o.firstElementChild.title),ol.control.Control.call(this,{element:e,target:t.target}),t.title&&this.set("title",t.title),t.title&&this.set("title",t.title),t.name&&this.set("name",t.name)},ol.ext.inherits(ol.control.Button,ol.control.Control),ol.control.Button.prototype.setVisible=function(t){t?ol.ext.element.show(this.element):ol.ext.element.hide(this.element)},ol.control.Button.prototype.setTitle=function(t){this.button_.setAttribute("title",t)},ol.control.Button.prototype.setHtml=function(t){ol.ext.element.setHTML(this.button_,t)},ol.control.Button.prototype.getButtonElement=function(){return this.button_},ol.control.Toggle=function(t){var e=this;this.interaction_=(t=t||{}).interaction,this.interaction_&&(this.interaction_.setActive(t.active),this.interaction_.on("change:active",function(){e.setActive(e.interaction_.getActive())})),t.toggleFn&&(t.onToggle=t.toggleFn),t.handleClick=function(){e.toggle(),t.onToggle&&t.onToggle.call(e,e.getActive())},t.className=(t.className||"")+" ol-toggle",ol.control.Button.call(this,t),this.set("title",t.title),this.set("autoActivate",t.autoActivate),t.bar&&this.setSubBar(t.bar),this.setActive(t.active),this.setDisable(t.disable)},ol.ext.inherits(ol.control.Toggle,ol.control.Button),ol.control.Toggle.prototype.setMap=function(t){!t&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),ol.control.Button.prototype.setMap.call(this,t),t&&(this.interaction_&&t.addInteraction(this.interaction_),this.subbar_&&t.addControl(this.subbar_))},ol.control.Toggle.prototype.getSubBar=function(){return this.subbar_},ol.control.Toggle.prototype.setSubBar=function(t){var e=this.getMap();e&&this.subbar_&&e.removeControl(this.subbar_),this.subbar_=t,t&&(this.subbar_.setTarget(this.element),this.subbar_.element.classList.add("ol-option-bar"),e&&e.addControl(this.subbar_))},ol.control.Toggle.prototype.getDisable=function(){var t=this.element.querySelector("button");return t&&t.disabled},ol.control.Toggle.prototype.setDisable=function(t){this.getDisable()!=t&&(this.element.querySelector("button").disabled=t,t&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!t,disable:t}))},ol.control.Toggle.prototype.getActive=function(){return this.element.classList.contains("ol-active")},ol.control.Toggle.prototype.toggle=function(){this.getActive()?this.setActive(!1):this.setActive(!0)},ol.control.Toggle.prototype.setActive=function(t){this.interaction_&&this.interaction_.setActive(t),this.subbar_&&this.subbar_.setActive(t),this.getActive()!==t&&(t?this.element.classList.add("ol-active"):this.element.classList.remove("ol-active"),this.dispatchEvent({type:"change:active",key:"active",oldValue:!t,active:t}))},ol.control.Toggle.prototype.setInteraction=function(t){this.interaction_=t},ol.control.Toggle.prototype.getInteraction=function(){return this.interaction_},ol.control.Search=function(t){var e=this;t||(t={}),null==t.typing&&(t.typing=300),this._classname=t.className||"search";var i=ol.ext.element.create("DIV",{className:(t.className||"")+" ol-search"+(t.target?"":" ol-unselectable ol-control")});if(!1!==t.collapsed&&i.classList.add("ol-collapsed"),t.target||(this.button=document.createElement("BUTTON"),this.button.setAttribute("type","button"),this.button.setAttribute("title",t.title||t.label||"Search"),this.button.addEventListener("click",function(){if(i.classList.toggle("ol-collapsed"),!i.classList.contains("ol-collapsed")){i.querySelector("input.search").focus();for(var t=i.querySelectorAll("li"),o=0;o<t.length;o++)t[o].classList.remove("select");s.value||e.drawList_()}}),i.appendChild(this.button)),t.inputLabel){var o=document.createElement("LABEL");o.innerText=t.inputLabel,i.appendChild(o)}var n,r="",s=this._input=document.createElement("INPUT");s.setAttribute("type","search"),s.setAttribute("class","search"),s.setAttribute("autocomplete","off"),s.setAttribute("placeholder",t.placeholder||"Search..."),s.addEventListener("change",function(t){e.dispatchEvent({type:"change:input",input:t,value:s.value})});var a=function(o){var a=i.querySelector("ul.autocomplete li.select"),l=s.value;if("ArrowDown"==o.key||"ArrowUp"==o.key||"Down"==o.key||"Up"==o.key)a?(a.classList.remove("select"),(a=/Down/.test(o.key)?a.nextElementSibling:a.previousElementSibling)&&a.classList.add("select")):i.querySelector("ul.autocomplete li").classList.add("select");else if("input"!=o.type||l)if(!a||"search"!=o.type&&"Enter"!=o.key)if("search"==o.type||"Enter"==o.key||r!=l&&t.typing>=0)if(r=l){n&&clearTimeout(n);var c=e.get("minLength");n=setTimeout(function(){if(r.length>=c){var t=e.autocomplete(r,function(t){e.drawList_(t)});t&&e.drawList_(t)}else e.drawList_()},t.typing)}else e.drawList_();else(a=i.querySelector("ul.autocomplete li"))&&a.classList.remove("select");else i.classList.contains("ol-control")&&s.blur(),a.classList.remove("select"),r=l,e._handleSelect(e._list[a.getAttribute("data-search")]);else setTimeout(function(){e.drawList_()},200)};if(s.addEventListener("keyup",a),s.addEventListener("search",a),s.addEventListener("cut",a),s.addEventListener("paste",a),s.addEventListener("input",a),t.noCollapse||(s.addEventListener("blur",(function(){setTimeout((function(){s!==document.activeElement&&(i.classList.add("ol-collapsed"),this.set("reverse",!1),i.classList.remove("ol-revers"))}).bind(this),200)}).bind(this)),s.addEventListener("focus",(function(){this.get("reverse")||(i.classList.remove("ol-collapsed"),i.classList.remove("ol-revers"))}).bind(this))),i.appendChild(s),t.reverse){var l=ol.ext.element.create("BUTTON",{type:"button",class:"ol-revers",title:t.reverseTitle||"click on the map",click:(function(){this.get("reverse")?this.set("reverse",!1):(this.set("reverse",!this.get("reverse")),s.focus(),i.classList.add("ol-revers"))}).bind(this)});i.appendChild(l)}var c=document.createElement("UL");c.classList.add("autocomplete"),i.appendChild(c),ol.control.Control.call(this,{element:i,target:t.target}),"function"==typeof t.getTitle&&(this.getTitle=t.getTitle),"function"==typeof t.autocomplete&&(this.autocomplete=t.autocomplete),this.set("copy",t.copy),this.set("minLength",t.minLength||1),this.set("maxItems",t.maxItems||10),this.set("maxHistory",t.maxHistory||t.maxItems||10),t.onselect&&this.on("select",t.onselect),t.centerOnSelect&&this.on("select",(function(t){var e=this.getMap();e&&e.getView().setCenter(t.coordinate)}).bind(this)),t.zoomOnSelect&&this.on("select",(function(e){var i=this.getMap();i&&(i.getView().setCenter(e.coordinate),i.getView().getZoom()<t.zoomOnSelect&&i.getView().setZoom(t.zoomOnSelect))}).bind(this)),this.restoreHistory(),this.drawList_()},ol.ext.inherits(ol.control.Search,ol.control.Control),ol.control.Search.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener=t.on("click",this._handleClick.bind(this)))},ol.control.Search.prototype.collapse=function(t){!1===t?this.element.classList.remove("ol-collapsed"):this.element.classList.add("ol-collapsed")},ol.control.Search.prototype.getInputField=function(){return this._input},ol.control.Search.prototype.getTitle=function(t){return t.name||"No title"},ol.control.Search.prototype._getTitleTxt=function(t){return ol.ext.element.create("DIV",{html:this.getTitle(t)}).innerText},ol.control.Search.prototype.search=function(){var t=this.element.querySelector("input.search");this._triggerCustomEvent("search",t)},ol.control.Search.prototype._handleClick=function(t){this.get("reverse")&&(document.activeElement.blur(),this.reverseGeocode(t.coordinate))},ol.control.Search.prototype.reverseGeocode=function(){},ol.control.Search.prototype._triggerCustomEvent=function(t,e){ol.ext.element.dispatchEvent(t,e)},ol.control.Search.prototype.setInput=function(t,e){var i=this.element.querySelector("input.search");i.value=t,e&&this._triggerCustomEvent("keyup",i)},ol.control.Search.prototype.select=function(t,e,i,o){var n={type:"select",search:t,reverse:!!e,coordinate:i};if(o)for(var r in o)n[r]=o[r];this.dispatchEvent(n)},ol.control.Search.prototype._handleSelect=function(t,e,i){if(t){var o,n=this.get("history");try{var r=JSON.stringify(t);for(o=n.length-1;o>=0;o--)n[o]&&JSON.stringify(n[o])!==r||n.splice(o,1)}catch(a){for(o=n.length-1;o>=0;o--)n[o]===t&&n.splice(o,1)}n.unshift(t);for(var s=Math.max(0,this.get("maxHistory")||10)||0;n.length>s;)n.pop();this.saveHistory(),this.select(t,e,null,i),e&&(this.setInput(this._getTitleTxt(t)),this.drawList_(),setTimeout((function(){this.collapse(!1)}).bind(this),300))}},ol.control.Search.prototype._history={},ol.control.Search.prototype.saveHistory=function(){try{this.get("maxHistory")>=0?localStorage["ol@search-"+this._classname]=JSON.stringify(this.get("history")):localStorage.removeItem("ol@search-"+this._classname)}catch(t){console.warn("Failed to access localStorage...")}},ol.control.Search.prototype.restoreHistory=function(){if(this._history[this._classname])this.set("history",this._history[this._classname]);else try{this._history[this._classname]=JSON.parse(localStorage["ol@search-"+this._classname]),this.set("history",this._history[this._classname])}catch(t){this.set("history",[])}},ol.control.Search.prototype.clearHistory=function(){this.set("history",[]),this.saveHistory(),this.drawList_()},ol.control.Search.prototype.getHistory=function(){return this.get("history")},ol.control.Search.prototype.autocomplete=function(t,e){return e([]),!1},ol.control.Search.prototype.drawList_=function(t){var e=this,i=this.element.querySelector("ul.autocomplete");if(i.innerHTML="",this._list=[],t)i.setAttribute("class","autocomplete");else{if(this.element.querySelector("input.search").value)return;t=this.get("history"),i.setAttribute("class","autocomplete history")}for(var o,n=Math.min(e.get("maxItems"),t.length),r=0;r<n;r++)if(t[r]&&(!r||!e.equalFeatures(t[r],t[r-1]))){(o=document.createElement("LI")).setAttribute("data-search",this._list.length),this._list.push(t[r]),o.addEventListener("click",function(t){e._handleSelect(e._list[t.currentTarget.getAttribute("data-search")])});var s=e.getTitle(t[r]);s instanceof Element?o.appendChild(s):o.innerHTML=s,i.appendChild(o)}n&&this.get("copy")&&((o=document.createElement("LI")).classList.add("copy"),o.innerHTML=this.get("copy"),i.appendChild(o))},ol.control.Search.prototype.equalFeatures=function(){return!1},ol.control.SearchJSON=function(t){(t=t||{}).className=t.className||"JSON",delete t.autocomplete,t.minLength=t.minLength||3,t.typing=t.typing||800,ol.control.Search.call(this,t);var e=t.url||"";if("https:"===window.location.protocol){var i=document.createElement("a");i.href=e,i.protocol=window.location.protocol,e=i.href}this.set("url",e),this._ajax=new ol.ext.Ajax({dataType:"JSON",auth:t.authentication}),this._ajax.on("success",(function(t){t.status>=200&&t.status<400?"function"==typeof this._callback&&this._callback(t.response):("function"==typeof this._callback&&this._callback(!1,"error"),console.log("AJAX ERROR",arguments))}).bind(this)),this._ajax.on("error",(function(){"function"==typeof this._callback&&this._callback(!1,"error"),console.log("AJAX ERROR",arguments)}).bind(this)),this._ajax.on("loadstart",(function(){this.element.classList.add("searching")}).bind(this)),this._ajax.on("loadend",(function(){this.element.classList.remove("searching")}).bind(this)),"function"==typeof t.handleResponse&&(this.handleResponse=t.handleResponse)},ol.ext.inherits(ol.control.SearchJSON,ol.control.Search),ol.control.SearchJSON.prototype.ajax=function(t,e,i,o){o=o||{},this._callback=i,this._ajax.set("dataType",o.dataType||"JSON"),this._ajax.send(t,e,o)},ol.control.SearchJSON.prototype.autocomplete=function(t,e){var i=this.requestData(t),o=encodeURI(this.get("url"));this.ajax(o,i,function(t){"function"==typeof e&&e(this.handleResponse(t))})},ol.control.SearchJSON.prototype.requestData=function(t){return{q:t}},ol.control.SearchJSON.prototype.handleResponse=function(t){return t},ol.control.SearchPhoton=function(t){(t=t||{}).className=t.className||"photon",t.url=t.url||"https://photon.komoot.io/api/",t.copy=t.copy||'<a href="http://www.openstreetmap.org/copyright" target="new">&copy; OpenStreetMap contributors</a>',ol.control.SearchJSON.call(this,t),this.set("lang",t.lang),this.set("position",t.position)},ol.ext.inherits(ol.control.SearchPhoton,ol.control.SearchJSON),ol.control.SearchPhoton.prototype.getTitle=function(t){var e=t.properties;return(e.housenumber||"")+" "+(e.street||e.name||"")+"<i> "+(e.postcode||"")+" "+(e.city||"")+" ("+e.country+")</i>"},ol.control.SearchPhoton.prototype.requestData=function(t){var e={q:t,lang:this.get("lang"),limit:this.get("maxItems")};if(this.get("position")){var i=this.getMap().getView(),o=new ol.geom.Point(i.getCenter());o=o.transform(i.getProjection(),"EPSG:4326").getCoordinates(),e.lon=o[0],e.lat=o[1]}return e},ol.control.SearchPhoton.prototype.handleResponse=function(t){return t.features},ol.control.SearchPhoton.prototype.equalFeatures=function(t,e){return this.getTitle(t)===this.getTitle(e)&&t.geometry.coordinates[0]===e.geometry.coordinates[0]&&t.geometry.coordinates[1]===e.geometry.coordinates[1]},ol.control.SearchPhoton.prototype.select=function(t){var e=t.geometry.coordinates;try{e=ol.proj.transform(t.geometry.coordinates,"EPSG:4326",this.getMap().getView().getProjection())}catch(i){}this.dispatchEvent({type:"select",search:t,coordinate:e})},ol.control.SearchPhoton.prototype.reverseData=function(t){var e=ol.proj.transform(t,this.getMap().getView().getProjection(),"EPSG:4326");return{lon:e[0],lat:e[1]}},ol.control.SearchPhoton.prototype.reverseGeocode=function(t,e){this.ajax(this.get("url").replace("/api/","/reverse/").replace("/search/","/reverse/"),this.reverseData(t),(function(t){t.features&&(t=t.features),t instanceof Array||(t=[t]),e?e.call(this,t):this._handleSelect(t[0],!0)}).bind(this))},ol.control.SearchGeoportail=function(t){(t=t||{}).className=t.className||"IGNF",t.typing=t.typing||500,t.url="https://wxs.ign.fr/"+(t.apiKey||"essentiels")+"/ols/apis/completion",t.copy='<a href="https://www.geoportail.gouv.fr/" target="new">&copy; IGN-G\xe9oportail</a>',ol.control.SearchJSON.call(this,t),this.set("type",t.type||"StreetAddress,PositionOfInterest"),this.set("timeout",t.timeout||2e3)},ol.ext.inherits(ol.control.SearchGeoportail,ol.control.SearchJSON),ol.control.SearchGeoportail.prototype.reverseGeocode=function(t,e){var i=ol.proj.transform(t,this.getMap().getView().getProjection(),"EPSG:4326");this._handleSelect({x:i[0],y:i[1],fulltext:i[0].toFixed(6)+","+i[1].toFixed(6)},!0,e);var o="Commune"===this.get("type")?"PositionOfInterest":this.get("type")||"StreetAddress";/,/.test(o)&&(o="StreetAddress");var n='<?xml version="1.0" encoding="UTF-8"?><XLS xmlns:xls="http://www.opengis.net/xls" xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.opengis.net/xls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.2" xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"> <Request requestID="1" version="1.2" methodName="ReverseGeocodeRequest" maximumResponses="1" >  <ReverseGeocodeRequest>   <ReverseGeocodePreference>'+o+"</ReverseGeocodePreference>   <Position>    <gml:Point><gml:pos>"+i[1]+" "+i[0]+"</gml:pos></gml:Point>   </Position>  </ReverseGeocodeRequest> </Request></XLS>";this.ajax(this.get("url").replace("ols/apis/completion","geoportail/ols"),{xls:n},(function(t){var o={};if(t){var n=(t=t.replace(/\n|\r/g,"")).replace(/.*<gml:pos>(.*)<\/gml:pos>.*/,"$1").split(" ");if(Number(n[1])||Number(n[0]))if(o.x=i[0],o.y=i[1],o.city=t.replace(/.*<Place type="Municipality">([^<]*)<\/Place>.*/,"$1"),o.insee=t.replace(/.*<Place type="INSEE">([^<]*)<\/Place>.*/,"$1"),o.zipcode=t.replace(/.*<PostalCode>([^<]*)<\/PostalCode>.*/,"$1"),/<Street>/.test(t)){o.kind="",o.country="StreetAddress",o.street=t.replace(/.*<Street>([^<]*)<\/Street>.*/,"$1");var r=t.replace(/.*<Building number="([^"]*).*/,"$1");o.fulltext=r+" "+o.street+", "+o.zipcode+" "+o.city}else o.kind=t.replace(/.*<Place type="Nature">([^<]*)<\/Place>.*/,"$1"),o.country="PositionOfInterest",o.street="",o.fulltext=o.zipcode+" "+o.city;else o={x:i[0],y:i[1],fulltext:i[0].toFixed(6)+","+i[1].toFixed(6)}}else o={x:i[0],y:i[1],fulltext:i[0].toFixed(6)+","+i[1].toFixed(6)};"function"==typeof e?e.call(this,[o]):(this.getHistory().shift(),this._handleSelect(o,!0,e))}).bind(this),{timeout:this.get("timeout"),dataType:"XML"})},ol.control.SearchGeoportail.prototype.getTitle=function(t){return t.fulltext},ol.control.SearchGeoportail.prototype.requestData=function(t){return{text:t,type:"Commune"===this.get("type")?"PositionOfInterest":this.get("type")||"StreetAddress,PositionOfInterest",maximumResponses:this.get("maxItems")}},ol.control.SearchGeoportail.prototype.handleResponse=function(t){var e=t.results;if("Commune"===this.get("type"))for(var i=e.length-1;i>=0;i--)e[i].kind&&(e[i].classification>5||"D\xe9partement"==e[i].kind)&&e.splice(i,1);return e},ol.control.SearchGeoportail.prototype.select=function(t,e,i,o){if(t.x||t.y){var n=[Number(t.x),Number(t.y)];try{n=ol.proj.transform(n,"EPSG:4326",this.getMap().getView().getProjection())}catch(r){}"Commune"===this.get("type")?this.searchCommune(t,function(){ol.control.Search.prototype.select.call(this,t,e,n,o)}):ol.control.Search.prototype.select.call(this,t,e,n,o)}else this.searchCommune(t)},ol.control.SearchGeoportail.prototype.searchCommune=function(t,e){var i='<?xml version="1.0" encoding="UTF-8"?><XLS xmlns:xls="http://www.opengis.net/xls" xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.opengis.net/xls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.2" xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"><RequestHeader/><Request requestID="1" version="1.2" methodName="LocationUtilityService"><GeocodeRequest returnFreeForm="false"><Address countryCode="PositionOfInterest"><freeFormAddress>'+t.zipcode+" "+t.city+"+</freeFormAddress></Address></GeocodeRequest></Request></XLS>";this.ajax(this.get("url").replace("ols/apis/completion","geoportail/ols"),{xls:i},(function(i){if(i){var o=(new DOMParser).parseFromString(i,"text/xml").getElementsByTagName("GeocodedAddress")[0],n=o.getElementsByTagName("gml:Point")[0].textContent.trim().split(" ");t.x=Number(n[1]),t.y=Number(n[0]);for(var r=o.getElementsByTagName("Place"),s=0;s<r.length;s++)switch(r[s].attributes.type.value){case"Nature":t.kind=r[s].textContent;break;case"INSEE":t.insee=r[s].textContent}(t.x||t.y)&&(e?e.call(this,[t]):this._handleSelect(t))}}).bind(this),{dataType:"XML"})},ol.control.LayerSwitcher=function(t){t=t||{};var e,i=this;this.dcount=0,this.show_progress=t.show_progress,this.oninfo="function"==typeof t.oninfo?t.oninfo:null,this.onextent="function"==typeof t.onextent?t.onextent:null,this.hasextent=t.extent||t.onextent,this.hastrash=t.trash,this.reordering=!1!==t.reordering,this._layers=[],this._layerGroup=t.layerGroup&&t.layerGroup.getLayers?t.layerGroup:null,this.onchangeCheck="function"==typeof t.onchangeCheck?t.onchangeCheck:null,"function"==typeof t.displayInLayerSwitcher&&(this.displayInLayerSwitcher=t.displayInLayerSwitcher),t.target?e=ol.ext.element.create("DIV",{className:t.switcherClass||"ol-layerswitcher"}):((e=ol.ext.element.create("DIV",{className:(t.switcherClass||"ol-layerswitcher")+" ol-unselectable ol-control"})).classList.add(!1!==t.collapsed?"ol-collapsed":"ol-forceopen"),this.button=ol.ext.element.create("BUTTON",{type:"button",parent:e}),this.button.addEventListener("touchstart",function(t){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:e.classList.contains("ol-collapsed")}),t.preventDefault(),i.overflow()}),this.button.addEventListener("click",function(){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!e.classList.contains("ol-forceopen")}),i.overflow()}),t.mouseover&&(e.addEventListener("mouseleave",function(){e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!0})}),e.addEventListener("mouseover",function(){e.classList.remove("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!1})})),t.minibar&&(t.noScroll=!0),t.noScroll||(this.topv=ol.ext.element.create("DIV",{className:"ol-switchertopdiv",parent:e,click:function(){i.overflow("+50%")}}),this.botv=ol.ext.element.create("DIV",{className:"ol-switcherbottomdiv",parent:e,click:function(){i.overflow("-50%")}})),this._noScroll=t.noScroll),this.panel_=ol.ext.element.create("UL",{className:"panel"}),this.panelContainer_=ol.ext.element.create("DIV",{className:"panel-container",html:this.panel_,parent:e}),t.target||t.noScroll||ol.ext.element.addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",function(t){i.overflow(Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)))&&(t.stopPropagation(),t.preventDefault())}),this.header_=ol.ext.element.create("LI",{className:"ol-header",parent:this.panel_}),ol.control.Control.call(this,{element:e,target:t.target}),this.set("drawDelay",t.drawDelay||0),this.set("selection",t.selection),t.minibar&&setTimeout((function(){var t=ol.ext.element.scrollDiv(this.panelContainer_,{mousewheel:!0,vertical:!0,minibar:!0});this.on(["drawlist","toggle"],function(){t.refresh()})}).bind(this))},ol.ext.inherits(ol.control.LayerSwitcher,ol.control.Control),ol.control.LayerSwitcher.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"},ol.control.LayerSwitcher.prototype.displayInLayerSwitcher=function(t){return!1!==t.get("displayInLayerSwitcher")},ol.control.LayerSwitcher.prototype.setMap=function(t){if(ol.control.Control.prototype.setMap.call(this,t),this.drawPanel(),this._listener)for(var e in this._listener)ol.Observable.unByKey(this._listener[e]);this._listener=null,t&&(this._listener={moveend:t.on("moveend",this.viewChange.bind(this)),size:t.on("change:size",this.overflow.bind(this))},this._listener.change=this._layerGroup?this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):t.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))},ol.control.LayerSwitcher.prototype.show=function(){this.element.classList.add("ol-forceopen"),this.overflow(),self.dispatchEvent({type:"toggle",collapsed:!1})},ol.control.LayerSwitcher.prototype.hide=function(){this.element.classList.remove("ol-forceopen"),this.overflow(),self.dispatchEvent({type:"toggle",collapsed:!0})},ol.control.LayerSwitcher.prototype.toggle=function(){this.element.classList.toggle("ol-forceopen"),this.overflow()},ol.control.LayerSwitcher.prototype.isOpen=function(){return this.element.classList.contains("ol-forceopen")},ol.control.LayerSwitcher.prototype.setHeader=function(t){ol.ext.element.setHTML(this.header_,t)},ol.control.LayerSwitcher.prototype.overflow=function(t){if(this.button&&!this._noScroll){if(ol.ext.element.hidden(this.panel_))return void ol.ext.element.setStyle(this.element,{height:"auto"});var e=ol.ext.element.outerHeight(this.element),i=ol.ext.element.outerHeight(this.panel_),o=this.button.offsetTop+ol.ext.element.outerHeight(this.button),n=this.panel_.offsetTop-o;if(i>e-o){ol.ext.element.setStyle(this.element,{height:"100%"});var r=this.panel_.querySelectorAll("li.visible .li-content")[0],s=r?2*ol.ext.element.getStyle(r,"height"):0;switch(t){case 1:n+=s;break;case-1:n-=s;break;case"+50%":n+=Math.round(e/2);break;case"-50%":n-=Math.round(e/2)}return n+i<=e-3*o/2?(n=e-3*o/2-i,ol.ext.element.hide(this.botv)):ol.ext.element.show(this.botv),n>=0?(n=0,ol.ext.element.hide(this.topv)):ol.ext.element.show(this.topv),ol.ext.element.setStyle(this.panel_,{top:n+"px"}),!0}return ol.ext.element.setStyle(this.element,{height:"auto"}),ol.ext.element.setStyle(this.panel_,{top:0}),ol.ext.element.hide(this.botv),ol.ext.element.hide(this.topv),!1}return!1},ol.control.LayerSwitcher.prototype._setLayerForLI=function(t,e){var i=[];e.getLayers&&i.push(e.getLayers().on("change:length",this.drawPanel.bind(this))),t&&(i.push(e.on("change:opacity",(function(){this.setLayerOpacity(e,t)}).bind(this))),i.push(e.on("change:visible",(function(){this.setLayerVisibility(e,t)}).bind(this)))),i.push(e.on("propertychange",(function(t){"displayInLayerSwitcher"!==t.key&&"openInLayerSwitcher"!==t.key||this.drawPanel(t)}).bind(this))),this._layers.push({li:t,layer:e,listeners:i})},ol.control.LayerSwitcher.prototype.setLayerOpacity=function(t,e){var i=e.querySelector(".layerswitcher-opacity-cursor");i&&(i.style.left=100*t.getOpacity()+"%"),this.dispatchEvent({type:"layer:opacity",layer:t})},ol.control.LayerSwitcher.prototype.setLayerVisibility=function(t,e){var i=e.querySelector(".ol-visibility");i&&(i.checked=t.getVisible()),t.getVisible()?e.classList.add("ol-visible"):e.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:t})},ol.control.LayerSwitcher.prototype._clearLayerForLI=function(){this._layers.forEach(function(t){t.listeners.forEach(function(t){ol.Observable.unByKey(t)})}),this._layers=[]},ol.control.LayerSwitcher.prototype._getLayerForLI=function(t){for(var e,i=0;e=this._layers[i];i++)if(e.li===t)return e.layer;return null},ol.control.LayerSwitcher.prototype.viewChange=function(){this.panel_.querySelectorAll("li").forEach((function(t){var e=this._getLayerForLI(t);e&&(this.testLayerVisibility(e)?t.classList.remove("ol-layer-hidden"):t.classList.add("ol-layer-hidden"))}).bind(this))},ol.control.LayerSwitcher.prototype.getPanel=function(){return this.panelContainer_},ol.control.LayerSwitcher.prototype.drawPanel=function(){if(this.getMap()){var t=this;this.dcount++,setTimeout(function(){t.drawPanel_()},this.get("drawDelay")||0)}},ol.control.LayerSwitcher.prototype.drawPanel_=function(){if(!--this.dcount&&!this.dragging_){var t=this.panelContainer_.scrollTop;this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach((function(t){t.classList.contains("ol-header")||t.remove()}).bind(this)),this._layerGroup?this.drawList(this.panel_,this._layerGroup.getLayers()):this.getMap()&&this.drawList(this.panel_,this.getMap().getLayers()),this.panelContainer_.scrollTop=t}},ol.control.LayerSwitcher.prototype.switchLayerVisibility=function(t,e){t.get("baseLayer")?(t.getVisible()||t.setVisible(!0),e.forEach(function(e){t!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)})):t.setVisible(!t.getVisible())},ol.control.LayerSwitcher.prototype.testLayerVisibility=function(t){if(!this.getMap())return!0;var e=this.getMap().getView().getResolution(),i=this.getMap().getView().getZoom();if(t.getMaxResolution()<=e||t.getMinResolution()>=e)return!1;if(t.getMinZoom&&(t.getMinZoom()>=i||t.getMaxZoom()<i))return!1;var o=t.getExtent();if(o){var n=this.getMap().getView().calculateExtent(this.getMap().getSize());return ol.extent.intersects(n,o)}return!0},ol.control.LayerSwitcher.prototype.dragOrdering_=function(t){t.stopPropagation(),t.preventDefault();var e,i,o,n,r,s=this,a=t.currentTarget.parentNode.parentNode,l=!0,c=this.panel_,h=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY;function u(t){if(e=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY,l&&Math.abs(h-e)>2&&(l=!1,a.classList.add("drag"),n=s._getLayerForLI(a),i=!1,r=s._getLayerForLI(a.parentNode.parentNode),o=ol.ext.element.create("LI",{className:"ol-dragover",html:a.innerHTML,style:{position:"absolute","z-index":1e4,left:a.offsetLeft,opacity:.5,width:ol.ext.element.outerWidth(a),height:ol.ext.element.getStyle(a,"height")},parent:c}),s.element.classList.add("drag"),s.dispatchEvent({type:"reorder-start",layer:n,group:r})),!l){var u;for(t.preventDefault(),t.stopPropagation(),ol.ext.element.setStyle(o,{top:e-ol.ext.element.offsetRect(c).top+c.scrollTop+5}),(u=t.touches?document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY):t.target).classList.contains("ol-switcherbottomdiv")?s.overflow(-1):u.classList.contains("ol-switchertopdiv")&&s.overflow(1);u&&"LI"!==u.tagName;)u=u.parentNode;u&&u.classList.contains("dropover")||a.parentNode.querySelectorAll("li").forEach(function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")}),u&&u.parentNode.classList.contains("drag")&&u!==a?((i=s._getLayerForLI(u))&&!i.get("allwaysOnTop")==!n.get("allwaysOnTop")?(u.classList.add("dropover"),u.classList.add(a.offsetTop<u.offsetTop?"dropover-after":"dropover-before")):i=!1,ol.ext.element.show(o)):(i=!1,u===a?ol.ext.element.hide(o):ol.ext.element.show(o)),i?o.classList.remove("forbidden"):o.classList.add("forbidden")}}a.parentNode.classList.add("drag"),ol.ext.element.addListener(document,"mousemove touchmove",u),ol.ext.element.addListener(document,"mouseup touchend touchcancel",function t(){if(i){var e=n,l=s.getSelection()===e;if(e&&i){for(var c,h=(c=r?r.getLayers():s._layerGroup?s._layerGroup.getLayers():s.getMap().getLayers()).getArray(),d=0;d<h.length;d++)if(h[d]==e){c.removeAt(d);break}for(var p=0;p<h.length;p++)if(h[p]===i){c.insertAt(d>p?p:p+1,e);break}}l&&s.selectLayer(e),s.dispatchEvent({type:"reorder-end",layer:e,group:r})}a.parentNode.querySelectorAll("li").forEach(function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")}),a.classList.remove("drag"),a.parentNode.classList.remove("drag"),s.element.classList.remove("drag"),o&&o.remove(),ol.ext.element.removeListener(document,"mousemove touchmove",u),ol.ext.element.removeListener(document,"mouseup touchend touchcancel",t)})},ol.control.LayerSwitcher.prototype.dragOpacity_=function(t){t.stopPropagation(),t.preventDefault();var e=this,i=t.target,o=this._getLayerForLI(i.parentNode.parentNode.parentNode);if(o){var n=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,r=ol.ext.element.getStyle(i,"left")-n;e.dragging_=!0,ol.ext.element.addListener(document,"mouseup touchend touchcancel",function t(){ol.ext.element.removeListener(document,"mouseup touchend touchcancel",t),ol.ext.element.removeListener(document,"mousemove touchmove",s),e.dragging_=!1}),ol.ext.element.addListener(document,"mousemove touchmove",s)}function s(t){var e=(r+(t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX))/ol.ext.element.getStyle(i.parentNode,"width"),n=Math.max(0,Math.min(1,e));ol.ext.element.setStyle(i,{left:100*n+"%"}),i.parentNode.nextElementSibling.innerHTML=Math.round(100*n),o.setOpacity(n)}},ol.control.LayerSwitcher.prototype.drawList=function(t,e){var i=this,o=e.getArray(),n=function(t){t.stopPropagation(),t.preventDefault();var o=i._getLayerForLI(this.parentNode.parentNode);i.switchLayerVisibility(o,e),i.get("selection")&&o.getVisible()&&i.selectLayer(o),i.onchangeCheck&&i.onchangeCheck(o)};function r(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.oninfo(e),i.dispatchEvent({type:"info",layer:e})}function s(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.onextent?i.onextent(e):i.getMap().getView().fit(e.getExtent(),i.getMap().getSize()),i.dispatchEvent({type:"extent",layer:e})}function a(t){t.stopPropagation(),t.preventDefault();var e,o=this.parentNode.parentNode.parentNode.parentNode,n=i._getLayerForLI(o);n?(e=i._getLayerForLI(this.parentNode.parentNode),n.getLayers().remove(e),0!=n.getLayers().getLength()||n.get("noSwitcherDelete")||a.call(o.querySelectorAll(".layerTrash")[0],t)):(o=this.parentNode.parentNode,i.getMap().removeLayer(i._getLayerForLI(o)))}function l(e){if(this.displayInLayerSwitcher(e)){var l=ol.ext.element.create("LI",{className:(e.getVisible()?"visible ":" ")+(e.get("baseLayer")?"baselayer":""),parent:t});this._setLayerForLI(l,e),this._selectedLayer===e&&l.classList.add("ol-layer-select");var h=ol.ext.element.create("DIV",{className:"ol-layerswitcher-buttons",parent:l}),u=ol.ext.element.create("DIV",{className:"li-content",parent:l});ol.ext.element.create("INPUT",{type:e.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:e.getVisible(),click:n,parent:u});var d=ol.ext.element.create("LABEL",{title:e.get("title")||e.get("name"),click:n,unselectable:"on",style:{userSelect:"none"},parent:u});if(d.addEventListener("selectstart",function(){return!1}),ol.ext.element.create("SPAN",{html:e.get("title")||e.get("name"),click:(function(t){this.get("selection")&&(t.stopPropagation(),this.selectLayer(e))}).bind(this),parent:d}),this.reordering&&(c<o.length-1&&(e.get("allwaysOnTop")||!o[c+1].get("allwaysOnTop"))||c>0&&(!e.get("allwaysOnTop")||o[c-1].get("allwaysOnTop")))&&ol.ext.element.create("DIV",{className:"layerup ol-noscroll",title:this.tip.up,on:{"mousedown touchstart":function(t){i.dragOrdering_(t)}},parent:h}),e.getLayers){var p=0;e.getLayers().forEach(function(t){i.displayInLayerSwitcher(t)&&p++}),p&&ol.ext.element.create("DIV",{className:e.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var t=i._getLayerForLI(this.parentNode.parentNode);t.set("openInLayerSwitcher",!t.get("openInLayerSwitcher"))},parent:h})}if(this.oninfo&&ol.ext.element.create("DIV",{className:"layerInfo",title:this.tip.info,click:r,parent:h}),this.hastrash&&!e.get("noSwitcherDelete")&&ol.ext.element.create("DIV",{className:"layerTrash",title:this.tip.trash,click:a,parent:h}),this.hasextent&&o[c].getExtent()){var g=o[c].getExtent();4==g.length&&g[0]<g[2]&&g[1]<g[3]&&ol.ext.element.create("DIV",{className:"layerExtent",title:this.tip.extent,click:s,parent:h})}if(this.show_progress&&e instanceof ol.layer.Tile){var f=ol.ext.element.create("DIV",{className:"layerswitcher-progress",parent:u});this.setprogress_(e),e.layerswitcher_progress=ol.ext.element.create("DIV",{parent:f})}var m=ol.ext.element.create("DIV",{className:"layerswitcher-opacity",click:function(t){if(t.target===this){t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(1,t.offsetX/ol.ext.element.getStyle(this,"width")));i._getLayerForLI(this.parentNode.parentNode).setOpacity(e)}},parent:u});if(ol.ext.element.create("DIV",{className:"layerswitcher-opacity-cursor ol-noscroll",style:{left:100*e.getOpacity()+"%"},on:{"mousedown touchstart":function(t){i.dragOpacity_(t)}},parent:m}),ol.ext.element.create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(100*e.getOpacity()),parent:u}),e.getLayers&&(l.classList.add("ol-layer-group"),!0===e.get("openInLayerSwitcher"))){var y=ol.ext.element.create("UL",{parent:l});this.drawList(y,e.getLayers())}l.classList.add(this.getLayerClass(e)),this.dispatchEvent({type:"drawlist",layer:e,li:l})}else this._setLayerForLI(null,e)}for(var c=o.length-1;c>=0;c--)l.call(this,o[c]);this.viewChange(),t===this.panel_&&this.overflow()},ol.control.LayerSwitcher.prototype.getLayerClass=function(t){return t?t.getLayers?"ol-layer-group":t instanceof ol.layer.Vector?"ol-layer-vector":t instanceof ol.layer.VectorTile?"ol-layer-vectortile":t instanceof ol.layer.Tile?"ol-layer-tile":t instanceof ol.layer.Image?"ol-layer-image":t instanceof ol.layer.Heatmap?"ol-layer-heatmap":t.getFeatures?"ol-layer-vectorimage":"unknown":"none"},ol.control.LayerSwitcher.prototype.selectLayer=function(t,e){if(!t){if(!this.getMap())return;t=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=t,this.drawPanel(),e||this.dispatchEvent({type:"select",layer:t})},ol.control.LayerSwitcher.prototype.getSelection=function(){return this._selectedLayer},ol.control.LayerSwitcher.prototype.setprogress_=function(t){if(!t.layerswitcher_progress){var e=0,i=0,o=function(){i===e?(i=e=0,ol.ext.element.setStyle(t.layerswitcher_progress,{width:0})):ol.ext.element.setStyle(t.layerswitcher_progress,{width:(e/i*100).toFixed(1)+"%"})};t.getSource().on("tileloadstart",function(){i++,o()}),t.getSource().on("tileloadend",function(){e++,o()}),t.getSource().on("tileloaderror",function(){e++,o()})}},ol.control.Bar=function(t){t||(t={});var e=document.createElement("div");if(e.classList.add("ol-unselectable","ol-control","ol-bar"),t.className){var i=t.className.split(" ").filter(function(t){return t.length>0});e.classList.add.apply(e.classList,i)}if(t.group&&e.classList.add("ol-group"),ol.control.Control.call(this,{element:e,target:t.target}),this.set("toggleOne",t.toggleOne),this.set("autoDeactivate",t.autoDeactivate),this.controls_=[],t.controls instanceof Array)for(var o=0;o<t.controls.length;o++)this.addControl(t.controls[o])},ol.ext.inherits(ol.control.Bar,ol.control.Control),ol.control.Bar.prototype.setVisible=function(t){this.element.style.display=t?"":"none"},ol.control.Bar.prototype.getVisible=function(){return"none"!=this.element.style.display},ol.control.Bar.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t);for(var e=0;e<this.controls_.length;e++)this.controls_[e].setMap(t)},ol.control.Bar.prototype.getControls=function(){return this.controls_},ol.control.Bar.prototype.setPosition=function(t){this.element.classList.remove("ol-left","ol-top","ol-bottom","ol-right"),t=t.split("-");for(var e=0;e<t.length;e++)switch(t[e]){case"top":case"left":case"bottom":case"right":this.element.classList.add("ol-"+t[e])}},ol.control.Bar.prototype.addControl=function(t){this.controls_.push(t),t.setTarget(this.element),this.getMap()&&this.getMap().addControl(t),t.on("change:active",(function(e){this.onActivateControl_(e,t)}).bind(this)),t.getActive&&this.onActivateControl_({target:t,active:t.getActive()},t)},ol.control.Bar.prototype.deactivateControls=function(t){for(var e=0;e<this.controls_.length;e++)this.controls_[e]!==t&&this.controls_[e].setActive&&this.controls_[e].setActive(!1)},ol.control.Bar.prototype.getActiveControls=function(){for(var t,e=[],i=0;t=this.controls_[i];i++)t.getActive&&t.getActive()&&e.push(t);return e},ol.control.Bar.prototype.setActive=function(t){if(!t&&this.get("autoDeactivate")&&this.deactivateControls(),t)for(var e,i=this.getControls(),o=0;e=i[o];o++)e.get("autoActivate")&&e.setActive(!0)},ol.control.Bar.prototype.onActivateControl_=function(t,e){if(this.get("toggleOne"))if(t.active){var i;for(i=0;i<this.controls_.length&&this.controls_[i]!==e;i++);if(i==this.controls_.length)return;this.deactivateControls(this.controls_[i])}else if(!this.getActiveControls().length)for(var o,n=0;o=this.controls_[n];n++)if(o.get("autoActivate")){o.setActive(!0);break}},ol.control.Bar.prototype.getControlsByName=function(t){return this.getControls().filter(function(e){return e.get("name")===t})},ol.control.CanvasAttribution=function(t){t||(t={}),ol.control.Attribution.call(this,t),this.element.classList.add("ol-canvas-control"),this.setCanvas(!!t.canvas),t||(t={}),t.style||(t.style=new ol.style.Style),this.setStyle(t.style)},ol.ext.inherits(ol.control.CanvasAttribution,ol.control.Attribution),ol.control.CanvasAttribution.prototype.setCanvas=function(t){if(this.isCanvas_=t,t&&this.setCollapsed(!1),this.element.style.visibility=t?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.control.CanvasAttribution.prototype.getContext=ol.control.CanvasBase.prototype.getContext,ol.control.CanvasAttribution.prototype.setStyle=function(t){var e=t.getText();this.font_=e?e.getFont():"10px sans-serif";var i=e?e.getStroke():null,o=e?e.getFill():null;this.fontStrokeStyle_=i?ol.color.asString(i.getColor()):"#fff",this.fontFillStyle_=o?ol.color.asString(o.getColor()):"#000",this.fontStrokeWidth_=i?i.getWidth():3,this.getMap()&&this.getMap().render()},ol.control.CanvasAttribution.prototype.setMap=function(t){ol.control.CanvasBase.prototype.getCanvas.call(this,t);var e=this.getMap();if(this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Attribution.prototype.setMap.call(this,t),e)try{e.renderSync()}catch(i){}t&&(this._listener=t.on("postcompose",this.drawAttribution_.bind(this))),this.setCanvas(this.isCanvas_)},ol.control.CanvasAttribution.prototype.drawAttribution_=function(t){if(this.isCanvas_){var e=this.getContext(t);if(e){var i="";Array.prototype.slice.call(this.element.querySelectorAll("li")).filter(function(t){return"none"!==t.style.display}).map(function(t){i+=(i?" - ":"")+t.textContent});var o=t.frameState.pixelRatio;e.save(),e.scale(o,o);var n=this.element.getBoundingClientRect(),r=this.getMap().getViewport().getBoundingClientRect(),s=this.getMap().getSize()[0]/r.width;e.translate((n.left-r.left)*s,(n.top-r.top)*s);var a,l=this.element.clientHeight,c=this.element.clientWidth,h=ol.ext.element.getStyle(this.element,"textAlign")||"center";switch(h){case"left":a=0;break;case"right":a=c;break;default:a=c/2}e.beginPath(),e.strokeStyle=this.fontStrokeStyle_,e.fillStyle=this.fontFillStyle_,e.lineWidth=this.fontStrokeWidth_,e.textAlign=h,e.textBaseline="middle",e.font=this.font_,e.strokeText(i,a,l/2),e.fillText(i,a,l/2),e.closePath(),e.restore()}}},ol.control.CanvasScaleLine=function(t){ol.control.ScaleLine.call(this,t),this.element.classList.add("ol-canvas-control"),this.scaleHeight_=6,t||(t={}),t.style||(t.style=new ol.style.Style),this.setStyle(t.style)},ol.ext.inherits(ol.control.CanvasScaleLine,ol.control.ScaleLine),ol.control.CanvasScaleLine.prototype.getContext=ol.control.CanvasBase.prototype.getContext,ol.control.CanvasScaleLine.prototype.setMap=function(t){ol.control.CanvasBase.prototype.getCanvas.call(this,t);var e=this.getMap();if(this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.ScaleLine.prototype.setMap.call(this,t),e)try{e.renderSync()}catch(i){}t&&(this._listener=t.on("postcompose",this.drawScale_.bind(this))),this.element.style.visibility="hidden",this.olscale=this.element.querySelector(".ol-scale-line-inner")},ol.control.CanvasScaleLine.prototype.setStyle=function(t){var e=t.getStroke();this.strokeStyle_=e?ol.color.asString(e.getColor()):"#000",this.strokeWidth_=e?e.getWidth():2;var i=t.getFill();this.fillStyle_=i?ol.color.asString(i.getColor()):"#fff";var o=t.getText();this.font_=o?o.getFont():"10px Arial",e=o?o.getStroke():null,i=o?o.getFill():null,this.fontStrokeStyle_=e?ol.color.asString(e.getColor()):this.fillStyle_,this.fontStrokeWidth_=e?e.getWidth():3,this.fontFillStyle_=i?ol.color.asString(i.getColor()):this.strokeStyle_,this.getMap()&&this.getMap().render()},ol.control.CanvasScaleLine.prototype.drawScale_=function(t){if("hidden"===this.element.style.visibility&&"none"!==ol.ext.element.getStyle(this.element,"display")){var e=this.getContext(t);if(e){var i=parseInt(this.olscale.style.width);if(i){var o=this.olscale.textContent,n={left:this.element.offsetLeft,top:this.element.offsetTop},r=t.frameState.pixelRatio;e.save(),e.scale(r,r),n.top+=this.element.clientHeight-this.scaleHeight_,e.beginPath(),e.strokeStyle=this.fontStrokeStyle_,e.fillStyle=this.fontFillStyle_,e.lineWidth=this.fontStrokeWidth_,e.textAlign="center",e.textBaseline="bottom",e.font=this.font_,e.strokeText(o,n.left+i/2,n.top),e.fillText(o,n.left+i/2,n.top),e.closePath(),n.top+=2,e.lineWidth=this.strokeWidth_,e.strokeStyle=this.strokeStyle_;for(var s=4,a=parseInt(o);a%10==0;)a/=10;a%5==0&&(s=5);for(var l=0;l<s;l++)e.beginPath(),e.fillStyle=l%2?this.fillStyle_:this.strokeStyle_,e.rect(n.left+l*i/s,n.top,i/s,this.scaleHeight_),e.stroke(),e.fill(),e.closePath();e.restore()}}}},ol.control.CanvasTitle=function(t){t||(t={});var e=ol.ext.element.create("DIV",{className:(t.className||"")+" ol-control-title ol-unselectable",style:{display:"block",visibility:"hidden"}});ol.control.CanvasBase.call(this,{element:e,style:t.style}),this.setTitle(t.title||""),this.setVisible(t.visible),this.element.style.font=this.getTextFont()},ol.ext.inherits(ol.control.CanvasTitle,ol.control.CanvasBase),ol.control.CanvasTitle.prototype.setStyle=function(t){ol.control.CanvasBase.prototype.setStyle.call(this,t),this.element&&(this.element.style.font=this.getTextFont()),this.getMap()&&this.getMap().render()},ol.control.CanvasTitle.prototype.setTitle=function(t){if(this.element.textContent=t,this.set("title",t),this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.control.CanvasTitle.prototype.getTitle=function(){return this.get("title")},ol.control.CanvasTitle.prototype.setVisible=function(t){if(this.element.style.display=t?"block":"none",this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.control.CanvasTitle.prototype.getVisible=function(){return"none"!==this.element.style.display},ol.control.CanvasTitle.prototype._draw=function(t){if(this.getVisible()){var e=this.getContext(t);if(e){var i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var o=this.element.getBoundingClientRect(),n=this.getMap().getViewport().getBoundingClientRect(),r=this.getMap().getSize()[0]/n.width;e.translate(Math.round((o.left-n.left)*r),Math.round((o.top-n.top)*r));var s=this.element.clientHeight,a=this.element.clientWidth,l=a/2;e.beginPath(),e.fillStyle=ol.color.asString(this.getFill().getColor()),e.rect(0,0,a,s),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=ol.color.asString(this.getTextFill().getColor()),e.strokeStyle=ol.color.asString(this.getTextStroke().getColor()),e.lineWidth=this.getTextStroke().getWidth(),e.textAlign="center",e.textBaseline="middle",e.font=this.getTextFont(),e.lineWidth&&e.strokeText(this.getTitle(),l,s/2),e.fillText(this.getTitle(),l,s/2),e.closePath(),e.restore()}}},ol.control.CenterPosition=function(t){t||(t={});var e=ol.ext.element.create("DIV",{className:(t.className||"")+" ol-center-position ol-unselectable",style:{display:"block",visibility:"hidden"}});ol.control.CanvasBase.call(this,{element:e,style:t.style}),this.element.style.font=this.getTextFont(),this.set("projection",t.projection),this.setCanvas(t.canvas),this._format="function"==typeof t.coordinateFormat?t.coordinateFormat:ol.coordinate.toStringXY},ol.ext.inherits(ol.control.CenterPosition,ol.control.CanvasBase),ol.control.CenterPosition.prototype.setStyle=function(t){ol.control.CanvasBase.prototype.setStyle.call(this,t),this.element&&(this.element.style.font=this.getTextFont()),this.getMap()&&this.getMap().render()},ol.control.CenterPosition.prototype.setCanvas=function(t){if(this.set("canvas",t),this.element.style.visibility=t?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.control.CenterPosition.prototype.setVisible=function(t){if(this.element.style.display=t?"":"none",this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.control.CenterPosition.prototype.getVisible=function(){return"none"!==this.element.style.display},ol.control.CenterPosition.prototype._draw=function(t){if(this.getVisible()&&this.getMap()){var e=this.getMap().getView().getCenter();if(this.get("projection")&&(e=ol.proj.transform(e,this.getMap().getView().getProjection(),this.get("projection"))),e=this._format(e),this.element.textContent=e,this.get("canvas")){var i=this.getContext(t);if(i){var o=t.frameState.pixelRatio;i.save(),i.scale(o,o);var n=this.element.getBoundingClientRect(),r=this.getMap().getViewport().getBoundingClientRect(),s=this.getMap().getSize()[0]/r.width;i.translate((n.left-r.left)*s,(n.top-r.top)*s);var a=this.element.clientHeight,l=this.element.clientWidth;i.beginPath(),i.fillStyle=ol.color.asString(this.getTextFill().getColor()),i.strokeStyle=ol.color.asString(this.getTextStroke().getColor()),i.lineWidth=this.getTextStroke().getWidth(),i.textAlign="center",i.textBaseline="middle",i.font=this.getTextFont(),i.lineWidth&&i.strokeText(e,l/2,a/2),i.fillText(e,l/2,a/2),i.closePath(),i.restore()}}}},ol.control.Compass=function(t){t||(t={});var e=document.createElement("div");e.className="ol-control ol-compassctrl ol-unselectable ol-hidden"+(t.className?" "+t.className:""),e.style.position="absolute",e.style.visibility="hidden";var i=t.style instanceof ol.style.Stroke?new ol.style.Style({stroke:t.style}):t.style;t.style||(i=new ol.style.Style({stroke:new ol.style.Stroke({width:0})})),ol.control.CanvasBase.call(this,{element:e,style:i}),this.set("rotateVithView",!1!==t.rotateWithView),this.setVisible(!1!==t.visible),this.setImage(t.image||t.src)},ol.ext.inherits(ol.control.Compass,ol.control.CanvasBase),ol.control.Compass.prototype.setImage=function(t){if(t instanceof Image)this.img_=t,this.img_.onload=(function(){if(this.getMap())try{this.getMap().renderSync()}catch(t){}}).bind(this);else if("string"==typeof t)switch(t){case"compact":this.img_=this.compactCompass_(this.element.clientWidth,this.getStroke().getColor());break;case"default":this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor());break;default:this.img_=new Image,this.img_.onload=(function(){if(this.getMap())try{this.getMap().renderSync()}catch(t){}}).bind(this),this.img_.src=t}else this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor())},ol.control.Compass.prototype.compactCompass_=function(t,e){var i=document.createElement("canvas"),o=i.getContext("2d"),n=(t=i.width=i.height=t||150)/2;return o.translate(n,n),o.fillStyle=e||"#963",o.lineWidth=5,o.lineJoin=o.lineCap="round",o.font="bold "+.4*n+"px sans-serif",o.textBaseline="bottom",o.textAlign="center",o.strokeStyle="#fff",o.globalAlpha=.75,o.strokeText("N",0,-n/2),o.globalAlpha=1,o.fillText("N",0,-n/2),o.beginPath(),o.moveTo(0,n/4),o.lineTo(n/3,n/2),o.lineTo(0,-n/2),o.lineTo(-n/3,n/2),o.lineTo(0,n/4),o.lineWidth=12,o.fillStyle="#fff",o.globalAlpha=.75,o.fill(),o.stroke(),o.globalAlpha=1,o.fillStyle=o.strokeStyle=e||"#963",o.lineWidth=5,o.beginPath(),o.moveTo(0,n/4),o.lineTo(0,-n/2),o.lineTo(n/3,n/2),o.lineTo(0,n/4),o.fill(),o.stroke(),o.beginPath(),o.moveTo(0,n/4),o.lineTo(0,-n/2),o.lineTo(-n/3,n/2),o.lineTo(0,n/4),o.stroke(),i},ol.control.Compass.prototype.defaultCompass_=function(t,e){var i=document.createElement("canvas"),o=i.getContext("2d"),n=(t=i.width=i.height=t||150)/2,r=.22*n;function s(t,i){o.fillStyle=e||"#963",o.beginPath(),o.moveTo(0,0),o.lineTo(t,0),o.lineTo(i,i),o.moveTo(0,0),o.lineTo(-t,0),o.lineTo(-i,-i),o.moveTo(0,0),o.lineTo(0,t),o.lineTo(-i,i),o.moveTo(0,0),o.lineTo(0,-t),o.lineTo(i,-i),o.moveTo(0,0),o.fill(),o.stroke()}function a(t,e){o.globalCompositeOperation="destination-out",o.fillStyle="#fff",o.beginPath(),o.moveTo(0,0),o.lineTo(t,0),o.lineTo(e,-e),o.moveTo(0,0),o.lineTo(-t,0),o.lineTo(-e,e),o.moveTo(0,0),o.lineTo(0,t),o.lineTo(e,e),o.moveTo(0,0),o.lineTo(0,-t),o.lineTo(-e,-e),o.moveTo(0,0),o.fill(),o.globalCompositeOperation="source-over",o.beginPath(),o.moveTo(0,0),o.lineTo(t,0),o.lineTo(e,-e),o.moveTo(0,0),o.lineTo(-t,0),o.lineTo(-e,e),o.moveTo(0,0),o.lineTo(0,t),o.lineTo(e,e),o.moveTo(0,0),o.lineTo(0,-t),o.lineTo(-e,-e),o.moveTo(0,0),o.stroke()}return o.translate(n,n),o.strokeStyle=e||"#963",o.lineWidth=1.5,o.beginPath(),o.arc(0,0,.41*t,0,2*Math.PI),o.arc(0,0,.44*t,0,2*Math.PI),o.stroke(),o.rotate(Math.PI/4),s(.9*n,.8*r),a(.9*n,.8*r),o.rotate(-Math.PI/4),s(n,r),a(n,r),i},ol.control.Compass.prototype.getVisible=function(){return"block"===ol.ext.element.getStyle(this.element,"display")},ol.control.Compass.prototype.setVisible=function(t){t?this.element.classList.add("ol-visible"):this.element.classList.remove("ol-visible"),this.getMap()&&this.getMap().render()},ol.control.Compass.prototype._draw=function(t){var e=this.getContext(t);if(e&&this.getVisible()){var i,o=e.canvas,n=[];for(i=0;i<8;i++)n[i]=[Math.cos(Math.PI*i/8),Math.sin(Math.PI*i/8)];var r=t.frameState.pixelRatio;e.save(),e.scale(r,r);var s=this.element.clientWidth,a=this.element.clientHeight,l=this.element.offsetLeft,c=this.element.offsetTop,h=this.img_,u=t.frameState.viewState.rotation;if(e.beginPath(),e.translate(l+s/2,c+a/2),this.get("rotateVithView")&&e.rotate(u),this.getStroke().getWidth()){e.beginPath(),e.strokeStyle=this.getStroke().getColor(),e.lineWidth=this.getStroke().getWidth();var d=Math.max(o.width,o.height);for(i=0;i<8;i++)e.moveTo(-n[i][0]*d,-n[i][1]*d),e.lineTo(n[i][0]*d,n[i][1]*d);e.stroke()}h.width&&e.drawImage(h,-s/2,-a/2,s,a),e.closePath(),e.restore()}},ol.control.Dialog=function(t){(t=t||{}).fullscreen&&(t.target=document.body);var e=ol.ext.element.create("DIV",{className:((t.className||"")+(t.zoom?" ol-zoom":"")+" ol-ext-dialog").trim(),click:(function(t){this.get("hideOnBack")&&t.target===e&&this.close(),this.get("hideOnClick")&&this.close()}).bind(this)}),i=ol.ext.element.create("FORM",{on:{submit:this._onButton("submit")},parent:e});ol.ext.element.create("H2",{parent:i}),ol.ext.element.create("DIV",{className:"ol-closebox",click:this._onButton("cancel"),parent:i}),ol.ext.element.create("DIV",{className:"ol-content",parent:i}),this._progress=ol.ext.element.create("DIV",{style:{display:"none"},parent:i});var o=ol.ext.element.create("DIV",{className:"ol-progress-bar",parent:this._progress});this._progressbar=ol.ext.element.create("DIV",{parent:o}),this._progressMessage=ol.ext.element.create("DIV",{className:"ol-progress-message",parent:this._progress}),ol.ext.element.create("DIV",{className:"ol-buttons",parent:i}),ol.control.Control.call(this,{element:e,target:t.target}),this.set("closeBox",!1!==t.closeBox),this.set("zoom",!!t.zoom),this.set("hideOnClick",!!t.hideOnClick),this.set("hideOnBack",!!t.hideOnBack),this.set("className",e.className),this.set("closeOnSubmit",t.closeOnSubmit),this.set("buttons",t.buttons),this.setContent(t)},ol.ext.inherits(ol.control.Dialog,ol.control.Control),ol.control.Dialog.prototype.show=function(t){t&&((t instanceof Element||"string"==typeof t)&&(t={content:t}),this.setContent(t)),this.element.classList.add("ol-visible");var e=this.element.querySelector('input[type="text"],input[type="search"],input[type="number"]');if(e&&e.focus(),this.dispatchEvent({type:"show"}),t){if(t.autoclose){var i=setTimeout((function(){this.hide()}).bind(this),t.autoclose);this.once("hide",function(){clearTimeout(i)})}if(t.hideOnBack){var o=this.get("hideOnBack");this.set("hideOnBack",!0),this.once("hide",(function(){this.set("hideOnBack",o)}).bind(this))}}},ol.control.Dialog.prototype.open=function(){this.show()},ol.control.Dialog.prototype.setContentMessage=function(t){if(void 0!==t){var e=this.getContentElement();t instanceof Element&&ol.ext.element.setHTML(e,""),ol.ext.element.setHTML(e,t||"")}},ol.control.Dialog.prototype.setTitle=function(t){var e=this.element.querySelector("form");e.querySelector("h2").innerText=t||"",t?e.classList.add("ol-title"):e.classList.remove("ol-title")},ol.control.Dialog.prototype.setContent=function(t){if(t){this.element.className=this.get("className"),"string"==typeof t&&(t={content:t}),t=t||{},this.setProgress(!1),t.max&&this.setProgress(0,t.max),void 0!==t.progress&&this.setProgress(t.progress),this.get("zoom")?this.element.classList.add("ol-zoom"):this.element.classList.remove("ol-zoom"),t.className&&t.className.split(" ").forEach((function(t){this.element.classList.add(t)}).bind(this));var e=this.element.querySelector("form");void 0!==t.content&&(t.content instanceof Element&&ol.ext.element.setHTML(e.querySelector(".ol-content"),""),ol.ext.element.setHTML(e.querySelector(".ol-content"),t.content||"")),this.setTitle(t.title),t.closeBox||this.get("closeBox")&&!1!==t.closeBox?e.classList.add("ol-closebox"):e.classList.remove("ol-closebox");var i=this.element.querySelector(".ol-buttons");i.innerHTML="";var o=t.buttons||this.get("buttons");if(o)for(var n in e.classList.add("ol-button"),o)ol.ext.element.create("INPUT",{type:"submit"===n?"submit":"button",value:o[n],click:this._onButton(n,t.onButton),parent:i});else e.classList.remove("ol-button")}},ol.control.Dialog.prototype.getContentElement=function(){return this.element.querySelector("form .ol-content")},ol.control.Dialog.prototype.setProgress=function(t,e,i){if(!1!==t){if(e>0?this.set("max",Number(e)):e=this.get("max"),e){var o=Math.round(t/e*100);ol.ext.element.setStyle(this._progress,{display:""}),this._progressbar.className=o?"":"notransition",ol.ext.element.setStyle(this._progressbar,{width:o+"%"})}else ol.ext.element.setStyle(this._progress,{display:"none"});this._progressMessage.innerHTML="",ol.ext.element.setHTML(this._progressMessage,i||"")}else ol.ext.element.setStyle(this._progress,{display:"none"})},ol.control.Dialog.prototype._onButton=function(t,e){return(function(i){i.preventDefault(),"submit"===t&&!1===this.get("closeOnSubmit")||this.hide();var o=this.getInputs();this.dispatchEvent({type:"button",button:t,inputs:o}),"function"==typeof e&&e(t,o)}).bind(this)},ol.control.Dialog.prototype.getInputs=function(){var t={};return["input","textarea","select"].forEach((function(e){this.element.querySelectorAll("form "+e).forEach(function(e){e.className&&e.className.split(" ").forEach(function(i){t[i]=e})})}).bind(this)),t},ol.control.Dialog.prototype.hide=function(){this.element.classList.remove("ol-visible"),this.dispatchEvent({type:"hide"})},ol.control.Dialog.prototype.close=ol.control.Dialog.prototype.hide,ol.control.Dialog.prototype.isOpen=function(){return this.element.classList.contains("ol-visible")},ol.control.Disable=function(t){t=t||{};var e=document.createElement("div");e.className=(t.className||" ol-disable ol-unselectable ol-control").trim();var i={top:"0px",left:"0px",right:"0px",bottom:"0px",zIndex:1e4,background:"none",display:"none"};Object.keys(i).forEach(function(t){e.style[t]=i[t]}),ol.control.Control.call(this,{element:e})},ol.ext.inherits(ol.control.Disable,ol.control.Control),ol.control.Disable.prototype.isOn=function(){return this.element.classList.contains("ol-disable")},ol.control.Disable.prototype.disableMap=function(t){t?this.element.classList.add("ol-enable").show():this.element.classList.remove("ol-enable").hide()},ol.control.EditBar=function(t){(t=t||{}).interactions=t.interactions||{},ol.control.Bar.call(this,{className:(t.className?t.className+" ":"")+"ol-editbar",toggleOne:!0,target:t.target}),this._source=t.source,this._interactions={},this._setSelectInteraction(t),!1!==t.edition&&this._setEditInteraction(t),this._setModifyInteraction(t)},ol.ext.inherits(ol.control.EditBar,ol.control.Bar),ol.control.EditBar.prototype.setMap=function(t){this.getMap()&&(this._interactions.Delete&&this.getMap().removeInteraction(this._interactions.Delete),this._interactions.ModifySelect&&this.getMap().removeInteraction(this._interactions.ModifySelect)),ol.control.Bar.prototype.setMap.call(this,t),this.getMap()&&(this._interactions.Delete&&this.getMap().addInteraction(this._interactions.Delete),this._interactions.ModifySelect&&this.getMap().addInteraction(this._interactions.ModifySelect))},ol.control.EditBar.prototype.getInteraction=function(t){return this._interactions[t]},ol.control.EditBar.prototype._getTitle=function(t){if(t)return t.get?t.get("title"):"string"==typeof t?t:t.title},ol.control.EditBar.prototype._setSelectInteraction=function(t){var e,i=this,o=new ol.control.Bar;if(!1!==t.interactions.Delete){this._interactions.Delete=t.interactions.Delete instanceof ol.interaction.Delete?t.interactions.Delete:new ol.interaction.Delete;var n=this._interactions.Delete;n.setActive(!1),this.getMap()&&this.getMap().addInteraction(n),o.addControl(new ol.control.Button({className:"ol-delete",title:this._getTitle(t.interactions.Delete)||"Delete",name:"Delete",handleClick:function(t){n.delete(e.getInteraction().getFeatures());var i={type:"select",selected:[],deselected:e.getInteraction().getFeatures().getArray().slice(),mapBrowserEvent:t.mapBrowserEvent};e.getInteraction().getFeatures().clear(),e.getInteraction().dispatchEvent(i)}}))}if(!1!==t.interactions.Info&&o.addControl(new ol.control.Button({className:"ol-info",name:"Info",title:this._getTitle(t.interactions.Info)||"Show informations",handleClick:function(){i.dispatchEvent({type:"info",features:e.getInteraction().getFeatures()})}})),!1!==t.interactions.Select){this._interactions.Select=t.interactions.Select instanceof ol.interaction.Select?t.interactions.Select:new ol.interaction.Select({condition:ol.events.condition.click});var r=this._interactions.Select;e=new ol.control.Toggle({className:"ol-selection",name:"Select",title:this._getTitle(t.interactions.Select)||"Select",interaction:r,bar:o.getControls().length?o:void 0,autoActivate:!0,active:!0}),this.addControl(e),r.on("change:active",function(){r.getFeatures().clear()})}},ol.control.EditBar.prototype._setEditInteraction=function(t){if(!1!==t.interactions.DrawPoint){this._interactions.DrawPoint=t.interactions.DrawPoint instanceof ol.interaction.Draw?t.interactions.DrawPoint:new ol.interaction.Draw({type:"Point",source:this._source});var e=new ol.control.Toggle({className:"ol-drawpoint",name:"DrawPoint",title:this._getTitle(t.interactions.DrawPoint)||"Point",interaction:this._interactions.DrawPoint});this.addControl(e)}if(!1!==t.interactions.DrawLine){this._interactions.DrawLine=t.interactions.DrawLine instanceof ol.interaction.Draw?t.interactions.DrawLine:new ol.interaction.Draw({type:"LineString",source:this._source,geometryFunction:function(t,e){return e?e.setCoordinates(t):e=new ol.geom.LineString(t),this.nbpts=e.getCoordinates().length,e}});var i=new ol.control.Toggle({className:"ol-drawline",title:this._getTitle(t.interactions.DrawLine)||"LineString",name:"DrawLine",interaction:this._interactions.DrawLine,bar:new ol.control.Bar({controls:[new ol.control.TextButton({html:this._getTitle(t.interactions.UndoDraw)||"undo",title:this._getTitle(t.interactions.UndoDraw)||"delete last point",handleClick:function(){i.getInteraction().nbpts>1&&i.getInteraction().removeLastPoint()}}),new ol.control.TextButton({html:this._getTitle(t.interactions.FinishDraw)||"finish",title:this._getTitle(t.interactions.FinishDraw)||"finish",handleClick:function(){i.getInteraction().nbpts>2&&i.getInteraction().finishDrawing()}})]})});this.addControl(i)}if(!1!==t.interactions.DrawPolygon&&(this._interactions.DrawPolygon=t.interactions.DrawPolygon instanceof ol.interaction.Draw?t.interactions.DrawPolygon:new ol.interaction.Draw({type:"Polygon",source:this._source,geometryFunction:function(t,e){return this.nbpts=t[0].length,e?e.setCoordinates([t[0].concat([t[0][0]])]):e=new ol.geom.Polygon(t),e}}),this._setDrawPolygon("ol-drawpolygon",this._interactions.DrawPolygon,this._getTitle(t.interactions.DrawPolygon)||"Polygon","DrawPolygon",t)),!1!==t.interactions.DrawHole&&(this._interactions.DrawHole=t.interactions.DrawHole instanceof ol.interaction.DrawHole?t.interactions.DrawHole:new ol.interaction.DrawHole,this._setDrawPolygon("ol-drawhole",this._interactions.DrawHole,this._getTitle(t.interactions.DrawHole)||"Hole","DrawHole",t)),!1!==t.interactions.DrawRegular){var o={pts:"pts",circle:"circle"};t.interactions.DrawRegular instanceof ol.interaction.DrawRegular?(this._interactions.DrawRegular=t.interactions.DrawRegular,o.pts=this._interactions.DrawRegular.get("ptsLabel")||o.pts,o.circle=this._interactions.DrawRegular.get("circleLabel")||o.circle):(this._interactions.DrawRegular=new ol.interaction.DrawRegular({source:this._source,sides:4}),t.interactions.DrawRegular&&(o.pts=t.interactions.DrawRegular.ptsLabel||o.pts,o.circle=t.interactions.DrawRegular.circleLabel||o.circle));var n=this._interactions.DrawRegular,r=document.createElement("DIV"),s=ol.ext.element.create("DIV",{parent:r});ol.ext.element.addListener(s,["click","touchstart"],(function(){var t=n.getSides()-1;t<2&&(t=2),n.setSides(t),a.textContent=t>2?t+" "+o.pts:o.circle}).bind(this));var a=ol.ext.element.create("TEXT",{html:"4 "+o.pts,parent:r}),l=ol.ext.element.create("DIV",{parent:r});ol.ext.element.addListener(l,["click","touchstart"],(function(){var t=n.getSides()+1;t<3&&(t=3),n.setSides(t),a.textContent=t+" "+o.pts}).bind(this));var c=new ol.control.Toggle({className:"ol-drawregular",title:this._getTitle(t.interactions.DrawRegular)||"Regular",name:"DrawRegular",interaction:this._interactions.DrawRegular,bar:new ol.control.Bar({controls:[new ol.control.TextButton({html:r})]})});this.addControl(c)}},ol.control.EditBar.prototype._setDrawPolygon=function(t,e,i,o,n){var r=new ol.control.Toggle({className:t,name:o,title:i,interaction:e,bar:new ol.control.Bar({controls:[new ol.control.TextButton({html:this._getTitle(n.interactions.UndoDraw)||"undo",title:this._getTitle(n.interactions.UndoDraw)||"undo last point",handleClick:function(){r.getInteraction().nbpts>1&&r.getInteraction().removeLastPoint()}}),new ol.control.TextButton({html:this._getTitle(n.interactions.FinishDraw)||"finish",title:this._getTitle(n.interactions.FinishDraw)||"finish",handleClick:function(){r.getInteraction().nbpts>3&&r.getInteraction().finishDrawing()}})]})});return this.addControl(r),r},ol.control.EditBar.prototype._setModifyInteraction=function(t){if(!1!==t.interactions.ModifySelect&&!1!==t.interactions.Select&&(this._interactions.ModifySelect=t.interactions.ModifySelect instanceof ol.interaction.ModifyFeature?t.interactions.ModifySelect:new ol.interaction.ModifyFeature({features:this.getInteraction("Select").getFeatures()}),this.getMap()&&this.getMap().addInteraction(this._interactions.ModifySelect),this._interactions.ModifySelect.setActive(this._interactions.Select.getActive()),this._interactions.Select.on("change:active",(function(){this._interactions.ModifySelect.setActive(this._interactions.Select.getActive())}).bind(this))),!1!==t.interactions.Transform){this._interactions.Transform=t.interactions.Transform instanceof ol.interaction.Transform?t.interactions.Transform:new ol.interaction.Transform({addCondition:ol.events.condition.shiftKeyOnly});var e=new ol.control.Toggle({html:"<i></i>",className:"ol-transform",title:this._getTitle(t.interactions.Transform)||"Transform",name:"Transform",interaction:this._interactions.Transform});this.addControl(e)}if(!1!==t.interactions.Split){this._interactions.Split=t.interactions.Split instanceof ol.interaction.Split?t.interactions.Split:new ol.interaction.Split({sources:this._source});var i=new ol.control.Toggle({className:"ol-split",title:this._getTitle(t.interactions.Split)||"Split",name:"Split",interaction:this._interactions.Split});this.addControl(i)}if(!1!==t.interactions.Offset){this._interactions.Offset=t.interactions.Offset instanceof ol.interaction.Offset?t.interactions.Offset:new ol.interaction.Offset({source:this._source});var o=new ol.control.Toggle({html:"<i></i>",className:"ol-offset",title:this._getTitle(t.interactions.Offset)||"Offset",name:"Offset",interaction:this._interactions.Offset});this.addControl(o)}},ol.control.Gauge=function(t){t=t||{};var e=ol.ext.element.create("DIV",{className:((t.className||"")+" ol-gauge ol-unselectable ol-control").trim()});this.title_=ol.ext.element.create("SPAN",{parent:e});var i=ol.ext.element.create("DIV",{parent:e});this.gauge_=ol.ext.element.create("BUTTON",{type:"button",style:{width:"0px"},parent:i}),ol.control.Control.call(this,{element:e,target:t.target}),this.setTitle(t.title),this.set("max",t.max||100),this.val(t.val)},ol.ext.inherits(ol.control.Gauge,ol.control.Control),ol.control.Gauge.prototype.setTitle=function(t){this.title_.innerHTML=t||"",this.title_.display=t?"":"none"},ol.control.Gauge.prototype.val=function(t){return void 0!==t&&(this.val_=t,this.gauge_.style.width=t/this.get("max")*100+"%"),this.val_},ol.control.GeoBookmark=function(t){t=t||{};var e=this,i=document.createElement("div");t.target?i.className=t.className||"ol-bookmark":(i.className=(t.className||"ol-bookmark")+" ol-unselectable ol-control ol-collapsed",i.addEventListener("mouseleave",function(){r!==document.activeElement&&(o.style.display="none")}),this.button=ol.ext.element.create("BUTTON",{type:"button",title:t.title||"Geobookmarks",click:(function(){var t=""===o.style.display||"none"===o.style.display;o.style.display=t?"block":"none",t&&this.setBookmarks()}).bind(this)}),i.appendChild(this.button));var o=document.createElement("div");i.appendChild(o);var n=document.createElement("ul");o.appendChild(n);var r=document.createElement("input");r.setAttribute("placeholder",t.placeholder||"Add a new geomark..."),r.addEventListener("keydown",function(t){if(t.stopPropagation(),13===t.keyCode){t.preventDefault();var i=this.value;i&&(e.addBookmark(i),this.value="",e.dispatchEvent({type:"add",name:i})),o.style.display="none"}}),r.addEventListener("blur",function(){o.style.display="none"}),o.appendChild(r),ol.control.Control.call(this,{element:i,target:t.target}),this.on("propertychange",(function(t){"editable"===t.key&&(i.className=i.className.replace(" ol-editable",""),this.get("editable")&&(i.className+=" ol-editable"))}).bind(this)),this.set("namespace",t.namespace||"ol"),this.set("editable",!1!==t.editable),this.set("deleteTitle",t.deleteTitle||"Suppr.");var s={};try{localStorage[this.get("namespace")+"@bookmark"]&&(s=JSON.parse(localStorage[this.get("namespace")+"@bookmark"]))}catch(l){console.warn("Failed to access localStorage...")}if(t.marks)for(var a in t.marks)s[a]=t.marks[a];this.setBookmarks(s)},ol.ext.inherits(ol.control.GeoBookmark,ol.control.Control),ol.control.GeoBookmark.prototype.setBookmarks=function(t){if(!t){t={};try{t=JSON.parse(localStorage[this.get("namespace")+"@bookmark"]||"{}")}catch(l){console.warn("Failed to access localStorage...")}}var e=this.get("editable"),i=this.element.querySelector("ul"),o=this.element.querySelector("div"),n=this;for(var r in i.innerHTML="",t){var s=document.createElement("li");if(s.textContent=r,s.setAttribute("data-bookmark",JSON.stringify(t[r])),s.setAttribute("data-name",r),s.addEventListener("click",function(){var t=JSON.parse(this.getAttribute("data-bookmark"));n.getMap().getView().setCenter(t.pos),n.getMap().getView().setZoom(t.zoom),n.getMap().getView().setRotation(t.rot||0),o.style.display="none",n.dispatchEvent({type:"select",name:this.getAttribute("data-name"),bookmark:t})}),i.appendChild(s),e&&!t[r].permanent){var a=document.createElement("button");a.setAttribute("data-name",r),a.setAttribute("type","button"),a.setAttribute("title",this.get("deleteTitle")||"Suppr."),a.addEventListener("click",function(t){n.removeBookmark(this.getAttribute("data-name")),n.dispatchEvent({type:"remove",name:this.getAttribute("data-name")}),t.stopPropagation()}),s.appendChild(a)}}try{localStorage[this.get("namespace")+"@bookmark"]=JSON.stringify(t)}catch(l){console.warn("Failed to access localStorage...")}},ol.control.GeoBookmark.prototype.getBookmarks=function(){var t={};try{t=JSON.parse(localStorage[this.get("namespace")+"@bookmark"]||"{}")}catch(e){console.warn("Failed to access localStorage...")}return t},ol.control.GeoBookmark.prototype.removeBookmark=function(t){if(t){var e=this.getBookmarks();delete e[t],this.setBookmarks(e)}},ol.control.GeoBookmark.prototype.addBookmark=function(t,e,i,o){if(t){var n;e&&e.position?(i=e.zoom,o=e.permanent,n=e.rotation,e=e.position):n=this.getMap().getView().getRotation();var r=this.getBookmarks();r[t]&&r[t].permanent||(r[t]={pos:e||this.getMap().getView().getCenter(),zoom:i||this.getMap().getView().getZoom(),permanent:!!o},n&&(r[t].rot=n),this.setBookmarks(r))}},ol.control.GeolocationBar=function(t){t||(t={}),t.className=t.className||"ol-geobar",ol.control.Bar.call(this,t),this.setPosition(t.position||"bottom-right");var e=this.element,i=new ol.interaction.GeolocationDraw({source:t.source,zoom:t.zoom,minZoom:t.minZoom,tolerance:t.tolerance,followTrack:t.followTrack,minAccuracy:t.minAccuracy||1e4});this._geolocBt=new ol.control.Toggle({className:"geolocBt",interaction:i,onToggle:function(){i.pause(!0),i.setFollowTrack(t.followTrack),e.classList.remove("pauseTrack")}}),this.addControl(this._geolocBt),this._geolocBt.setActive(!1);var o=new ol.control.Bar;this.addControl(o);var n=new ol.control.TextButton({className:"centerBt",html:t.centerLabel||"center",handleClick:function(){i.setFollowTrack("auto")}});o.addControl(n);var r=new ol.control.Button({className:"startBt",handleClick:function(){i.pause(!1),i.setFollowTrack("auto"),e.classList.add("pauseTrack")}});o.addControl(r);var s=new ol.control.Button({className:"pauseBt",handleClick:function(){i.pause(!0),i.setFollowTrack("auto"),e.classList.remove("pauseTrack")}});o.addControl(s),i.on("follow",function(t){t.following?e.classList.remove("centerTrack"):e.classList.add("centerTrack")}),this._geolocBt.on("change:active",function(t){t.active?e.classList.add("ol-active"):e.classList.remove("ol-active")})},ol.ext.inherits(ol.control.GeolocationBar,ol.control.Bar),ol.control.GeolocationBar.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Bar.prototype.setMap.call(this,t),t&&(this._listener=t.on("moveend",(function(){var e=this.getInteraction();e.getActive()&&"auto"===e.get("followTrack")&&e.path_.length&&e.path_[e.path_.length-1][0]!==t.getView().getCenter()[0]&&this.element.classList.add("centerTrack")}).bind(this)))},ol.control.GeolocationBar.prototype.getInteraction=function(){return this._geolocBt.getInteraction()},ol.control.GeolocationButton=function(t){t||(t={}),t.followTrack=t.followTrack||"auto",t.zoom=t.zoom||16;var e,i=new ol.interaction.GeolocationDraw(t);ol.control.Toggle.call(this,{className:t.className=((t.className||"")+" ol-geobt").trim(),interaction:i,title:t.title||"Geolocation",onToggle:function(){i.pause(!0),i.setFollowTrack(t.followTrack||"auto")}}),this.setActive(!1),i.on("tracking",(function(t){this.dispatchEvent({type:"position",coordinate:t.geolocation.getPosition()})}).bind(this)),i.on("change:active",(function(){this.dispatchEvent({type:"position"}),e&&(clearTimeout(e),e=null),i.getActive()&&(e=setTimeout((function(){i.setActive(!1),e=null}).bind(this),t.delay||3e3))}).bind(this))},ol.ext.inherits(ol.control.GeolocationButton,ol.control.Toggle),ol.control.Globe=function(t){var e,i=t||{},o=this;i.target?(e=document.createElement("div"),this.panel_=i.target):((e=document.createElement("div")).classList.add("ol-globe","ol-unselectable","ol-control"),/top/.test(i.align)&&e.classList.add("ol-control-top"),/right/.test(i.align)&&e.classList.add("ol-control-right"),this.panel_=document.createElement("div"),this.panel_.classList.add("panel"),e.appendChild(this.panel_),this.pointer_=document.createElement("div"),this.pointer_.classList.add("ol-pointer"),e.appendChild(this.pointer_)),ol.control.Control.call(this,{element:e,target:i.target}),this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:this.panel_,view:new ol.View({zoom:0,center:[0,0]}),layers:i.layers}),setTimeout(function(){o.ovmap_.updateSize()},0),this.set("follow",i.follow||!1),this.extentLayer=new ol.layer.Vector({name:"Cache extent",source:new ol.source.Vector,style:i.style||[new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,0,0, 1)"}),stroke:new ol.style.Stroke({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5})})]}),this.ovmap_.addLayer(this.extentLayer)},ol.ext.inherits(ol.control.Globe,ol.control.Control),ol.control.Globe.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener=t.getView().on("propertychange",this.setView.bind(this)),this.setView())},ol.control.Globe.prototype.setView=function(){this.getMap()&&this.get("follow")&&this.setCenter(this.getMap().getView().getCenter())},ol.control.Globe.prototype.getGlobe=function(){return this.ovmap_},ol.control.Globe.prototype.show=function(t){!1!==t?this.element.classList.remove("ol-collapsed"):this.element.classList.add("ol-collapsed"),this.ovmap_.updateSize()},ol.control.Globe.prototype.setPosition=function(t){/top/.test(t)?this.element.classList.add("ol-control-top"):this.element.classList.remove("ol-control-top"),/right/.test(t)?this.element.classList.add("ol-control-right"):this.element.classList.remove("ol-control-right")},ol.control.Globe.prototype.setCenter=function(t,e){var i=this;if(this.pointer_.classList.add("hidden"),t){var o=this.ovmap_,n=o.getPixelFromCoordinate(t);if(n){if(!1!==e){var r=this.element.clientHeight;setTimeout(function(){i.pointer_.style.top=String(Math.min(Math.max(n[1],0),r))+"px",i.pointer_.style.left="50%",i.pointer_.classList.remove("hidden")},800)}o.getView().animate({center:[t[0],0]})}}},ol.control.Graticule=function(t){t||(t={});var e=document.createElement("div");e.className="ol-graticule ol-unselectable ol-hidden",ol.control.CanvasBase.call(this,{element:e}),this.set("projection",t.projection||"EPSG:4326");var i=new ol.proj.Projection({code:this.get("projection")}).getMetersPerUnit();for(this.fac=1;i/this.fac>10;)this.fac*=10;this.fac=1e4/this.fac,this.set("maxResolution",t.maxResolution||1/0),this.set("step",t.step||.1),this.set("stepCoord",t.stepCoord||1),this.set("spacing",t.spacing||40),this.set("margin",t.margin||0),this.set("borderWidth",t.borderWidth||5),this.set("stroke",!1!==t.stroke),this.formatCoord=t.formatCoord||function(t){return t},t.style instanceof ol.style.Style?this.setStyle(t.style):this.setStyle(new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:1}),fill:new ol.style.Fill({color:"#fff"}),text:new ol.style.Text({stroke:new ol.style.Stroke({color:"#fff",width:2}),fill:new ol.style.Fill({color:"#000"})})}))},ol.ext.inherits(ol.control.Graticule,ol.control.CanvasBase),ol.control.Graticule.prototype.setStyle=function(t){this._style=t},ol.control.Graticule.prototype._draw=function(t){if(!(this.get("maxResolution")<t.frameState.viewState.resolution)){for(var e,i=this.getContext(t),o=i.canvas,n=t.frameState.pixelRatio,r=o.width/n,s=o.height/n,a=this.get("projection"),l=this.getMap(),c=[l.getCoordinateFromPixel([0,0]),l.getCoordinateFromPixel([r,0]),l.getCoordinateFromPixel([r,s]),l.getCoordinateFromPixel([0,s])],h=-1/0,u=1/0,d=-1/0,p=1/0,g=0;e=c[g];g++)c[g]=ol.proj.transform(e,l.getView().getProjection(),a),h=Math.max(h,c[g][0]),u=Math.min(u,c[g][0]),d=Math.max(d,c[g][1]),p=Math.min(p,c[g][1]);var f=this.get("spacing"),m=this.get("step"),y=this.get("stepCoord"),v=this.get("borderWidth"),x=this.get("margin");(h-u)/m*f>r&&(m*=Math.round((h-u)/r*f/m))>this.fac&&(m=Math.round(m/this.fac)*this.fac),u=Math.floor(u/m)*m-m,p=Math.floor(p/m)*m-m,h=Math.floor(h/m)*m+2*m,d=Math.floor(d/m)*m+2*m;var b=ol.proj.get(a).getExtent();b&&(u<b[0]&&(u=b[0]),p<b[1]&&(p=b[1]),h>b[2]&&(h=b[2]+m),d>b[3]&&(d=b[3]+m));var w=this.getStyle().getStroke()&&this.get("stroke"),_=this.getStyle().getText(),S=this.getStyle().getFill();i.save(),i.scale(n,n),i.beginPath(),i.rect(x,x,r-2*x,s-2*x),i.clip(),i.beginPath();var C,k,A,E,T,M={top:[],left:[],bottom:[],right:[]};for(C=u;C<h;C+=m)for(E=ol.proj.transform([C,p],a,l.getView().getProjection()),E=l.getPixelFromCoordinate(E),w&&i.moveTo(E[0],E[1]),A=E,k=p+m;k<=d;k+=m)T=ol.proj.transform([C,k],a,l.getView().getProjection()),T=l.getPixelFromCoordinate(T),w&&i.lineTo(T[0],T[1]),A[1]>0&&T[1]<0&&M.top.push([C,A]),A[1]>s&&T[1]<s&&M.bottom.push([C,A]),A=T;for(k=p;k<d;k+=m)for(E=ol.proj.transform([u,k],a,l.getView().getProjection()),E=l.getPixelFromCoordinate(E),w&&i.moveTo(E[0],E[1]),A=E,C=u+m;C<=h;C+=m)T=ol.proj.transform([C,k],a,l.getView().getProjection()),T=l.getPixelFromCoordinate(T),w&&i.lineTo(T[0],T[1]),A[0]<0&&T[0]>0&&M.left.push([k,A]),A[0]<r&&T[0]>r&&M.right.push([k,A]),A=T;if(w&&(i.strokeStyle=this.getStyle().getStroke().getColor(),i.lineWidth=this.getStyle().getStroke().getWidth(),i.stroke()),_){var L,P;i.fillStyle=this.getStyle().getText().getFill().getColor(),i.strokeStyle=this.getStyle().getText().getStroke().getColor(),i.lineWidth=this.getStyle().getText().getStroke().getWidth(),i.font=this.getStyle().getText().getFont(),i.textAlign="center",i.textBaseline="hanging";var I=(S?v:0)+x+2;for(g=0;L=M.top[g];g++)Math.round(L[0]/this.get("step"))%y||(P=this.formatCoord(L[0],"top"),i.strokeText(P,L[1][0],I),i.fillText(P,L[1][0],I));for(i.textBaseline="alphabetic",g=0;L=M.bottom[g];g++)Math.round(L[0]/this.get("step"))%y||(P=this.formatCoord(L[0],"bottom"),i.strokeText(P,L[1][0],s-I),i.fillText(P,L[1][0],s-I));for(i.textBaseline="middle",i.textAlign="left",g=0;L=M.left[g];g++)Math.round(L[0]/this.get("step"))%y||(P=this.formatCoord(L[0],"left"),i.strokeText(P,I,L[1][1]),i.fillText(P,I,L[1][1]));for(i.textAlign="right",g=0;L=M.right[g];g++)Math.round(L[0]/this.get("step"))%y||(P=this.formatCoord(L[0],"right"),i.strokeText(P,r-I,L[1][1]),i.fillText(P,r-I,L[1][1]))}if(S){var D,N,F=this.getStyle().getFill().getColor();for((N=this.getStyle().getStroke())?D=this.getStyle().getStroke().getColor():(D=F,F="#fff"),i.strokeStyle=D,i.lineWidth=N?N.getWidth():1,g=1;g<M.top.length;g++)i.beginPath(),i.rect(M.top[g-1][1][0],x,M.top[g][1][0]-M.top[g-1][1][0],v),i.fillStyle=Math.round(M.top[g][0]/m)%2?D:F,i.fill(),i.stroke();for(g=1;g<M.bottom.length;g++)i.beginPath(),i.rect(M.bottom[g-1][1][0],s-v-x,M.bottom[g][1][0]-M.bottom[g-1][1][0],v),i.fillStyle=Math.round(M.bottom[g][0]/m)%2?D:F,i.fill(),i.stroke();for(g=1;g<M.left.length;g++)i.beginPath(),i.rect(x,M.left[g-1][1][1],v,M.left[g][1][1]-M.left[g-1][1][1]),i.fillStyle=Math.round(M.left[g][0]/m)%2?D:F,i.fill(),i.stroke();for(g=1;g<M.right.length;g++)i.beginPath(),i.rect(r-v-x,M.right[g-1][1][1],v,M.right[g][1][1]-M.right[g-1][1][1]),i.fillStyle=Math.round(M.right[g][0]/m)%2?D:F,i.fill(),i.stroke();i.beginPath(),i.fillStyle=D,i.rect(x,x,v,v),i.rect(x,s-v-x,v,v),i.rect(r-v-x,x,v,v),i.rect(r-v-x,s-v-x,v,v),i.fill()}i.restore()}},ol.control.GridReference=function(t){t||(t={});var e=document.createElement("div");e.className=(t.target?"":"ol-control ")+"ol-gridreference ol-unselectable "+(t.className||""),t.style=t.style||new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:1}),text:new ol.style.Text({font:"bold 14px Arial",stroke:new ol.style.Stroke({color:"#fff",width:2}),fill:new ol.style.Fill({color:"#000"})})}),ol.control.CanvasBase.call(this,{element:e,target:t.target,style:t.style}),"function"==typeof t.property&&(this.getFeatureName=t.property),"function"==typeof t.sortFeatures&&(this.sortFeatures=t.sortFeatures),"function"==typeof t.indexTitle&&(this.indexTitle=t.indexTitle),this.source_=t.source,t.source&&(this.setIndex(t.source.getFeatures(),t),t.source.once("change",(function(){"ready"===t.source.getState()&&this.setIndex(t.source.getFeatures(),t)}).bind(this))),this.set("maxResolution",t.maxResolution||1/0),this.set("extent",t.extent),this.set("size",t.size),this.set("margin",t.margin||0),this.set("property",t.property||"name"),this.set("filterLabel",t.filterLabel||"filter")},ol.ext.inherits(ol.control.GridReference,ol.control.CanvasBase),ol.control.GridReference.prototype.setMap=function(t){ol.control.CanvasBase.prototype.setMap.call(this,t),this.setIndex(this.source_.getFeatures())},ol.control.GridReference.prototype.getFeatureName=function(t){return t.get(this.get("property")||"name")},ol.control.GridReference.prototype.sortFeatures=function(t,e){return this.getFeatureName(t)==this.getFeatureName(e)?0:this.getFeatureName(t)<this.getFeatureName(e)?-1:1},ol.control.GridReference.prototype.indexTitle=function(t){return this.getFeatureName(t).charAt(0)},ol.control.GridReference.prototype.setIndex=function(t){if(this.getMap()){var e=this;t.getArray&&(t=t.getArray()),t.sort(function(t,i){return e.sortFeatures(t,i)}),this.element.innerHTML="";var i=this.element,o=document.createElement("input");o.setAttribute("type","search"),o.setAttribute("placeholder",this.get("filterLabel")||"filter");var n=function(){var t=this.value.replace(/^\*/,""),e=new RegExp(t,"i"),i=a.querySelectorAll("li");Array.prototype.forEach.call(i,function(t){t.style.display=t.classList.contains("ol-title")||e.test(t.querySelector(".ol-name").textContent)?"":"none"}),Array.prototype.forEach.call(a.querySelectorAll("li.ol-title"),function(t){for(var e,o=!1,n=0;n<i.length;n++){if(o){if(i[n].classList.contains("ol-title"))break;if(!i[n].style.display){e=i[n];break}}i[n]===t&&(o=!0)}t.style.display=e?"":"none"})};o.addEventListener("search",n),o.addEventListener("keyup",n),i.appendChild(o);var r,s,a=document.createElement("ul");i.appendChild(a),t.forEach((function(t){if(r=this.getReference(t.getGeometry().getFirstCoordinate())){var e=this.getFeatureName(t),i=this.indexTitle(t);if(i!=s){var o=document.createElement("li");o.classList.add("ol-title"),o.textContent=i,a.appendChild(o)}s=i;var n=document.createElement("li"),l=document.createElement("span");l.classList.add("ol-name"),l.textContent=e,n.appendChild(l);var c=document.createElement("span");c.classList.add("ol-ref"),c.textContent=r,n.appendChild(c);var h=t;n.addEventListener("click",(function(){this.dispatchEvent({type:"select",feature:h})}).bind(this)),a.appendChild(n)}}).bind(this))}},ol.control.GridReference.prototype.getReference=function(t){if(this.getMap()){var e=this.get("extent"),i=this.get("size"),o=Math.floor((t[0]-e[0])/(e[2]-e[0])*i[0]);if(o<0||o>=i[0])return"";var n=Math.floor((e[3]-t[1])/(e[3]-e[1])*i[1]);return n<0||n>=i[1]?"":this.getHIndex(o)+this.getVIndex(n)}},ol.control.GridReference.prototype.getVIndex=function(t){return t},ol.control.GridReference.prototype.getHIndex=function(t){return String.fromCharCode(65+t)},ol.control.GridReference.prototype._draw=function(t){if(!(this.get("maxResolution")<t.frameState.viewState.resolution)){var e=this.getContext(t),i=e.canvas,o=t.frameState.pixelRatio,n=i.width/o,r=i.height/o,s=this.get("extent"),a=this.get("size"),l=this.getMap(),c=ol.extent.boundingExtent([l.getPixelFromCoordinate([s[0],s[1]]),l.getPixelFromCoordinate([s[2],s[3]])]),h=[c[0],c[1]],u=[c[2],c[3]],d=(u[0]-h[0])/a[0],p=(u[1]-h[1])/a[1];e.save();var g,f=this.get("margin");for(e.scale(o,o),e.strokeStyle=this.getStroke().getColor(),e.lineWidth=this.getStroke().getWidth(),e.beginPath(),g=0;g<=a[0];g++)e.moveTo(h[0]+g*d,h[1]),e.lineTo(h[0]+g*d,u[1]);for(g=0;g<=a[1];g++)e.moveTo(h[0],h[1]+g*p),e.lineTo(u[0],h[1]+g*p);e.stroke(),e.font=this.getTextFont(),e.fillStyle=this.getTextFill().getColor(),e.strokeStyle=this.getTextStroke().getColor();var m,y,v,x=f+(e.lineWidth=this.getTextStroke().getWidth());for(e.textAlign="center",g=0;g<a[0];g++)m=this.getHIndex(g),y=h[0]+g*d+d/2,(v=h[1]-x)<0?(v=x,e.textBaseline="hanging"):e.textBaseline="alphabetic",e.strokeText(m,y,v),e.fillText(m,y,v),(v=u[1]+x)>r?(v=r-x,e.textBaseline="alphabetic"):e.textBaseline="hanging",e.strokeText(m,y,v),e.fillText(m,y,v);for(e.textBaseline="middle",g=0;g<a[1];g++)m=this.getVIndex(g),v=h[1]+g*p+p/2,e.textAlign="right",(y=h[0]-x)<0?(y=x,e.textAlign="left"):e.textAlign="right",e.strokeText(m,y,v),e.fillText(m,y,v),(y=u[0]+x)>n?(y=n-x,e.textAlign="right"):e.textAlign="left",e.strokeText(m,y,v),e.fillText(m,y,v);e.restore()}},ol.control.Imageline=function(t){var e=ol.ext.element.create("DIV",{className:(t.className||"")+" ol-imageline"+(t.target?"":" ol-unselectable ol-control")+(t.collapsed&&t.collapsible?"ol-collapsed":"")});!t.target&&t.collapsible&&ol.ext.element.create("BUTTON",{type:"button",click:(function(){this.toggle()}).bind(this),parent:e}),t.source&&(this._sources=t.source.forEach?t.source:[t.source]),t.layers&&this.setLayers(t.layers),ol.control.Control.call(this,{element:e,target:t.target}),this._setScrolling(),this._scrolldiv.addEventListener("scroll",(function(){this.getMap()&&this.getMap().render()}).bind(this)),"function"==typeof t.getImage&&(this._getImage=t.getImage),"function"==typeof t.getTitle&&(this._getTitle=t.getTitle),this.set("maxFeatures",t.maxFeatures||100),this.set("linkColor",t.linkColor||!1),this.set("hover",t.hover||!1),this.set("useExtent",t.useExtent||!1),this.refresh()},ol.ext.inherits(ol.control.Imageline,ol.control.Control),ol.control.Imageline.prototype.setMap=function(t){this._listener&&this._listener.forEach((function(t){ol.Observable.unByKey(t)}).bind(this)),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener=[t.on("postcompose",this._drawLink.bind(this)),t.on("moveend",(function(){this.get("useExtent")&&this.refresh()}).bind(this))],this.refresh())},ol.control.Imageline.prototype.setLayers=function(t){this._sources=this._getSources(t)},ol.control.Imageline.prototype._getSources=function(t){var e=[];return t.forEach((function(t){t.getVisible()&&(t.getSource()&&t.getSource().getFeatures?e.push(t.getSource()):t.getLayers&&this._getSources(t.getLayers()))}).bind(this)),e},ol.control.Imageline.prototype.useExtent=function(t){this.set("useExtent",t),this.refresh()},ol.control.Imageline.prototype.isCollapsed=function(){return this.element.classList.contains("ol-collapsed")},ol.control.Imageline.prototype.collapse=function(t){t?this.element.classList.add("ol-collapsed"):this.element.classList.remove("ol-collapsed"),this.getMap()&&setTimeout((function(){this.getMap().render()}).bind(this),this.isCollapsed()?0:250),this.dispatchEvent({type:"collapse",collapsed:this.isCollapsed()})},ol.control.Imageline.prototype.toggle=function(){this.element.classList.toggle("ol-collapsed"),this.getMap()&&setTimeout((function(){this.getMap().render()}).bind(this),this.isCollapsed()?0:250),this.dispatchEvent({type:"collapse",collapsed:this.isCollapsed()})},ol.control.Imageline.prototype._getImage=function(t){return t.get("img")},ol.control.Imageline.prototype._getTitle=function(){return""},ol.control.Imageline.prototype.getFeatures=function(){var t=this.getMap();if(!t)return[];var e=[];return(this._sources||this._getSources(t.getLayers())).forEach((function(i){if(e.length<this.get("maxFeatures"))if(this.get("useExtent")&&t){var o=t.getView().calculateExtent(t.getSize());e.push(i.getFeaturesInExtent(o))}else e.push(i.getFeatures())}).bind(this)),e},ol.control.Imageline.prototype._setScrolling=function(){var t=this._scrolldiv=ol.ext.element.create("DIV",{parent:this.element});ol.ext.element.scrollDiv(t,{onmove:(function(t){this._moving=t}).bind(this)})},ol.control.Imageline.prototype.refresh=function(){this._scrolldiv.innerHTML="";var t=this.getFeatures(),e=this._select?this._select.feature:null;this._select&&(this._select.elt=null),this._iline=[],this.getMap()&&this.getMap().render();var i=(function(t){if(this._getImage(t)){var i=ol.ext.element.create("DIV",{className:"ol-image",parent:this._scrolldiv});ol.ext.element.create("IMG",{src:this._getImage(t),parent:i}).addEventListener("load",function(){this.classList.add("ol-loaded")}),ol.ext.element.create("SPAN",{html:this._getTitle(t),parent:i});var o={elt:i,feature:t};i.addEventListener("click",(function(){this._moving||(this.dispatchEvent({type:"select",feature:t}),this._scrolldiv.scrollLeft=i.offsetLeft+ol.ext.element.getStyle(i,"width")/2-ol.ext.element.getStyle(this.element,"width")/2,this._select&&this._select.elt.classList.remove("select"),this._select=o,this._select.elt.classList.add("select"))}).bind(this)),i.addEventListener("mouseover",(function(t){this.get("hover")&&(this._select&&this._select.elt.classList.remove("select"),this._select=o,this._select.elt.classList.add("select"),this.getMap().render(),t.stopPropagation())}).bind(this)),i.addEventListener("mouseout",(function(t){this.get("hover")&&(this._select&&this._select.elt.classList.remove("select"),this._select=!1,this.getMap().render(),t.stopPropagation())}).bind(this)),i.ondragstart=function(){return!1},this._iline.push(o),e===t&&(this._select=o,o.elt.classList.add("select"))}}).bind(this),o=this.get("maxFeatures");t.forEach((function(t){for(var e,n=0;(e=t[n])&&!(o--<0);n++)i(e)}).bind(this)),this._select&&this._select.feature&&!this._select.elt&&i(this._select.feature)},ol.control.Imageline.prototype.select=function(t,e){this._select=!1,this._iline.forEach((function(i){i.feature===t?(i.elt.classList.add("select"),this._select=i,!1!==e&&(this._scrolldiv.scrollLeft=i.elt.offsetLeft+ol.ext.element.getStyle(i.elt,"width")/2-ol.ext.element.getStyle(this.element,"width")/2)):i.elt.classList.remove("select")}).bind(this))},ol.control.Imageline.prototype._drawLink=function(t){if(!(!this.get("linkColor")|this.isCollapsed())&&this.getMap()&&this._select&&this._select.elt){var e=t.context||ol.ext.getMapCanvas(this.getMap()).getContext("2d"),i=t.frameState.pixelRatio,o=[this._select.elt.offsetLeft-this._scrolldiv.scrollLeft+ol.ext.element.getStyle(this._select.elt,"width")/2,parseFloat(ol.ext.element.getStyle(this.element,"top"))||this.getMap().getSize()[1]],n=this._select.feature.getGeometry().getFirstCoordinate();n=this.getMap().getPixelFromCoordinate(n),e.save(),e.fillStyle=this.get("linkColor"),e.beginPath(),n[0]>o[0]?(e.moveTo((o[0]-5)*i,o[1]*i),e.lineTo((o[0]+5)*i,(o[1]+5)*i)):(e.moveTo((o[0]-5)*i,(o[1]+5)*i),e.lineTo((o[0]+5)*i,o[1]*i)),e.lineTo(n[0]*i,n[1]*i),e.fill(),e.restore()}},ol.control.IsochroneGeoportail=function(t){var e=this;t||(t={}),null==t.typing&&(t.typing=300);var i=(t.className?t.className:"")+" ol-isochrone ol-routing";t.target||(i+=" ol-unselectable ol-control");var o=ol.ext.element.create("DIV",{className:i});t.target||ol.ext.element.create("BUTTON",{parent:o}).addEventListener("click",function(){o.classList.toggle("ol-collapsed")}),ol.control.Control.call(this,{element:o,target:t.target}),this.set("iter",1);var n=ol.ext.element.create("DIV",{className:"content",parent:o});this._addSearchCtrl(n,t),ol.ext.element.create("BUTTON",{className:"ol-button ol-method-time selected",title:"isochrone",parent:n}).addEventListener("click",(function(){this.setMethod("time")}).bind(this)),ol.ext.element.create("I",{className:"ol-button ol-method-distance",title:"isodistance",parent:n}).addEventListener("click",(function(){this.setMethod("distance")}).bind(this)),ol.ext.element.create("I",{className:"ol-button ol-car selected",title:"by car",parent:n}).addEventListener("click",(function(){this.setMode("car")}).bind(this)),ol.ext.element.create("I",{className:"ol-button ol-pedestrian",title:"by foot",parent:n}).addEventListener("click",(function(){this.setMode("pedestrian")}).bind(this)),ol.ext.element.create("I",{className:"ol-button ol-direction-direct selected",title:"direct",parent:n}).addEventListener("click",(function(){this.setDirection("direct")}).bind(this)),ol.ext.element.create("I",{className:"ol-button ol-direction-reverse",title:"reverse",parent:n}).addEventListener("click",(function(){this.setDirection("reverse")}).bind(this));var r=ol.ext.element.create("DIV",{className:"ol-time",parent:n});ol.ext.element.create("DIV",{html:"isochrone:",parent:r}),ol.ext.element.create("INPUT",{type:"number",parent:r,min:0}).addEventListener("change",function(){e.set("hour",Number(this.value))}),ol.ext.element.create("TEXT",{parent:r,html:"h"}),ol.ext.element.create("INPUT",{type:"number",parent:r,min:0}).addEventListener("change",function(){e.set("minute",Number(this.value))}),ol.ext.element.create("TEXT",{parent:r,html:"mn"}),r=ol.ext.element.create("DIV",{className:"ol-distance",parent:n}),ol.ext.element.create("DIV",{html:"isodistance:",parent:r}),ol.ext.element.create("INPUT",{type:"number",step:"any",parent:r,min:0}).addEventListener("change",function(){e.set("distance",Number(this.value))}),ol.ext.element.create("TEXT",{parent:r,html:"km"}),r=ol.ext.element.create("DIV",{className:"ol-iter",parent:n}),ol.ext.element.create("DIV",{html:"Iteration:",parent:r}),ol.ext.element.create("INPUT",{type:"number",parent:r,value:1,min:1}).addEventListener("change",function(){e.set("iter",Number(this.value))}),ol.ext.element.create("I",{className:"ol-ok",html:"ok",parent:n}).addEventListener("click",(function(){var t=0;switch(this.get("method")){case"distance":t=1e3*this.get("distance");break;default:t=3600*(this.get("hour")||0)+60*(this.get("minute")||0)}t&&this.get("coordinate")&&this.search(this.get("coordinate"),t)}).bind(this)),this.set("url","https://wxs.ign.fr/"+(t.apiKey||"essentiels")+"/isochrone/isochrone.json"),this._ajax=new ol.ext.Ajax({dataType:"JSON",auth:t.auth}),this._ajax.on("success",this._success.bind(this)),this._ajax.on("error",this._error.bind(this)),this._ajax.on("loadstart",(function(){this.element.classList.add("ol-searching")}).bind(this)),this._ajax.on("loadend",(function(){this.element.classList.remove("ol-searching")}).bind(this)),this.setMethod(t.method)},ol.ext.inherits(ol.control.IsochroneGeoportail,ol.control.Control),ol.control.IsochroneGeoportail.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t),this._search.setMap(t)},ol.control.IsochroneGeoportail.prototype._addSearchCtrl=function(t,e){var i=ol.ext.element.create("DIV",{parent:t}),o=this._search=new ol.control.SearchGeoportail({className:"IGNF ol-collapsed",apiKey:e.apiKey,target:i});o.on("select",(function(t){o.setInput(t.search.fulltext),this.set("coordinate",t.coordinate)}).bind(this)),o.on("change:input",(function(){this.set("coordinate",!1)}).bind(this))},ol.control.IsochroneGeoportail.prototype.setMethod=function(t){t=/distance/.test(t)?"distance":"time",this.element.querySelector(".ol-method-time").classList.remove("selected"),this.element.querySelector(".ol-method-distance").classList.remove("selected"),this.element.querySelector(".ol-method-"+t).classList.add("selected"),this.element.querySelector("div.ol-time").classList.remove("selected"),this.element.querySelector("div.ol-distance").classList.remove("selected"),this.element.querySelector("div.ol-"+t).classList.add("selected"),this.set("method",t)},ol.control.IsochroneGeoportail.prototype.setMode=function(t){this.set("mode",t),this.element.querySelector(".ol-car").classList.remove("selected"),this.element.querySelector(".ol-pedestrian").classList.remove("selected"),this.element.querySelector(".ol-"+t).classList.add("selected")},ol.control.IsochroneGeoportail.prototype.setDirection=function(t){this.set("direction",t),this.element.querySelector(".ol-direction-direct").classList.remove("selected"),this.element.querySelector(".ol-direction-reverse").classList.remove("selected"),this.element.querySelector(".ol-direction-"+t).classList.add("selected")},ol.control.IsochroneGeoportail.prototype.search=function(t,e,i){var o=this.getMap()?this.getMap().getView().getProjection():"EPSG:3857",n=/distance/.test(this.get("method"))?"distance":"time";if("string"==typeof e){var r=e.replace(/([0-9|.]*)([a-z]*)$/,"$2");switch(n="time",e=parseFloat(e),r){case"mn":e*=60;break;case"h":e*=3600;break;case"m":n="distance";break;case"km":n="distance",e*=1e3}}var s=Math.round(e*(this.get("iter")-(i||0))/this.get("iter"));if("number"==typeof e){var a={"gp-access-lib":"2.1.0",location:ol.proj.toLonLat(t,o),graphName:"pedestrian"===this.get("mode")?"Pieton":"Voiture",exclusions:this.get("exclusions")||void 0,method:n,time:"time"===n?s:void 0,distance:"distance"===n?s:void 0,reverse:"reverse"===this.get("direction"),smoothing:this.get("smoothing")||!0,holes:this.get("holes")||!1};this._ajax.send(this.get("url"),a,{coord:t,option:e,data:a,iteration:(i||0)+1})}},ol.control.IsochroneGeoportail.prototype._success=function(t){var e=this.getMap()?this.getMap().getView().getProjection():"EPSG:3857",i=new ol.format.WKT,o=t.response;o.feature=i.readFeature(o.wktGeometry,{dataProjection:"EPSG:4326",featureProjection:e}),o.feature.set("iteration",t.options.iteration),o.feature.set("method",t.options.data.method),o.feature.set(t.options.data.method,t.options.data[t.options.data.method]),delete o.wktGeometry,o.type="isochrone",o.iteration=t.options.iteration-1,this.dispatchEvent(o),t.options.iteration<this.get("iter")&&this.search(t.options.coord,t.options.option,t.options.iteration)},ol.control.IsochroneGeoportail.prototype._error=function(){this.dispatchEvent({type:"error"})},ol.control.LayerPopup=function(t){(t=t||{}).switcherClass="ol-layerswitcher-popup",!1!==t.mouseover&&(t.mouseover=!0),ol.control.LayerSwitcher.call(this,t)},ol.ext.inherits(ol.control.LayerPopup,ol.control.LayerSwitcher),ol.control.LayerPopup.prototype.overflow=function(){},ol.control.LayerPopup.prototype.drawList=function(t,e){var i=this,o=function(t){t.preventDefault();var o=i._getLayerForLI(this);i.switchLayerVisibility(o,e),"touchstart"==t.type&&i.element.classList.add("ol-collapsed")};e.forEach(function(e){if(i.displayInLayerSwitcher(e)){var n=ol.ext.element.create("LI",{html:e.get("title")||e.get("name"),on:{"click touchstart":o},parent:t});i._setLayerForLI(n,e),i.testLayerVisibility(e)&&n.classList.add("ol-layer-hidden"),e.getVisible()&&n.classList.add("ol-visible")}})},ol.control.LayerShop=function(t){(t=t||{}).selection=!0,t.noScroll=!0,ol.control.LayerSwitcher.call(this,t),this.element.classList.add("ol-layer-shop");var e=this.element.insertBefore(ol.ext.element.create("DIV",{className:"ol-title-bar"}),this.getPanel());this.on("select",(function(t){e.innerText=t.layer?t.layer.get("title"):"",this.element.setAttribute("data-layerClass",this.getLayerClass(t.layer))}).bind(this)),this._topbar=this.element.insertBefore(ol.ext.element.create("DIV",{className:"ol-bar ol-top-bar"}),this.getPanel()),this._bottombar=ol.ext.element.create("DIV",{className:"ol-bar ol-bottom-bar",parent:this.element}),this._controls=[]},ol.ext.inherits(ol.control.LayerShop,ol.control.LayerSwitcher),ol.control.LayerShop.prototype.setMap=function(t){this.getMap()&&this._controls.forEach((function(t){this.getMap().removeControl(t)}).bind(this)),ol.control.LayerSwitcher.prototype.setMap.call(this,t),t&&(this.selectLayer(),this._listener.removeLayer=t.getLayers().on("remove",(function(t){t.element===this.getSelection()&&this.selectLayer()}).bind(this)),this._controls.forEach((function(t){this.getMap().addControl(t)}).bind(this)))},ol.control.LayerShop.prototype.getBarElement=function(t){return"bottom"===t?this._bottombar:this._topbar},ol.control.LayerShop.prototype.addControl=function(t,e){this._controls.push(t),t.setTarget("bottom"===e?this._bottombar:this._topbar),this.getMap()&&this.getMap().addControl(t)},ol.control.LayerSwitcherImage=function(t){(t=t||{}).switcherClass="ol-layerswitcher-image",!1!==t.mouseover&&(t.mouseover=!0),ol.control.LayerSwitcher.call(this,t)},ol.ext.inherits(ol.control.LayerSwitcherImage,ol.control.LayerSwitcher),ol.control.LayerSwitcherImage.prototype.drawList=function(t,e){var i=this,o=function(t){t.preventDefault();var o=i._getLayerForLI(this);i.switchLayerVisibility(o,e),"touchstart"==t.type&&i.element.classList.add("ol-collapsed")};ol.ext.element.setStyle(t,{height:"auto"}),e.forEach(function(e){if(i.displayInLayerSwitcher(e)){var n=e.getPreview?e.getPreview():["none"],r=ol.ext.element.create("LI",{className:"ol-imgcontainer"+(e.getVisible()?" ol-visible":""),on:{"touchstart click":o},parent:t});i._setLayerForLI(r,e),n.forEach(function(t){ol.ext.element.create("IMG",{src:t,parent:r})}),ol.ext.element.create("p",{html:e.get("title")||e.get("name"),parent:r}),i.testLayerVisibility(e)&&r.classList.add("ol-layer-hidden")}})},ol.control.LayerSwitcherImage.prototype.overflow=function(){},ol.control.Legend=function(t){t=t||{};var e=document.createElement("div");if(t.target)e.className=t.className||"ol-legend";else{e.className=(t.className||"ol-legend")+" ol-unselectable ol-control"+(!1===t.collapsible?" ol-uncollapsible":" ol-collapsed");var i=document.createElement("button");i.setAttribute("type","button"),i.addEventListener("click",(function(){this.toggle()}).bind(this)),e.appendChild(i),(i=document.createElement("button")).setAttribute("type","button"),i.className="ol-closebox",i.addEventListener("click",(function(){this.toggle()}).bind(this)),e.appendChild(i)}ol.control.CanvasBase.call(this,{element:e,target:t.target}),this._legend=t.legend,this._legend.getCanvas().className="ol-legendImg",e.appendChild(this._legend.getCanvas()),e.appendChild(this._legend.getListElement()),!1!==t.collapsible&&!1===t.collapsed&&this.show(),this._legend.on("select",(function(t){this.dispatchEvent(t)}).bind(this)),this._legend.on("refresh",(function(){if(this._onCanvas&&this.getMap())try{this.getMap().renderSync()}catch(t){}}).bind(this))},ol.ext.inherits(ol.control.Legend,ol.control.CanvasBase),ol.control.Legend.prototype.getLegend=function(){return this._legend},ol.control.Legend.prototype.setCanvas=function(t){if(this._onCanvas=t,this.element.style.visibility=t?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.control.Legend.prototype.onCanvas=function(){return!!this._onCanvas},ol.control.Legend.prototype._draw=function(t){if(this._onCanvas&&!this.element.classList.contains("ol-collapsed")){var e=this._legend.getCanvas(),i=this.getContext(t),o=i.canvas.height-e.height;i.save(),i.rect(0,o,e.width,e.height);var n="#fff";this._legend.getTextStyle().getBackgroundFill()&&(n=ol.color.asString(this._legend.getTextStyle().getBackgroundFill().getColor())),i.fillStyle=i.strokeStyle=n,i.lineWidth=10,i.lineJoin="round",i.stroke(),i.clearRect(0,o,e.width,e.height),i.fill(),i.drawImage(e,0,o),i.restore()}},ol.control.Legend.prototype.show=function(){if(this.element.classList.contains("ol-collapsed")&&(this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!1}),this.getMap()))try{this.getMap().renderSync()}catch(t){}},ol.control.Legend.prototype.hide=function(){if(!this.element.classList.contains("ol-collapsed")&&(this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!0}),this.getMap()))try{this.getMap().renderSync()}catch(t){}},ol.control.Legend.prototype.collapse=function(t){!1===t?this.show():this.hide()},ol.control.Legend.prototype.isCollapsed=function(){return this.element.classList.contains("ol-collapsed")},ol.control.Legend.prototype.toggle=function(){if(this.element.classList.toggle("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:this.element.classList.contains("ol-collapsed")}),this.getMap())try{this.getMap().renderSync()}catch(t){}},ol.control.MapZone=function(t){t||(t={});var e=document.createElement("div");if(t.target)e=ol.ext.element.create("DIV",{className:t.className||"ol-mapzone"});else{e=ol.ext.element.create("DIV",{className:(t.className||"ol-mapzone")+" ol-unselectable ol-control ol-collapsed"});var i=ol.ext.element.create("BUTTON",{type:"button",on:{click:(function(){e.classList.toggle("ol-collapsed"),o.forEach(function(t){t.updateSize()})}).bind(this)},parent:e});ol.ext.element.create("I",{parent:i})}ol.control.Control.call(this,{element:e,target:t.target}),this.set("centerOnClick",t.centerOnClick);var o=this._maps=[];this._projection=t.projection,this._layer=t.layer,t.zones.forEach(this.addZone.bind(this)),setTimeout(function(){o.forEach(function(t){t.updateSize()})})},ol.ext.inherits(ol.control.MapZone,ol.control.Control),ol.control.MapZone.prototype.setCollapsed=function(t){t?(this.element.classList.remove("ol-collapsed"),this.getMaps().forEach(function(t){t.updateSize()})):this.element.classList.add("ol-collapsed")},ol.control.MapZone.prototype.getCollapsed=function(){return this.element.classList.contains("ol-collapsed")},ol.control.MapZone.prototype.setVisible=ol.control.MapZone.prototype.setCollapsed,ol.control.MapZone.prototype.getMaps=function(){return this._maps},ol.control.MapZone.prototype.getLength=function(){return this._maps.length},ol.control.MapZone.prototype.addZone=function(t){var e,i=new ol.View({zoom:6,center:[0,0],projection:this._projection});e=t.map?ol.proj.transformExtent(t.map.getView().calculateExtent(),t.map.getView().getProjection(),i.getProjection()):ol.proj.transformExtent(t.extent,"EPSG:4326",i.getProjection());var o,n=ol.ext.element.create("DIV",{className:"ol-mapzonezone",parent:this.element,click:(function(){var i=-1;this._maps.forEach(function(e,o){e.get("zone")===t&&(i=o)}),this.dispatchEvent({type:"select",zone:t,index:i,coordinate:ol.extent.getCenter(e),extent:e}),!1!==this.get("centerOnClick")&&this.getMap().getView().fit(e),this.setVisible(!1)}).bind(this)});o=t.layer?t.layer:"function"==typeof this._layer?this._layer(t):new this._layer.constructor({source:this._layer.getSource()});var r=new ol.Map({target:n,view:i,controls:[],interactions:[],layers:[o]});r.set("zone",t),this._maps.push(r),i.fit(e),ol.ext.element.create("P",{html:t.title,parent:n})},ol.control.MapZone.prototype.removeZone=function(t){var e=this.element.querySelectorAll(".ol-mapzonezone")[t];e&&(e.remove(),this._maps.splice(t,1))},ol.control.MapZone.zones={},ol.control.MapZone.zones.DOM=[{title:"Guadeloupe",extent:[-61.898594315312444,15.75623038647845,-60.957887532935324,16.575317670979473]},{title:"Guyane",extent:[-54.72525931072715,2.1603763430019,-51.528236062921344,5.7984307809552575]},{title:"Martinique",extent:[-61.257556528564756,14.387506317407514,-60.76934912110432,14.895067461729951]},{title:"Mayotte",extent:[44.959844536967815,-13.01674138212816,45.35328866510648,-12.65521942207829]},{title:"La r\xe9union",extent:[55.17059012967656,-21.407680069231688,55.88195702001797,-20.85560221637526]}],ol.control.MapZone.zones.TOM=[{title:"Polyn\xe9sie Fran\xe7aise",extent:[206.23664226630862,-22.189040615809787,221.85920743981987,-10.835039595040698]},{title:"Nouvelle Cal\xe9donie",extent:[163.76420580160925,-22.581641092751838,167.66984709498706,-19.816411635668445]},{title:"St-Pierre et Miquelon",extent:[-56.453698765748676,46.74449858188555,-56.0980198121544,47.14669874229787]},{title:"Wallis et Futuna",extent:[181.7588623143665,-14.7341169873267,183.95612353301715,-13.134720799175085]},{title:"St-Martin St-Barth\xe9lemy",extent:[-63.1726389501678,17.806097291313506,-62.7606535945649,18.13267688837938]}],ol.control.MapZone.zones.DOMTOM=[{title:"M\xe9tropole",extent:[-5.318421740712579,41.16082274292913,9.73284186155716,51.21957336557702]}].concat(ol.control.MapZone.zones.DOM,ol.control.MapZone.zones.TOM),ol.control.Notification=function(t){t=t||{};var e=document.createElement("DIV");this.contentElement=ol.ext.element.create("DIV",{click:(function(){this.get("hideOnClick")&&this.hide()}).bind(this),parent:e});var i=(t.className||"")+" ol-notification";t.target||(i+=" ol-unselectable ol-control ol-collapsed"),e.setAttribute("class",i),ol.control.Control.call(this,{element:e,target:t.target}),this.set("closeBox",t.closeBox),this.set("hideOnClick",t.hideOnClick)},ol.ext.inherits(ol.control.Notification,ol.control.Control),ol.control.Notification.prototype.show=function(t,e){var i=this,o=this.element;t&&(t instanceof Node?(this.contentElement.innerHTML="",this.contentElement.appendChild(t)):this.contentElement.innerHTML=t,this.get("closeBox")?(this.contentElement.classList.add("ol-close"),ol.ext.element.create("SPAN",{className:"closeBox",click:(function(){this.hide()}).bind(this),parent:this.contentElement})):this.contentElement.classList.remove("ol-close")),this._listener&&(clearTimeout(this._listener),this._listener=null),o.classList.add("ol-collapsed"),this._listener=setTimeout(function(){o.classList.remove("ol-collapsed"),i._listener=!e||e>=0?setTimeout(function(){o.classList.add("ol-collapsed"),i._listener=null},e||3e3):null},100)},ol.control.Notification.prototype.hide=function(){this._listener&&(clearTimeout(this._listener),this._listener=null),this.element.classList.add("ol-collapsed")},ol.control.Notification.prototype.toggle=function(t){this.element.classList.contains("ol-collapsed")?this.show(null,t):this.hide()},ol.control.Overlay=function(t){t||(t={});var e=ol.ext.element.create("DIV",{className:"ol-unselectable ol-overlay "+(t.className||""),html:t.content});ol.control.Control.call(this,{element:e,target:t.target});var i=this;t.hideOnClick&&e.addEventListener("click",function(){i.hide()}),this.set("closeBox",t.closeBox),this._timeout=!1,this.setContent(t.content)},ol.ext.inherits(ol.control.Overlay,ol.control.Control),ol.control.Overlay.prototype.setContent=function(t){var e=this;if(t){var i=this.element;if(t instanceof Element?(i.innerHTML="",i.appendChild(t)):void 0!==t&&(i.innerHTML=t),this.get("closeBox")){var o=document.createElement("div");o.classList.add("ol-closebox"),o.addEventListener("click",function(){e.hide()}),i.insertBefore(o,i.firstChild)}}},ol.control.Overlay.prototype.show=function(t,e){var i=this,o=this.element;o.style.display="block",e?(this.center_=this.getMap().getPixelFromCoordinate(e),o.style.top=this.center_[1]+"px",o.style.left=this.center_[0]+"px"):(this.center_=!1,o.style.top="",o.style.left=""),t&&this.setContent(t),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){o.classList.add("ol-visible"),o.style.top="",o.style.left="",i.dispatchEvent({type:"change:visible",visible:!0,element:i.element})},10)},ol.control.Overlay.prototype.showImage=function(t,e){e=e||{};var i=ol.ext.element.create("DIV",{className:"ol-fullscreen-image"});ol.ext.element.create("IMG",{src:t,parent:i}),e.title&&(i.classList.add("ol-has-title"),ol.ext.element.create("P",{html:e.title,parent:i})),this.show(i,e.coordinate)},ol.control.Overlay.prototype.hide=function(){var t=this.element;this.element.classList.remove("ol-visible"),this.center_&&(t.style.top=this.center_[1]+"px",t.style.left=this.center_[0]+"px",this.center_=!1),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){t.style.display="none"},500),this.dispatchEvent({type:"change:visible",visible:!1,element:this.element})},ol.control.Overlay.prototype.toggle=function(){this.getVisible()?this.hide():this.show()},ol.control.Overlay.prototype.getVisible=function(){return"none"!==ol.ext.element.getStyle(this.element,"display")},ol.control.Overlay.prototype.setClass=function(t){var e=this.element.classList.contains("ol-visible");this.element.className=("ol-unselectable ol-overlay "+(e?"ol-visible ":"")+t).trim()},ol.control.Overview=function(t){var e,i=this;if(this.minZoom=(t=t||{}).minZoom||0,this.maxZoom=t.maxZoom||18,this.rotation=t.rotation,t.target)e=document.createElement("div"),this.panel_=t.target;else{(e=document.createElement("div")).classList.add("ol-overview","ol-unselectable","ol-control","ol-collapsed"),/top/.test(t.align)&&e.classList.add("ol-control-top"),/right/.test(t.align)&&e.classList.add("ol-control-right");var o=document.createElement("button");o.setAttribute("type","button"),o.addEventListener("touchstart",function(t){i.toggleMap(),t.preventDefault()}),o.addEventListener("click",function(){i.toggleMap()}),e.appendChild(o),this.panel_=document.createElement("div"),this.panel_.classList.add("panel"),e.appendChild(this.panel_)}ol.control.Control.call(this,{element:e,target:t.target}),this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:this.panel_,view:new ol.View({zoom:2,center:[0,0],projection:t.projection}),layers:t.layers}),this.oview_=this.ovmap_.getView(),this.extentLayer=new ol.layer.Vector({name:"Cache extent",source:new ol.source.Vector,style:t.style||[new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,0,0, 1)"}),stroke:new ol.style.Stroke({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5}),stroke:new ol.style.Stroke({width:5,color:"rgba(255,0,0,0.8)"})})]}),this.ovmap_.addLayer(this.extentLayer),this.ovmap_.addInteraction(new ol.interaction.Pointer({handleDownEvent:function(e){var o,n,r;return!1!==t.panAnimation?"elastic"==t.panAnimation||t.elasticPan?i.getMap().getView().animate({center:e.coordinate,easing:(o=6*Math.PI/2,n=-1/.3,r=Math.cos(o)*Math.pow(2,n),function(t){return t=1-Math.cos(t*Math.PI/2),1-Math.cos(o*t)*Math.pow(2,n*t)+r*t}),duration:1e3}):i.getMap().getView().animate({center:e.coordinate,duration:300}):i.getMap().getView().setCenter(e.coordinate),!1}}))},ol.ext.inherits(ol.control.Overview,ol.control.Control),ol.control.Overview.prototype.getOverviewMap=function(){return this.ovmap_},ol.control.Overview.prototype.toggleMap=function(){this.element.classList.toggle("ol-collapsed"),this.ovmap_.updateSize(),this.setView()},ol.control.Overview.prototype.setPosition=function(t){/top/.test(t)?this.element.classList.add("ol-control-top"):this.element.classList.remove("ol-control-top"),/right/.test(t)?this.element.classList.add("ol-control-right"):this.element.classList.remove("ol-control-right")},ol.control.Overview.prototype.setMap=function(t){if(this._listener)for(var e in this._listener)ol.Observable.unByKey(this._listener[e]);this._listener={},ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener.map=t.on("change:view",(function(){this._listener.view&&ol.Observable.unByKey(this._listener.view),t.getView()&&(this._listener.view=t.getView().on("propertychange",this.setView.bind(this)),this.setView())}).bind(this)),this._listener.view=t.getView().on("propertychange",this.setView.bind(this)),this.setView())},ol.control.Overview.prototype.calcExtent_=function(t){var e=this.getMap();if(e){var i=this.extentLayer.getSource();i.clear();var o=new ol.Feature,n=e.getSize(),r=e.getView().getResolution(),s=e.getView().getRotation(),a=e.getView().getCenter();if(r){var l=r*n[0]/2,c=r*n[1]/2,h=this.oview_.getResolution();if(l/h>5||c/h>5){var u,d,p,g=Math.cos(s),f=Math.sin(s);for(t=[[-l,-c],[-l,c],[l,c],[l,-c]],u=0;u<4;++u)t[u][0]=a[0]+(d=t[u][0])*g-(p=t[u][1])*f,t[u][1]=a[1]+d*f+p*g;o.setGeometry(new ol.geom.Polygon([t]))}else o.setGeometry(new ol.geom.Point(a));i.addFeature(o)}}},ol.control.Overview.prototype.setView=function(t){if(!t)return this.setView({key:"rotation"}),this.setView({key:"resolution"}),void this.setView({key:"center"});switch(t.key){case"rotation":this.rotation?this.oview_.setRotation(this.getMap().getView().getRotation()):this.oview_.getRotation()&&this.oview_.setRotation(0);break;case"center":var e=this.getMap().getView().calculateExtent(this.getMap().getSize()),i=this.oview_.calculateExtent(this.ovmap_.getSize());(e[0]<i[0]||e[1]<i[1]||e[2]>i[2]||e[3]>i[3])&&this.oview_.setCenter(this.getMap().getView().getCenter());break;case"resolution":var o=2*Math.round(this.oview_.getZoomForResolution(this.getMap().getView().getResolution())/2)-4;o=Math.min(this.maxZoom,Math.max(this.minZoom,o)),this.oview_.setZoom(o)}this.calcExtent_()},ol.control.Permalink=function(t){var e=t||{},i=this,o=document.createElement("button");if(this.replaceState_=!1!==e.urlReplace,this.fixed_=e.fixed||6,this.hash_=e.anchor?"#":"?",this._localStorage=e.localStorage,!this._localStorage)try{localStorage.removeItem("ol@permalink")}catch(d){console.warn("Failed to access localStorage...")}function n(){"function"==typeof e.onclick?e.onclick(i.getLink()):i.setUrlReplace(!i.replaceState_)}o.addEventListener("click",n,!1),o.addEventListener("touchstart",n,!1);var r=document.createElement("div");r.className=(e.className||"ol-permalink")+" ol-unselectable ol-control",r.appendChild(o),(e.hidden||!1===e.visible)&&ol.ext.element.hide(r),ol.control.Control.call(this,{element:r,target:e.target}),this.set("geohash",e.geohash),this.set("initial",!1),this.on("change",this.viewChange_.bind(this)),this.search_={};var s={},a=document.location.hash||document.location.search||"";if(this.replaceState_&&!a&&this._localStorage)try{a=localStorage["ol@permalink"]}catch(d){console.warn("Failed to access localStorage...")}if(a){a=a.replace(/(^#|^\?)/,"").split("&");for(var l=0;l<a.length;l++){var c=a[l].split("=");switch(c[0]){case"lon":case"lat":case"z":case"r":s[c[0]]=c[1];break;case"gh":var h=c[1].split("-"),u=ol.geohash.toLonLat(h[0]);s.lon=u[0],s.lat=u[1],s.z=h[1];break;case"l":break;default:this.search_[c[0]]=c[1]}}}s.hasOwnProperty("lon")&&this.set("initial",s),this.replaceState_&&this.setPosition()},ol.ext.inherits(ol.control.Permalink,ol.control.Control),ol.control.Permalink.prototype.getInitialPosition=function(){return this.get("initial")},ol.control.Permalink.prototype.setMap=function(t){this._listener&&(ol.Observable.unByKey(this._listener.change),ol.Observable.unByKey(this._listener.moveend)),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener={change:t.getLayerGroup().on("change",this.layerChange_.bind(this)),moveend:t.on("moveend",this.viewChange_.bind(this))},this.setPosition())},ol.control.Permalink.prototype.getLayerByLink=function(t,e){!e&&this.getMap()&&(e=this.getMap().getLayers().getArray());for(var i=0;i<e.length;i++){if(e[i].get("permalink")==t)return e[i];if(e[i].getLayers){var o=this.getLayerByLink(t,e[i].getLayers().getArray());if(o)return o}}return!1},ol.control.Permalink.prototype.setGeohash=function(t){this.set("geohash",t),this.setUrlParam()},ol.control.Permalink.prototype.setPosition=function(t){var e=this.getMap();if(e){var i=this.replaceState_||t?document.location.hash||document.location.search:"";if(!i&&this._localStorage)try{i=localStorage["ol@permalink"]}catch(d){console.warn("Failed to access localStorage...")}if(i){var o,n,r={};for(i=i.replace(/(^#|^\?)/,"").split("&"),o=0;o<i.length;o++)r[(n=i[o].split("="))[0]]=n[1];if(r.gh){var s=r.gh.split("-"),a=ol.geohash.toLonLat(s[0]);r.lon=a[0],r.lat=a[1],r.z=s[1]}var l=ol.proj.transform([Number(r.lon),Number(r.lat)],"EPSG:4326",e.getView().getProjection());if(l[0]&&l[1]&&e.getView().setCenter(l),r.z&&e.getView().setZoom(Number(r.z)),r.r&&e.getView().setRotation(Number(r.r)),r.l){!function t(i){i||(i=e.getLayers().getArray());for(var o=0;o<i.length;o++)i[o].get("permalink")&&i[o].setVisible(!1),i[o].getLayers&&t(i[o].getLayers().getArray())}();var c=r.l.split("|");for(o=0;o<c.length;o++){n=c[o].split(":");var h=this.getLayerByLink(n[0]),u=Number(n[1]);h&&(h.setOpacity(u),h.setVisible(!0))}}}}},ol.control.Permalink.prototype.getUrlParams=function(){return this.search_},ol.control.Permalink.prototype.setUrlParam=function(t,e){t&&(void 0===e||""===e?delete this.search_[encodeURIComponent(t)]:this.search_[encodeURIComponent(t)]=encodeURIComponent(e)),this.viewChange_()},ol.control.Permalink.prototype.getUrlParam=function(t){return decodeURIComponent(this.search_[encodeURIComponent(t)]||"")},ol.control.Permalink.prototype.hasUrlParam=function(t){return this.search_.hasOwnProperty(encodeURIComponent(t))},ol.control.Permalink.prototype.getLink=function(t){var e=this.getMap(),i=ol.proj.transform(e.getView().getCenter(),e.getView().getProjection(),"EPSG:4326"),o=Math.round(10*e.getView().getZoom())/10,n=e.getView().getRotation(),r=this.layerStr_,s=(n?"&r="+Math.round(1e4*n)/1e4:"")+(r?"&l="+r:"");if(s=this.get("geohash")?"gh="+ol.geohash.fromLonLat(i,8)+"-"+o+s:"lon="+i[0].toFixed(this.fixed_)+"&lat="+i[1].toFixed(this.fixed_)+"&z="+o+s,"position"===t)return s;for(var a in this.search_)s+="&"+a+(void 0!==this.search_[a]?"="+this.search_[a]:"");return t?s:document.location.protocol+"//"+document.location.host+document.location.pathname+this.hash_+s},ol.control.Permalink.prototype.getUrlReplace=function(){return this.replaceState_},ol.control.Permalink.prototype.setUrlReplace=function(t){try{if(this.replaceState_=t,t)window.history.replaceState(null,null,this.getLink());else{var e="";for(var i in this.search_)e+=(""==e?"?":"&")+i+(void 0!==this.search_[i]?"="+this.search_[i]:"");window.history.replaceState(null,null,document.location.origin+document.location.pathname+e)}}catch(o){}},ol.control.Permalink.prototype.viewChange_=function(){try{this.replaceState_&&window.history.replaceState(null,null,this.getLink())}catch(t){}if(this._localStorage)try{localStorage["ol@permalink"]=this.getLink(this._localStorage)}catch(t){console.warn("Failed to access localStorage...")}},ol.control.Permalink.prototype.layerChange_=function(){this._tout&&(clearTimeout(this._tout),this._tout=null),this._tout=setTimeout((function(){this._tout=null;var t="";!function e(i){for(var o=0;o<i.length;o++)i[o].getVisible()&&i[o].get("permalink")&&(t&&(t+="|"),t+=i[o].get("permalink")+":"+i[o].get("opacity")),i[o].getLayers&&e(i[o].getLayers().getArray())}(this.getMap().getLayers().getArray()),this.layerStr_=t,this.viewChange_()}).bind(this),200)},ol.control.Print=function(t){t||(t={});var e=ol.ext.element.create("DIV",{className:t.className||"ol-print"});t.target||(e.classList.add("ol-unselectable","ol-control"),ol.ext.element.create("BUTTON",{type:"button",title:t.title||"Print",click:(function(){this.print()}).bind(this),parent:e})),ol.control.Control.call(this,{element:e,target:t.target}),this.set("immediate",t.immediate),this.set("imageType",t.imageType||"image/jpeg"),this.set("quality",t.quality||.8),this.set("orientation",t.orientation)},ol.ext.inherits(ol.control.Print,ol.control.Control),ol.control.Print.prototype.toClipboard=function(t,e){try{t.canvas.toBlob(function(t){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},t.type,{value:t,enumerable:!0}))]),"function"==typeof e&&e(!0)}catch(i){"function"==typeof e&&e(!1)}})}catch(i){"function"==typeof e&&e(!1)}},ol.control.Print.prototype.copyMap=function(t,e){this.once("print",(function(t){this.toClipboard(t,e)}).bind(this)),this.print(t)},ol.control.Print.prototype._getCanvas=function(t,e,i){var o;if(t.context)i=t.context.canvas;else{if(i)o=i.getContext("2d");else{i=document.createElement("canvas");var n=this.getMap().getSize();i.width=n[0],i.height=n[1],o=i.getContext("2d"),/jp.*g$/.test(e)&&(o.fillStyle=this.get("bgColor")||"white",o.fillRect(0,0,i.width,i.height))}this.getMap().getViewport().querySelectorAll(".ol-layers canvas, canvas.ol-fixedoverlay").forEach((function(t){if(t.width){if(o.save(),"0"===t.parentNode.style.opacity)return;o.globalAlpha=parseFloat(t.parentNode.style.opacity)||1,"multiply"===ol.ext.element.getStyle(t.parentNode,"mix-blend-mode")&&(o.globalCompositeOperation="multiply");var e=ol.ext.element.getStyle(t,"transform")||ol.ext.element.getStyle(t,"-webkit-transform");/^matrix/.test(e)?((e=e.replace(/^matrix\(|\)$/g,"").split(",")).forEach(function(t,i){e[i]=parseFloat(t)}),o.transform(e[0],e[1],e[2],e[3],e[4],e[5]),o.drawImage(t,0,0)):o.drawImage(t,0,0,ol.ext.element.getStyle(t,"width"),ol.ext.element.getStyle(t,"height")),o.restore()}}).bind(this))}return i},ol.control.Print.prototype.fastPrint=function(t,e){t=t||{},this._ol6?requestAnimationFrame((function(){e(this._getCanvas({},t.imageType,t.canvas))}).bind(this)):(this.getMap().once("postcompose",(function(i){i.context||(this._ol6=!0),e(this._getCanvas(i,t.imageType,t.canvas))}).bind(this)),this.getMap().render())},ol.control.Print.prototype.print=function(t){var e=(t=t||{}).imageType||this.get("imageType"),i=t.quality||this.get("quality");if(this.getMap()){if("silent"!==t.immediate&&this.dispatchEvent(Object.assign({type:"printing"},t)),!t.immediate)return void setTimeout((function(){(t=Object.assign({},t)).immediate="silent",this.print(t)}).bind(this),200);this.getMap().once(this.get("immediate")?"postcompose":"rendercomplete",(function(o){var n,r,s,a,l=this._getCanvas(o,e),c=t.size||[210,297],h=t.format||"a4",u=t.orient||this.get("orientation"),d="number"==typeof t.margin?t.margin:10;if(l){"landscape"!==u&&"portrait"!==u&&(u=l.width>l.height?"landscape":"portrait"),"landscape"===u&&(c=[c[1],c[0]]);var p=Math.min((c[0]-2*d)/l.width,(c[1]-2*d)/l.height);s=[(c[0]-(n=p*l.width))/2,(c[1]-(r=p*l.height))/2]}try{a=l?l.toDataURL(e,i):null}catch(g){return void this.dispatchEvent({type:"error",canvas:l})}var g=Object.assign({type:"print",print:{format:h,orientation:u,unit:"mm",size:c,position:s,imageWidth:n,imageHeight:r},image:a,imageType:e,quality:i,canvas:l},t);this.dispatchEvent(g)}).bind(this)),this.getMap().render()}},ol.control.PrintDialog=function(t){t||(t={}),this._lang=t.lang;var e=ol.ext.element.create("DIV",{className:(t.className||"ol-print")+" ol-unselectable ol-control"});ol.ext.element.create("BUTTON",{type:"button",title:t.title||"Print",click:(function(){this.print()}).bind(this),parent:e}),ol.control.Control.call(this,{element:e}),t.openWindow&&this.on("print",function(t){t.canvas&&window.open().document.write('<img src="'+t.canvas.toDataURL()+'"/>')}),t.target=ol.ext.element.create("DIV");var i=this._printCtrl=new ol.control.Print(t);i.on(["print","error","printing"],(function(t){n.setAttribute("data-status",t.type),t.clipboard||this.dispatchEvent(t)}).bind(this)),this._compass=new ol.control.Compass({src:t.northImage||"compact",visible:!1,className:"olext-print-compass",style:new ol.style.Stroke({color:"#333",width:0})});var o=this._printDialog=new ol.control.Dialog({target:document.body,closeBox:!0,className:"ol-ext-print-dialog"}),n=o.getContentElement();this._input={};var r=ol.ext.element.create("DIV",{className:"ol-print-param",parent:n});this._pages=[ol.ext.element.create("DIV",{className:"ol-page"})];var s=ol.ext.element.create("DIV",{className:"ol-map",parent:this._pages[0]});ol.ext.element.create("DIV",{html:this._pages[0],className:"ol-print-map",parent:n}),ol.ext.element.create("H2",{html:this.i18n("title"),parent:r});var a=ol.ext.element.create("UL",{parent:r}),l=ol.ext.element.create("LI",{className:"ol-orientation",parent:a});this._input.orientation={list:l};var c,h=ol.ext.element.create("LABEL",{className:"portrait",parent:l});this._input.orientation.portrait=ol.ext.element.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"portrait",checked:!0,on:{change:(function(t){this.setOrientation(t.target.value)}).bind(this)},parent:h}),ol.ext.element.create("SPAN",{html:this.i18n("portrait"),parent:h}),h=ol.ext.element.create("LABEL",{className:"landscape",parent:l}),this._input.orientation.landscape=ol.ext.element.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"landscape",on:{change:(function(t){this.setOrientation(t.target.value)}).bind(this)},parent:h}),ol.ext.element.create("SPAN",{html:this.i18n("landscape"),parent:h}),l=ol.ext.element.create("LI",{html:ol.ext.element.create("LABEL",{html:this.i18n("size")}),className:"ol-size",parent:a});var u=this._input.size=ol.ext.element.create("SELECT",{on:{change:(function(){this.setSize(u.value||C)}).bind(this)},parent:l});for(c in this.paperSize)ol.ext.element.create("OPTION",{html:c+(this.paperSize[c]?" - "+this.paperSize[c][0]+"x"+this.paperSize[c][1]+" mm":this.i18n("custom")),value:c,parent:u});l=ol.ext.element.create("LI",{html:ol.ext.element.create("LABEL",{html:this.i18n("margin")}),className:"ol-margin",parent:a});var d=this._input.margin=ol.ext.element.create("SELECT",{on:{change:(function(){this.setMargin(d.value)}).bind(this)},parent:l});for(c in this.marginSize)ol.ext.element.create("OPTION",{html:(this._labels[this._lang][c]||c)+" - "+this.marginSize[c]+" mm",value:this.marginSize[c],parent:d});l=ol.ext.element.create("LI",{html:ol.ext.element.create("LABEL",{html:this.i18n("scale")}),className:"ol-scale",parent:a});var p=this._input.scale=ol.ext.element.create("SELECT",{on:{change:(function(){this.setScale(parseInt(p.value))}).bind(this)},parent:l});Object.keys(this.scales).forEach((function(t){ol.ext.element.create("OPTION",{html:this.scales[t],value:t,parent:p})}).bind(this)),l=ol.ext.element.create("LI",{className:"ol-legend",parent:a});var g=ol.ext.element.createSwitch({html:this.i18n("legend"),checked:!1,on:{change:(function(){E.legend.control.setCanvas(g.checked)}).bind(this)},parent:l});l=ol.ext.element.create("LI",{className:"ol-print-north",parent:a});var f=this._input.north=ol.ext.element.createSwitch({html:this.i18n("north"),checked:"checked",on:{change:(function(){f.checked?this._compass.element.classList.add("ol-print-compass"):this._compass.element.classList.remove("ol-print-compass"),this.getMap().render()}).bind(this)},parent:l});l=ol.ext.element.create("LI",{className:"ol-print-title",parent:a});var m=ol.ext.element.createSwitch({html:this.i18n("mapTitle"),checked:!1,on:{change:(function(t){E.title.control.setVisible(t.target.checked)}).bind(this)},parent:l}),y=ol.ext.element.create("INPUT",{type:"text",placeholder:this.i18n("mapTitle"),on:{keydown:function(t){13===t.keyCode&&t.preventDefault()},keyup:function(){E.title.control.setTitle(y.value)},change:(function(){E.title.control.setTitle(y.value)}).bind(this)},parent:l}),v=ol.ext.element.create("DIV",{className:"ol-user-param",parent:r});l=ol.ext.element.create("LI",{className:"ol-saveas",parent:a});var x=ol.ext.element.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:l}),b=ol.ext.element.create("SELECT",{on:{change:(function(){if(this.formats[b.value].clipboard)i.copyMap(this.formats[b.value],function(t){t&&(x.classList.add("visible"),setTimeout(function(){x.classList.remove("visible")},1e3))});else{var t="string"==typeof this.getSize()?this.getSize():null,e=Object.assign({format:t,size:t?this.paperSize[t]:null,orient:this.getOrientation(),margin:this.getMargin()},this.formats[b.value]);i.print(e)}b.value=""}).bind(this)},parent:l});ol.ext.element.create("OPTION",{html:this.i18n("saveas"),style:{display:"none"},value:"",parent:b}),this.formats.forEach((function(e,i){if(e.pdf){if(!1===t.pdf)return}else if(e.clipboard){if(!1===t.copy)return}else if(!1===t.save)return;ol.ext.element.create("OPTION",{html:this.i18n(e.title),value:i,parent:b})}).bind(this)),l=ol.ext.element.create("LI",{className:"ol-savelegend",parent:a});var w=ol.ext.element.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:l}),_=ol.ext.element.create("SELECT",{on:{change:(function(){var t=E.legend.control.getLegend().getCanvas(),e=document.createElement("CANVAS");e.width=t.width,e.height=t.height;var i,o=e.getContext("2d");if(o.fillStyle="#fff",o.fillRect(0,0,e.width,e.height),o.drawImage(t,0,0),this.formats[_.value].clipboard)e.toBlob(function(t){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},t.type,{value:t,enumerable:!0}))]),w.classList.add("visible"),setTimeout(function(){w.classList.remove("visible")},1e3)}catch(e){}},"image/png");else try{i=e.toDataURL(this.formats[_.value].imageType,this.formats[_.value].quality);var n="string"==typeof this.getSize()?this.getSize():"A4",r=e.width/96*25.4,s=e.height/96*25.4,a=this.paperSize[n];"landscape"===this.getOrientation()&&(a=[a[1],a[0]]);var l=[(a[0]-r)/2,(a[1]-s)/2];this.dispatchEvent({type:"print",print:{legend:!0,format:n,orientation:this.getOrientation(),unit:"mm",size:this.paperSize[n],position:l,imageWidth:r,imageHeight:s},image:i,imageType:this.formats[_.value].imageType,pdf:this.formats[_.value].pdf,quality:this.formats[_.value].quality,canvas:e})}catch(c){}_.value=""}).bind(this)},parent:l});ol.ext.element.create("OPTION",{html:this.i18n("saveLegend"),style:{display:"none"},value:"",parent:_}),this.formats.forEach((function(t,e){ol.ext.element.create("OPTION",{html:this.i18n(t.title),value:e,parent:_})}).bind(this));var S,C,k,A=ol.ext.element.create("DIV",{className:"ol-ext-buttons",parent:r});ol.ext.element.create("BUTTON",{html:this.i18n("printBt"),type:"submit",click:function(t){t.preventDefault(),window.print()},parent:A}),ol.ext.element.create("BUTTON",{html:this.i18n("cancel"),type:"button",click:function(){o.hide()},parent:A}),ol.ext.element.create("DIV",{html:this.i18n("errorMsg"),className:"ol-error",parent:r});var E={};o.on("show",(function(){this.dispatchEvent({type:"show",userElement:v,dialog:this._printDialog,page:this.getPage()});var t=this.getMap();t&&(document.body.classList.add("ol-print-document"),S=t.getTargetElement(),C=t.getSize(),"string"==typeof this.getSize()?this.setSize(this.getSize()):this.setSize(C),t.setTarget(s),k&&ol.Observable.unByKey(k),k=t.on("moveend",(function(){this.setScale(ol.sphere.getMapScale(t))}).bind(this)),this.setScale(ol.sphere.getMapScale(t)),E={},this.getMap().getControls().forEach((function(t){t instanceof ol.control.Legend&&(E.legend={control:t}),t instanceof ol.control.CanvasTitle&&(E.title={control:t}),t instanceof ol.control.Compass&&(E.compass?t.element.classList.remove("ol-print-compass"):(this._input.north.checked?t.element.classList.add("ol-print-compass"):t.element.classList.remove("ol-print-compass"),this._compass=t,E.compass={control:t}))}).bind(this)),E.title?(m.checked=E.title.isVisible=E.title.control.getVisible(),y.value=E.title.control.getTitle(),m.parentNode.parentNode.classList.remove("hidden")):m.parentNode.parentNode.classList.add("hidden"),E.legend?(E.legend.ison=E.legend.control.onCanvas(),E.legend.collapsed=E.legend.control.isCollapsed(),E.legend.control.collapse(!1),_.parentNode.classList.remove("hidden"),g.parentNode.parentNode.classList.remove("hidden"),g.checked=!E.legend.collapsed,E.legend.control.setCanvas(!E.legend.collapsed)):(_.parentNode.classList.add("hidden"),g.parentNode.parentNode.classList.add("hidden")))}).bind(this)),o.on("hide",(function(){document.body.classList.remove("ol-print-document"),S&&(this.getMap().setTarget(S),S=null,k&&ol.Observable.unByKey(k),E.title&&E.title.control.setVisible(E.title.isVisible),E.legend&&(E.legend.control.setCanvas(E.legend.ison),E.legend.control.collapse(E.legend.collapsed)),this.dispatchEvent({type:"hide"}))}).bind(this)),window.addEventListener("resize",(function(){this.setSize()}).bind(this)),t.saveAs&&this.on("print",function(e){e.pdf||e.canvas.toBlob(function(i){var o=(e.print.legend?"legend.":"map.")+e.imageType.replace("image/","");t.saveAs(i,o)},e.imageType,e.quality)}),t.jsPDF&&this.on("print",function(e){if(e.pdf){var i=new t.jsPDF({orientation:e.print.orientation,unit:e.print.unit,format:e.print.size});i.addImage(e.image,"JPEG",e.print.position[0],e.print.position[0],e.print.imageWidth,e.print.imageHeight),i.save(e.print.legend?"legend.pdf":"map.pdf")}})},ol.ext.inherits(ol.control.PrintDialog,ol.control.Control),ol.control.PrintDialog.prototype.isOpen=function(){return this._printDialog.isOpen()},ol.control.PrintDialog.addLang=function(t,e){ol.control.PrintDialog.prototype._labels[t]=e},ol.control.PrintDialog.prototype.i18n=function(t){var e=this._labels.en[t]||"bad param";return this._labels[this._lang]&&this._labels[this._lang][t]&&(e=this._labels[this._lang][t]),e},ol.control.PrintDialog.prototype._labels={en:{title:"Print",orientation:"Orientation",portrait:"Portrait",landscape:"Landscape",size:"Page size",custom:"screen size",margin:"Margin",scale:"Scale",legend:"Legend",north:"North arrow",mapTitle:"Map title",saveas:"Save as...",saveLegend:"Save legend...",copied:"\u2714 Copied to clipboard",errorMsg:"Can't save map canvas...",printBt:"Print...",clipboardFormat:"copy to clipboard...",jpegFormat:"save as jpeg",pngFormat:"save as png",pdfFormat:"save as pdf",none:"none",small:"small",large:"large",cancel:"cancel"},fr:{title:"Imprimer",orientation:"Orientation",portrait:"Portrait",landscape:"Paysage",size:"Taille du papier",custom:"taille \xe9cran",margin:"Marges",scale:"Echelle",legend:"L\xe9gende",north:"Fl\xe8che du nord",mapTitle:"Titre de la carte",saveas:"Enregistrer sous...",saveLegend:"Enregistrer la l\xe9gende...",copied:"\u2714 Carte copi\xe9e",errorMsg:"Impossible d'enregistrer la carte",printBt:"Imprimer",clipboardFormat:"copier dans le presse-papier...",jpegFormat:"enregistrer un jpeg",pngFormat:"enregistrer un png",pdfFormat:"enregistrer un pdf",none:"aucune",small:"petites",large:"larges",cancel:"annuler"},de:{title:"Drucken",orientation:"Ausrichtung",portrait:"Hochformat",landscape:"Querformat",size:"Papierformat",custom:"Bildschirmgr\xf6\xdfe",margin:"Rand",scale:"Ma\xdfstab",legend:"Legende",north:"Nordpfeil",mapTitle:"Kartentitel",saveas:"Speichern als...",saveLegend:"Legende speichern...",copied:"\u2714 In die Zwischenablage kopiert",errorMsg:"Kann Karte nicht speichern...",printBt:"Drucken...",clipboardFormat:"in die Zwischenablage kopieren...",jpegFormat:"speichern als jpeg",pngFormat:"speichern als png",pdfFormat:"speichern als pdf",none:"kein",small:"klein",large:"gro\xdf",cancel:"abbrechen"},zh:{title:"\u6253\u5370",orientation:"\u65b9\u5411",portrait:"\u7eb5\u5411",landscape:"\u6a2a\u5411",size:"\u9875\u9762\u5927\u5c0f",custom:"\u5c4f\u5e55\u5927\u5c0f",margin:"\u5916\u8fb9\u8ddd",scale:"\u5c3a\u5ea6",legend:"\u56fe\u4f8b",north:"\u6307\u5317\u9488",mapTitle:"\u5730\u56fe\u540d\u5b57",saveas:"\u4fdd\u5b58\u4e3a...",saveLegend:"\u4fdd\u5b58\u56fe\u4f8b\u4e3a...",copied:"\u2714 \u5df2\u590d\u5236\u5230\u526a\u8d34\u677f",errorMsg:"\u65e0\u6cd5\u4fdd\u5b58\u5730\u56fe...",printBt:"\u6253\u5370...",cancel:"\u53d6\u6d88"}},ol.control.PrintDialog.prototype.paperSize={"":null,A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],A5:[148,210],B4:[257,364],B5:[182,257]},ol.control.PrintDialog.prototype.marginSize={none:0,small:5,large:10},ol.control.PrintDialog.prototype.formats=[{title:"clipboardFormat",imageType:"image/png",clipboard:!0},{title:"jpegFormat",imageType:"image/jpeg",quality:.8},{title:"pngFormat",imageType:"image/png",quality:.8},{title:"pdfFormat",imageType:"image/jpeg",pdf:!0}],ol.control.PrintDialog.prototype.scales={" 5000":"1/5.000"," 10000":"1/10.000"," 25000":"1/25.000"," 50000":"1/50.000"," 100000":"1/100.000"," 250000":"1/250.000"," 1000000":"1/1.000.000"},ol.control.PrintDialog.prototype.getOrientation=function(){return this._orientation||"portrait"},ol.control.PrintDialog.prototype.setOrientation=function(t){this._orientation="landscape"===t?"landscape":"portrait",this._input.orientation[this._orientation].checked=!0,this.setSize()},ol.control.PrintDialog.prototype.getMargin=function(){return this._margin||0},ol.control.PrintDialog.prototype.setMargin=function(t){this._margin=t,this._input.margin.value=t,this.setSize()},ol.control.PrintDialog.prototype.getSize=function(){return this._size},ol.control.PrintDialog.prototype.setSize=function(t){if(this._printDialog.getContentElement().setAttribute("data-status",""),t?this._size=t:t=this._size,t){"string"==typeof t?(t=t.toLocaleUpperCase(),this.paperSize[t]||(t=this._size="A4"),this._input.size.value=t,t=[Math.trunc(96*this.paperSize[t][0]/25.4),Math.trunc(96*this.paperSize[t][1]/25.4)],"landscape"===this.getOrientation()&&(t=[t[1],t[0]]),this.getPage().classList.remove("margin")):(this._input.size.value="",this.getPage().classList.add("margin"));var e=this.getPage(),i=e.parentNode.getBoundingClientRect(),o=Math.min((i.width-40)/t[0],(i.height-40)/t[1],1);e.style.width=t[0]+"px",e.style.height=t[1]+"px",e.style["-webkit-transform"]=e.style.transform="translate(-50%,-50%) scale("+o+")";var n=Math.round(5/o);e.style["-webkit-box-shadow"]=e.style["box-shadow"]=n+"px "+n+"px "+n+"px rgba(0,0,0,.6)",e.style.padding=96*this.getMargin()/25.4+"px",this.getMap()&&this.getMap().updateSize(),this.dispatchEvent({type:"dialog:refresh"})}},ol.control.PrintDialog.prototype.getContentElement=function(){return this._printDialog.getContentElement()},ol.control.PrintDialog.prototype.getUserElement=function(){return this._printDialog.getContentElement().querySelector(".ol-user-param")},ol.control.PrintDialog.prototype.getPage=function(){return this._pages[0]},ol.control.PrintDialog.prototype.setMap=function(t){this.getMap()&&(this.getMap().removeControl(this._compass),this.getMap().removeControl(this._printCtrl),this.getMap().removeControl(this._printDialog)),ol.control.Control.prototype.setMap.call(this,t),this.getMap()&&(this.getMap().addControl(this._compass),this.getMap().addControl(this._printCtrl),this.getMap().addControl(this._printDialog))},ol.control.PrintDialog.prototype.setScale=function(t){ol.sphere.setMapScale(this.getMap(),t),this._input.scale.value=" "+100*Math.round(t/100)},ol.control.PrintDialog.prototype.getScale=function(){return ol.sphere.getMapScale(this.getMap())},ol.control.PrintDialog.prototype.print=function(t){(t=t||{}).size&&this.setSize(t.size),t.scale&&this.setScale(t.scale),t.orientation&&this.setOrientation(t.orientation),t.margin&&this.setMargin(t.margin),this._printDialog.show()},ol.control.PrintDialog.prototype.getrintControl=function(){return this._printCtrl},ol.control.Profil=function(t){this.info=(t=t||{}).info||ol.control.Profil.prototype.info;var e,i=this;if(t.target)(e=document.createElement("div")).classList.add(t.className||"ol-profil");else{(e=document.createElement("div")).className=((t.className||"ol-profil")+" ol-unselectable ol-control ol-collapsed").trim(),this.button=document.createElement("button"),this.button.title=t.title||"Profile",this.button.setAttribute("type","button");var o=function(t){i.toggle(),t.preventDefault()};this.button.addEventListener("click",o),this.button.addEventListener("touchstart",o),e.appendChild(this.button)}this._style=t.style instanceof ol.style.Style?t.style:new ol.style.Style({text:new ol.style.Text,stroke:new ol.style.Stroke({width:1.5,color:"#369"})}),this._style.getText()||this._style.setText(new ol.style.Text),this._selectStyle=t.selectStyle instanceof ol.style.Style?t.selectStyle:new ol.style.Style({fill:new ol.style.Fill({color:"#369"})});var n=document.createElement("div");n.classList.add("ol-inner"),e.appendChild(n);var r=document.createElement("div");r.style.position="relative",n.appendChild(r);var s=this.ratio=2;this.canvas_=document.createElement("canvas"),this.canvas_.width=(t.width||300)*s,this.canvas_.height=(t.height||150)*s;var a={msTransform:"scale(0.5,0.5)",msTransformOrigin:"0 0",webkitTransform:"scale(0.5,0.5)",webkitTransformOrigin:"0 0",mozTransform:"scale(0.5,0.5)",mozTransformOrigin:"0 0",transform:"scale(0.5,0.5)",transformOrigin:"0 0"};Object.keys(a).forEach(function(t){t in i.canvas_.style&&(i.canvas_.style[t]=a[t])});var l=document.createElement("div");r.appendChild(l),l.style.width=this.canvas_.width/s+"px",l.style.height=this.canvas_.height/s+"px",l.appendChild(this.canvas_),l.addEventListener("pointerdown",this.onMove.bind(this)),document.addEventListener("pointerup",this.onMove.bind(this)),l.addEventListener("mousemove",this.onMove.bind(this)),l.addEventListener("touchmove",this.onMove.bind(this)),ol.control.Control.call(this,{element:e,target:t.target}),this.set("selectable",t.selectable),this.margin_={top:10*s,left:40*s,bottom:30*s,right:10*s},this.info.ytitle||(this.margin_.left-=20*s),this.info.xtitle||(this.margin_.bottom-=20*s),this.bar_=document.createElement("div"),this.bar_.classList.add("ol-profilbar"),this.bar_.style.top=this.margin_.top/s+"px",this.bar_.style.height=(this.canvas_.height-this.margin_.top-this.margin_.bottom)/s+"px",r.appendChild(this.bar_),this.cursor_=document.createElement("div"),this.cursor_.classList.add("ol-profilcursor"),r.appendChild(this.cursor_),this.popup_=document.createElement("div"),this.popup_.classList.add("ol-profilpopup"),this.cursor_.appendChild(this.popup_);var c=document.createElement("table");c.cellPadding="0",c.cellSpacing="0",c.style.clientWidth=this.canvas_.width/s+"px",r.appendChild(c);var h=document.createElement("tr");h.classList.add("track-info"),c.appendChild(h);var u=document.createElement("td");u.innerHTML=(this.info.zmin||"Zmin")+': <span class="zmin">',h.appendChild(u);var d=document.createElement("td");d.innerHTML=(this.info.zmax||"Zmax")+': <span class="zmax">',h.appendChild(d);var p=document.createElement("td");p.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',h.appendChild(p);var g=document.createElement("td");g.innerHTML=(this.info.time||"Time")+': <span class="time">',h.appendChild(g);var f=document.createElement("tr");f.classList.add("point-info"),c.appendChild(f);var m=document.createElement("td");m.innerHTML=(this.info.altitude||"Altitude")+': <span class="z">',f.appendChild(m);var y=document.createElement("td");y.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',f.appendChild(y);var v,x,b=document.createElement("td");b.innerHTML=(this.info.time||"Time")+': <span class="time">',f.appendChild(b),this.tab_=[],t.feature&&this.setGeometry(t.feature),t.zoomable&&(this.set("selectable",!0),this.on("change:geometry",function(){x=null}),this.on("dragstart",function(t){v=t.index}),this.on("dragend",(function(t){if(Math.abs(v-t.index)>10){if(!x)var i=ol.ext.element.create("BUTTON",{parent:e,className:"ol-zoom-out",click:(function(t){t.stopPropagation(),t.preventDefault(),x&&(this.dispatchEvent({type:"zoom"}),this.setGeometry(x,this._geometry[1])),e.removeChild(i)}).bind(this)});var o=x||this._geometry[0],n=new ol.geom.LineString(this.getSelection(v,t.index));this.setGeometry(n,this._geometry[1]),x=o,this.dispatchEvent({type:"zoom",geometry:n,start:v,end:t.index})}}).bind(this)))},ol.ext.inherits(ol.control.Profil,ol.control.Control),ol.control.Profil.prototype.info={zmin:"Zmin",zmax:"Zmax",ytitle:"Altitude (m)",xtitle:"Distance (km)",time:"Time",altitude:"Altitude",distance:"Distance",altitudeUnits:"m",distanceUnitsM:"m",distanceUnitsKM:"km"},ol.control.Profil.prototype.popup=function(t){this.popup_.innerHTML=t},ol.control.Profil.prototype._drawAt=function(t,e){t?(this.cursor_.style.left=e+"px",this.cursor_.style.top=(this.canvas_.height-this.margin_.bottom+t[1]*this.scale_[1]+this.dy_)/this.ratio+"px",this.cursor_.style.display="block",this.bar_.parentElement.classList.add("over"),this.bar_.style.left=e+"px",this.bar_.style.display="block",this.element.querySelector(".point-info .z").textContent=t[1]+this.info.altitudeUnits,this.element.querySelector(".point-info .dist").textContent=(t[0]/1e3).toFixed(1)+this.info.distanceUnitsKM,this.element.querySelector(".point-info .time").textContent=t[2],e>this.canvas_.width/this.ratio/2?this.popup_.classList.add("ol-left"):this.popup_.classList.remove("ol-left")):(this.cursor_.style.display="none",this.bar_.style.display="none",this.cursor_.style.display="none",this.bar_.parentElement.classList.remove("over"))},ol.control.Profil.prototype.showAt=function(t){var e,i,o,n=1/0;if(void 0===t)this.bar_.parentElement.classList.contains("over")&&this._drawAt();else if(t.length)for(e=1;i=this.tab_[e];e++){var r=ol.coordinate.dist2d(i[3],t);r<n&&(o=i,n=r)}else for(e=0;(i=this.tab_[e])&&(o=i,!(i[0]>=t));e++);return o?(this._drawAt(o,(o[0]*this.scale_[0]+this.margin_.left)/this.ratio),o[3]):null},ol.control.Profil.prototype.showAtTime=function(t,e){var i,o,n;if(t instanceof Date?t=t.getTime()/1e3:e&&(t+=this.tab_[0][3][3]),void 0===t)this.bar_.parentElement.classList.contains("over")&&this._drawAt();else for(i=0;(o=this.tab_[i])&&(n=o,!(o[3][3]>=t));i++);return n?(this._drawAt(n,(n[0]*this.scale_[0]+this.margin_.left)/this.ratio),n[3]):null},ol.control.Profil.prototype.pointAtTime=function(t){var e,i;for(e=1;i=this.tab_[e];e++){var o=i[3][3];if(o>=t){var n=this.tab_[e-1][3];return(n[3]+o)/2<t?n:i}}return this.tab_[this.tab_.length-1][3]},ol.control.Profil.prototype.onMove=function(t){if(this.tab_.length){var e=this.canvas_.getBoundingClientRect(),i=e.top+window.pageYOffset-document.documentElement.clientTop,o=e.left+window.pageXOffset-document.documentElement.clientLeft,n=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,r=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY,s=n-o,a=r-i,l=this.ratio;if(s>this.margin_.left/l&&s<(this.canvas_.width-this.margin_.right)/l&&a>this.margin_.top/l&&a<(this.canvas_.height-this.margin_.bottom)/l){var c,h,u=(s*l-this.margin_.left)/this.scale_[0],d=this.tab_[0];for(c=1;h=this.tab_[c];c++)if(h[0]>=u){u<(h[0]+d[0])/2&&(c=0,h=d);break}switch(this._drawAt(h,s),this.dispatchEvent({type:"over",click:"click"===t.type,index:c,coord:h[3],time:h[2],distance:h[0]}),t.type){case"pointerdown":this._dragging={event:{type:"dragstart",index:c,coord:h[3],time:h[2],distance:h[0]},pageX:n,pageY:r};break;case"pointerup":this._dragging&&this._dragging.pageX?Math.abs(this._dragging.pageX-n)<3&&Math.abs(this._dragging.pageY-r)<3&&(this.dispatchEvent({type:"click",index:c,coord:h[3],time:h[2],distance:h[0]}),this.refresh()):this.dispatchEvent({type:"dragend",index:c,coord:h[3],time:h[2],distance:h[0]}),this._dragging=!1;break;default:if(this._dragging)if(this._dragging.pageX)(Math.abs(this._dragging.pageX-n)>3||Math.abs(this._dragging.pageY-r)>3)&&(this._dragging.pageX=this._dragging.pageY=!1,this.dispatchEvent(this._dragging.event));else{this.dispatchEvent({type:"dragging",index:c,coord:h[3],time:h[2],distance:h[0]});var p=Math.min(this._dragging.event.index,c),g=Math.max(this._dragging.event.index,c);this.refresh(),this.get("selectable")&&this._drawGraph(this.tab_.slice(p,g),this._selectStyle)}}}else this.bar_.parentElement.classList.contains("over")&&(this._drawAt(),this.dispatchEvent({type:"out"})),"pointerup"===t.type&&this._dragging&&(this.dispatchEvent({type:"dragcancel"}),this._dragging=!1)}},ol.control.Profil.prototype.show=function(){this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"show",show:!0})},ol.control.Profil.prototype.hide=function(){this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"show",show:!1})},ol.control.Profil.prototype.toggle=function(){this.element.classList.toggle("ol-collapsed");var t=this.element.classList.contains("ol-collapsed");this.dispatchEvent({type:"show",show:!t})},ol.control.Profil.prototype.isShown=function(){return!this.element.classList.contains("ol-collapsed")},ol.control.Profil.prototype.getSelection=function(t,e){for(var i=[],o=Math.max(Math.min(t,e),0),n=Math.min(Math.max(t,e),this.tab_.length-1),r=o;r<=n;r++)i.push(this.tab_[r][3]);return i},ol.control.Profil.prototype._drawGraph=function(t,e){if(t.length){var i,o,n=this.canvas_.getContext("2d"),r=this.scale_[0],s=this.scale_[1],a=this.dy_,l=this.ratio;for(n.beginPath(),i=0;o=t[i];i++)0==i?n.moveTo(o[0]*r,o[1]*s+a):n.lineTo(o[0]*r,o[1]*s+a);e.getStroke()&&(n.strokeStyle=e.getStroke().getColor()||"#000",n.lineWidth=e.getStroke().getWidth()*l,n.setLineDash([]),n.stroke()),e.getFill()&&(n.fillStyle=e.getFill().getColor()||"#000",n.Style=e.getFill().getColor()||"#000",n.lineTo(t[t.length-1][0]*r,0),n.lineTo(t[0][0]*r,0),n.fill())}},ol.control.Profil.prototype.setGeometry=function(t,e){if(e||(e={}),t instanceof ol.Feature&&(t=t.getGeometry()),this._geometry=[t,e],/Z/.test(t.getLayout())){/M/.test(t.getLayout())?this.element.querySelector(".time").parentElement.style.display="block":this.element.querySelector(".time").parentElement.style.display="none";var i=t.getCoordinates();switch(t.getType()){case"LineString":break;case"MultiLineString":i=i[0];break;default:return}var o,n,r,s,a,l,c=e.projection||this.getMap().getView().getProjection(),h=1/0,u=-1/0,d=this.tab_=[];for(o=0;n=i[o];o++)(s=n[2])<h&&(h=s),s>u&&(u=s),0==o?r=0:r+=(l=n,ol.sphere.getDistance(ol.proj.transform(i[o-1],c,"EPSG:4326"),ol.proj.transform(l,c,"EPSG:4326"))),a=p(i[0][3],n[3]),d.push([r,s,a,n]);this._z=[h,u],this.set("graduation",e.graduation||100),this.set("zmin",e.zmin),this.set("zmax",e.zmax),this.set("amplitude",e.amplitude),this.set("unit",e.unit),this.set("zunit",e.zunit),this.set("zDigits",e.zDigits),this.dispatchEvent({type:"change:geometry",geometry:t}),this.refresh()}function p(t,e){if(!t||!e)return"-";var i=(e-t)/60,o=Math.trunc(i/60),n=Math.trunc(i-60*o);return o+"h"+(n<10?"0":"")+n+"mn"}},ol.control.Profil.prototype.refresh=function(){var t=this.canvas_,e=t.getContext("2d"),i=t.width,o=t.height;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i,o);var n,r=this._z[0],s=this._z[1],a=this.tab_,l=a[a.length-1][0],c=a[a.length-1][2];if(l){e.setTransform(1,0,0,1,this.margin_.left,o-this.margin_.bottom);var h=this.ratio;i-=this.margin_.right+this.margin_.left,o-=this.margin_.top+this.margin_.bottom,e.strokeStyle=this._style.getText().getFill().getColor()||"#000",e.lineWidth=.5*h,e.beginPath(),e.moveTo(0,0),e.lineTo(0,-o),e.moveTo(0,0),e.lineTo(i,0),e.stroke(),this.element.querySelector(".track-info .zmin").textContent=r.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .zmax").textContent=s.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .dist").textContent=l>1e3?(l/1e3).toFixed(1)+this.info.distanceUnitsKM:l.toFixed(1)+this.info.distanceUnitsM,this.element.querySelector(".track-info .time").textContent=c;for(var u=this.get("graduation");o/(((s=Math.ceil(s/u)*u)-(r=Math.floor(r/u)*u))/u)<15*h;)u*=2;"number"==typeof this.get("zmin")&&r>this.get("zmin")&&(r=this.get("zmin")),"number"==typeof this.get("zmax")&&s<this.get("zmax")&&(s=this.get("zmax"));var d=this.get("amplitude");d&&(s=Math.max(r+d,s));var p=i/l,g=-o/(s-r),f=this.dy_=-r*g;this.scale_=[p,g],this._drawGraph(a,this._style),e.font=10*h+"px arial",e.textAlign="right",e.textBaseline="middle",e.fillStyle=this._style.getText().getFill().getColor()||"#000",e.beginPath();var m=this.get("zDigits")||0;for(n=r;n<=s;n+=u)"km"!=this.get("zunit")?e.fillText(n.toFixed(m),-4*h,n*g+f):e.fillText((n/1e3).toFixed(1),-4*h,n*g+f),e.moveTo(-2*h,n*g+f),e.lineTo(0!=n?l*p:0,n*g+f);e.textAlign="center",e.textBaseline="top",e.setLineDash([h,3*h]);var y,v=this.get("unit")||"km";for(l>1e3?(y=100*Math.round(l/1e3))>1e3&&(y=1e3*Math.ceil(y/1e3)):(v="m",y=l>100?10*Math.round(l/100):l>10?Math.round(l/10):l>1?Math.round(l)/10:l),n=0;n<=l;n+=y)e.fillText(Math.round(10*("m"==v?n:n/1e3))/10,n*p,4*h),e.moveTo(n*p,2*h),e.lineTo(n*p,0);e.font=12*h+"px arial",e.fillText(this.info.xtitle.replace("(km)","("+v+")"),i/2,18*h),e.save(),e.rotate(-Math.PI/2),e.fillText(this.info.ytitle,o/2,-this.margin_.left),e.restore(),e.stroke()}else console.error("[ol/control/Profil] no data...",a)},ol.control.Profil.prototype.getImage=function(t,e){return"canvas"===t?this.canvas_:this.canvas_.toDataURL(t,e)},ol.control.ProgressBar=function(t){t=t||{};var e=ol.ext.element.create("DIV",{className:((t.className||"")+" ol-progress-bar ol-unselectable ol-control").trim()});this._waiting=ol.ext.element.create("DIV",{html:t.label||"",className:"ol-waiting",parent:e}),this._bar=ol.ext.element.create("DIV",{className:"ol-bar",parent:e}),ol.control.Control.call(this,{element:e,target:t.target}),this._layerlistener=[],this.setLayers(t.layers)},ol.ext.inherits(ol.control.ProgressBar,ol.control.Control),ol.control.ProgressBar.prototype.setPercent=function(t){this._bar.style.width=100*(Number(t)||0)+"%",void 0===t?ol.ext.element.hide(this.element):ol.ext.element.show(this.element)},ol.control.ProgressBar.prototype.setLabel=function(t){this._waiting.innerHTML=t},ol.control.ProgressBar.prototype.setLayers=function(t){this._layerlistener.forEach(function(t){ol.Observable.unByKey(t)}),this._layerlistener=[],this.setPercent();var e,i=0,o=0;t instanceof ol.layer.Layer&&(t=[t]),t&&t.forEach&&t.forEach((function(t){t instanceof ol.layer.Layer&&(this._layerlistener.push(t.getSource().on("tileloadstart",(function(){i++,this.setPercent(o/i),clearTimeout(e)}).bind(this))),this._layerlistener.push(t.getSource().on(["tileloadend","tileloaderror"],(function(){++o===i?(i=o=0,this.setPercent(1),e=setTimeout(this.setPercent.bind(this),300)):this.setPercent(o/i)}).bind(this))))}).bind(this))},ol.control.RoutingGeoportail=function(t){var e=this;t||(t={}),null==t.typing&&(t.typing=300),t.apiKey=t.apiKey||"essentiels",this._classname=t.className||"search",this._source=new ol.source.Vector,this._auth=t.authentication;var i=document.createElement("DIV"),o=(t.className||"")+" ol-routing";t.target||(o+=" ol-unselectable ol-control"),i.setAttribute("class",o),t.target||ol.ext.element.create("BUTTON",{parent:i}).addEventListener("click",function(){i.classList.toggle("ol-collapsed")}),ol.control.Control.call(this,{element:i,target:t.target}),this.set("url","https://wxs.ign.fr/"+t.apiKey+"/itineraire/rest/route.json");var n=ol.ext.element.create("DIV",{className:"content",parent:i}),r=ol.ext.element.create("DIV",{className:"search-input",parent:n});this._search=[],this.addSearch(r,t),this.addSearch(r,t),ol.ext.element.create("I",{className:"ol-car",title:t.carlabel||"by car",parent:n}).addEventListener("click",function(){e.setMode("car")}),ol.ext.element.create("I",{className:"ol-pedestrian",title:t.pedlabel||"pedestrian",parent:n}).addEventListener("click",function(){e.setMode("pedestrian")}),ol.ext.element.create("I",{className:"ol-ok",title:t.runlabel||"search",html:"OK",parent:n}).addEventListener("click",function(){e.calculate()}),ol.ext.element.create("I",{className:"ol-cancel",html:"cancel",parent:n}).addEventListener("click",(function(){this.resultElement.innerHTML=""}).bind(this)),this.resultElement=document.createElement("DIV"),this.resultElement.setAttribute("class","ol-result"),i.appendChild(this.resultElement),this.setMode(t.mode||"car"),this.set("timeout",t.timeout||1e4)},ol.ext.inherits(ol.control.RoutingGeoportail,ol.control.Control),ol.control.RoutingGeoportail.prototype.setMode=function(t,e){this.set("mode",t),this.element.querySelector(".ol-car").classList.remove("selected"),this.element.querySelector(".ol-pedestrian").classList.remove("selected"),this.element.querySelector(".ol-"+t).classList.add("selected"),e||this.calculate()},ol.control.RoutingGeoportail.prototype.setMethod=function(t,e){this.set("method",t),e||this.calculate()},ol.control.RoutingGeoportail.prototype.addButton=function(t,e,i){var o=document.createElement("I");return o.setAttribute("class",t),o.setAttribute("type","button"),o.setAttribute("title",e),o.innerHTML=i||"",this.element.appendChild(o),o},ol.control.RoutingGeoportail.prototype.getSource=function(){return this._source},ol.control.RoutingGeoportail.prototype._resetArray=function(t){this._search=[];var e=t.parentNode.querySelectorAll(".search-input > div");e.forEach((function(t){t.olsearch&&(t.olsearch.get("feature")&&(t.olsearch.get("feature").set("step",this._search.length),0===this._search.length?t.olsearch.get("feature").set("pos","start"):this._search.length===e.length-1?t.olsearch.get("feature").set("pos","end"):t.olsearch.get("feature").set("pos","")),this._search.push(t.olsearch))}).bind(this))},ol.control.RoutingGeoportail.prototype.removeSearch=function(t,e,i){t.removeChild(i),i.olsearch.get("feature")&&this._source.removeFeature(i.olsearch.get("feature")),this.getMap()&&this.getMap().removeControl(i.olsearch),this._resetArray(t)},ol.control.RoutingGeoportail.prototype.addSearch=function(t,e,i){var o=this,n=ol.ext.element.create("DIV");i?t.insertBefore(n,i.nextSibling):t.appendChild(n),ol.ext.element.create("BUTTON",{title:e.startlabel||"add/remove",parent:n}).addEventListener("click",(function(i){i.ctrlKey?this._search.length>2&&this.removeSearch(t,e,n):i.shiftKey&&this.addSearch(t,e,n)}).bind(this));var r=n.olsearch=new ol.control.SearchGeoportail({className:"IGNF ol-collapsed",apiKey:e.apiKey,authentication:e.authentication,target:n,reverse:!0});r._changeCounter=0,this._resetArray(t),r.on("select",(function(t){r.setInput(t.search.fulltext);var e=r.get("feature");e?(r.checkgeom=!1,t.silent||e.getGeometry().setCoordinates(t.coordinate),r.checkgeom=!0):(e=new ol.Feature(new ol.geom.Point(t.coordinate)),r.set("feature",e),this._source.addFeature(e),r.checkgeom=!0,e.getGeometry().on("change",(function(){r.checkgeom&&this.onGeometryChange(r,e)}).bind(this))),e.set("name",r.getTitle(t.search)),e.set("step",this._search.indexOf(r)),0===e.get("step")?e.set("pos","start"):e.get("step")===this._search.length-1&&e.set("pos","end"),r.set("selection",t.search)}).bind(this)),r.element.querySelector("input").addEventListener("change",function(){r.set("selection",null),o.resultElement.innerHTML=""}),this.getMap()&&this.getMap().addControl(r)},ol.control.RoutingGeoportail.prototype.onGeometryChange=function(t,e,i){var o=ol.proj.transform(e.getGeometry().getCoordinates(),this.getMap().getView().getProjection(),"EPSG:4326");if(t._handleSelect({x:o[0],y:o[1],fulltext:o[0].toFixed(6)+","+o[1].toFixed(6)},!0,{silent:!0}),i){if(t._changeCounter--,!t._changeCounter)return void t.reverseGeocode(e.getGeometry().getCoordinates(),{silent:!0})}else t._changeCounter++,setTimeout((function(){this.onGeometryChange(t,e,!0)}).bind(this),1e3)},ol.control.RoutingGeoportail.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t);for(var e=0;e<this._search.length;e++)this._search[e].setMap(t)},ol.control.RoutingGeoportail.prototype.requestData=function(t){for(var e=t[0],i=t[t.length-1],o="",n=1;n<t.length-1;n++)o+=(o?";":"")+t[n].x+","+t[n].y;return{"gp-access-lib":"1.1.0",origin:e.x+","+e.y,destination:i.x+","+i.y,method:this.get("method")||"time",graphName:"pedestrian"===this.get("mode")?"Pieton":"Voiture",waypoints:o,format:"STANDARDEXT"}},ol.control.RoutingGeoportail.prototype.getTimeString=function(t){return(t/=60)<1?"":t<60?t.toFixed(0)+" min":(t/60).toFixed(0)+" h "+(t%60).toFixed(0)+" min"},ol.control.RoutingGeoportail.prototype.getDistanceString=function(t){return t<1e3?t.toFixed(0)+" m":(t/1e3).toFixed(2)+" km"},ol.control.RoutingGeoportail.prototype.listRouting=function(t){this.resultElement.innerHTML="";var e=this.getTimeString(t.duration);e+=" ("+this.getDistanceString(t.distance)+")";var i=document.createElement("i");i.textContent=e,this.resultElement.appendChild(i);var o=document.createElement("ul");this.resultElement.appendChild(o);var n={none:"Prendre sur ",R:"Tourner \xe0 droite sur ",FR:"Tourner l\xe9g\xe8rement \xe0 droite sur ",L:"Tourner \xe0 gauche sur ",FL:"Tourner l\xe9g\xe8rement \xe0 gauche sur ",F:"Continuer tout droit sur "};t.features.forEach((function(t,i){var r=this.getDistanceString(t.get("distance"));e=this.getTimeString(t.get("durationT")),ol.ext.element.create("LI",{className:t.get("instruction"),html:(n[t.get("instruction")||"none"]||"#")+" "+t.get("name")+"<i>"+r+(e?" - "+e:"")+"</i>",on:{pointerenter:(function(){this.dispatchEvent({type:"step:hover",hover:!1,index:i,feature:t})}).bind(this),pointerleave:(function(){this.dispatchEvent({type:"step:hover",hover:!1,index:i,feature:t})}).bind(this)},click:(function(){this.dispatchEvent({type:"step:select",index:i,feature:t})}).bind(this),parent:o})}).bind(this))},ol.control.RoutingGeoportail.prototype.handleResponse=function(t,e,i){if("ERROR"!==t.status){for(var o,n,r={type:"routing",features:[]},s=0,a=0,l=[],c=0;n=t.legs[c];c++)for(var h,u=0;h=n.steps[u];u++){for(var d,p=[],g=0;d=h.points[g];g++)d=d.split(","),p.push([parseFloat(d[0]),parseFloat(d[1])]),0!==c&&0===g||l.push(p[g]);var f={geometry:(p=new ol.geom.LineString(p)).transform("EPSG:4326",this.getMap().getView().getProjection()),name:h.name,instruction:h.navInstruction,distance:parseFloat(h.distanceMeters),duration:parseFloat(h.durationSeconds)};a+=f.duration,f.distanceT=s+=f.distance,f.durationT=a,o=new ol.Feature(f),r.features.push(o)}return r.distance=parseFloat(t.distanceMeters),r.duration=parseFloat(t.durationSeconds),l=new ol.geom.LineString(l),r.feature=new ol.Feature({geometry:l.transform("EPSG:4326",this.getMap().getView().getProjection()),start:this._search[0].getTitle(e),end:this._search[0].getTitle(i),distance:r.distance,duration:r.duration}),this.dispatchEvent(r),this.path=r,r}this.dispatchEvent({type:"errror",status:"200",statusText:t.message})},ol.control.RoutingGeoportail.prototype.calculate=function(t){if(this.resultElement.innerHTML="",t){var e=[];t.forEach(function(t){e.push({x:t[0],y:t[1]})}),t=e}else{t=[];for(var i=0;i<this._search.length;i++)this._search[i].get("selection")&&t.push(this._search[i].get("selection"))}if(t.length<2)return!1;var o=t[0],n=t[t.length-1],r=this.requestData(t),s=encodeURI(this.get("url")),a="";for(var l in r)a+=a?"&":"?",r.hasOwnProperty(l)&&(a+=l+"="+r[l]);var c=this;return this.dispatchEvent({type:"routing:start"}),this.ajax(s+a,(function(t){t.status>=200&&t.status<400?c.listRouting(c.handleResponse(JSON.parse(t.response),o,n)):this.dispatchEvent({type:"error",status:t.status,statusText:t.statusText})}).bind(this),(function(t){this.dispatchEvent({type:"error",status:t.status,statusText:t.statusText})}).bind(this)),!0},ol.control.RoutingGeoportail.prototype.ajax=function(t,e,i){var o=this;this._request&&this._request.abort();var n=this._request=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=this.get("timeout")||1e4,this._auth&&n.setRequestHeader("Authorization","Basic "+this._auth),this.element.classList.add("ol-searching"),n.onload=function(){o._request=null,o.element.classList.remove("ol-searching"),e.call(o,this)},n.ontimeout=function(){o._request=null,o.element.classList.remove("ol-searching"),i&&i.call(o,this)},n.onerror=function(){o._request=null,o.element.classList.remove("ol-searching"),i&&i.call(o,this)},n.send()},ol.control.Scale=function(t){t||(t={}),null==t.typing&&(t.typing=300);var e=document.createElement("DIV"),i=(t.className||"")+" ol-scale";t.target||(i+=" ol-unselectable ol-control"),this._input=document.createElement("INPUT"),this._input.value="-",e.setAttribute("class",i),!1===t.editable&&(this._input.readOnly=!0),e.appendChild(this._input),ol.control.Control.call(this,{element:e,target:t.target}),this._input.addEventListener("change",this.setScale.bind(this)),this.set("ppi",t.ppi||96)},ol.ext.inherits(ol.control.Scale,ol.control.Control),ol.control.Scale.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener=t.on("moveend",this.getScale.bind(this)))},ol.control.Scale.prototype.getScale=function(){var t=this.getMap();if(t){var e=ol.sphere.getMapScale(t,this.get("ppi"));return this._input.value=this.formatScale(e),e}},ol.control.Scale.prototype.formatScale=function(t){return"1 / "+(t=t>100?100*Math.round(t/100):Math.round(t)).toLocaleString()},ol.control.Scale.prototype.setScale=function(t){var e=this.getMap();e&&t&&(t.target&&(t=t.target.value),ol.sphere.setMapScale(e,t,this.get("ppi"))),this.getScale()},ol.control.SearchBAN=function(t){(t=t||{}).typing=t.typing||500,t.url=t.url||"https://api-adresse.data.gouv.fr/search/",t.className=t.className||"BAN",t.copy='<a href="https://adresse.data.gouv.fr/" target="new">&copy; BAN-data.gouv.fr</a>',ol.control.SearchPhoton.call(this,t)},ol.ext.inherits(ol.control.SearchBAN,ol.control.SearchPhoton),ol.control.SearchBAN.prototype.getTitle=function(t){return t.properties.label},ol.control.SearchBAN.prototype.select=function(t){var e=t.geometry.coordinates;try{e=ol.proj.transform(t.geometry.coordinates,"EPSG:4326",this.getMap().getView().getProjection())}catch(i){}this.dispatchEvent({type:"select",search:t,coordinate:e})},ol.control.SearchDFCI=function(t){t||(t={}),t.className=t.className||"dfci",t.placeholder=t.placeholder||"Code DFCI",ol.control.Search.call(this,t)},ol.ext.inherits(ol.control.SearchDFCI,ol.control.Search),ol.control.SearchDFCI.prototype.autocomplete=function(t){if((t=(t=t.toUpperCase()).replace(/[^0-9,^A-H,^K-N]/g,"")).length<2)return this.setInput(t),[];var e,i=this.getMap().getView().getProjection(),o=[],n=ol.coordinate.fromDFCI(t,i),r=Math.floor(t.length/2)-1,s=ol.coordinate.toDFCI(n,r,i);if(s=s.replace(/[^0-9,^A-H,^K-N]/g,""),!/NaN/.test(s)&&s){if(console.log("ok",s),this.setInput(s+t.substring(s.length,t.length)),o.push({coordinate:ol.coordinate.fromDFCI(s,i),name:s}),5===t.length)for(n=ol.coordinate.fromDFCI(t+0,i),s=ol.coordinate.toDFCI(n,r+1,i).substring(0,5),e=0;e<10;e++)o.push({coordinate:ol.coordinate.fromDFCI(s+e,i),name:s+e});if(2===r)for(e=0;e<6;e++)o.push({coordinate:ol.coordinate.fromDFCI(s+"."+e,i),name:s+"."+e})}return o},ol.control.SearchFeature=function(t){t||(t={}),t.className=t.className||"feature",ol.control.Search.call(this,t),"function"==typeof t.getSearchString&&(this.getSearchString=t.getSearchString),this.set("property",t.property||"name"),this.source_=t.source},ol.ext.inherits(ol.control.SearchFeature,ol.control.Search),ol.control.SearchFeature.prototype.restoreHistory=function(){this.set("history",[])},ol.control.SearchFeature.prototype.saveHistory=function(){try{localStorage.removeItem("ol@search-"+this._classname)}catch(t){console.warn("Failed to access localStorage...")}},ol.control.SearchFeature.prototype.getTitle=function(t){return t.get(this.get("property")||"name")},ol.control.SearchFeature.prototype.getSearchString=function(t){return this.getTitle(t)},ol.control.SearchFeature.prototype.getSource=function(){return this.source_},ol.control.SearchFeature.prototype.setSource=function(t){this.source_=t},ol.control.SearchFeature.prototype.autocomplete=function(t){var e=[];if(this.source_){t=t.replace(/^\*/,"");for(var i,o=new RegExp(t,"i"),n=this.source_.getFeatures(),r=this.get("maxItems"),s=0;i=n[s];s++){var a=this.getSearchString(i);if(void 0!==a&&o.test(a)&&(e.push(i),--r<=0))break}}return e},ol.control.SearchGPS=function(t){t||(t={}),t.className=(t.className||"")+" ol-searchgps",t.placeholder=t.placeholder||"lon,lat",ol.control.Search.call(this,t),this.geolocation=new ol.Geolocation({projection:"EPSG:4326",trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),ol.ext.element.create("BUTTON",{className:"ol-geoloc",title:"Locate with GPS",parent:this.element,click:(function(){this.geolocation.setTracking(!0)}).bind(this)}),ol.ext.element.createSwitch({html:"decimal",after:"DMS",change:(function(t){t.target.checked?this.element.classList.add("ol-dms"):this.element.classList.remove("ol-dms")}).bind(this),parent:this.element}),this._createForm();var e=this.element.querySelector("ul.autocomplete");this.element.appendChild(e)},ol.ext.inherits(ol.control.SearchGPS,ol.control.Search),ol.control.SearchGPS.prototype._createForm=function(){var t=(function(t){if(t.target.classList.contains("ol-dms")&&(o.value=(n.value<0?-1:1)*Number(n.value)+Number(r.value)/60+Number(s.value)/3600,o.value=(n.value<0?-1:1)*Math.round(1e7*o.value)/1e7,a.value=(l.value<0?-1:1)*Number(l.value)+Number(c.value)/60+Number(h.value)/3600,a.value=(l.value<0?-1:1)*Math.round(1e7*a.value)/1e7),this._input.value=o.value||a.value?o.value+","+a.value:"",!t.target.classList.contains("ol-dms")){var e=ol.coordinate.toStringHDMS([Number(o.value),Number(a.value)]),i=e.replace(/(N|S|E|W)/g,"").split("\u2033");i[1]=i[1].trim().split(" "),n.value=(/W/.test(e)?-1:1)*parseInt(i[1][0]),r.value=parseInt(i[1][1]),s.value=parseInt(i[1][2]),i[0]=i[0].trim().split(" "),l.value=(/W/.test(e)?-1:1)*parseInt(i[0][0]),c.value=parseInt(i[0][1]),h.value=parseInt(i[0][2])}this.search()}).bind(this);function e(e,o){var n=ol.ext.element.create("INPUT",{className:e,type:"number",step:"any",lang:"en",parent:i,on:{"change keyup":t}});return o&&ol.ext.element.create("SPAN",{className:"ol-dms",html:o,parent:i}),n}var i=ol.ext.element.create("DIV",{className:"ol-longitude",parent:this.element});ol.ext.element.create("LABEL",{html:"Longitude",parent:i});var o=e("ol-decimal"),n=e("ol-dms","\xb0"),r=e("ol-dms","'"),s=e("ol-dms",'"');i=ol.ext.element.create("DIV",{className:"ol-latitude",parent:this.element}),ol.ext.element.create("LABEL",{html:"Latitude",parent:i});var a=e("ol-decimal"),l=e("ol-dms","\xb0"),c=e("ol-dms","'"),h=e("ol-dms",'"');this.button&&this.button.addEventListener("click",function(){o.focus()}),this.on("select",(function(t){o.value=t.search.gps[0],a.value=t.search.gps[1]}).bind(this)),this.geolocation.on("change",(function(){this.geolocation.setTracking(!1);var t=this.geolocation.getPosition();o.value=t[0],a.value=t[1],this._triggerCustomEvent("keyup",o)}).bind(this))},ol.control.SearchGPS.prototype.autocomplete=function(t){var e=[],i=t.split(",");i[0]=Number(i[0]),i[1]=Number(i[1]),(t=ol.coordinate.toStringHDMS(i))&&(t=t.replace(/(\xb0|\u2032|\u2033) /g,"$1"));var o=ol.proj.transform([i[0],i[1]],"EPSG:4326",this.getMap().getView().getProjection());return e.push({gps:i,coordinate:o,name:t}),e},ol.control.SearchGeoportailParcelle=function(t){var e=this;t.type="Commune",t.className=(t.className?t.className:"")+" IGNF-parcelle ol-collapsed-list ol-collapsed-num",t.inputLabel="Commune",t.noCollapse=!0,t.placeholder=t.placeholder||"Choisissez une commune...",ol.control.SearchGeoportail.call(this,t),this.set("copy",null);var i=this.element,o=document.createElement("DIV");i.appendChild(o);var n,r=document.createElement("LABEL");r.innerText="Pr\xe9fixe",o.appendChild(r),(r=document.createElement("LABEL")).innerText="Section",o.appendChild(r),(r=document.createElement("LABEL")).innerText="Num\xe9ro",o.appendChild(r),o.appendChild(document.createElement("BR")),this._inputParcelle={prefix:document.createElement("INPUT"),section:document.createElement("INPUT"),numero:document.createElement("INPUT")},this._inputParcelle.prefix.setAttribute("maxlength",3),this._inputParcelle.section.setAttribute("maxlength",2),this._inputParcelle.numero.setAttribute("maxlength",4);var s=function(){n&&clearTimeout(n),n=setTimeout(function(){e.autocompleteParcelle()},t.typing||0)};for(var a in this._inputParcelle)o.appendChild(this._inputParcelle[a]),this._inputParcelle[a].addEventListener("keyup",s),this._inputParcelle[a].addEventListener("blur",function(){n=setTimeout(function(){i.classList.add("ol-collapsed-num")},200)}),this._inputParcelle[a].addEventListener("focus",function(){clearTimeout(n),i.classList.remove("ol-collapsed-num")});this.activateParcelle(!1);var l=document.createElement("DIV");l.className="autocomplete-parcelle",i.appendChild(l);var c=document.createElement("UL");c.classList.add("autocomplete-parcelle"),l.appendChild(c),(c=document.createElement("UL")).classList.add("autocomplete-page"),l.appendChild(c),this._input.addEventListener("blur",function(){setTimeout(function(){i.classList.add("ol-collapsed-list")},200)}),this._input.addEventListener("focus",function(){i.classList.remove("ol-collapsed-list"),e._listParcelle([]),e._commune&&(e._commune=null,e._input.value="",e.drawList_()),e.activateParcelle(!1)}),this.on("select",this.selectCommune.bind(this)),this.set("pageSize",t.pageSize||5)},ol.ext.inherits(ol.control.SearchGeoportailParcelle,ol.control.SearchGeoportail),ol.control.SearchGeoportailParcelle.prototype.selectCommune=function(t){this._commune=t.search.insee,this._input.value=t.search.insee+" - "+t.search.fulltext,this.activateParcelle(!0),this._inputParcelle.numero.focus(),this.autocompleteParcelle()},ol.control.SearchGeoportailParcelle.prototype.setParcelle=function(t,e){this._inputParcelle.prefix.value=(t.Commune||"")+(t.CommuneAbsorbee||""),this._inputParcelle.section.value=t.Section||"",this._inputParcelle.numero.value=t.Numero||"",e&&this._triggerCustomEvent("keyup",this._inputParcelle.prefix)},ol.control.SearchGeoportailParcelle.prototype.activateParcelle=function(t){for(var e in this._inputParcelle)this._inputParcelle[e].readOnly=!t;t?this._inputParcelle.section.parentElement.classList.add("ol-active"):this._inputParcelle.section.parentElement.classList.remove("ol-active")},ol.control.SearchGeoportailParcelle.prototype.autocompleteParcelle=function(){function t(t,e,i){if(!t)return t;for(i=i||"0";t.length<e;)t=i+t;return t.replace(/\*/g,"_")}var e=this._commune,i=t(this._inputParcelle.prefix.value,3);"000"===i&&(i="___");var o=t(this._inputParcelle.section.value,2),n=t(this._inputParcelle.numero.value,4,"0");this.searchParcelle(e+(i||"___")+(o||"__")+(n||(o?"____":"0001")),(function(t){this._listParcelle(t)}).bind(this),function(){console.log("oops")})},ol.control.SearchGeoportailParcelle.prototype.searchParcelle=function(t,e){var i='<?xml version="1.0" encoding="UTF-8"?><XLS xmlns:xls="http://www.opengis.net/xls" xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.opengis.net/xls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.2" xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"><RequestHeader/><Request requestID="1" version="1.2" methodName="LocationUtilityService"><GeocodeRequest returnFreeForm="false"><Address countryCode="CadastralParcel"><freeFormAddress>'+t+"+</freeFormAddress></Address></GeocodeRequest></Request></XLS>";this.ajax(this.get("url").replace("ols/apis/completion","geoportail/ols"),{xls:i},function(t){for(var i,o=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("GeocodedAddress"),n=[],r=0;i=o[r];r++){for(var s,a=(i.getElementsByTagName("gml:pos")[0]||i.getElementsByTagName("pos")[0]).childNodes[0].nodeValue.split(" "),l=i.getElementsByTagName("Place"),c={lon:Number(a[1]),lat:Number(a[0])},h=0;s=l[h];h++)c[s.attributes.type.value]=s.childNodes[0].nodeValue;n.push(c)}e(n)},{dataType:"XML"})},ol.control.SearchGeoportailParcelle.prototype._listParcelle=function(t){var e=this,i=this.element.querySelector("ul.autocomplete-parcelle");i.innerHTML="";var o=this.element.querySelector("ul.autocomplete-page");function n(t){var e,n=i.children,r="ol-list-"+t;for(e=0;e<n.length;e++)n[e].style.display=n[e].className===r?"":"none";for(n=o.children,e=0;e<n.length;e++)n[e].className=n[e].innerText==t?"selected":"";o.style.display=n.length>1?"":"none"}o.innerHTML="",this._listParc=[],t.sort(function(t,e){var i=t.INSEE+t.CommuneAbsorbee+t.Section+t.Numero,o=e.INSEE+e.CommuneAbsorbee+e.Section+e.Numero;return i===o?0:i<o?-1:1});for(var r,s=this.get("pageSize"),a=0;r=t[a];a++){var l=document.createElement("LI");l.setAttribute("data-search",a),s>0&&l.classList.add("ol-list-"+Math.floor(a/s)),this._listParc.push(r),l.addEventListener("click",function(t){e._handleParcelle(e._listParc[t.currentTarget.getAttribute("data-search")])}),l.innerHTML=r.INSEE+r.CommuneAbsorbee+r.Section+r.Numero,i.appendChild(l),s>0&&!(a%s)&&((l=document.createElement("LI")).innerText=Math.floor(a/s),l.addEventListener("click",function(t){n(t.currentTarget.innerText)}),o.appendChild(l))}s>0&&n(0)},ol.control.SearchGeoportailParcelle.prototype._handleParcelle=function(t){this.dispatchEvent({type:"parcelle",search:t,coordinate:ol.proj.fromLonLat([t.lon,t.lat],this.getMap().getView().getProjection())})},ol.control.SearchNominatim=function(t){(t=t||{}).className=t.className||"nominatim",t.typing=t.typing||500,t.url=t.url||"https://nominatim.openstreetmap.org/search",t.copy='<a href="http://www.openstreetmap.org/copyright" target="new">&copy; OpenStreetMap contributors</a>',ol.control.SearchJSON.call(this,t),this.set("polygon",t.polygon),this.set("viewbox",t.viewbox),this.set("bounded",t.bounded)},ol.ext.inherits(ol.control.SearchNominatim,ol.control.SearchJSON),ol.control.SearchNominatim.prototype.getTitle=function(t){var e=[];t.class&&e.push(t.class),t.type&&e.push(t.type);var i=t.display_name+(e.length?"<i>"+e.join(" - ")+"</i>":"");return t.icon&&(i="<img src='"+t.icon+"' />"+i),i},ol.control.SearchNominatim.prototype.requestData=function(t){var e={format:"json",addressdetails:1,q:t,polygon_geojson:this.get("polygon")?1:0,bounded:this.get("bounded")?1:0,limit:this.get("maxItems")};return this.get("viewbox")&&(e.viewbox=this.get("viewbox")),e},ol.control.SearchNominatim.prototype.select=function(t){var e=[Number(t.lon),Number(t.lat)];try{e=ol.proj.transform(e,"EPSG:4326",this.getMap().getView().getProjection())}catch(i){}this.dispatchEvent({type:"select",search:t,coordinate:e})},ol.control.SearchJSON.prototype.handleResponse=function(t){return t.results||t},ol.control.SearchNominatim.prototype.reverseGeocode=function(t,e){var i=ol.proj.transform(t,this.getMap().getView().getProjection(),"EPSG:4326");this.ajax(this.get("url").replace("search","reverse"),{lon:i[0],lat:i[1],format:"json"},(function(t){e?e.call(this,[t]):t&&!t.error&&this._handleSelect(t,!0)}).bind(this))},ol.control.SearchWikipedia=function(t){(t=t||{}).lang=t.lang||"en",t.className=t.className||"ol-search-wikipedia",t.url="https://"+t.lang+".wikipedia.org/w/api.php",t.placeholder=t.placeholder||"search string, File:filename",t.copy='<a href="https://'+t.lang+'.wikipedia.org/" target="new">Wikipedia&reg; - CC-By-SA</a>',ol.control.SearchJSON.call(this,t),this.set("lang",t.lang)},ol.ext.inherits(ol.control.SearchWikipedia,ol.control.SearchJSON),ol.control.SearchWikipedia.prototype.getTitle=function(t){return ol.ext.element.create("DIV",{html:t.title,title:t.desc})},ol.control.SearchWikipedia.prototype.setLang=function(t){this.set("lang",t),this.set("url","https://"+t+".wikipedia.org/w/api.php")},ol.control.SearchWikipedia.prototype.requestData=function(t){return{action:"opensearch",search:t,lang:this.get("lang"),format:"json",origin:"*",limit:this.get("maxItems")}},ol.control.SearchWikipedia.prototype.handleResponse=function(t){for(var e=[],i=0;i<t[1].length;i++)e.push({title:t[1][i],desc:t[2][i],uri:t[3][i]});return e},ol.control.SearchWikipedia.prototype.select=function(t){var e=decodeURIComponent(t.uri.split("/").pop()).replace(/'/,"%27");ol.ext.Ajax.get({url:t.uri.split("wiki/")[0]+"w/api.php",data:{action:"query",prop:"pageimages|coordinates|extracts",exintro:1,explaintext:1,piprop:"original",origin:"*",format:"json",redirects:1,titles:e},options:{encode:!1},success:(function(e){var i=e.query.pages[Object.keys(e.query.pages).pop()];console.log(i);var o,n={title:t.title,desc:i.extract||t.desc,url:t.uri,img:i.original?i.original.source:void 0,pageid:i.pageid};i.coordinates&&(n.lon=i.coordinates[0].lon,n.lat=i.coordinates[0].lat,o=[n.lon,n.lat],o=ol.proj.transform(o,"EPSG:4326",this.getMap().getView().getProjection())),this.dispatchEvent({type:"select",search:n,coordinate:o})}).bind(this)})},ol.control.Select=function(t){var e=this;t||(t={});var i=t.content=document.createElement("div");this._ul=ol.ext.element.create("UL",{parent:i}),this._all=ol.ext.element.create("INPUT",{type:"checkbox",checked:!0});var o=ol.ext.element.create("LABEL",{html:this._all,parent:i});ol.ext.element.appendText(o,t.allLabel||"match all"),this._useCase=ol.ext.element.create("INPUT",{type:"checkbox"});var n=ol.ext.element.create("LABEL",{html:this._useCase,parent:i});ol.ext.element.appendText(n,t.caseLabel||"case sensitive"),ol.control.SelectBase.call(this,t),ol.ext.element.create("BUTTON",{className:"ol-append",html:t.addLabel||"add rule",click:function(){e.addCondition()},parent:i}),this._conditions=[],this.set("attrPlaceHolder",t.attrPlaceHolder||"attribute"),this.set("valuePlaceHolder",t.valuePlaceHolder||"value"),this.addCondition()},ol.ext.inherits(ol.control.Select,ol.control.SelectBase),ol.control.Select.prototype.addCondition=function(t){this._conditions.push({attr:(t=t||{}).attr||"",op:t.op||"=",val:t.val||""}),this._drawlist()},ol.control.Select.prototype.getConditions=function(){return{usecase:this._useCase.checked,all:this._all.checked,conditions:this._conditions}},ol.control.Select.prototype.setConditions=function(t){this._useCase.checked=t.usecase,this._all.checked=t.all,this._conditions=t.conditions,this._drawlist()},ol.control.Select.prototype.getConditionsString=function(t){for(var e,i="",o=0;e=t.conditions[o];o++)e.attr&&(i+=(i?t.all?" AND ":" OR ":"")+e.attr+this.operationsList[e.op]+e.val);return i},ol.control.Select.prototype._drawlist=function(){this._ul.innerHTML="";for(var t=0;t<this._conditions.length;t++)this._ul.appendChild(this._getLiCondition(t))},ol.control.Select.prototype._autocomplete=function(t,e){e.classList.remove("ol-hidden"),e.innerHTML="";for(var i,o={},n=this.get("source"),r=0;i=n[r];r++)for(var s,a=i.getFeatures(),l=0;(s=a[l])&&(Object.assign(o,s.getProperties()),!(l>100));l++);var c=new RegExp(t,"i");for(var h in o)if("geometry"!==h&&c.test(h)){var u=document.createElement("li");u.textContent=h,u.addEventListener("click",function(){e.previousElementSibling.value=this.textContent;var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),e.previousElementSibling.dispatchEvent(t),e.classList.add("ol-hidden")}),e.appendChild(u)}},ol.control.Select.prototype._getLiCondition=function(t){var e=this,i=document.createElement("li"),o=document.createElement("div");o.classList.add("ol-autocomplete"),o.addEventListener("mouseleave",function(){this.querySelector("ul").classList.add("ol-hidden")}),i.appendChild(o);var n=document.createElement("input");n.classList.add("ol-attr"),n.setAttribute("type","search"),n.setAttribute("placeholder",this.get("attrPlaceHolder")),n.addEventListener("keyup",function(){e._autocomplete(this.value,this.nextElementSibling)}),n.addEventListener("focusout",function(){setTimeout(function(){o.querySelector("ul").classList.add("ol-hidden")},300)}),n.addEventListener("click",function(){setTimeout((function(){e._autocomplete(this.value,this.nextElementSibling),this.nextElementSibling.classList.remove("ol-hidden")}).bind(this))}),n.addEventListener("change",function(){e._conditions[t].attr=this.value}),n.value=e._conditions[t].attr,o.appendChild(n);var r=document.createElement("ul");r.classList.add("ol-hidden"),o.appendChild(r);var s=document.createElement("select");for(var a in i.appendChild(s),this.operationsList){var l=document.createElement("option");l.value=a,l.textContent=this.operationsList[a],s.appendChild(l)}s.value=e._conditions[t].op,s.addEventListener("change",function(){e._conditions[t].op=this.value});var c=document.createElement("input");if(c.setAttribute("type","text"),c.setAttribute("placeholder",this.get("valuePlaceHolder")),c.addEventListener("change",function(){e._conditions[t].val=this.value}),c.value=e._conditions[t].val,i.appendChild(c),this._conditions.length>1){var h=document.createElement("div");h.classList.add("ol-delete"),h.addEventListener("click",function(){e.removeCondition(t)}),i.appendChild(h)}return i},ol.control.Select.prototype.removeCondition=function(t){this._conditions.splice(t,1),this._drawlist()},ol.control.Select.prototype.doSelect=function(t){return(t=t||{}).useCase=t.useCase||this._useCase.checked,t.matchAll=t.matchAll||this._all.checked,t.conditions=t.conditions||this._conditions,ol.control.SelectBase.prototype.doSelect.call(this,t)},ol.control.SelectCheck=function(t){t||(t={});var e=t.content=ol.ext.element.create("DIV");t.label&&ol.ext.element.create("LABEL",{html:t.label,parent:e}),this._input=ol.ext.element.create("DIV",{parent:e}),t.className=t.className||"ol-select-check",ol.control.SelectBase.call(this,t),this.set("property",t.property||"name"),this.set("max",t.max||1e4),this.set("defaultLabel",t.defaultLabel),this.set("type",t.type),this._selectAll=t.selectAll,this._onchoice=t.onchoice,t.values?this.setValues({values:t.values,sort:!0}):this.setValues()},ol.ext.inherits(ol.control.SelectCheck,ol.control.SelectBase),ol.control.SelectCheck.prototype.setMap=function(t){ol.control.SelectBase.prototype.setMap.call(this,t),this.setValues()},ol.control.SelectCheck.prototype.doSelect=function(t){console.log("select"),t=t||{};var e=[];return this._checks.forEach((function(t){t.checked&&t.value&&e.push({attr:this.get("property"),op:"=",val:t.value})}).bind(this)),e.length?ol.control.SelectBase.prototype.doSelect.call(this,{features:t.features,conditions:e}):ol.control.SelectBase.prototype.doSelect.call(this,{features:t.features,matchAll:this._selectAll})},ol.control.SelectCheck.prototype.setValues=function(t){var e,i;if((t=t||{}).values)t.values instanceof Array?(i={},t.values.forEach(function(t){i[t]=t})):i=t.values;else{i={};var o=this.get("property");this.getSources().forEach((function(t){for(var e=t.getFeatures(),n=Math.min(e.length,this.get("max")),r=0;r<n;r++){var s=e[r].get(o);s&&(i[s]=s)}}).bind(this))}if(Object.keys(i).length){t.sort?(e={},Object.keys(i).sort().forEach(function(t){e[t]=i[t]})):e=i,ol.ext.element.setHTML(this._input,""),this._checks=[];var n="radio_"+(new Date).getTime(),r=(function(t,e){this._checks.push(ol.ext.element.createCheck({after:e,name:n,val:t,type:this.get("type"),change:(function(){this._onchoice?this._onchoice():this.doSelect()}).bind(this),parent:this._input}))}).bind(this);for(var s in this.get("defaultLabel")&&"radio"===this.get("type")&&r("",this.get("defaultLabel")),e)r(s,e[s])}},ol.control.SelectCondition=function(t){t||(t={});var e=t.content=ol.ext.element.create("DIV");this._check=ol.ext.element.createSwitch({after:t.label||"condition",change:(function(){this._onchoice?this._onchoice():this.doSelect()}).bind(this),parent:e}),this._input=ol.ext.element.create("DIV",{parent:e}),t.className=t.className||"ol-select-condition",ol.control.SelectBase.call(this,t),this.setCondition(t.condition),this._selectAll=t.selectAll,this._onchoice=t.onchoice},ol.ext.inherits(ol.control.SelectCondition,ol.control.SelectBase),ol.control.SelectCondition.prototype.setCondition=function(t){this._conditions=t?t instanceof Array?t:[t]:[]},ol.control.SelectCondition.prototype.addCondition=function(t){this._conditions.push(t)},ol.control.SelectCondition.prototype.doSelect=function(t){return t=t||{},this._check.checked?ol.control.SelectBase.prototype.doSelect.call(this,{features:t.features,conditions:this._conditions}):ol.control.SelectBase.prototype.doSelect.call(this,{features:t.features,matchAll:this._selectAll})},ol.control.SelectFulltext=function(t){t||(t={});var e=t.content=ol.ext.element.create("DIV");t.label&&ol.ext.element.create("LABEL",{html:t.label,parent:e}),this._input=ol.ext.element.create("INPUT",{placeHolder:t.placeHolder||"search...",change:(function(){this._onchoice&&this._onchoice()}).bind(this),parent:e}),ol.control.SelectBase.call(this,t),this._onchoice=t.onchoice,this.set("property",t.property||"name")},ol.ext.inherits(ol.control.SelectFulltext,ol.control.SelectBase),ol.control.SelectFulltext.prototype.doSelect=function(t){return t=t||{},ol.control.SelectBase.prototype.doSelect.call(this,{features:t.features,useCase:!1,conditions:[{attr:this.get("property"),op:"contain",val:this._input.value}]})},ol.control.SelectMulti=function(t){t||(t={}),t.content=ol.ext.element.create("DIV"),this._container=ol.ext.element.create("UL",{parent:t.content}),t.className=t.className||"ol-select-multi",ol.control.SelectBase.call(this,t),this._controls=[],t.controls.forEach(this.addControl.bind(this))},ol.ext.inherits(ol.control.SelectMulti,ol.control.SelectBase),ol.control.SelectMulti.prototype.setMap=function(t){this.getMap()&&this._controls.forEach((function(t){this.getMap().remveControl(t)}).bind(this)),ol.control.SelectBase.prototype.setMap.call(this,t),this.getMap()&&this._controls.forEach((function(t){this.getMap().addControl(t)}).bind(this))},ol.control.SelectMulti.prototype.addControl=function(t){t instanceof ol.control.SelectBase&&(this._controls.push(t),t.setTarget(ol.ext.element.create("LI",{parent:this._container})),t._selectAll=!0,t._onchoice=this.doSelect.bind(this),this.getMap()&&this.getMap().addControl(t))},ol.control.SelectMulti.prototype.getControls=function(){return this._controls},ol.control.SelectMulti.prototype.doSelect=function(){var t=[];return this.getSources().forEach(function(e){t=t.concat(e.getFeatures())}),this._controls.forEach(function(e){t=e.doSelect({features:t})}),this.dispatchEvent({type:"select",features:t}),t},ol.control.SelectPopup=function(t){t||(t={});var e=t.content=ol.ext.element.create("DIV");t.label&&ol.ext.element.create("LABEL",{html:t.label,parent:e}),this._input=ol.ext.element.create("SELECT",{on:{change:(function(){this._onchoice?this._onchoice():this.doSelect()}).bind(this)},parent:e}),t.className=t.className||"ol-select-popup",ol.control.SelectBase.call(this,t),this.set("property",t.property||"name"),this.set("max",t.max||1e4),this.set("defaultLabel",t.defaultLabel),this._selectAll=t.selectAll,this._onchoice=t.onchoice,this.setValues()},ol.ext.inherits(ol.control.SelectPopup,ol.control.SelectBase),ol.control.SelectPopup.prototype.setMap=function(t){ol.control.SelectBase.prototype.setMap.call(this,t),this.setValues()},ol.control.SelectPopup.prototype.doSelect=function(t){return t=t||{},this._input.value?ol.control.SelectBase.prototype.doSelect.call(this,{features:t.features,conditions:[{attr:this.get("property"),op:"=",val:this._input.value}]}):ol.control.SelectBase.prototype.doSelect.call(this,{features:t.features,matchAll:this._selectAll})},ol.control.SelectPopup.prototype.setValues=function(t){var e,i;if((t=t||{}).values)t.values instanceof Array?(i={},t.values.forEach(function(t){i[t]=t})):i=t.values;else{i={};var o=this.get("property");this.getSources().forEach((function(t){for(var e=t.getFeatures(),n=Math.min(e.length,this.get("max")),r=0;r<n;r++){var s=e[r].get(o);s&&(i[s]=s)}}).bind(this))}for(var n in t.sort?(e={},Object.keys(i).sort().forEach(function(t){e[t]=i[t]})):e=i,ol.ext.element.setHTML(this._input,""),ol.ext.element.create("OPTION",{className:"ol-default",html:this.get("defaultLabel")||"",value:"",parent:this._input}),e)ol.ext.element.create("OPTION",{html:e[n],value:n,parent:this._input})},ol.control.Status=function(t){t=t||{};var e=ol.ext.element.create("DIV",{className:(t.className||"")+" ol-status"+(t.target?"":" ol-unselectable ol-control")});ol.control.Control.call(this,{element:e,target:t.target}),this.setVisible(!1!==t.visible),t.position&&this.setPosition(t.position),this.status(t.status||"")},ol.ext.inherits(ol.control.Status,ol.control.Control),ol.control.Status.prototype.setVisible=function(t){t?this.element.classList.add("ol-visible"):this.element.classList.remove("ol-visible")},ol.control.Status.prototype.status=function(t){var e=t||"";if(e){if(ol.ext.element.show(this.element),e instanceof Element||"string"==typeof e)ol.ext.element.setHTML(this.element,e);else for(var i in e="",t)e+="<label>"+i+":</label> "+t[i]+"<br/>";ol.ext.element.setHTML(this.element,e)}else ol.ext.element.hide(this.element)},ol.control.Status.prototype.setPosition=function(t){this.element.classList.remove("ol-left"),this.element.classList.remove("ol-right"),this.element.classList.remove("ol-bottom"),this.element.classList.remove("ol-center"),/^left$|^right$|^bottom$|^center$/.test(t)&&this.element.classList.add("ol-"+t)},ol.control.Status.prototype.show=function(t){!1===t?ol.ext.element.hide(this.element):ol.ext.element.show(this.element)},ol.control.Status.prototype.hide=function(){ol.ext.element.hide(this.element)},ol.control.Status.prototype.toggle=function(){ol.ext.element.toggle(this.element)},ol.control.Status.prototype.isShown=function(){return"none"===this.element.style.display},ol.control.Storymap=function(t){t.target&&(t.html?t.html instanceof Element&&(t.html=t.html.innerHTML):t.html=t.target.innerHTML,t.target.innerHTML="");var e=ol.ext.element.create("DIV",{className:(t.className||"")+" ol-storymap"+(t.target?"":" ol-unselectable ol-control")});this.content=ol.ext.element.create("DIV",{parent:e}),ol.control.Control.call(this,{element:e,target:t.target}),ol.ext.element.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:t.minibar}),this.setStory(t.html)},ol.ext.inherits(ol.control.Storymap,ol.control.Control),ol.control.Storymap.prototype.setChapter=function(t){for(var e,i=this.content.querySelectorAll(".chapter"),o=0;e=i[o];o++)e.getAttribute("name")===t&&(this.content.scrollTop=e.offsetTop-30)},ol.control.Storymap.prototype.setStory=function(t){t instanceof Element?(this.content.innerHTML="",this.content.appendChild(t)):this.content.innerHTML=t,this.content.querySelectorAll(".chapter").forEach((function(t){t.addEventListener("click",(function(e){t.classList.contains("ol-select")?"IMG"===e.target.tagName&&e.target.dataset.title&&this.dispatchEvent({coordinate:this.getMap()?this.getMap().getCoordinateFromPixel([e.layerX,e.layerY]):null,type:"clickimage",img:e.target,title:e.target.dataset.title,element:t,name:t.getAttribute("name"),originalEvent:e}):(this.content.scrollTop=t.offsetTop-30,e.preventDefault())}).bind(this))}).bind(this));var e=this.content.querySelectorAll(".ol-scroll-next");e.forEach((function(t){t.addEventListener("click",(function(e){if(t.parentElement.classList.contains("ol-select")){for(var i,o=this.content.querySelectorAll(".chapter"),n=t.offsetTop,r=0;i=o[r];r++)if(i.offsetTop>n){n=i.offsetTop;break}this.content.scrollTop=n-30,e.stopPropagation(),e.preventDefault()}}).bind(this))}).bind(this)),(e=this.content.querySelectorAll(".ol-scroll-top")).forEach((function(t){t.addEventListener("click",(function(t){this.content.scrollTop=0,t.stopPropagation(),t.preventDefault()}).bind(this))}).bind(this));var i=(function(t){var e=[parseFloat(t.getAttribute("data-lon")),parseFloat(t.getAttribute("data-lat"))],i=ol.proj.fromLonLat(e,this.getMap().getView().getProjection()),o=parseFloat(t.getAttribute("data-zoom"));return{type:"scrollto",element:t,name:t.getAttribute("name"),coordinate:i,lon:e,zoom:o}}).bind(this),o=this.content.querySelectorAll(".chapter")[0];setTimeout((function(){o.classList.add("ol-select"),this.dispatchEvent(i(o))}).bind(this)),this.content.addEventListener("scroll",(function(){var t,e=this.content.querySelectorAll(".chapter"),n=ol.ext.element.getStyle(this.content,"height");if(this.content.scrollTop)for(var r,s=0;(r=e[s])&&!(r.offsetTop-this.content.scrollTop>n/3);s++)t=r;else t=e[0];if(t&&t!==o){o&&o.classList.remove("ol-select"),(o=t).classList.add("ol-select");var a=i(o),l=this.getMap().getView();switch(l.cancelAnimations(),o.getAttribute("data-animation")){case"flyto":l.flyTo({center:a.coordinate,zoomAt:Math.min(l.getZoom(),a.zoom)-1,zoom:a.zoom})}this.dispatchEvent(a)}}).bind(this))},ol.control.Swipe=function(t){t=t||{};var e=document.createElement("button"),i=document.createElement("div");i.className=(t.className||"ol-swipe")+" ol-unselectable ol-control",i.appendChild(e),i.addEventListener("mousedown",this.move.bind(this)),i.addEventListener("touchstart",this.move.bind(this)),ol.control.Control.call(this,{element:i}),this.precomposeRight_=this.precomposeRight.bind(this),this.precomposeLeft_=this.precomposeLeft.bind(this),this.postcompose_=this.postcompose.bind(this),this.layers=[],t.layers&&this.addLayer(t.layers,!1),t.rightLayers&&this.addLayer(t.rightLayers,!0),this.on("propertychange",(function(t){if(this.getMap())try{this.getMap().renderSync()}catch(t){}"horizontal"===this.get("orientation")?(this.element.style.top=100*this.get("position")+"%",this.element.style.left=""):("vertical"!==this.get("orientation")&&this.set("orientation","vertical"),this.element.style.left=100*this.get("position")+"%",this.element.style.top=""),"orientation"===t.key&&(this.element.classList.remove("horizontal","vertical"),this.element.classList.add(this.get("orientation"))),this.isMoving||this.layers.forEach(function(t){t.layer.getImageRatio&&t.layer.changed()})}).bind(this)),this.set("position",t.position||.5),this.set("orientation",t.orientation||"vertical")},ol.ext.inherits(ol.control.Swipe,ol.control.Control),ol.control.Swipe.prototype.setMap=function(t){var e,i;if(this.getMap()){for(e=0;e<this.layers.length;e++)(i=this.layers[e]).layer.un(["precompose","prerender"],i.right?this.precomposeRight_:this.precomposeLeft_),i.layer.un(["postcompose","postrender"],this.postcompose_);try{this.getMap().renderSync()}catch(o){}}if(ol.control.Control.prototype.setMap.call(this,t),t){for(this._listener=[],e=0;e<this.layers.length;e++)(i=this.layers[e]).layer.on(["precompose","prerender"],i.right?this.precomposeRight_:this.precomposeLeft_),i.layer.on(["postcompose","postrender"],this.postcompose_);try{t.renderSync()}catch(o){}}},ol.control.Swipe.prototype.isLayer_=function(t){for(var e=0;e<this.layers.length;e++)if(this.layers[e].layer===t)return e;return-1},ol.control.Swipe.prototype.addLayer=function(t,e){t instanceof Array||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];if(this.isLayer_(o)<0&&(this.layers.push({layer:o,right:e}),this.getMap())){o.on(["precompose","prerender"],e?this.precomposeRight_:this.precomposeLeft_),o.on(["postcompose","postrender"],this.postcompose_);try{this.getMap().renderSync()}catch(n){}}}},ol.control.Swipe.prototype.removeLayers=function(){var t=[];this.layers.forEach(function(e){t.push(e.layer)}),this.removeLayer(t)},ol.control.Swipe.prototype.removeLayer=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var i=this.isLayer_(t[e]);i>=0&&this.getMap()&&(t[e].un(["precompose","prerender"],this.layers[i].right?this.precomposeRight_:this.precomposeLeft_),t[e].un(["postcompose","postrender"],this.postcompose_),this.layers.splice(i,1))}if(this.getMap())try{this.getMap().renderSync()}catch(o){}},ol.control.Swipe.prototype.getRectangle=function(){var t;return"vertical"===this.get("orientation")?[0,0,(t=this.getMap().getSize())[0]*this.get("position"),t[1]]:[0,0,(t=this.getMap().getSize())[0],t[1]*this.get("position")]},ol.control.Swipe.prototype.move=function(t){var e,i=this;switch(this._movefn||(this._movefn=this.move.bind(this)),t.type){case"touchcancel":case"touchend":case"mouseup":i.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(function(t){document.removeEventListener(t,i._movefn)}),this.layers.forEach(function(t){t.layer.getImageRatio&&t.layer.changed()});break;case"mousedown":case"touchstart":i.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(function(t){document.addEventListener(t,i._movefn)});case"mousemove":case"touchmove":if(i.isMoving)if("vertical"===i.get("orientation")){var o=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX;if(!o)break;o-=i.getMap().getTargetElement().getBoundingClientRect().left+window.pageXOffset-document.documentElement.clientLeft;var n=(e=i.getMap().getSize()[0])-Math.min(Math.max(0,e-o),e);i.set("position",e=n/e),i.dispatchEvent({type:"moving",size:[n,i.getMap().getSize()[1]],position:[e,0]})}else{var r=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY;if(!r)break;r-=i.getMap().getTargetElement().getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop;var s=(e=i.getMap().getSize()[1])-Math.min(Math.max(0,e-r),e);i.set("position",e=s/e),i.dispatchEvent({type:"moving",size:[i.getMap().getSize()[0],s],position:[0,e]})}}},ol.control.Swipe.prototype._transformPt=function(t,e){var i=t.inversePixelTransform,o=e[0],n=e[1];return e[0]=i[0]*o+i[2]*n+i[4],e[1]=i[1]*o+i[3]*n+i[5],e},ol.control.Swipe.prototype._drawRect=function(t,e){var i=t.inversePixelTransform;if(i){var o=[[e[0][0],e[0][1]],[e[0][0],e[1][1]],[e[1][0],e[1][1]],[e[1][0],e[0][1]],[e[0][0],e[0][1]]];if(t.context.save(),t.target.getImageRatio){var n=-Math.atan2(t.frameState.pixelToCoordinateTransform[1],t.frameState.pixelToCoordinateTransform[0]);t.context.translate(t.frameState.size[0]/2,t.frameState.size[1]/2),t.context.rotate(n),t.context.translate(-t.frameState.size[0]/2,-t.frameState.size[1]/2)}o.forEach(function(e,o){e=[e[0]*i[0]-e[1]*i[1]+i[4],-e[0]*i[2]+e[1]*i[3]+i[5]],o?t.context.lineTo(e[0],e[1]):t.context.moveTo(e[0],e[1])}),t.context.restore()}else{var r=t.frameState.pixelRatio;t.context.rect(e[0][0]*r,e[0][1]*r,e[1][0]*r,e[1][1]*r)}},ol.control.Swipe.prototype.precomposeLeft=function(t){var e=t.context;if(e instanceof WebGLRenderingContext){if("prerender"===t.type){e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.SCISSOR_TEST);var i=this.getMap().getSize(),o=this._transformPt(t,[0,i[1]]),n=this._transformPt(t,[i[0],0]),r=n[0]-o[0],s=n[1]-o[1];"vertical"===this.get("orientation")?r=Math.round(r*this.get("position")):(s=Math.round(s*this.get("position")),o[1]+=i[1]-s),e.scissor(o[0],o[1],r,s)}}else{var a=t.frameState.size;e.save(),e.beginPath();var l=[[0,0],[a[0],a[1]]];l[1]="vertical"===this.get("orientation")?[.5*a[0]+this.getMap().getSize()[0]*(this.get("position")-.5),a[1]]:[a[0],.5*a[1]+this.getMap().getSize()[1]*(this.get("position")-.5)],this._drawRect(t,l),e.clip()}},ol.control.Swipe.prototype.precomposeRight=function(t){var e=t.context;if(e instanceof WebGLRenderingContext){if("prerender"===t.type){e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.SCISSOR_TEST);var i=this.getMap().getSize(),o=this._transformPt(t,[0,i[1]]),n=this._transformPt(t,[i[0],0]),r=n[0]-o[0],s=n[1]-o[1];"vertical"===this.get("orientation")?(r=Math.round(r*(1-this.get("position"))),o[0]+=i[0]-r):s=Math.round(s*(1-this.get("position"))),e.scissor(o[0],o[1],r,s)}}else{var a=t.frameState.size;e.save(),e.beginPath();var l=[[0,0],[a[0],a[1]]];l[0]="vertical"===this.get("orientation")?[.5*a[0]+this.getMap().getSize()[0]*(this.get("position")-.5),0]:[0,.5*a[1]+this.getMap().getSize()[1]*(this.get("position")-.5)],this._drawRect(t,l),e.clip()}},ol.control.Swipe.prototype.postcompose=function(t){if(t.context instanceof WebGLRenderingContext){if("postrender"===t.type){var e=t.context;e.disable(e.SCISSOR_TEST)}}else t.target.getClassName&&"ol-layer"!==t.target.getClassName()&&t.target.get("declutter")?setTimeout(function(){t.context.restore()},0):t.context.restore()},ol.control.SwipeMap=function(t){t=t||{};var e=document.createElement("button"),i=document.createElement("div");i.className=(t.className||"ol-swipe")+" ol-unselectable ol-control",i.appendChild(e),i.addEventListener("mousedown",this.move.bind(this)),i.addEventListener("touchstart",this.move.bind(this)),ol.control.Control.call(this,{element:i}),this.on("propertychange",(function(t){"horizontal"===this.get("orientation")?(this.element.style.top=100*this.get("position")+"%",this.element.style.left=""):("vertical"!==this.get("orientation")&&this.set("orientation","vertical"),this.element.style.left=100*this.get("position")+"%",this.element.style.top=""),"orientation"===t.key&&(this.element.classList.remove("horizontal","vertical"),this.element.classList.add(this.get("orientation"))),this._clip()}).bind(this)),this.on("change:active",this._clip.bind(this)),this.set("position",t.position||.5),this.set("orientation",t.orientation||"vertical"),this.set("right",t.right)},ol.ext.inherits(ol.control.SwipeMap,ol.control.Control),ol.control.SwipeMap.prototype.setMap=function(t){this.getMap()&&(this._listener&&ol.Observable.unByKey(this._listener),this.getMap().getViewport().querySelector(".ol-layers").style.clip=""),ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener=t.on("change:size",this._clip.bind(this)))},ol.control.SwipeMap.prototype._clip=function(){if(this.getMap()){var t=this.getMap().getViewport().querySelector(".ol-layers"),e=this.getRectangle();t.style.clip="rect("+e[1]+"px,"+e[2]+"px,"+e[3]+"px,"+e[0]+"px)"}},ol.control.SwipeMap.prototype.getRectangle=function(){var t=this.getMap().getSize();return"vertical"===this.get("orientation")?this.get("right")?[t[0]*this.get("position"),0,t[0],t[1]]:[0,0,t[0]*this.get("position"),t[1]]:this.get("right")?[0,t[1]*this.get("position"),t[0],t[1]]:[0,0,t[0],t[1]*this.get("position")]},ol.control.SwipeMap.prototype.move=function(t){var e,i=this;switch(this._movefn||(this._movefn=this.move.bind(this)),t.type){case"touchcancel":case"touchend":case"mouseup":i.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(function(t){document.removeEventListener(t,i._movefn)});break;case"mousedown":case"touchstart":i.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(function(t){document.addEventListener(t,i._movefn)});case"mousemove":case"touchmove":if(i.isMoving)if("vertical"===i.get("orientation")){var o=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX;if(!o)break;o-=i.getMap().getTargetElement().getBoundingClientRect().left+window.pageXOffset-document.documentElement.clientLeft;var n=(e=i.getMap().getSize()[0])-Math.min(Math.max(0,e-o),e);i.set("position",e=n/e),i.dispatchEvent({type:"moving",size:[n,i.getMap().getSize()[1]],position:[e,0]})}else{var r=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY;if(!r)break;r-=i.getMap().getTargetElement().getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop;var s=(e=i.getMap().getSize()[1])-Math.min(Math.max(0,e-r),e);i.set("position",e=s/e),i.dispatchEvent({type:"moving",size:[i.getMap().getSize()[0],s],position:[0,e]})}}},ol.control.Target=function(t){this.style=(t=t||{}).style||[new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#fff",width:3})})}),new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#000",width:1})})})],this.style instanceof Array||(this.style=[this.style]),this.composite=t.composite||"";var e=document.createElement("div");e.className="ol-target ol-unselectable ol-control",ol.control.CanvasBase.call(this,{element:e,target:t.target}),this.setVisible(!1!==t.visible)},ol.ext.inherits(ol.control.Target,ol.control.CanvasBase),ol.control.Target.prototype.setVisible=function(t){if(this.set("visible",t),this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.control.Target.prototype.getVisible=function(){return this.get("visible")},ol.control.Target.prototype._draw=function(t){var e=this.getContext(t);if(e&&this.getMap()&&this.getVisible()){var i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var o=e.canvas.width/(2*i),n=e.canvas.height/(2*i),r=new ol.geom.Point(this.getMap().getCoordinateFromPixel([o,n]));this.composite&&(e.globalCompositeOperation=this.composite);for(var s=0;s<this.style.length;s++){var a=this.style[s];if(a instanceof ol.style.Style){var l=t.vectorContext;l||(l=ol.render.getVectorContext({inversePixelTransform:[i,0,0,i,0,0],context:e,frameState:{pixelRatio:i,extent:t.frameState.extent,coordinateToPixelTransform:t.frameState.coordinateToPixelTransform,viewState:t.frameState.viewState}})),l.setStyle(a),l.drawGeometry(r)}}e.restore()}},ol.control.TextButton=function(t){(t=t||{}).className=(t.className||"")+" ol-text-button",ol.control.Button.call(this,t)},ol.ext.inherits(ol.control.TextButton,ol.control.Button),ol.control.Timeline=function(t){var e=ol.ext.element.create("DIV",{className:(t.className||"")+" ol-timeline"+(t.target?"":" ol-unselectable ol-control")+(t.zoomButton?" ol-hasbutton":"")});ol.control.Control.call(this,{element:e,target:t.target}),this._scrollDiv=ol.ext.element.create("DIV",{className:"ol-scroll",parent:this.element}),this._buttons=ol.ext.element.create("DIV",{className:"ol-buttons",parent:this.element}),t.zoomButton&&(this.addButton({className:"ol-zoom-in",handleClick:(function(){var t=this.get("zoom");t>=1?t++:t=Math.min(1,t+.1),t=Math.round(100*t)/100,this.refresh(t)}).bind(this)}),this.addButton({className:"ol-zoom-out",handleClick:(function(){var t=this.get("zoom");t>1?t--:t-=.1,t=Math.round(100*t)/100,this.refresh(t)}).bind(this)})),this._intervalDiv=ol.ext.element.create("DIV",{className:"ol-center-date",parent:this.element}),this.element.addEventListener("mouseover",(function(){this._select&&this._select.elt.classList.remove("ol-select")}).bind(this));var i=null;this._scrollDiv.addEventListener("scroll",(function(){this._setScrollLeft(),i&&(clearTimeout(i),i=null),i=setTimeout((function(){this.dispatchEvent({type:"scroll",date:this.getDate(),dateStart:this.getDate("start"),dateEnd:this.getDate("end")})}).bind(this),t.scrollTimeout||15)}).bind(this)),ol.ext.element.scrollDiv(this._scrollDiv,{onmove:(function(t){this._moving=t}).bind(this)}),this._tline=[],this._scrollLeft=0,this.set("maxWidth",t.maxWidth||2e3),this.set("minDate",t.minDate||1/0),this.set("maxDate",t.maxDate||-1/0),this.set("graduation",t.graduation),this.set("minZoom",t.minZoom||.2),this.set("maxZoom",t.maxZoom||4),this.setInterval(t.interval),t.getHTML&&(this._getHTML=t.getHTML),t.getFeatureDate&&(this._getFeatureDate=t.getFeatureDate),t.endFeatureDate&&(this._endFeatureDate=t.endFeatureDate),this.setFeatures(t.features||t.source,t.zoom)},ol.ext.inherits(ol.control.Timeline,ol.control.Control),ol.control.Timeline.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t),this.refresh(this.get("zoom")||1,!0)},ol.control.Timeline.prototype.addButton=function(t){this.element.classList.add("ol-hasbutton"),ol.ext.element.create("BUTTON",{className:t.className||void 0,title:t.title,html:t.html,click:t.handleClick,parent:this._buttons})},ol.control.Timeline.prototype.setInterval=function(t){"string"==typeof t&&(t=/s$/.test(t)?1e3*parseFloat(t):/mn$/.test(t)?1e3*parseFloat(t)*60:/h$/.test(t)?1e3*parseFloat(t)*3600:/d$/.test(t)?1e3*parseFloat(t)*3600*24:/y$/.test(t)?1e3*parseFloat(t)*3600*24*365:0),this.set("interval",t||0),t?this.element.classList.add("ol-interval"):this.element.classList.remove("ol-interval"),this.refresh(this.get("zoom"))},ol.control.Timeline.prototype._getHTML=function(t){return t.get("name")||""},ol.control.Timeline.prototype._getFeatureDate=function(t){return t&&t.get?t.get("date"):null},ol.control.Timeline.prototype._endFeatureDate=function(){},ol.control.Timeline.prototype.isCollapsed=function(){return this.element.classList.contains("ol-collapsed")},ol.control.Timeline.prototype.collapse=function(t){t?this.element.classList.add("ol-collapsed"):this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"collapse",collapsed:this.isCollapsed()})},ol.control.Timeline.prototype.toggle=function(){this.element.classList.toggle("ol-collapsed"),this.dispatchEvent({type:"collapse",collapsed:this.isCollapsed()})},ol.control.Timeline.prototype.setFeatures=function(t,e){this._features=this._source=null,t instanceof ol.source.Vector?this._source=t:this._features=t instanceof Array?t:[],this.refresh(e)},ol.control.Timeline.prototype.getFeatures=function(){return this._features||this._source.getFeatures()},ol.control.Timeline.prototype.refresh=function(t,e){if(this.getMap()){t||(t=this.get("zoom")),t=Math.min(this.get("maxZoom"),Math.max(this.get("minZoom"),t||1)),this.set("zoom",t),this._scrollDiv.innerHTML="";var i,o,n=this.getFeatures(),r=this._tline=[];n.forEach((function(t){(i=this._getFeatureDate(t))&&(i instanceof Date||(i=new Date(i)),this._endFeatureDate&&((o=this._endFeatureDate(t))instanceof Date||(o=new Date(o))),isNaN(i)||r.push({date:i,end:isNaN(o)?null:o,feature:t}))}).bind(this)),r.sort(function(t,e){return t.date<e.date?-1:t.date===e.date?0:1});var s=ol.ext.element.create("DIV",{parent:this._scrollDiv}),a=this._minDate=Math.min(this.get("minDate"),r.length?r[0].date:1/0),l=this._maxDate=Math.max(this.get("maxDate"),r.length?r[r.length-1].date:-1/0);isFinite(a)||(this._minDate=a=new Date),isFinite(l)||(this._maxDate=l=new Date);var c=l-a,h=this.get("maxWidth"),u=this._scale=(c>h?h/c:1)*t;c=(l-(a=this._minDate=this._minDate-10/u))*u,ol.ext.element.setStyle(s,{width:c,maxWidth:"unset"}),this._drawTime(s,a,l,u),this.get("interval")?ol.ext.element.setStyle(this._intervalDiv,{width:this.get("interval")*u}):ol.ext.element.setStyle(this._intervalDiv,{width:""});var d=[],p=ol.ext.element.getStyle(this._scrollDiv,"lineHeight"),g=ol.ext.element.create("DIV",{className:"ol-features",parent:s});r.forEach((function(t){for(var e=t.date,i=t.elt=ol.ext.element.create("DIV",{className:"ol-feature",style:{left:Math.round((e-a)*u)},html:this._getHTML(t.feature),parent:g}),o=i.querySelectorAll("img"),n=0;n<o.length;n++)o[n].ondragstart=function(){return!1};t.end&&ol.ext.element.setStyle(i,{minWidth:(t.end-e)*u,width:(t.end-e)*u,maxWidth:"unset"});var r,s,l=ol.ext.element.getStyle(i,"left");for(i.addEventListener("click",(function(){this._moving||this.dispatchEvent({type:"select",feature:t.feature})}).bind(this)),r=0;(s=d[r])&&!(l>s);r++);d[r]=l+ol.ext.element.getStyle(i,"width"),ol.ext.element.setStyle(i,{top:r*p})}).bind(this)),this._nbline=d.length,e&&this.setDate(this._minDate,{anim:!1,position:"start"}),this.dispatchEvent({type:"scroll",date:this.getDate(),dateStart:this.getDate("start"),dateEnd:this.getDate("end")})}},ol.control.Timeline.prototype._getOffsetFromDate=function(t){return(t-this._minDate)*this._scale},ol.control.Timeline.prototype._getDateFromOffset=function(t){return t/this._scale+this._minDate},ol.control.Timeline.prototype._setScrollLeft=function(t){this._scrollLeft=t,void 0!==t&&(this._scrollDiv.scrollLeft=t)},ol.control.Timeline.prototype._getScrollLeft=function(){return void 0===this._scrollLeft?this._scrollDiv.scrollLeft:this._scrollLeft},ol.control.Timeline.prototype._drawTime=function(t,e,i,o){var n,r,s,a,l=ol.ext.element.create("DIV",{className:"ol-times",parent:t}),c=ol.ext.element.getStyle(l,"left"),h=ol.ext.element.getStyle(l,"height"),u=new Date(this._minDate).getFullYear();r=(new Date(0).setFullYear(String(u))-new Date(0).setFullYear(String(u-1)))*o;for(var d=Math.round(2*h/r)+1;!((n=new Date(0).setFullYear(u))>this._maxDate);)ol.ext.element.create("DIV",{className:"ol-time ol-year",style:{left:this._getOffsetFromDate(n)-c},html:u,parent:l}),u+=d;if(/day|month/.test(this.get("graduation"))&&(r=(new Date(0,0,1).setFullYear(String(u))-new Date(0,0,1).setFullYear(String(u-1)))*o,(a=Math.max(1,Math.round(12/Math.round(r/h/2))))<12))for(u=new Date(this._minDate).getFullYear(),s=a+1;(n=new Date(0,0,1)).setFullYear(u),n.setMonth(s-1),!(n>this._maxDate);)ol.ext.element.create("DIV",{className:"ol-time ol-month",style:{left:this._getOffsetFromDate(n)-c},html:n.toLocaleDateString(void 0,{month:"short"}),parent:l}),(s+=a)>12&&(u++,s=a+1);if("day"===this.get("graduation")){r=(new Date(0,1,1)-new Date(0,0,1))*o;var p=Math.max(1,Math.round(31/Math.round(r/h/2)));if(p<31){u=new Date(this._minDate).getFullYear(),s=0;for(var g=p;;)if((n=new Date(0,0,1)).setFullYear(u),n.setMonth(s),n.setDate(g),isNaN(n))++s>12&&(s=1,u++),g=p;else{if(n>this._maxDate)break;if(g>1){var f=this._getOffsetFromDate(n);this._getOffsetFromDate(new Date(u,s+1,1))-f>h&&ol.ext.element.create("DIV",{className:"ol-time ol-day",style:{left:f-c},html:g,parent:l})}u=n.getFullYear(),s=n.getMonth(),(g=n.getDate()+p)>new Date(u,s+1,0).getDate()&&(s++,g=p)}}}},ol.control.Timeline.prototype.setDate=function(t,e){var i;if(e=e||{},t instanceof Date?i=t:(this.getFeatures().indexOf(t)>=0&&(i=this._getFeatureDate(t)),!i||i instanceof Date||(i=new Date(i)),i&&!isNaN(i)||(i=new Date(String(t)))),!isNaN(i)){!1===e.anim&&this._scrollDiv.classList.add("ol-move");var o=this._getOffsetFromDate(i);if("start"===e.position?o+=ol.ext.element.outerWidth(this._scrollDiv)/2-ol.ext.element.getStyle(this._scrollDiv,"marginLeft")/2:"end"===e.position&&(o-=ol.ext.element.outerWidth(this._scrollDiv)/2-ol.ext.element.getStyle(this._scrollDiv,"marginLeft")/2),this._setScrollLeft(o),!1===e.anim&&this._scrollDiv.classList.remove("ol-move"),t)for(var n,r=0;n=this._tline[r];r++)n.feature===t?(n.elt.classList.add("ol-select"),this._select=n):n.elt.classList.remove("ol-select")}},ol.control.Timeline.prototype.roundDate=function(t,e){switch(e){case"mn":return new Date(this._roundTo(t,6e4));case"hour":return new Date(this._roundTo(t,36e5));case"day":return new Date(this._roundTo(t,864e5));case"month":return(t=new Date(this._roundTo(t,864e5))).getDate()>15&&(t=new Date(t.setMonth(t.getMonth()+1))),t=t.setDate(1),new Date(t);default:return new Date(t)}},ol.control.Timeline.prototype.getDate=function(t,e){var i;switch(e||(e=t),t){case"start":i=this.get("interval")?-ol.ext.element.getStyle(this._intervalDiv,"width")/2+ol.ext.element.getStyle(this._scrollDiv,"marginLeft")/2:-ol.ext.element.outerWidth(this._scrollDiv)/2+ol.ext.element.getStyle(this._scrollDiv,"marginLeft")/2;break;case"end":i=this.get("interval")?ol.ext.element.getStyle(this._intervalDiv,"width")/2-ol.ext.element.getStyle(this._scrollDiv,"marginLeft")/2:ol.ext.element.outerWidth(this._scrollDiv)/2-ol.ext.element.getStyle(this._scrollDiv,"marginLeft")/2;break;default:i=0}var o=this._getDateFromOffset(this._getScrollLeft()+i);return o=this.roundDate(o,e),new Date(o)},ol.control.Timeline.prototype._roundTo=function(t,e){return Math.round(t/e)*e},ol.control.Timeline.prototype.getStartDate=function(){return new Date(this.get("minDate"))},ol.control.Timeline.prototype.getEndDate=function(){return new Date(this.get("maxDate"))},ol.control.VideoRecorder=function(t){t||(t={});var e=ol.ext.element.create("DIV",{className:(t.className||"ol-videorec")+" ol-unselectable ol-control"});ol.ext.element.create("BUTTON",{type:"button",className:"ol-start",title:"start",click:(function(){this.start()}).bind(this),parent:e}),ol.ext.element.create("BUTTON",{type:"button",className:"ol-stop",title:"stop",click:(function(){this.stop()}).bind(this),parent:e}),ol.ext.element.create("BUTTON",{type:"button",className:"ol-pause",title:"pause",click:(function(){this.pause()}).bind(this),parent:e}),ol.ext.element.create("BUTTON",{type:"button",className:"ol-resume",title:"resume",click:(function(){this.resume()}).bind(this),parent:e}),ol.control.Control.call(this,{element:e,target:t.target}),this.set("framerate",30),this.set("videoBitsPerSecond",5e6),"DIALOG"===t.videoTarget?(this._dialog=new ol.control.Dialog({className:"ol-fullscreen-dialog",target:document.body,closeBox:!0}),this._videoTarget=this._dialog.getContentElement()):this._videoTarget=t.videoTarget,this._printCtrl=new ol.control.Print({target:ol.ext.element.create("DIV")})},ol.ext.inherits(ol.control.VideoRecorder,ol.control.Control),ol.control.VideoRecorder.prototype.setMap=function(t){this.getMap()&&(this.getMap().removeControl(this._printCtrl),this._dialog&&this.getMap().removeControl(this._dialog)),ol.control.Control.prototype.setMap.call(this,t),this.getMap()&&(this.getMap().addControl(this._printCtrl),this._dialog&&this.getMap().addControl(this._dialog))},ol.control.VideoRecorder.prototype.start=function(){var t=this._printCtrl,e=!1;function i(o){e||t.fastPrint({canvas:o},i)}t.fastPrint({},(function(t){var o;try{o=t.captureStream(this.get("framerate")||30)}catch(r){return void this.dispatchEvent({type:"error",error:r})}this._mediaRecorder=new MediaRecorder(o,{videoBitsPerSecond:this.get("videoBitsPerSecond")||5e6});var n=[];this._mediaRecorder.ondataavailable=function(t){n.push(t.data)},this._mediaRecorder.onstop=(function(){e=!0;var t,i=new Blob(n,{type:"video/mp4"});n=[],this._videoTarget instanceof Element?("VIDEO"===this._videoTarget.tagName?t=this._videoTarget:(t=this._videoTarget.querySelector("video"))||(t=ol.ext.element.create("VIDEO",{controls:"",parent:this._videoTarget})),this._dialog&&this._dialog.show(),t.src=URL.createObjectURL(i),this.dispatchEvent({type:"stop",videoURL:t.src})):this.dispatchEvent({type:"stop",videoURL:URL.createObjectURL(i)})}).bind(this),this._mediaRecorder.onpause=(function(){e=!0,this.dispatchEvent({type:"pause"})}).bind(this),this._mediaRecorder.onresume=(function(){e=!1,i(t),this.dispatchEvent({type:"resume"})}).bind(this),this._mediaRecorder.onerror=(function(t){this.dispatchEvent({type:"error",error:t})}).bind(this),e=!1,i(t),this._mediaRecorder.start(),this.dispatchEvent({type:"start",canvas:t}),this.element.setAttribute("data-state","rec")}).bind(this))},ol.control.VideoRecorder.prototype.stop=function(){this._mediaRecorder&&(this._mediaRecorder.stop(),this._mediaRecorder=null,this.element.setAttribute("data-state","inactive"))},ol.control.VideoRecorder.prototype.pause=function(){this._mediaRecorder&&(this._mediaRecorder.pause(),this.element.setAttribute("data-state","pause"))},ol.control.VideoRecorder.prototype.resume=function(){this._mediaRecorder&&(this._mediaRecorder.resume(),this.element.setAttribute("data-state","rec"))},ol.control.WMSCapabilities=function(t){t=t||{};var e=Object.assign({},t||{});this._proxy=t.proxy,e.target===document.body&&delete e.target,e.target?(e.className=((e.className||"")+" ol-wmscapabilities ol-hidden").trim(),delete e.target):(e.className=((e.className||"")+" ol-wmscapabilities").trim(),e.handleClick=(function(){this.showDialog()}).bind(this)),ol.control.Button.call(this,e),this.set("srs",t.srs||[]),this.set("cors",t.cors),this.set("trace",t.trace),this.set("title",t.title),this.set("loadLabel",t.loadLabel),this.set("optional",t.optional),this.createDialog(t),this._elements.formVersion.value="1.0.0";var i=this._getParser();this._ajax=new ol.ext.Ajax({dataType:"text",auth:t.authentication}),this._ajax.on("success",(function(t){var e;try{e=i.read(t.response)}catch(o){this.showError({type:"load",error:o})}e&&(e.Capability.Layer.Layer?this.showCapabilities(e):this.showError({type:"noLayer"})),this.dispatchEvent({type:"capabilities",capabilities:e}),"function"==typeof t.options.callback&&t.options.callback(e)}).bind(this)),this._ajax.on("error",(function(t){this.showError({type:"load",error:t}),this.dispatchEvent({type:"capabilities"})}).bind(this)),this._ajax.on("loadstart",(function(){this._elements.element.classList.add("ol-searching")}).bind(this)),this._ajax.on("loadend",(function(){this._elements.element.classList.remove("ol-searching")}).bind(this)),t.onselect&&this.on("load",function(e){t.onselect(e.layer,e.options)})},ol.ext.inherits(ol.control.WMSCapabilities,ol.control.Button),ol.control.WMSCapabilities.prototype._getParser=function(){return new ol.format.WMSCapabilities},ol.control.WMSCapabilities.prototype.error={load:"Can't retrieve service capabilities, try to add it manually...",badUrl:"The input value is not a valid url...",TileMatrix:"No TileMatrixSet supported...",noLayer:"No layer available for this service...",srs:"The service projection looks different from that of your map, it may not display correctly..."},ol.control.WMSCapabilities.prototype.labels={formTitle:"Title:",formLayer:"Layers:",formMap:"Map:",formStyle:"Style:",formFormat:"Format:",formMinZoom:"Min zoom level:",formMaxZoom:"Max zoom level:",formExtent:"Extent:",mapExtent:"use map extent...",formProjection:"Projection:",formCrossOrigin:"CrossOrigin:",formVersion:"Version:",formAttribution:"Attribution:"},ol.control.WMSCapabilities.prototype.createDialog=function(t){var e=t.target;e&&e!==document.body||(this._dialog=new ol.control.Dialog({className:"ol-wmscapabilities",closeBox:!0,closeOnSubmit:!1,target:t.target}),this._dialog.on("button",(function(t){"submit"===t.button&&this.getCapabilities(t.inputs.url.value)}).bind(this)),e=null);var i=ol.ext.element.create("DIV",{className:("ol-wmscapabilities "+(t.className||"")).trim(),parent:e});this._elements={element:e||i};var o=ol.ext.element.create("DIV",{className:"ol-url",parent:i}),n=this._elements.input=ol.ext.element.create("INPUT",{className:"url",type:"text",tabIndex:1,placeholder:t.placeholder||"service url...",autocorrect:"off",autocapitalize:"off",parent:o});if(n.addEventListener("keyup",(function(e){13===e.keyCode&&this.getCapabilities(n.value,t)}).bind(this)),t.services){var r=ol.ext.element.create("SELECT",{className:"url",on:{change:(function(e){this.getCapabilities(e.target.options[e.target.selectedIndex].value,t),e.target.selectedIndex=0}).bind(this)},parent:o});for(var s in ol.ext.element.create("OPTION",{html:" ",parent:r}),t.services)ol.ext.element.create("OPTION",{html:s,value:t.services[s],parent:r})}ol.ext.element.create("BUTTON",{click:(function(){this.getCapabilities(n.value,t)}).bind(this),html:t.searchLabel||"search",parent:o}),this._elements.error=ol.ext.element.create("DIV",{className:"ol-error",parent:o});var a=this._elements.result=ol.ext.element.create("DIV",{className:"ol-result",parent:i}),l=ol.ext.element.create("DIV",{className:"ol-preview",html:t.previewLabel||"preview",parent:a});this._elements.preview=ol.ext.element.create("IMG",{parent:l}),this._img=new Image,this._img.crossOrigin="Anonymous",this._img.addEventListener("error",(function(){l.className="ol-preview tainted",this._elements.formCrossOrigin.checked=!1}).bind(this)),this._img.addEventListener("load",(function(){l.className="ol-preview ok",this._elements.formCrossOrigin.checked=!0}).bind(this)),this._elements.select=ol.ext.element.create("DIV",{className:"ol-select-list",tabIndex:2,parent:a}),this._elements.data=ol.ext.element.create("DIV",{className:"ol-data",parent:a}),this._elements.buttons=ol.ext.element.create("DIV",{className:"ol-buttons",parent:a}),this._elements.legend=ol.ext.element.create("IMG",{className:"ol-legend",parent:a});var c=this._elements.form=ol.ext.element.create("UL",{className:"ol-wmsform",parent:i}),h=(function(t,e,i){var o=ol.ext.element.create("LI",{parent:c});if(ol.ext.element.create("LABEL",{html:this.labels[t],parent:o}),"boolean"==typeof e)this._elements[t]=ol.ext.element.create("INPUT",{type:"checkbox",checked:e,parent:o});else if(e instanceof Array){var n=this._elements[t]=ol.ext.element.create("SELECT",{parent:o});e.forEach((function(t){ol.ext.element.create("OPTION",{html:t,value:t,parent:n})}).bind(this))}else this._elements[t]=ol.ext.element.create("INPUT",{value:void 0===e?"":e,placeholder:i||"",type:typeof e,parent:o});return o}).bind(this);h("formTitle"),h("formLayer","","layer1,layer2,...");var u=h("formMap");u.setAttribute("data-param","map"),(u=h("formStyle")).setAttribute("data-param","style"),h("formFormat",["image/png","image/jpeg"]),h("formMinZoom",0),h("formMaxZoom",20),(u=h("formExtent","","xmin,ymin,xmax,ymax")).setAttribute("data-param","extent");var d=u.querySelector("input");return ol.ext.element.create("BUTTON",{title:this.labels.mapExtent,click:(function(){d.value=this.getMap().getView().calculateExtent(this.getMap().getSize()).join(",")}).bind(this),parent:u}),(u=h("formProjection","")).setAttribute("data-param","proj"),h("formCrossOrigin",!1),(u=h("formVersion","1.3.0")).setAttribute("data-param","version"),h("formAttribution",""),ol.ext.element.create("BUTTON",{html:this.get("loadLabel")||"Load",click:(function(){var t=this._getFormOptions(),e=this.getLayerFromOptions(t);this.dispatchEvent({type:"load",layer:e,options:t}),this._dialog.hide()}).bind(this),parent:c}),i},ol.control.WMSCapabilities.prototype.getLayerFromOptions=function(t){t.layer.source=new ol.source.TileWMS(t.source);var e=new ol.layer.Tile(t.layer);return delete t.layer.source,e},ol.control.WMSCapabilities.prototype.setMap=function(t){ol.control.Button.prototype.setMap.call(this,t),this._dialog&&this._dialog.setMap(t)},ol.control.WMSCapabilities.prototype.getDialog=function(){return this._dialog},ol.control.WMSCapabilities.prototype.showDialog=function(t,e){this.showError(),this._elements.formProjection.value||(this._elements.formProjection.value=this.getMap().getView().getProjection().getCode()),this._dialog&&this._dialog.show({title:void 0===this.get("title")?"WMS":this.get("title"),content:this._elements.element}),this.getCapabilities(t,e);var i=this._elements.select.querySelector(".selected");i&&(this._elements.select.scrollTop=i.offsetTop-20)},ol.control.WMSCapabilities.prototype.testUrl=function(t){return!!new RegExp("^(https?:\\/\\/)((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=\\/-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)},ol.control.WMSCapabilities.prototype.getRequestParam=function(t){return{SERVICE:"WMS",REQUEST:"GetCapabilities",VERSION:t.version||"1.3.0"}},ol.control.WMSCapabilities.prototype.getCapabilities=function(t,e){if(t)if(this.testUrl(t)){e=e||{};var i=(t=t.split("?"))[1];t=t[0],this._elements.formMap.value="",this._elements.formLayer.value="",this._elements.formStyle.value="",this._elements.formTitle.value="",this._elements.formProjection.value=this.getMap().getView().getProjection().getCode(),this._elements.formFormat.selectedIndex=0;var o=e.map||"",n={};i&&(i=i.replace(/^\?/,"").split("&")).forEach((function(t){if((t=t.split("="))[1]=decodeURIComponent(t[1]||""),/^map$/i.test(t[0])&&(this._elements.formMap.value=o=t[1]),/^layers$/i.test(t[0])&&(this._elements.formLayer.value=t[1],this._elements.formTitle.value=t[1].split(",")[0]),/^style$/i.test(t[0])&&(this._elements.formStyle.value=t[1]),/^crs$/i.test(t[0])&&(this._elements.formProjection.value=t[1]),/^format$/i.test(t[0]))for(var e,i=0;e=this._elements.formFormat.options[i];i++)if(e.value===t[1]){this._elements.formFormat.selectedIndex=i;break}this.get("optional")&&this.get("optional").split(",").forEach((function(e){e===t[0]&&(n[e]=t[1])}).bind(this))}).bind(this));var r=this.getRequestParam(e),s=[];for(var a in o&&(r.MAP=o,s.push("map="+o)),n)r[a]=n[a],s.push(a+"="+n[a]);if(this._elements.input.value=(t||"")+(s?"?"+s.join("&"):""),this.clearForm(),this._proxy){var l="";for(var c in r)l+=(l?"&":"")+c+"="+r[c];this._ajax.send(this._proxy,{url:l},{timeout:e.timeout||1e4,callback:e.onload,abort:!1})}else this._ajax.send(t,r,{timeout:e.timeout||1e4,callback:e.onload,abort:!1})}else this.showError({type:"badUrl"})},ol.control.WMSCapabilities.prototype.showError=function(t){this._elements.error.innerHTML=t?this.error[t.type]||"ERROR ("+t.type+")":"",t&&"load"===t.type?this._elements.form.classList.add("visible"):this._elements.form.classList.remove("visible")},ol.control.WMSCapabilities.prototype.clearForm=function(){this._elements.result.classList.remove("ol-visible"),this.showError(),this._elements.select.innerHTML="",this._elements.data.innerHTML="",this._elements.preview.src="",this._elements.legend.src="",this._elements.legend.classList.remove("visible")},ol.control.WMSCapabilities.prototype.showCapabilities=function(t){this._elements.result.classList.add("ol-visible");var e=[],i=(function(o,n){n=n||0,o.Layer.forEach((function(r){r.Attribution||(r.Attribution=o.Attribution),r.EX_GeographicBoundingBox||(r.EX_GeographicBoundingBox=o.EX_GeographicBoundingBox);var s=ol.ext.element.create("DIV",{className:(r.Layer?"ol-title ":"")+"level-"+n,html:r.Name||r.Title,click:(function(){this._elements.buttons.innerHTML="",this._elements.data.innerHTML="",this._elements.legend.src=this._elements.preview.src="",this._elements.element.classList.remove("ol-form"),this.showError();var i=this.getOptionsFromCap(r,t),o=this.getLayerFromOptions(i);if(this._currentOptions=i,e.forEach(function(t){t.classList.remove("selected")}),s.classList.add("selected"),o){ol.ext.element.create("BUTTON",{html:this.get("loadLabel")||"Load",className:"ol-load",click:(function(){this.dispatchEvent({type:"load",layer:o,options:i}),this._dialog&&this._dialog.hide()}).bind(this),parent:this._elements.buttons}),ol.ext.element.create("BUTTON",{className:"ol-wmsform",click:(function(){this._elements.element.classList.toggle("ol-form")}).bind(this),parent:this._elements.buttons});var n=this.getMap().getView().getResolution(),a=this.getMap().getView().getCenter();this._elements.preview.src=o.getPreview(a,n,this.getMap().getView().getProjection()),this._img.src=this._elements.preview.src,ol.ext.element.create("p",{className:"ol-title",html:i.data.title,parent:this._elements.data}),ol.ext.element.create("p",{html:i.data.abstract,parent:this._elements.data}),i.data.legend.length?(this._elements.legend.src=i.data.legend[0],this._elements.legend.classList.add("visible")):(this._elements.legend.src="",this._elements.legend.classList.remove("visible"))}}).bind(this),parent:this._elements.select});e.push(s),r.Layer&&i(r,n+1)}).bind(this))}).bind(this);this._elements.select.innerHTML="",i(t.Capability.Layer)},ol.control.WMSCapabilities.prototype.getLayerResolution=function(t,e,i){var o="min"===t?"MinScaleDenominator":"MaxScaleDenominator";if(void 0!==e[o])return e[o]/(72/2.54*100);if(!e.Layer)return"min"===t?0:156543.03392804097;i="min"===t?156543.03392804097:0;for(var n=0;n<e.Layer.length;n++){var r=this.getLayerResolution(t,e.Layer[n],i);void 0!==r&&(i=Math[t](i,r))}return i},ol.control.WMSCapabilities.prototype.getOptionsFromCap=function(t,e){var i,o,n=e.Capability.Request.GetMap.Format,r=[/png/,/jpeg/,/gif/];for(o=0;o<3;o++){for(var s=0;s<n.length;s++)if(r[o].test(n[s])){i=n[s];break}if(i)break}i||(i=n[0]);var a=this.getMap().getView().getProjection().getCode();this.showError();var l=!1;t.CRS?t.CRS.indexOf(a)>=0?l=!0:t.CRS.indexOf("EPSG:4326")>=0?(a="EPSG:4326",l=!0):this.get("srs").forEach(function(e){t.CRS.indexOf(e)>=0&&(a=e,l=!0)}):l=!1,l||(this.showError({type:"srs"}),this.get("trace")&&console.log("BAD srs: ",t.CRS));var c=t.EX_GeographicBoundingBox;c&&(c=ol.proj.transformExtent(c,"EPSG:4326",this.getMap().getView().getProjection()));var h=[];t.Attribution&&h.push('<a href="'+encodeURI(t.Attribution.OnlineResource)+'">&copy; '+t.Attribution.Title.replace(/</g,"&lt;")+"</a>");var u={title:t.Title,extent:c,queryable:t.queryable,abstract:t.Abstract,minResolution:this.getLayerResolution("min",t),maxResolution:this.getLayerResolution("max",t)||156543.03392804097},d={url:e.Capability.Request.GetMap.DCPType[0].HTTP.Get.OnlineResource,projection:a,attributions:h,crossOrigin:this.get("cors")?"anonymous":null,params:{LAYERS:t.Name,FORMAT:i,VERSION:e.version||"1.3.0"}},p=new ol.View({projection:this.getMap().getView().getProjection()});p.setResolution(u.minResolution);var g=Math.round(p.getZoom());p.setResolution(u.maxResolution);var f=Math.round(p.getZoom());if(this._fillForm({title:u.title,layers:d.params.LAYERS,format:d.params.FORMAT,minZoom:f,maxZoom:g,extent:c?c.join(","):"",projection:d.projection,attribution:d.attributions[0]||"",version:d.params.VERSION}),this.get("trace")){var m=JSON.stringify([d],null,"\t").replace(/\\"/g,'"');u.source="SOURCE";var y="new ol.layer.Tile ("+JSON.stringify(u,null,"\t")+")";y=y.replace(/\\"/g,'"').replace('"SOURCE"',"new ol.source.TileWMS("+m+")").replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace("([\n\t","(").replace("}\n])","})"),console.log(y),delete u.source}var v=[];return t.Style&&t.Style.forEach(function(t){t.LegendURL&&v.push(t.LegendURL[0].OnlineResource)}),{layer:u,source:d,data:{title:t.Title,abstract:t.Abstract,logo:t.Attribution&&t.Attribution.LogoURL?t.Attribution.LogoURL.OnlineResource:void 0,keyword:t.KeywordList,legend:v,opaque:t.opaque,queryable:t.queryable}}},ol.control.WMSCapabilities.prototype._getFormOptions=function(){var t=parseInt(this._elements.formMinZoom.value),e=parseInt(this._elements.formMaxZoom.value),i=new ol.View({projection:this.getMap().getView().getProjection()});i.setZoom(t);var o=i.getResolution();i.setZoom(e);var n=i.getResolution(),r=[];this._elements.formExtent.value&&this._elements.formExtent.value.split(",").forEach(function(t){r.push(parseFloat(t))}),4!==r.length&&(r=void 0);var s=[];this._elements.formAttribution.value&&s.push(this._elements.formAttribution.value);var a={layer:{title:this._elements.formTitle.value,extent:r,maxResolution:o,minResolution:n},source:{url:this._elements.input.value,crossOrigin:this._elements.formCrossOrigin.checked?"anonymous":null,projection:this._elements.formProjection.value,attributions:s,params:{FORMAT:this._elements.formFormat.options[this._elements.formFormat.selectedIndex].value,LAYERS:this._elements.formLayer.value,VERSION:this._elements.formVersion.value}},data:{title:this._elements.formTitle.value}};return this._elements.formMap.value&&(a.source.params.MAP=this._elements.formMap.value),a},ol.control.WMSCapabilities.prototype._fillForm=function(t){var e,i;for(this._elements.formTitle.value=t.title,this._elements.formLayer.value=t.layers,this._elements.formStyle.value=t.style,i=0;e=this._elements.formFormat.options[i];i++)if(e.value===t.format){this._elements.formFormat.selectedIndex=i;break}this._elements.formExtent.value=t.extent||"",this._elements.formMaxZoom.value=t.maxZoom,this._elements.formMinZoom.value=t.minZoom,this._elements.formProjection.value=t.projection,this._elements.formAttribution.value=t.attribution,this._elements.formVersion.value=t.version},ol.control.WMSCapabilities.prototype.loadLayer=function(t,e,i){this.getCapabilities(t,{onload:(function(t){t?t.Capability.Layer.Layer.forEach((function(o){if(o.Name===e||o.Identifier===e){var n=this.getOptionsFromCap(o,t),r=this.getLayerFromOptions(n);this.dispatchEvent({type:"load",layer:r,options:n}),"function"==typeof i&&i({layer:r,options:n})}}).bind(this)):this.dispatchEvent({type:"load",error:!0})}).bind(this)})},ol.control.WMTSCapabilities=function(t){(t=t||{}).title=t.title||"WMTS",ol.control.WMSCapabilities.call(this,t),this.getDialog().element.classList.add("ol-wmtscapabilities")},ol.ext.inherits(ol.control.WMTSCapabilities,ol.control.WMSCapabilities),ol.control.WMTSCapabilities.prototype._getParser=function(){var t=new ol.format.WMTSCapabilities;return{read:(function(e){var i=t.read(e);i.Capability={Layer:i.Contents},i.Capability.Layer.Attribution={Title:i.ServiceProvider.ProviderName};var o=[];return i.Contents.Layer.forEach(function(t){t.Format&&/jpeg|png/.test(t.Format[0])&&o.push(t)}),i.Contents.Layer=o,i}).bind(this)}},ol.control.WMTSCapabilities.prototype.getRequestParam=function(t){return{SERVICE:"WMTS",REQUEST:"GetCapabilities",VERSION:t.version||"1.0.0"}},ol.control.WMTSCapabilities.prototype._getTG=function(t,e,i){for(var o=new Array,n=new Array,r=ol.extent.getWidth(ol.proj.get("EPSG:3857").getExtent())/256,s=0;s<=(i||20);s++)o[s]="PM"!==t?t+":"+s:s,n[s]=r/Math.pow(2,s);return{origin:[-20037508,20037508],resolutions:n,matrixIds:o,minZoom:e||0}},ol.control.WMTSCapabilities.prototype.getTileGrid=function(t,e,i){return new ol.tilegrid.WMTS(this._getTG(t,e,i))},ol.control.WMTSCapabilities.prototype.getOptionsFromCap=function(t,e){var i=t.WGS84BoundingBox;i&&(i=ol.proj.transformExtent(i,"EPSG:4326",this.getMap().getView().getProjection()));var o,n=1/0,r=-1/0;if(t.TileMatrixSetLink.forEach(function(e){"PM"!==e.TileMatrixSet&&"EPSG:3857"!==e.TileMatrixSet||(o=e,t.TileMatrixSet=e.TileMatrixSet)}),o){o.TileMatrixSetLimits.forEach(function(t){var e=t.TileMatrix.split(":").pop();n=Math.min(n,parseInt(e)),r=Math.max(r,parseInt(e))});var s=new ol.View;s.setZoom(n);var a={title:t.Title,extent:i,abstract:t.Abstract,maxResolution:s.getResolution()},l={url:e.OperationsMetadata.GetTile.DCP.HTTP.Get[0].href,layer:t.Identifier,matrixSet:t.TileMatrixSet,format:t.Format[0]||"image/jpeg",projection:"EPSG:3857",minZoom:n,maxZoom:r,style:t.Style?t.Style[0].Identifier:"normal",attributions:t.Attribution.Title,crossOrigin:this.get("cors")?"anonymous":null,wrapX:!1!==this.get("wrapX")};if(this._fillForm({title:a.title,layers:l.layer,style:l.style,format:l.format,minZoom:n,maxZoom:r,extent:i?i.join(","):"",projection:l.projection,attribution:l.attributions||"",version:"1.0.0"}),this.get("trace")){l.tileGrid="TILEGRID";var c=JSON.stringify([l],null,"\t").replace(/\\"/g,'"');c=c.replace('"TILEGRID"',"new ol.tilegrid.WMTS("+JSON.stringify(this._getTG(l.matrixSet,l.minZoom,l.maxZoom),null,"\t").replace(/\n/g,"\n\t\t")+")"),delete l.tileGrid,a.source="SOURCE";var h="new ol.layer.Tile ("+JSON.stringify(a,null,"\t")+")";h=h.replace(/\\"/g,'"').replace('"SOURCE"',"new ol.source.WMTS("+c+")").replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/"tileGrid": {/g,'"tileGrid": new ol.tilegrid.WMTS({').replace(/},\n(\t*)"style"/g,'}),\n$1"style"').replace("([\n\t","(").replace("}\n])","})"),console.log(h),delete a.source}return{layer:a,source:l,data:{title:t.Title,abstract:t.Abstract,legend:t.Style?[t.Style[0].LegendURL[0].href]:void 0}}}this.showError({type:"TileMatrix"})},ol.control.WMTSCapabilities.prototype._getFormOptions=function(){var t=this._currentOptions||{};t.layer||(t.layer={}),t.source||(t.source={}),t.data||(t.data={});var e=parseInt(this._elements.formMinZoom.value)||0,i=parseInt(this._elements.formMaxZoom.value)||20,o=[];this._elements.formExtent.value&&this._elements.formExtent.value.split(",").forEach(function(t){o.push(parseFloat(t))}),4!==o.length&&(o=void 0);var n=[];this._elements.formAttribution.value&&n.push(this._elements.formAttribution.value);var r=new ol.View({projection:this.getMap().getView().getProjection()});return r.setZoom(e),{layer:{title:this._elements.formTitle.value,extent:o,abstract:t.layer.abstract||"",maxResolution:r.getResolution()},source:{url:this._elements.input.value,layer:this._elements.formLayer.value,matrixSet:t.source.matrixSet||"PM",format:this._elements.formFormat.options[this._elements.formFormat.selectedIndex].value,projection:"EPSG:3857",minZoom:e,maxZoom:i,style:this._elements.formStyle.value||"normal",attributions:n,crossOrigin:this._elements.formCrossOrigin.checked?"anonymous":null,wrapX:!1!==this.get("wrapX")},data:{title:this._elements.formTitle.value,abstract:t.data.abstract,legend:t.data.legend}}},ol.control.WMTSCapabilities.prototype.getLayerFromOptions=function(t){if(t){t.source.tileGrid=this.getTileGrid(t.source.matrixSet,t.source.minZoom,t.source.maxZoom),t.layer.source=new ol.source.WMTS(t.source);var e=new ol.layer.Tile(t.layer);return delete t.layer.source,delete t.source.tileGrid,e}},ol.featureAnimation=function(t){this.duration_="number"==typeof(t=t||{}).duration?t.duration>=0?t.duration:0:1e3,this.fade_="function"==typeof t.fade?t.fade:null,this.repeat_=Number(t.repeat);var e="function"==typeof t.easing?t.easing:ol.easing.linear;this.easing_=t.revers?function(t){return 1-e(t)}:e,this.hiddenStyle=t.hiddenStyle,ol.Object.call(this)},ol.ext.inherits(ol.featureAnimation,ol.Object),ol.featureAnimation.hiddenStyle=new ol.style.Style({image:new ol.style.Circle({}),stroke:new ol.style.Stroke({color:"transparent"})}),ol.featureAnimation.prototype.drawGeom_=function(t,e,i){this.fade_&&(t.context.globalAlpha=this.fade_(1-t.elapsed));for(var o=t.style,n=0;n<o.length;n++)try{var r=t.vectorContext||ol.render.getVectorContext(t),s=ol.ext.getVectorContextStyle(t,o[n]);r.setStyle(s),s.getZIndex()<0?r.drawGeometry(i||e):r.drawGeometry(e)}catch(t){}},ol.featureAnimation.prototype.animate=function(){return!1},ol.Map.prototype.animateFeature=function(t,e){var i=this._featureAnimationLayer;i||(i=this._featureAnimationLayer=new ol.layer.Vector({source:new ol.source.Vector})).setMap(this),i.getSource().addFeature(t);var o=e.on("animationend",function(e){e.feature===t&&(i.getSource().removeFeature(t),ol.Observable.unByKey(o))});i.animateFeature(t,e)},ol.layer.Base.prototype.animateFeature=function(t,e,i){var o,n=this,r=t.getStyle(),s=r||(this.getStyleFunction?this.getStyleFunction()(t):null);s||(s=[]),s instanceof Array||(s=[s]);var a={vectorContext:null,frameState:null,start:0,time:0,elapsed:0,extent:!1,feature:t,geom:t.getGeometry(),typeGeom:t.getGeometry().getType(),bbox:t.getGeometry().getExtent(),coord:ol.extent.getCenter(t.getGeometry().getExtent()),style:s};e instanceof Array||(e=[e]);for(var l=e.length-1;l>=0;l--)0===e[l].duration_&&e.splice(l,1);var c=0,h=0,u=i&&this.getFilters?this.getFilters():[];function d(i){a.type=i.type;try{a.vectorContext=i.vectorContext||ol.render.getVectorContext(i)}catch(i){}if(a.frameState=i.frameState,a.inversePixelTransform=i.inversePixelTransform,a.extent||(a.extent=i.frameState.extent,a.start=i.frameState.time,a.context=i.context),a.time=i.frameState.time-a.start,a.elapsed=a.time/e[h].duration_,a.elapsed>1&&(a.elapsed=1),i.context.save(),u.forEach(function(t){t.get("active")&&t.precompose(i)}),this.getOpacity&&(i.context.globalAlpha=this.getOpacity()),e[h].animate(a)){var o={type:"animating",step:h,start:a.start,time:a.time,elapsed:a.elapsed,rotation:a.rotation||0,geom:a.geom,coordinate:a.coord,feature:t};e[h].dispatchEvent(o),n.dispatchEvent(o)}else++c<e[h].repeat_?a.extent=!1:h<e.length-1?(e[h].dispatchEvent({type:"animationend",feature:t}),h++,c=0,a.extent=!1):p();u.forEach(function(t){t.get("active")&&t.postcompose(i)}),i.context.restore(),i.frameState.animate=!0}function p(i){ol.Observable.unByKey(o),o=null,t.setStyle(r);var s={type:"animationend",feature:t};if(i)for(var a in i)i.hasOwnProperty(a)&&(s[a]=i[a]);e[h].dispatchEvent(s),n.dispatchEvent(s)}function g(i){if(e.length&&!o){if(o=n.on(["postcompose","postrender"],d.bind(n)),n.renderSync)try{n.renderSync()}catch(a){}else n.changed();t.setStyle(e[h].hiddenStyle||ol.featureAnimation.hiddenStyle);var r={type:"animationstart",feature:t};if(i)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);e[h].dispatchEvent(r),n.dispatchEvent(r)}}return g(),{start:g,stop:p,isPlaying:function(){return!!o}}},ol.featureAnimation.Blink=function(t){ol.featureAnimation.call(this,t),this.set("nb",t.nb||10)},ol.ext.inherits(ol.featureAnimation.Blink,ol.featureAnimation),ol.featureAnimation.Blink.prototype.animate=function(t){return Math.round(this.easing_(t.elapsed)*this.get("nb"))%2||this.drawGeom_(t,t.geom),t.time<=this.duration_},ol.featureAnimation.Bounce=function(t){t=t||{},ol.featureAnimation.call(this,t),this.amplitude_=t.amplitude||40,this.bounce_=-Math.PI*(t.bounce||3)},ol.ext.inherits(ol.featureAnimation.Bounce,ol.featureAnimation),ol.featureAnimation.Bounce.prototype.animate=function(t){var e=t.geom.clone(),i=Math.abs(Math.sin(this.bounce_*t.elapsed))*this.amplitude_*(1-this.easing_(t.elapsed))*t.frameState.viewState.resolution;return e.translate(0,i),this.drawGeom_(t,e,t.geom),t.time<=this.duration_},ol.featureAnimation.Drop=function(t){this.speed_=(t=t||{}).speed||0,ol.featureAnimation.call(this,t),this.side_=t.side||"top"},ol.ext.inherits(ol.featureAnimation.Drop,ol.featureAnimation),ol.featureAnimation.Drop.prototype.animate=function(t){if(!t.time){var e=t.frameState.viewState.rotation,i=t.frameState.size[1]*t.frameState.viewState.resolution;"top"!=this.side_&&(i*=-1),this.dx=-Math.sin(e)*i,this.dy=Math.cos(e)*i,this.speed_&&(this.duration_=i/this.speed_/t.frameState.viewState.resolution)}var o=t.geom.clone();return o.translate(this.dx*(1-this.easing_(t.elapsed)),this.dy*(1-this.easing_(t.elapsed))),this.drawGeom_(t,o,t.geom),t.time<=this.duration_},ol.featureAnimation.Fade=function(t){this.speed_=(t=t||{}).speed||0,ol.featureAnimation.call(this,t)},ol.ext.inherits(ol.featureAnimation.Fade,ol.featureAnimation),ol.featureAnimation.Fade.prototype.animate=function(t){return t.context.globalAlpha=this.easing_(t.elapsed),this.drawGeom_(t,t.geom),t.time<=this.duration_},ol.featureAnimation.None=function(t){ol.featureAnimation.call(this,t)},ol.ext.inherits(ol.featureAnimation.None,ol.featureAnimation),ol.featureAnimation.None.prototype.animate=function(t){return t.time<=this.duration_},ol.featureAnimation.Null=function(){ol.featureAnimation.call(this,{duration:0})},ol.ext.inherits(ol.featureAnimation.Null,ol.featureAnimation),ol.featureAnimation.Path=function(t){switch(t=t||{},ol.featureAnimation.call(this,t),this.speed_=t.speed||0,this.path_=t.path,t.rotate){case!0:case 0:this.rotate_=0;break;default:this.rotate_=t.rotate||!1}this.path_&&this.path_.getGeometry&&(this.path_=this.path_.getGeometry()),this.path_&&this.path_.getLineString&&(this.path_=this.path_.getLineString()),this.path_.getLength?(this.dist_=this.path_.getLength(),this.path_&&this.path_.getCoordinates&&(this.path_=this.path_.getCoordinates())):this.dist_=0,this.speed_>0&&(this.duration_=this.dist_/this.speed_)},ol.ext.inherits(ol.featureAnimation.Path,ol.featureAnimation),ol.featureAnimation.Path.prototype.animate=function(t){if(!t.time&&!this.dist_)return!1;var e,i,o,n,r,s,a=this.dist_*this.easing_(t.elapsed),l=0;i=this.path_[0];for(var c=1;c<this.path_.length;c++){if(e=i,n=(i=this.path_[c])[0]-e[0],r=i[1]-e[1],(s=Math.sqrt(n*n+r*r))&&l+s>=a){i=[e[0]+(i[0]-e[0])*(o=(a-l)/s),e[1]+(i[1]-e[1])*o];break}l+=s}var h=t.style;if(t.rotation=Math.PI/2+Math.atan2(e[1]-i[1],e[0]-i[0]),!1!==this.rotate_){var u=[],d=this.rotate_-t.rotation+t.frameState.viewState.rotation;t.rotation=Math.PI/2+Math.atan2(e[1]-i[1],e[0]-i[0]);for(var p=0;o=t.style[p];p++)o.getImage()&&o.getImage().setRotation(d),u.push(o);t.style=u}return t.geom.setCoordinates(i),this.drawGeom_(t,t.geom),t.style=h,t.time<=this.duration_},ol.featureAnimation.Shake=function(t){t=t||{},ol.featureAnimation.call(this,t),this.amplitude_=t.amplitude||40,this.bounce_=-Math.PI*(t.bounce||6),this.horizontal_=t.horizontal},ol.ext.inherits(ol.featureAnimation.Shake,ol.featureAnimation),ol.featureAnimation.Shake.prototype.animate=function(t){var e=t.geom.clone(),i=t.geom.clone(),o=this.easing_(t.elapsed);return o=Math.sin(this.bounce_*o)*this.amplitude_*(1-o)*t.frameState.viewState.resolution,this.horizontal_?(e.translate(o,0),i.translate(o,0)):e.translate(0,o),this.drawGeom_(t,e,i),t.time<=this.duration_},ol.featureAnimation.Show=function(t){ol.featureAnimation.call(this,t)},ol.ext.inherits(ol.featureAnimation.Show,ol.featureAnimation),ol.featureAnimation.Show.prototype.animate=function(t){return this.drawGeom_(t,t.geom),t.time<=this.duration_},ol.featureAnimation.Slide=function(t){this.speed_=(t=t||{}).speed||0,ol.featureAnimation.call(this,t),this.side_=t.side||"left"},ol.ext.inherits(ol.featureAnimation.Slide,ol.featureAnimation),ol.featureAnimation.Slide.prototype.animate=function(t){t.time||(this.dx="left"==this.side_?t.extent[0]-t.bbox[2]:t.extent[2]-t.bbox[0],this.speed_&&(this.duration_=Math.abs(this.dx)/this.speed_/t.frameState.viewState.resolution));var e=t.geom.clone();return e.translate(this.dx*(1-this.easing_(t.elapsed)),0),this.drawGeom_(t,e),t.time<=this.duration_},ol.featureAnimation.Teleport=function(t){ol.featureAnimation.call(this,t)},ol.ext.inherits(ol.featureAnimation.Teleport,ol.featureAnimation),ol.featureAnimation.Teleport.prototype.animate=function(t){var e=this.easing_(t.elapsed);if(e){t.context.save();var i=t.frameState.pixelRatio;t.context.globalAlpha=e,t.context.scale(e,1/e);var o=t.frameState.coordinateToPixelTransform;t.context.translate((1/e-1)*i*(o[0]*t.coord[0]+o[1]*t.coord[1]+o[4]),(e-1)*i*(o[2]*t.coord[0]+o[3]*t.coord[1]+o[5])),this.drawGeom_(t,t.geom),t.context.restore()}return t.time<=this.duration_},ol.featureAnimation.Throw=function(t){t=t||{},ol.featureAnimation.call(this,t),this.speed_=t.speed||0,this.side_=t.side||"left"},ol.ext.inherits(ol.featureAnimation.Throw,ol.featureAnimation),ol.featureAnimation.Throw.prototype.animate=function(t){var e,i;!t.time&&this.speed_&&("left"==this.side_?(e=this.dx=t.extent[0]-t.bbox[2],i=this.dy=t.extent[3]-t.bbox[1]):(e=this.dx=t.extent[2]-t.bbox[0],i=this.dy=t.extent[3]-t.bbox[1]),this.duration_=Math.sqrt(e*e+i*i)/this.speed_/t.frameState.viewState.resolution);var o=t.geom.clone(),n=t.geom.clone();return o.translate(this.dx*(1-this.easing_(t.elapsed)),this.dy*Math.cos(Math.PI/2*this.easing_(t.elapsed))),n.translate(this.dx*(1-this.easing_(t.elapsed)),0),this.drawGeom_(t,o,n),t.time<=this.duration_};ol.featureAnimation.Zoom=function(t){t=t||{},ol.featureAnimation.call(this,t),this.set("zoomout",t.zoomOut)},ol.ext.inherits(ol.featureAnimation.Zoom,ol.featureAnimation),ol.featureAnimation.ZoomOut=function(t){(t=t||{}).zoomOut=!0,ol.featureAnimation.Zoom.call(this,t)},ol.ext.inherits(ol.featureAnimation.ZoomOut,ol.featureAnimation.Zoom),ol.featureAnimation.Zoom.prototype.animate=function(t){var e=this.easing_(t.elapsed);if(e){this.get("zoomout")&&(e=1/e);var i,o,n=t.style,r=[];for(i=0;i<n.length;i++)(o=n[i].getImage())&&(r[i]=o.getScale(),o.setScale("postrender"===t.type?r[i]*e/t.frameState.pixelRatio:r[i]*e));for(this.drawGeom_(t,t.geom),i=0;i<n.length;i++)(o=n[i].getImage())&&o.setScale(r[i])}return t.time<=this.duration_},ol.filter={},ol.filter.Base=function(t){ol.Object.call(this,t),this._listener=[],this.set("active",!t||!1!==t.active)},ol.ext.inherits(ol.filter.Base,ol.Object),ol.filter.Base.prototype.setActive=function(t){this.set("active",!0===t)},ol.filter.Base.prototype.getActive=function(){return this.get("active")},function(){function t(t){this.get("active")&&t.context&&this.precompose(t)}function e(t){this.get("active")&&t.context&&this.postcompose(t)}function i(){if(this.renderSync)try{this.renderSync()}catch(t){}else this.changed()}function o(o){this.filters_||(this.filters_=[]),this.filters_.push(o),o.addToLayer&&o.addToLayer(this),o.precompose&&o._listener.push({listener:this.on(["precompose","prerender"],t.bind(o)),target:this}),o.postcompose&&o._listener.push({listener:this.on(["postcompose","postrender"],e.bind(o)),target:this}),o._listener.push({listener:o.on("propertychange",i.bind(this)),target:this}),i.call(this)}function n(t){var e;for(this.filters_||(this.filters_=[]),e=this.filters_.length-1;e>=0;e--)this.filters_[e]===t&&this.filters_.splice(e,1);for(e=t._listener.length-1;e>=0;e--)t._listener[e].target===this&&(t.removeFromLayer&&t.removeFromLayer(this),ol.Observable.unByKey(t._listener[e].listener),t._listener.splice(e,1));i.call(this)}ol.Map.prototype.addFilter=function(t){console.warn("[OL-EXT] addFilter deprecated on map."),o.call(this,t)},ol.Map.prototype.removeFilter=function(t){n.call(this,t)},ol.Map.prototype.getFilters=function(){return this.filters_||[]},ol.layer.Base.prototype.addFilter=function(t){o.call(this,t)},ol.layer.Base.prototype.removeFilter=function(t){n.call(this,t)},ol.layer.Base.prototype.getFilters=function(){return this.filters_||[]}}(),ol.filter.Mask=function(t){if(t=t||{},ol.filter.Base.call(this,t),t.feature)switch(t.feature.getGeometry().getType()){case"Polygon":case"MultiPolygon":this.feature_=t.feature}this.set("inner",t.inner),this.fillColor_=t.fill&&ol.color.asString(t.fill.getColor())||"rgba(0,0,0,0.2)"},ol.ext.inherits(ol.filter.Mask,ol.filter.Base),ol.filter.Mask.prototype.drawFeaturePath_=function(t,e){var i,o=t.context,n=o.canvas,r=t.frameState.pixelRatio;if(t.frameState.coordinateToPixelTransform){var s=t.frameState.coordinateToPixelTransform;if(t.inversePixelTransform){var a=t.inversePixelTransform;i=function(t){return[(t=[t[0]*s[0]+t[1]*s[1]+s[4],t[0]*s[2]+t[1]*s[3]+s[5]])[0]*a[0]-t[1]*a[1]+a[4],-t[0]*a[2]+t[1]*a[3]+a[5]]}}else i=function(t){return[(t[0]*s[0]+t[1]*s[1]+s[4])*r,(t[0]*s[2]+t[1]*s[3]+s[5])*r]}}else s=t.frameState.coordinateToPixelMatrix,i=function(t){return[(t[0]*s[0]+t[1]*s[1]+s[12])*r,(t[0]*s[4]+t[1]*s[5]+s[13])*r]};var l=this.feature_.getGeometry().getCoordinates();"Polygon"==this.feature_.getGeometry().getType()&&(l=[l]),o.beginPath(),e&&(o.moveTo(0,0),o.lineTo(n.width,0),o.lineTo(n.width,n.height),o.lineTo(0,n.height),o.lineTo(0,0));for(var c=0;c<l.length;c++)for(var h=l[c],u=0;u<h.length;u++){var d=i(h[u][0]);o.moveTo(d[0],d[1]);for(var p=1;p<h[u].length;p++)d=i(h[u][p]),o.lineTo(d[0],d[1])}},ol.filter.Mask.prototype.postcompose=function(t){if(this.feature_){var e=t.context;e.save(),this.drawFeaturePath_(t,!this.get("inner")),e.fillStyle=this.fillColor_,e.fill("evenodd"),e.restore()}},ol.filter.CSS=function(t){ol.filter.Base.call(this,t),this._layers=[]},ol.ext.inherits(ol.filter.CSS,ol.filter.Base),ol.filter.CSS.prototype.setBlend=function(t){this.set("blend",t),this._layers.forEach(function(e){e.once("postrender",(function(e){e.context.canvas.parentNode.style["mix-blend-mode"]=t||""}).bind(this)),e.changed()})},ol.filter.CSS.prototype.setFilter=function(t){this.set("filter",t),this._layers.forEach(function(e){e.once("postrender",(function(e){e.context.canvas.parentNode.style.filter=t||""}).bind(this)),e.changed()})},ol.filter.CSS.prototype.setDisplay=function(t){this.set("display",t),this._layers.forEach(function(e){e.once("postrender",(function(e){e.context.canvas.parentNode.style.display=t?"":"none"}).bind(this)),e.changed()})},ol.filter.CSS.prototype.addToLayer=function(t){t.once("postrender",(function(t){t.context.canvas.parentNode.style["mix-blend-mode"]=this.get("blend")||"",t.context.canvas.parentNode.style.filter=this.get("filter")||"",t.context.canvas.parentNode.style.display=!1!==this.get("display")?"":"none"}).bind(this)),t.changed(),this._layers.push(t)},ol.filter.CSS.prototype.removeFromLayer=function(t){var e=this._layers.indexOf(t);e>=0&&(t.once("postrender",(function(t){t.context.canvas.parentNode.style["mix-blend-mode"]="",t.context.canvas.parentNode.style.filter="",t.context.canvas.parentNode.style.display=""}).bind(this)),t.changed(),this._layers.splice(e,1))},ol.filter.CanvasFilter=function(t){ol.filter.Base.call(this,t),this._svg={}},ol.ext.inherits(ol.filter.CanvasFilter,ol.filter.Base),ol.filter.CanvasFilter.prototype.addSVGFilter=function(t){t.getId&&(t="#"+t.getId()),this._svg[t]=1,this.dispatchEvent({type:"propertychange",key:"svg",oldValue:this._svg})},ol.filter.CanvasFilter.prototype.removeSVGFilter=function(t){t.getId&&(t="#"+t.getId()),delete this._svg[t],this.dispatchEvent({type:"propertychange",key:"svg",oldValue:this._svg})},ol.filter.CanvasFilter.prototype.precompose=function(){},ol.filter.CanvasFilter.prototype.postcompose=function(t){var e=[];for(var i in void 0!==this.get("url")&&e.push("url("+this.get("url")+")"),this._svg)e.push("url("+i+")");void 0!==this.get("blur")&&e.push("blur("+this.get("blur")+"px)"),void 0!==this.get("brightness")&&e.push("brightness("+this.get("brightness")+"%)"),void 0!==this.get("contrast")&&e.push("contrast("+this.get("contrast")+"%)"),void 0!==this.get("shadow")&&e.push("drop-shadow("+this.get("shadow")[0]+"px "+this.get("shadow")[1]+"px "+(this.get("shadowBlur")||0)+"px "+this.get("shadowColor")+")"),void 0!==this.get("grayscale")&&e.push("grayscale("+this.get("grayscale")+"%)"),void 0!==this.get("hueRotate")&&e.push("hue-rotate("+this.get("hueRotate")+"deg)"),void 0!==this.get("invert")&&e.push("invert("+this.get("invert")+"%)"),void 0!==this.get("saturate")&&e.push("saturate("+this.get("saturate")+"%)"),void 0!==this.get("sepia")&&e.push("sepia("+this.get("sepia")+"%)"),(e=e.join(" "))&&(t.context.save(),t.context.filter=e,t.context.drawImage(t.context.canvas,0,0),t.context.restore())},ol.filter.Clip=function(t){if(t=t||{},ol.filter.Base.call(this,t),this.set("coords",t.coords),this.set("units",t.units),this.set("keepAspectRatio",t.keepAspectRatio),this.set("extent",t.extent||[0,0,1,1]),this.set("color",t.color),!t.extent&&"%"!=t.units&&t.coords){for(var e,i=1/0,o=1/0,n=-1/0,r=-1/0,s=0;e=t.coords[s];s++)i>e[0]&&(i=e[0]),n<e[0]&&(n=e[0]),o>e[1]&&(o=e[1]),r<e[1]&&(r=e[1]);t.extent=[i,o,n,r]}},ol.ext.inherits(ol.filter.Clip,ol.filter.Base),ol.filter.Clip.prototype.clipPath_=function(t){var e=t.context,i=t.frameState.size,o=this.get("coords");if(o){var n=this.get("extent"),r=1,s=1;"%"==this.get("units")&&(r=i[0]/(n[2]-n[0]),s=i[1]/(n[3]-n[1])),this.get("keepAspectRatio")&&(r=s=Math.min(r,s));var a=this.get("position"),l=0,c=0;/left/.test(a)?l=-n[0]*r:/center/.test(a)?l=i[0]/2-(n[2]-n[0])*r/2:/right/.test(a)&&(l=i[0]-(n[2]-n[0])*r);var h=function(t){return t*r+l};/top/.test(a)?c=-n[1]*s:/middle/.test(a)?c=i[1]/2-(n[3]-n[1])*s/2:/bottom/.test(a)&&(c=i[1]-(n[3]-n[1])*s);var u=function(t){return t*s+c},d=[h(o[0][0]),u(o[0][1])],p=t.inversePixelTransform;p&&(d=[d[0]*p[0]-d[1]*p[1]+p[4],-d[0]*p[2]+d[1]*p[3]+p[5]]),e.moveTo(d[0],d[1]);for(var g,f=1;g=o[f];f++)d=[h(g[0]),u(g[1])],p&&(d=[d[0]*p[0]-d[1]*p[1]+p[4],-d[0]*p[2]+d[1]*p[3]+p[5]]),e.lineTo(d[0],d[1]);d=[h(o[0][0]),u(o[0][1])],p&&(d=[d[0]*p[0]-d[1]*p[1]+p[4],-d[0]*p[2]+d[1]*p[3]+p[5]]),e.moveTo(d[0],d[1])}},ol.filter.Clip.prototype.precompose=function(t){this.get("color")||(t.context.save(),t.context.beginPath(),this.clipPath_(t),t.context.clip())},ol.filter.Clip.prototype.postcompose=function(t){if(this.get("color")){var e=t.context,i=t.context.canvas;e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(0,i.height),e.lineTo(i.width,i.height),e.lineTo(i.width,i.height),e.lineTo(i.width,0),e.lineTo(0,0),this.clipPath_(t),e.fillStyle=this.get("color"),e.fill("evenodd")}t.context.restore()},ol.filter.Colorize=function(t){ol.filter.Base.call(this,t),this.setFilter(t)},ol.ext.inherits(ol.filter.Colorize,ol.filter.Base),ol.filter.Colorize.prototype.setFilter=function(t){switch(t=t||{}){case"grayscale":t={operation:"hue",color:[0,0,0],value:1};break;case"invert":t={operation:"difference",color:[255,255,255],value:1};break;case"sepia":t={operation:"color",color:[153,102,51],value:.6}}var e,i=t.color?ol.color.asArray(t.color):[t.red,t.green,t.blue,t.value];switch(this.set("color",ol.color.asString(i)),this.set("value",t.value||1),this.set("preserveAlpha",t.preserveAlpha),t.operation){case"hue":case"difference":case"color-dodge":case"enhance":this.set("operation",t.operation);break;case"saturation":e=255*(t.value||0),this.set("color",ol.color.asString([0,0,e,e||1])),this.set("operation",t.operation);break;case"luminosity":e=255*(t.value||0),this.set("color",ol.color.asString([e,e,e,255])),this.set("operation","hard-light");break;case"contrast":e=255*(t.value||0),this.set("color",ol.color.asString([e,e,e,255])),this.set("operation","soft-light");break;default:this.set("operation","color"),this.setValue(t.value||1)}},ol.filter.Colorize.prototype.setValue=function(t){this.set("value",t);var e=ol.color.asArray(this.get("color"));e[3]=t,this.set("color",ol.color.asString(e))},ol.filter.Colorize.prototype.setColor=function(t){(t=ol.color.asArray(t))&&(t[3]=this.get("value"),this.set("color",ol.color.asString(t)))},ol.filter.Colorize.prototype.precompose=function(){},ol.filter.Colorize.prototype.postcompose=function(t){var e,i,o=t.context,n=o.canvas;if(o.save(),"enhance"==this.get("operation")){var r=this.get("value");if(r){var s=n.width,a=n.height;this.get("preserveAlpha")?((e=document.createElement("CANVAS")).width=n.width,e.height=n.height,(i=e.getContext("2d")).drawImage(n,0,0,s,a),i.globalCompositeOperation="color-burn",console.log(r),i.globalAlpha=r,i.drawImage(e,0,0,s,a),i.drawImage(e,0,0,s,a),i.drawImage(e,0,0,s,a),o.globalCompositeOperation="source-in",o.drawImage(e,0,0)):(o.globalCompositeOperation="color-burn",o.globalAlpha=r,o.drawImage(n,0,0,s,a),o.drawImage(n,0,0,s,a),o.drawImage(n,0,0,s,a))}}else this.get("preserveAlpha")?((e=document.createElement("CANVAS")).width=n.width,e.height=n.height,(i=e.getContext("2d")).drawImage(n,0,0),i.globalCompositeOperation=this.get("operation"),i.fillStyle=this.get("color"),i.fillRect(0,0,n.width,n.height),o.globalCompositeOperation="source-in",o.drawImage(e,0,0)):(o.globalCompositeOperation=this.get("operation"),o.fillStyle=this.get("color"),o.fillRect(0,0,n.width,n.height));o.restore()},ol.filter.Composite=function(t){ol.filter.Base.call(this,t),this.set("operation",t.operation||"source-over")},ol.ext.inherits(ol.filter.Composite,ol.filter.Base),ol.filter.Composite.prototype.setOperation=function(t){this.set("operation",t||"source-over")},ol.filter.Composite.prototype.precompose=function(t){var e=t.context;e.save(),e.globalCompositeOperation=this.get("operation")},ol.filter.Composite.prototype.postcompose=function(t){t.context.restore()},ol.filter.Crop=function(t){t=t||{},ol.filter.Mask.call(this,t)},ol.ext.inherits(ol.filter.Crop,ol.filter.Mask),ol.filter.Crop.prototype.precompose=function(t){if(this.feature_){var e=t.context;e.save(),this.drawFeaturePath_(t,this.get("inner")),e.clip("evenodd")}},ol.filter.Crop.prototype.postcompose=function(t){this.feature_&&t.context.restore()},ol.filter.Fold=function(t){t=t||{},ol.filter.Base.call(this,t),this.set("fold",t.fold||[8,4]),this.set("margin",t.margin||8),this.set("padding",t.padding||8),"number"==typeof t.fsize&&(t.fsize=[t.fsize,t.fsize]),this.set("fsize",t.fsize||[8,10]),this.set("fill",t.fill),this.set("shadow",!1!==t.shadow)},ol.ext.inherits(ol.filter.Fold,ol.filter.Base),ol.filter.Fold.prototype.drawLine_=function(t,e,i){var o,n=t.canvas,r=this.get("fold"),s=n.width,a=n.height;for(t.beginPath(),t.moveTo(i,i),o=1;o<=r[0];o++)t.lineTo(o*s/r[0]-(o==r[0]?i:0),e[1]*(o%2)+i);for(o=1;o<=r[1];o++)t.lineTo(s-e[0]*(o%2)-i,o*a/r[1]-(o==r[1]?e[0]*(r[0]%2)+i:0));for(o=r[0];o>0;o--)t.lineTo(o*s/r[0]-(o==r[0]?e[0]*(r[1]%2)+i:0),a-e[1]*(o%2)-i);for(o=r[1];o>0;o--)t.lineTo(e[0]*(o%2)+i,o*a/r[1]-(o==r[1]?i:0));t.closePath()},ol.filter.Fold.prototype.precompose=function(t){var e=t.context;e.save(),e.shadowColor="rgba(0,0,0,0.3)",e.shadowBlur=8,e.shadowOffsetX=2,e.shadowOffsetY=3,this.drawLine_(e,this.get("fsize"),this.get("margin")),e.fillStyle="#fff",this.get("fill")&&e.fill(),e.strokeStyle="rgba(0,0,0,0.1)",e.stroke(),e.restore(),e.save(),this.drawLine_(e,this.get("fsize"),this.get("margin")+this.get("padding")),e.clip()},ol.filter.Fold.prototype.postcompose=function(t){var e=t.context,i=e.canvas;if(e.restore(),e.save(),this.drawLine_(e,this.get("fsize"),this.get("margin")),e.clip(),this.get("shadow")){var o=this.get("fold"),n=i.width/o[0],r=i.height/o[1],s=e.createRadialGradient(5*n/8,5*n/8,n/4,n/2,n/2,n);s.addColorStop(0,"transparent"),s.addColorStop(1,"rgba(0,0,0,0.2)"),e.fillStyle=s,e.scale(1,r/n);for(var a=0;a<o[0];a++)for(var l=0;l<o[1];l++)e.save(),e.translate(a*n,l*n),e.fillRect(0,0,n,n),e.restore()}e.restore()},ol.filter.Halftone=function(t){t||(t={}),ol.filter.Base.call(this,t),this.internal_=document.createElement("canvas"),this.setSize(t.size),this.set("channel",t.channel)},ol.ext.inherits(ol.filter.Halftone,ol.filter.Base),ol.filter.Halftone.prototype.setSize=function(t){t=Number(t)||30,this.set("size",t)},ol.filter.Halftone.prototype.postcompose=function(t){var e=t.context,i=e.canvas,o=t.frameState.pixelRatio;"postrender"===t.type&&(o=1),e.save();var n=this.get("size")*o,r=t.frameState.extent,s=t.frameState.viewState.resolution/o,a=[-Math.round(r[0]/s%n),Math.round(r[1]/s%n)],l=this.internal_.getContext("2d"),c=this.internal_.width=i.width,h=this.internal_.height=i.height;l.webkitImageSmoothingEnabled=l.mozImageSmoothingEnabled=l.msImageSmoothingEnabled=l.imageSmoothingEnabled=!1;var u=Math.floor((c-a[0])/n),d=Math.floor((h-a[1])/n);l.drawImage(i,a[0],a[1],u*n,d*n,0,0,u,d);var p=l.getImageData(0,0,u,d).data;e.clearRect(0,0,c,h),e.fillStyle=ol.color.asString(this.get("color")||"#000");for(var g=0;g<u;g++)for(var f=0;f<d;f++){var m;switch(this.get("channel")){case"r":m=p[4*g+f*u*4]/2.55;break;case"g":m=p[4*g+1+f*u*4]/2.55;break;case"b":m=p[4*g+2+f*u*4]/2.55;break;default:m=(m=ol.color.toHSL([p[4*g+f*u*4],p[4*g+1+f*u*4],p[4*g+2+f*u*4]]))[2]}var y=(100-m)/140;y&&(e.beginPath(),e.arc(a[0]+n/2+g*n,a[1]+n/2+f*n,n*y,0,2*Math.PI),e.closePath(),e.fill())}e.restore()},ol.filter.Lego=function(t){t||(t={}),ol.filter.Base.call(this,t);var e=new Image;e.src=this.img[t.img]||this.img.ol3,e.crossOrigin=t.crossOrigin||null,this.pattern={canvas:document.createElement("canvas")},this.setBrick(t.brickSize,e),this.internal_=document.createElement("canvas")},ol.ext.inherits(ol.filter.Lego,ol.filter.Base),ol.filter.Lego.prototype.img={brick:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAD10AAA9dAah0GUAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAGAElEQVRo3sWZy4tkVx3HP+fcc29Vd1dP17TdTcbJPDKPMGR0kVEZkuBCF0EE9Z8QXLhxMUsRF4oLwYWQTSCgSxUXroQhoiEuskgEUUQh+BhHOpkZO11dr3vvefxc3FPlNHNvPbrD1Dl016XoqvM539/znFbcZo3VjbFmxcMA3Mg2fSoAiQJDov7/B1o9+aEgkycv4PBSPU9eHeDEixNwOAFXPYvFia0+rcnQEeBr218cfLIwCqW1UWillEYphUKpCmCCIQAiCEhAJIggTiSISBAfggTvJZTifQghWO+89cOQexuOXN8Pwz/9ff9X/xF0uEA7AmTsjLp/2xZQCgXHlj0OEBEAeRwGkep3qN6pfibDB3DBixMnvdCXt8J3FZowNYFSjgv71RtPaehjD0alalVOqCtHU3qlAGrVAGbidCtUYLUAiV6dCUx8XV4BhUKjY0AJgUB4LE8sA7CkCRSalFYnE72WiBrLSCKCp6TALZNRDEDCwgAKQ/vyRidN9c32K1sbqlCP/C+P9kXJI597PA7HkGJRCLNUGCY767udF9e+9dz1S5ueoRzIEZa1OxcK9td+/fAHvYH0LY6MkgHFIuYwS0ifXe1+qXvn1vk99QfzCwokToUylPrre1/de/vMnf9+5MsSg2HMELegAsl86duvnP3e8y/f1r83v8Li1RO7k/9c2t/avHnt27xpyhRDguEIuxDA3OXXX93+8a0rz6ZvcKgadqUEL73wx+9sb5//WWKTGCOHsxEWM0H71e2ffmF3lPyEkZppVyVYefCw/9a5f3epSvsWh7MMsUgeaL20/dpLu4fJXZUvFCgi46/8i5RNFCCc4bA5JuZ7f/Kp7g9fuLSdvLnY8lEHxz8ItOPcaN7gPAB1tvPl7udupT9nvGSmLLlHSosWLdbJTgpgLna+eVv9hiO1ZIpFOGBEFmejBnrO/tc/0znXTf+sHMuPwD0MrSnETID6/SXPrH/junp3Xiw3atCjxJCRktKu10DHzrZ+pOvpc5cP/6T8CWtt4BATZ4tkBoCvTz8tbTb8TnHiYi/0pgCmPufMUkB1ss9vtU7Trgt9EgyGhIS0zgjRB6RukaSdfHpLPly2xTg2chQJmgRN2qiAa3DBtu5kYXgqAIFYEzTJDAVCnQIqaA+O0wyFjj8q1oY6AB/qd5nLw9JvcpqOOcFMT5dqlg/UAoy5exS2TgGg6DxhkHofqHVCGYf3ho/S904DcHZ6jpZ6lWMY1iogCDxsn8oDduP3BEI9QvSBWgU8YRDeGezsyEk1SNlD8HF51wjQoEAgHNkffXBw+XfJiZbXXCTBT2fZaAJfn4iEEt+z73bTk92jZTxPwOFxVCeGRif0tt4HCtxB+f0P7l//rTlBAN6gjcNicThcfU2NCnjf0NU43L59vf2XZf1A8wzX8JRTgLw+Ckx17SahIZGOyMri7dHalXf6DJdYfovPAgVlRLAzAXwI0gCQU5La8m6SXeH9pi+pWf5lUooIUFKSN6V0A1AE39RyeAYYEpvYNjf4OwP8XNuf50UycnKKKURjSTMALkjzzgpyEhI0LW7ygHvYRh00G7zARQL5dBYU9JtLWvQB52e0VX0MOl5anmOP+3yIjZldpteZijZXuIbBxZ1PAEbkc05GVspZtnX04hlHEDKucpUePYbklCgyNjjDLp9AERhjKSNAQc6IwSzPMQClt37OIeOQ7vQWxJPSZSf2OZMyK1h8jHsbNSgY0Z/tNRWA2HmuVXLIZsxnliw2mROAyR2Rjwmn8vyC0XynrUwQ3PzGs6QX06rDRgD9GIDEjF9pUFLSXyRsowLFIp2/44icDpZ02umq6S3ZxDwupp3hYs1cVMAu1noLBZaMNbJoAD3tl6prOodnTF5feBoBRmGweO8fyClISMlIowkkApRYyqbeZ5YJQrHc4UNieeGYArL8NeUkFcvgJKc/AU56ajxejod+/DT/W/IkQC4P3GoBwoGsFKAf9v2qAGIxej9MU8rTGdNjWtVsJv315aL3YwDYqG5MTDxAPMvTNkJS3ReY6AmtlTrhKsf/AHgAA6ezGE+FAAAAAElFTkSuQmCC",ol3:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAD10AAA9dAah0GUAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAHtUlEQVRo3sWZTWxcVxXHf/d9zIztcTz+pE6cOHXiyLJJadKgKE2oCBLlQwIWSCxYI0WiGxZZIYRAArFAYoEEi0hIsGBBURd0g4iK2lJAaWlaojZVKkU0H26cxB8Zz/f7uPeweHdebDLPnqlQ5l2N5/mN7tz/+Z//OffcM4rPUKCPl0eBAqqfAEAt5Ia1LwCuAg93CyCnAzgj7TstEKMluW+/x0AsWmKBmFggTu4lIpYome2Qw0kA8I2xL9T2Bp5COY6ncJRSDkopFEolANowBEAEATGIGBEkFjEiYkQbI0ZrMaFobYwxkY51pOumpSNTiau6bm7oZX1NP4Ai+ylYADkmGqUPxwSUQsG2ZbcDsBAA2QoGkeSvSZ4kr/alDcRGSyyxbJqqvG5+pHAwbRegVMz+leTBY7qcbTee8vsmQycRmnL6CkD1G4DXFl0fGegvANfpnws8+947AwqFg2MDSjAYzJY80QuAHl2gcPDJF3PiDLiimtIQC0ETEhD3klE8AJeuASg8CgeHir7vLBVOjwypQK3plyoromRNtzSamJg6QbcgvJ7C0J0YnCweG/jek/Ozw5q6bEiFiIHz+wNWBv68+rPNmlQjYnKE1Ai6cYfXA/W5Q6Uvl84f3zel3vH+SIDYoVAeofOdqa9PvbHn/PoDHYZ4eDSpE3fJgLs79YXToz858uxJ5+/en4jQ6hHr5OPZlZHhpcM/4BUv9PFw8agQdQVg1+UHnx/75fG5Gf83lFWGVUrQsmmu/HBsbN8f3Mi1MVLeGUJ3Lig8P/a7s5MN97c01I5+VUIk91err0/fLqFwgBHKOzmimzyQPzX2q1OTZfeianUVKCLNr93EZxiFIOyhnB0Tu6vf/XTp54uzY+4r3S1veYj5CEPBjqFsA3cDoEaLXy199rj/Is0eM2XILXzy5MkzSO6TAvAOFF84qf5KRfWYYhE2aJCzI5MDbxf7B58pTpf89x8qX1yWGKXKFaUBZIF1tWo/KzJPiYi3VAgYbrFEnpiYiBzBTgx0ts99YvDcvHr7YSBJka/Q4k1u3jz5eQ/EYebkXvL241NUeZN/31gkDwibhHjk8PGzTh+OrWw7X/6g/+TB8nuJrQCc4Z/KU08rb+1f/1gCSqy9NUNoP72txtXRb40dfJ+nkgMEZTw78riZLhDRndNP3vGG9GBKnRzhrppmilfhmcWoRYkxyuxv86euUaT24h4W2WN53WQmheB1ygc7MaCKuc+N5LeW6wfOXeUorwFQZIV5RlnbNqcGjBMyaAFUcfHwcHHxOznBakA6JQq34B4dkXtt+8QjvnCQa/Z/jxpFCmdbpPSJI7NyhMVzK/j2UQuFi4OLkz57FECcIcGCU8yZeirQvdxjjuvpTKGAem2EcjpjkjnUC5cvfIm/bRG3Y4e7AwOmEwPKOJotfhvlPj61dGaBEChtAdD88Yeq9et1LqWOUTj2lYzOItSmcxi2ZDXUw+k0n0bqDoXDJBsMM8rHKeIKFbxgIV9nL3cSFlPpZQBoa6AjgCYXK2YkndbckkxmWWfu2D00ozzYNinOlagwbRct/k92zNJARxFK01yur/mX2wDWGE0jfuHyNfa+Y6hQYNsmJQ45hqwwFaPpOVo6s2zDsCMDgsBq2sBR9xj8ZvX70+LJc9w+scA1Sjz49rjMy7zMywE5IY64PMcNDlkHKCbt9xhMZwhOooGODGhMzVyqTUxIm4Pll9797ixnWFZ3WORdSqz//hI+Pv7LT5dXOcNZltUa49y3qplC0Hb5uBMAbwcGDKYS/eLu6YMfrSZCUhWY+QCfGZ7iZYRbarSdYMfd0bvXazh8ii/yF2vcAVwitB1hZirWnROREFLYjN4uLQ5QTZ/WmeA2VwDUHbBks351HRxK3OaqtTTHEQwxmpjkxJApQh111kBAvBH+9O7y/KveFsfcYyNj82qywqZdxmWBAjEREbHdkrNEqNE6o6qJiVeiC4UPHuqg20PvExxGE6YAWp2jwEvabmIyqpoGuTB4ozEwd6lKvYflRzgBBIQWQrQjAG2MZABoEeJH4UU3N8f1rC/psPyz+AQWQEhIK6s09wACk+EC0NTwcCM3KrDAf6ihd6ui2ccxcrRoEaQg6lnQPYDYSLZlAS1cXBzyLHGfW0SZPDgMscgBDK10BARUs48mVgNxtl2GKh6ObVpOM8Uy94hsZpe0nakoMMdhPGJreRtAg9YuJ6NIwp18G7OJsilVyHGIQ2yySZ0WIYocQ+xhknEUhiYRoQUQ0KJBbSfleAChjvQuh4wypbQLovEpMWHrnPY2K0RoG/eR5SCgQXVn1SQAJNpNWiFlhm0+i8jZIrMNoN0j0jbhJMoPaOwu2sQFJt69oRKyadNqTGQBOFsAiM34CQchIdVuwtYyEOgu4jumQosiEX5a6aq0S9Z2T2zTThfdkS0MRN21lISAiBwD5KwDnLReStp0MZomrc4bTyaAhql131gztAhw8cnhWxeIBRASEWbVPju5wAS9/VYgdnthGwPSe5uynYqlpun9EuCTzHt0O67r5uP8teRRAC25H/cXgNmQvgKomhXdLwB2M7pu0pTyeK70mJYUm251sLfo/T8AGEoKes8eIGZ43E5wk36BBwhO2mbqgwZa9C0CAP4LFLGzNDDzmrAAAAAASUVORK5CYII=",lego:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA/CAQAAAD9VthUAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAADzoAAA86AZc528IAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAHvElEQVRYw8WZWWxcVxnHf+fec2fGu+M4qbPH2EmTLk4FApqQNrgiVYyKeClIwBsvPCAQkZAQPND2gRekCoGQEItYHhBLurCksoTKA6QNJW0CBZLWCc3qEBvHy3hsz93O+XiYMxM7nhmPGxGf++Dre2fO7/v+5/u+s4zigzSxVq3osaZNAwzkuq1nPeUrAE9p99JTAKWn5WYEwErpv9TdGbECRlKMgBEjRlIgsqlAKBBaSKUokAjgkcFz+Ce6BvM9sVbKU55WKKWUh1IeoJQCFhsgIIIgIohYEWwq1ooVK9ZasdbG1hhrjUmMsYlZsJEJzYIpmLwZs/8xZ9JpaGYHOYfPyvrChrdbpAxbjFRltCqhnQ2yxBTKf0WQUgNrwYqIFStGUkkllqIU5E/2aQBbEV8pz/ZM3Or8/95UmeUB+J63RiHoAWi1ZHTvNl6pNfXe99Taeq/W1HvuYOzvKG5c4q1afIWHj4eHBwgWwWCQ1aWvBvC8VXngE5DbmO3UxrOeqEhmTFEcPiIiadwEfVttWxmd623tyu7Mfnrjru5cM0Th+Nyp2Z/MztvJNDLkSImZJ27MhNWIr8j1tn+g9at7+/ubivaSHYkmjPF1f+sj7Uc3Xc29VPjm1JSJEzJkCZkjaVT8hvzubDvQ8cz9AwPeG/rHFD3BZkoeTqLwCuqzrQf7nw9+UJhOidEEFAhX0sCJr1fyXm/uPLr5849n/u1/j3mMWtqtYEFm5v/2pXUHdhzNjgaxzunQQzNX3wDdWIT0dT3bP3Qo8wIXSVWNDpWQys2xmW/3fbn1WpAWXUrWNaARvN+/7lu7jzysf8q4siuEh5A8fX5/+8XepLyEs8zfCd7raP/K9scf1T9iQjUUzU+JynOR3TQBgpAS1a16dVtusONTH8kc42ZjcFFKEApcJyBHjizt+O8Wr3e2P7Uv+3curyT7InhJ8nFCMmTJkqWlVlnzVsj0psc69vbrV1SyKnjJgCsEZMiQoanWINcfe39v6xfv808Suu6f5EVlQA7QAcC/1DXp42GmuazOiaJbjjDFSTUNCLOEZMiQEJAjrZYB9b0PmoPe7fpNZQAkYFb1A9CphtWwGlbNkmX/R59TpzhPAAwdf37XKWac1JZJAnc1VSfp0ufSqtK3NT/Y3DJVKZ5tYbHiwfvJAjc5dO7Pw4cZOb4vc51ccvZjh7ZfubaTC8y4evgeAjQaTYCpgZfq06TXpD++Rd6hHHTdZ8JKDs8yAsAD92/gjxSfGNvYzp7Wt3nj6sS2D5NxtXAeHNwnIFpOqSe+bg+2d6ejFXzXS8WlJUSyhBiKoAqj1yFuYQLQZCvFOMLDx8evPFuOF7HV0sqzXmsuP1mJ5tbfVirYc++VITnItvyN8rhJjqIrL7qS50KCX1mWeLXFr5Z02nqiJ2+lXOasIQHJkD75C6DjtQ8dH6Eg99FHyD+LBRclaomnqgL3lo++w4utWsBVbNYtr1htYZFBZgm2299Z5rmXl4+ZtwaPjDlt9CJ0gIeqXNXFN7WKDtMLnW1y+9e6Txc5z2le25Te0BTVic89ovf3yIXE1QeP4FbJbmCla21V723evjklncued/0mZA6AcEABfH/6rXzb2IM5fJD1zLvIB02zm3ak+iK0hK8mvmBnzA/Hoy3LJoyW4XIITn5daAbaX0w3XBnIIsCBL7zDpFNvPWoRvBY+larBZ5Gb6eX20xXxf/2QDMkgmc+sl8MyJH2cf/Seka3yGFv+kR7Ok/1riwxhvruJUYffhGCxWKS0IqqReFXFN5g583qaNokC0aSf/JUaVn95ufNrJ9SwGlapMkkUXuPMAy/E24CJbQVeVWeIXDAFbEYwWCymes3XAMZW9d5gC8k3Rn++79hJjErvvcBB0P53/sBBAOa5knmdnWwlywlQZ7mHfQivOsd6yVDEkGIwxDVrfo2yY4nJ5tMTLe9rkYKSkUtcEqXk9/DKok9d5nLlfpzxyn0Tu7Gk7jLVNx8eQFw98oUi6Vz07NiZ3c/4y+bz+i1gHxliEhJnQFKn6MbVu01ISRaSX2b8vk/4q4D77GErCTGxM2EBW1P8pLr4YJkjiKORhZ91hR1qpsG9m89O9pASOXxMXF6wrCb0ACIidBJe8ZNdjHID24DsA/RhCImInAnztQqr897UeI1lDp3ToU8TO2jiat39q0cLD7GJlNBdERFhLd8dPjamtldx98K8dhNGD91cZ6zKPl6hyNJPP5rYIcsGFGprVva+Nl4GF455lVzI0UcvU0ySX7R5aKabHnrwMRSJlhiQr7fT1QCprYPnmKHgzjQtliwZNrIZHyHBkHHLSMG4KI+JK6Lna+9wFuETUzecLAUHN6QkBARofHwCFImr6Mbld+Lw0Upwhy/acKWUMswS07YI77tllHJTqsW4t4lLtcLKBwyl0JN05YQSiqS0knW+a7eGu4W3rrgmJMwRNpCkLvRsaBoqKAkzZGgi66S/HV+Sf4GQxvor4xPbYDkVIuLS2RZ6CV4wRMQkNNpXGb9go1V8BSElJXRrWIXCupM9We2hvMPPG1bbaqxf3sWhamTzhjVpHsCc/a9dQ3xo82uJL9jRNRLfTTnnBO+u/pTkLT5c8fPNd9nt5tLmRbsVynbsXR704Bbeq775v0uht3btfyZT7OA5knjdAAAAAElFTkSuQmCC"},ol.filter.Lego.prototype.set=function(t,e){ol.filter.Base.prototype.set.call(this,t,e),"brickSize"==t&&this.pattern&&this.pattern.canvas.width!=e&&this.setBrick(e)},ol.filter.Lego.prototype.setBrick=function(t,e,i){if(t=Number(t)||30,"string"==typeof e){var o=new Image;o.src=this.img[e]||this.img.ol3,o.crossOrigin=i||null,e=o}if(e&&(this.pattern.img=e),this.pattern.img.width)this.pattern.canvas.width=this.pattern.canvas.height=t,this.pattern.ctx=this.pattern.canvas.getContext("2d"),this.pattern.ctx.fillStyle=this.pattern.ctx.createPattern(this.pattern.img,"repeat"),this.set("brickSize",t),e&&this.set("img",e.src);else{var n=this;this.pattern.img.onload=function(){n.setBrick(t,e)}}},ol.filter.Lego.prototype.getPattern=function(t,e){if(!this.pattern.ctx)return"transparent";var i=this.pattern.canvas,o=this.pattern.ctx,n=i.width/this.pattern.img.width;return o.save(),o.clearRect(0,0,i.width,i.height),o.scale(n,n),o.translate(t/=n,e/=n),o.beginPath(),o.clearRect(-2*i.width,-2*i.height,4*i.width,4*i.height),o.rect(-t,-e,2*i.width/n,2*i.height/n),o.fill(),o.restore(),o.createPattern(i,"repeat")},ol.filter.Lego.prototype.postcompose=function(t){var e=t.context,i=e.canvas,o=t.frameState.pixelRatio;"postrender"===t.type&&(o=1),e.save();var n=this.pattern.canvas.width*o,r=t.frameState.extent,s=t.frameState.viewState.resolution/o,a=[-Math.round(r[0]/s%n),Math.round(r[1]/s%n)],l=this.internal_.getContext("2d"),c=this.internal_.width=i.width,h=this.internal_.height=i.height;l.webkitImageSmoothingEnabled=l.mozImageSmoothingEnabled=l.msImageSmoothingEnabled=l.imageSmoothingEnabled=!1;var u=Math.floor((c-a[0])/n),d=Math.floor((h-a[1])/n);l.drawImage(i,a[0],a[1],u*n,d*n,0,0,u,d),e.webkitImageSmoothingEnabled=e.mozImageSmoothingEnabled=e.msImageSmoothingEnabled=e.imageSmoothingEnabled=!1,e.clearRect(0,0,c,h),e.drawImage(this.internal_,0,0,u,d,a[0],a[1],u*n,d*n),e.scale(o,o),e.fillStyle=this.getPattern(a[0]/o,a[1]/o),e.rect(0,0,c,h),e.fill(),e.restore()},ol.filter.PencilSketch=function(t){t=t||{},ol.filter.Base.call(this,t),this.set("blur",t.blur||8),this.set("intensity",t.intensity||.8)},ol.ext.inherits(ol.filter.PencilSketch,ol.filter.Base),ol.filter.PencilSketch.prototype.precompose=function(){},ol.filter.PencilSketch.prototype.postcompose=function(t){var e=t.context,i=e.canvas,o=i.width,n=i.height,r=document.createElement("canvas");r.width=o,r.height=n;var s=r.getContext("2d");s.filter="grayscale(1) invert(1) blur("+this.get("blur")+"px)",s.drawImage(i,0,0),e.save(),this.get("color")?(e.globalCompositeOperation="darken",e.globalAlpha=.3,e.drawImage(i,0,0)):(e.filter="grayscale(1)",e.drawImage(i,0,0)),e.globalCompositeOperation="color-dodge",e.globalAlpha=this.get("intensity"),e.drawImage(r,0,0),e.restore()},ol.filter.Pointillism=function(t){t=t||{},ol.filter.Base.call(this,t),this.set("saturate",Number(t.saturate)||2),this.pixels=[]},ol.ext.inherits(ol.filter.Pointillism,ol.filter.Base),ol.filter.Pointillism.prototype._getPixels=function(t){if(t>this.pixels.length)for(;this.pixels.length<t;)this.pixels.push([Math.random(),Math.random(),4*Math.random()+2]);return t},ol.filter.Pointillism.prototype.precompose=function(){},ol.filter.Pointillism.prototype.postcompose=function(t){var e=t.context,i=e.canvas,o=i.width,n=i.height,r=document.createElement("canvas");r.width=o,r.height=n;var s=r.getContext("2d");s.filter="saturate("+Math.round(2*this.get("saturate")*100)+"%)",s.drawImage(i,0,0),e.save(),e.filter="blur(3px) saturate("+100*this.get("saturate")+"%)",e.drawImage(i,0,0),e.filter="none",e.opacity=.5;for(var a=this._getPixels(o*n/50),l=0;l<a;l++){var c=Math.floor(this.pixels[l][0]*o),h=Math.floor(this.pixels[l][1]*n);e.fillStyle=ol.color.asString(s.getImageData(c,h,1,1).data),e.beginPath(),e.arc(c,h,this.pixels[l][2],0,2*Math.PI),e.fill()}e.restore()},ol.filter.SVGFilter=function(t){ol.filter.Base.call(this),this._svg={},t&&(t instanceof Array||(t=[t]),t.forEach((function(t){this.addSVGFilter(t)}).bind(this)))},ol.ext.inherits(ol.filter.SVGFilter,ol.filter.Base),ol.filter.SVGFilter.prototype.addSVGFilter=function(t){var e="#"+t.getId();this._svg[e]=1,this.dispatchEvent({type:"propertychange",key:"svg",oldValue:this._svg})},ol.filter.SVGFilter.prototype.removeSVGFilter=function(t){var e="#"+t.getId();delete this._svg[e],this.dispatchEvent({type:"propertychange",key:"svg",oldValue:this._svg})},ol.filter.SVGFilter.prototype.precompose=function(){},ol.filter.SVGFilter.prototype.postcompose=function(t){var e=[];for(var i in this._svg)e.push("url("+i+")");e=e.join(" ");var o=document.createElement("canvas");o.width=t.context.canvas.width,o.height=t.context.canvas.height,o.getContext("2d").drawImage(t.context.canvas,0,0),e&&(t.context.save(),t.context.clearRect(0,0,o.width,o.height),t.context.filter=e,t.context.drawImage(o,0,0),t.context.restore())},ol.filter.Texture=function(t){ol.filter.Base.call(this,t),this.setFilter(t)},ol.ext.inherits(ol.filter.Texture,ol.filter.Base),ol.filter.Texture.prototype.setFilter=function(t){var e;(t=t||{}).img?e=t.img:(e=new Image,t.src&&(ol.filter.Texture.Image&&ol.filter.Texture.Image[t.src]?e.src=ol.filter.Texture.Image[t.src]:e.src||(e.src=t.src)),e.crossOrigin=t.crossOrigin||null),this.set("rotateWithView",!1!==t.rotateWithView),this.set("opacity","number"==typeof t.opacity?t.opacity:1),this.set("ready",!1);var i=this;function o(e){i.pattern={},i.pattern.scale=t.scale||1,i.pattern.canvas=document.createElement("canvas"),i.pattern.canvas.width=e.width*i.pattern.scale,i.pattern.canvas.height=e.height*i.pattern.scale,i.pattern.canvas.width=e.width,i.pattern.canvas.height=e.height,i.pattern.ctx=i.pattern.canvas.getContext("2d"),i.pattern.ctx.fillStyle=i.pattern.ctx.createPattern(e,"repeat"),i.set("ready",!0)}e.width?o(e):e.onload=function(){o(e)}},ol.filter.Texture.prototype.getPattern=function(t,e){var i=this.pattern.canvas,o=this.pattern.ctx;return o.save(),o.translate(-t,e),o.beginPath(),o.rect(t,-e,i.width,i.height),o.fill(),o.restore(),o.createPattern(i,"repeat")},ol.filter.Texture.prototype.postcompose=function(t){if(this.pattern){var e=t.context,i=e.canvas,o=1.5*Math.max(i.width,i.height),n=t.frameState.pixelToCoordinateTransform;n||((n=t.frameState.pixelToCoordinateMatrix)[2]=n[4],n[3]=n[5],n[4]=n[12],n[5]=n[13]);var r=t.frameState.pixelRatio,s=t.frameState.viewState.resolution,a=i.width/2,l=i.height/2;if(e.save(),e.globalCompositeOperation="multiply",e.globalAlpha=this.get("opacity"),e.scale(r*this.pattern.scale,r*this.pattern.scale),this.get("rotateWithView"))e.fillStyle=this.getPattern((a*n[0]+l*n[1]+n[4])/(s*=this.pattern.scale),(a*n[2]+l*n[3]+n[5])/s),e.translate(a/this.pattern.scale,l/this.pattern.scale),e.rotate(t.frameState.viewState.rotation),e.beginPath(),e.rect(-a-o,-l-o,2*o,2*o),e.fill();else{var c=-(a*n[0]+l*n[1]+n[4])/s,h=(a*n[2]+l*n[3]+n[5])/s,u=Math.cos(t.frameState.viewState.rotation),d=Math.sin(t.frameState.viewState.rotation),p=(c*u-h*d)/this.pattern.scale,g=(c*d+h*u)/this.pattern.scale;e.translate(p,g),e.beginPath(),e.fillStyle=this.pattern.ctx.fillStyle,e.rect(-p-o,-g-o,2*o,2*o),e.fill()}e.restore()}},ol.format.GeoJSONX=function(t){t=t||{},ol.format.GeoJSON.call(this,t),this._hash={},this._count=0,this._extended=t.extended,this._whiteList="function"==typeof t.whiteList?t.whiteList:t.whiteList&&t.whiteList.indexOf?function(e){return t.whiteList.indexOf(e)>-1}:function(){return!0},this._blackList="function"==typeof t.blackList?t.blackList:t.blackList&&t.blackList.indexOf?function(e){return t.blackList.indexOf(e)>-1}:function(){return!1},this._deleteNull=!1!==t.deleteNullProperties&&[null,void 0,""];var e=2;t.dataProjection&&"EPSG:4326"!==t.dataProjection||(e=7),isNaN(parseInt(t.decimals))||(e=parseInt(t.decimals)),this._decimals=e,this.setLayout(t.layout||"XY")},ol.ext.inherits(ol.format.GeoJSONX,ol.format.GeoJSON),ol.format.GeoJSONX.prototype._radix="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/ !#$%&'()*-.:<=>?@[]^_`{|}~",ol.format.GeoJSONX.prototype._size=ol.format.GeoJSONX.prototype._radix.length,ol.format.GeoJSONX.prototype._type={Point:0,LineString:1,Polygon:2,MultiPoint:3,MultiLineString:4,MultiPolygon:5,GeometryCollection:null},ol.format.GeoJSONX.prototype._toType=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"],ol.format.GeoJSONX.prototype.setLayout=function(t){switch(t){case"XYZ":case"XYZM":this._layout=t;break;default:this._layout="XY"}},ol.format.GeoJSONX.prototype.getLayout=function(){return this._layout},ol.format.GeoJSONX.prototype.encodeNumber=function(t,e){!isNaN(Number(t))&&null!==t&&isFinite(t)||(t=0),e||0===e||(e=this._decimals),(t=Math.round(t*Math.pow(10,e)))<0?t=-2*t-1:t*=2;for(var i="",o=t;i=this._radix.charAt(o%this._size)+i,0!=(o=Math.floor(o/this._size)););return i},ol.format.GeoJSONX.prototype.decodeNumber=function(t,e){e||0===e||(e=this._decimals);var i=0;t.split("").forEach((function(t){i=i*this._size+this._radix.indexOf(t)}).bind(this));var o=Math.floor(i/2);return o!==i/2&&(o=-1-o),o/Math.pow(10,e)},ol.format.GeoJSONX.prototype.encodeCoordinates=function(t,e){var i,o,n;if("number"==typeof t[0])return o=this.encodeNumber(t[0],e)+","+this.encodeNumber(t[1],e),"Z"==this._layout[2]&&t.length>2&&(o+=","+this.encodeNumber(t[i][2],2)),"M"==this._layout[3]&&t.length>3&&(o+=","+this.encodeNumber(t[i][3],0)),o;if(t.length&&t[0]){if("number"==typeof t[0][0]){var r=[0,0,0,0],s=[],a="Z"==this._layout[2]&&t[0].length>2,l="M"==this._layout[3]&&t[0].length>3;for(i=0;i<t.length;i++){n=[Math.round(t[i][0]*Math.pow(10,e)),Math.round(t[i][1]*Math.pow(10,e))],a&&(n[2]=t[i][2]),l&&(n[3]=t[i][3]),t[i]=n;var c=t[i][0]-r[0],h=t[i][1]-r[1];0!=i&&0===c&&0===h||(o=this.encodeNumber(c,0)+","+this.encodeNumber(h,0)+(a?","+this.encodeNumber(t[i][2]-r[2],2):"")+(l?","+this.encodeNumber(t[i][3]-r[3],0):""),s.push(o),r=t[i])}return s.join(";")}for(i=0;i<t.length;i++)t[i]=this.encodeCoordinates(t[i],e);return t}return this.encodeCoordinates([0,0],e)},ol.format.GeoJSONX.prototype.decodeCoordinates=function(t,e){var i,o;if("string"==typeof t){if((t=t.split(";")).length>1){var n=Math.pow(10,e),r=[0,0,0,0];return t.forEach((function(i,o){t[o]=i.split(","),t[o][0]=Math.round((this.decodeNumber(t[o][0],e)+r[0])*n)/n,t[o][1]=Math.round((this.decodeNumber(t[o][1],e)+r[1])*n)/n,t[o].length>2&&(t[o][2]=Math.round((this.decodeNumber(t[o][2],2)+r[2])*n)/n),t[o].length>3&&(t[o][3]=Math.round((this.decodeNumber(t[o][3],0)+r[3])*n)/n),r=t[o]}).bind(this)),t}return t=t[0].split(","),o=[this.decodeNumber(t[0],e),this.decodeNumber(t[1],e)],t.length>2&&(o[2]=this.decodeNumber(t[2],2)),t.length>3&&(o[3]=this.decodeNumber(t[3],0)),o}if(t.length){var s=[];for(i=0;i<t.length;i++)s[i]=this.decodeCoordinates(t[i],e);return s}return[0,0]},ol.format.GeoJSONX.prototype.writeFeaturesObject=function(t,e){e=e||{},this._count=0,this._hash={};var i=ol.format.GeoJSON.prototype.writeFeaturesObject.call(this,t,e);i.decimals=this._decimals,i.hashProperties=[],Object.keys(this._hash).forEach((function(t){i.hashProperties.push(t)}).bind(this)),this._count=0,this._hash={};var o=i.features;return delete i.features,i.features=o,i},ol.format.GeoJSONX.prototype.writeFeatureObject=function(t,e){var i=ol.format.GeoJSON.prototype.writeFeatureObject.call(this,t,e);if("Feature"!==i.type)throw"GeoJSONX doesn't support "+i.type+".";var o,n=[];if("Point"===i.geometry.type)n.push(this.encodeCoordinates(i.geometry.coordinates,this._decimals));else if("MultiPoint"===i.geometry.type){var r=[];i.geometry.coordinates.forEach((function(t){r.push(this.encodeCoordinates(t,this._decimals))}).bind(this)),n.push([this._type[i.geometry.type],r.join(";")])}else{if(!this._type[i.geometry.type])throw"GeoJSONX doesn't support "+i.geometry.type+".";n.push([this._type[i.geometry.type],this.encodeCoordinates(i.geometry.coordinates,this._decimals)])}var s=[];for(o in i.properties)this._whiteList(o)&&!this._blackList(o)&&(this._hash.hasOwnProperty(o)||(this._hash[o]=this._count,this._count++),(!this._deleteNull||this._deleteNull.indexOf(i.properties[o])<0)&&s.push(this._hash[o],i.properties[o]));if((s.length||this._extended)&&n.push(s),this._extended){var a=!1;for(o in s={},i)/^type$|^geometry$|^properties$/.test(o)||(s[o]=i[o],a=!0);a&&n.push(s)}return n},ol.format.GeoJSONX.prototype.writeGeometryObject=function(t,e){var i=ol.format.GeoJSON.prototype.writeGeometryObject.call(this,t,e);return"Point"===i.type?this.encodeCoordinates(i.coordinates,this._decimals):[this._type[i.type],this.encodeCoordinates(i.coordinates,this._decimals)]},ol.format.GeoJSONX.prototype.readFeaturesFromObject=function(t,e){if(this._hashProperties=t.hashProperties||[],(e=e||{}).decimals=parseInt(t.decimals),!e.decimals&&0!==e.decimals)throw"Bad file format...";return ol.format.GeoJSON.prototype.readFeaturesFromObject.call(this,t,e)},ol.format.GeoJSONX.prototype.readFeatureFromObject=function(t,e){var i={type:"Feature"};if("string"==typeof t[0])i.geometry={type:"Point",coordinates:this.decodeCoordinates(t[0],"number"==typeof e.decimals?e.decimals:this.decimals)};else if(i.geometry={type:this._toType[t[0][0]]},"MultiPoint"===i.geometry.type){var o=i.geometry.coordinates=[];t[0][1].split(";").forEach((function(t){t=t.split(","),o.push([this.decodeNumber(t[0],e.decimals),this.decodeNumber(t[1],e.decimals)])}).bind(this))}else i.geometry.coordinates=this.decodeCoordinates(t[0][1],"number"==typeof e.decimals?e.decimals:this.decimals);if(this._hashProperties&&t[1]){i.properties={};for(var n=t[1],r=0;r<n.length;r+=2)i.properties[this._hashProperties[n[r]]]=n[r+1]}else i.properties=t[1];if(t[2])for(var s in t[2])i[s]=t[2][s];return ol.format.GeoJSON.prototype.readFeatureFromObject.call(this,i,e)},ol.format.GeoJSONP=function(t){t=t||{},ol.format.GeoJSONX.call(this,t),this._lineFormat=new ol.format.Polyline({factor:Math.pow(10,t.decimals||6)})},ol.ext.inherits(ol.format.GeoJSONP,ol.format.GeoJSONX),ol.format.GeoJSONP.prototype.encodeCoordinates=function(t){var e;if("number"==typeof t[0])return e=new ol.geom.Point(t),this._lineFormat.writeGeometry(e);if(t.length&&t[0]){if("number"==typeof t[0][0])return e=new ol.geom.LineString(t),this._lineFormat.writeGeometry(e);for(var i=[],o=0;o<t.length;o++)i[o]=this.encodeCoordinates(t[o]);return i}return this.encodeCoordinates([0,0])},ol.format.GeoJSONP.prototype.decodeCoordinates=function(t){var e,i;if("string"==typeof t)return(i=this._lineFormat.readGeometry(t)).getCoordinates()[0];if(t.length){var o=[];if("string"==typeof t[0])for(e=0;e<t.length;e++)i=this._lineFormat.readGeometry(t[e]),o[e]=i.getCoordinates();else for(e=0;e<t.length;e++)o[e]=this.decodeCoordinates(t[e]);return o}return null},ol.format.GeoRSS=function(t){t=t||{},ol.Object.call(this,t)},ol.ext.inherits(ol.format.GeoRSS,ol.Object),ol.format.GeoRSS.prototype.readFeature=function(t,e){e=e||{};for(var i,o=t.children,n=new ol.Feature,r=0;i=o[r];r++)n.set(i.tagName,i.innerHTML);var s,a,l=[];if(n.get("geo:long"))a=new ol.geom.Point([parseFloat(n.get("geo:long")),parseFloat(n.get("geo:lat"))]),n.unset("geo:long"),n.unset("geo:lat");else if(n.get("georss:point"))l=n.get("georss:point").trim().split(" "),a=new ol.geom.Point([parseFloat(l[1]),parseFloat(l[0])]),n.unset("georss:point");else{if(!n.get("georss:polygon"))return n.get("georss:where")?(console.warn("[GeoRSS] GML format not implemented"),n.unset("georss:where"),null):(console.warn("[GeoRSS] unknown geometry"),null);s=n.get("georss:polygon").trim().split(" ");for(var c=0;c<s.length;c+=2)l.push([parseFloat(s[c+1]),parseFloat(s[c])]);a=new ol.geom.Polygon([l]),n.unset("georss:polygon")}return(e.featureProjection||this.get("featureProjection"))&&a.transform(e.dataProjection||this.get("dataProjection")||"EPSG:4326",e.featureProjection||this.get("featureProjection")),n.setGeometry(a),n},ol.format.GeoRSS.prototype.readFeatures=function(t,e){var i;if("string"==typeof t){var o=(new DOMParser).parseFromString(t,"text/xml");i=o.getElementsByTagName(this.getDocumentItemsTagName(o))}else if(t instanceof Document)i=t.getElementsByTagName(this.getDocumentItemsTagName(t));else{if(!(t instanceof Node))return[];i=t}for(var n,r=[],s=0;n=i[s];s++){var a=this.readFeature(n,e);a&&r.push(a)}return r},ol.format.GeoRSS.prototype.getDocumentItemsTagName=function(t){switch(t.documentElement.tagName){case"feed":return"entry";default:return"item"}},ol.interaction.Clip=function(t){this.layers_=[],ol.interaction.Pointer.call(this,{handleDownEvent:this._setPosition,handleMoveEvent:this._setPosition}),this.precomposeBind_=this.precompose_.bind(this),this.postcomposeBind_=this.postcompose_.bind(this),t=t||{},this.pos=!1,this.radius=t.radius||100,t.layers&&this.addLayer(t.layers)},ol.ext.inherits(ol.interaction.Clip,ol.interaction.Pointer),ol.interaction.Clip.prototype.setMap=function(t){var e;if(this.getMap()){for(e=0;e<this.layers_.length;e++)this.layers_[e].un(["precompose","prerender"],this.precomposeBind_),this.layers_[e].un(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch(i){}}if(ol.interaction.Pointer.prototype.setMap.call(this,t),t){for(e=0;e<this.layers_.length;e++)this.layers_[e].on(["precompose","prerender"],this.precomposeBind_),this.layers_[e].on(["postcompose","postrender"],this.postcomposeBind_);try{t.renderSync()}catch(i){}}},ol.interaction.Clip.prototype.setRadius=function(t){if(this.radius=t,this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.interaction.Clip.prototype.getRadius=function(){return this.radius},ol.interaction.Clip.prototype.addLayer=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){if(this.getMap()){t[e].on(["precompose","prerender"],this.precomposeBind_),t[e].on(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch(i){}}this.layers_.push(t[e])}},ol.interaction.Clip.prototype.removeLayers=function(){this.removeLayer(this.layers_)},ol.interaction.Clip.prototype.removeLayer=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var i;for(i=0;i<this.layers_.length&&this.layers_[i]!==t[e];i++);i!=this.layers_.length&&this.getMap()&&(this.layers_[i].un(["precompose","prerender"],this.precomposeBind_),this.layers_[i].un(["postcompose","postrender"],this.postcomposeBind_),this.layers_.splice(i,1))}if(this.getMap())try{this.getMap().renderSync()}catch(o){}},ol.interaction.Clip.prototype.setPosition=function(t){if(this.getMap()){this.pos=this.getMap().getPixelFromCoordinate(t);try{this.getMap().renderSync()}catch(e){}}},ol.interaction.Clip.prototype.getPosition=function(){return this.pos?this.getMap().getCoordinateFromPixel(this.pos):null},ol.interaction.Clip.prototype.setPixelPosition=function(t){if(this.pos=t,this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.interaction.Clip.prototype.getPixelPosition=function(){return this.pos},ol.interaction.Clip.prototype._setPosition=function(t){if(("pointermove"!==t.type||"onclick"!==this.get("action"))&&(t.pixel&&(this.pos=t.pixel),this.getMap()))try{this.getMap().renderSync()}catch(t){}},ol.interaction.Clip.prototype.precompose_=function(t){if(this.getActive()){var e=t.context,i=t.frameState.pixelRatio;e.save(),e.beginPath();var o=[this.pos[0],this.pos[1]],n=this.radius,r=t.inversePixelTransform;r?n=(o=[o[0]*r[0]-o[1]*r[1]+r[4],-o[0]*r[2]+o[1]*r[3]+r[5]])[0]-((this.pos[0]-n)*r[0]-this.pos[1]*r[1]+r[4]):(o[0]*=i,o[1]*=i,n*=i),e.arc(o[0],o[1],n,0,2*Math.PI),e.clip()}},ol.interaction.Clip.prototype.postcompose_=function(t){this.getActive()&&t.context.restore()},ol.interaction.Clip.prototype.setActive=function(t){if(t!==this.getActive()){var e;if(ol.interaction.Pointer.prototype.setActive.call(this,t),t)for(e=0;e<this.layers_.length;e++)this.layers_[e].on(["precompose","prerender"],this.precomposeBind_),this.layers_[e].on(["postcompose","postrender"],this.postcomposeBind_);else for(e=0;e<this.layers_.length;e++)this.layers_[e].un(["precompose","prerender"],this.precomposeBind_),this.layers_[e].un(["postcompose","postrender"],this.postcomposeBind_);if(this.getMap())try{this.getMap().renderSync()}catch(i){}}},ol.interaction.CurrentMap=function(t){var e=(t=t||{}).condition||function(){return!0};ol.interaction.Interaction.call(this,{handleEvent:(function(t){return e(t)&&(this.isCurrentMap()||(this.setCurrentMap(this.getMap()),this.dispatchEvent({type:"focus",map:this.getMap()}),this.getMap().dispatchEvent({type:"focus",map:this.getMap()}))),!0}).bind(this)}),t.onKeyDown&&document.addEventListener("keydown",(function(e){this.isCurrentMap()&&!/INPUT|TEXTAREA|SELECT/.test(document.activeElement.tagName)&&t.onKeyDown({type:e.type,map:this.getMap(),originalEvent:e})}).bind(this)),t.onKeyPress&&document.addEventListener("keydown",(function(e){this.isCurrentMap()&&!/INPUT|TEXTAREA|SELECT/.test(document.activeElement.tagName)&&t.onKeyPress({type:e.type,map:this.getMap(),originalEvent:e})}).bind(this)),t.onKeyUp&&document.addEventListener("keydown",(function(e){this.isCurrentMap()&&!/INPUT|TEXTAREA|SELECT/.test(document.activeElement.tagName)&&t.onKeyUp({type:e.type,map:this.getMap(),originalEvent:e})}).bind(this))},ol.ext.inherits(ol.interaction.CurrentMap,ol.interaction.Interaction),ol.interaction.CurrentMap.prototype._currentMap=void 0,ol.interaction.CurrentMap.prototype.isCurrentMap=function(){return this.getMap()===ol.interaction.CurrentMap.prototype._currentMap},ol.interaction.CurrentMap.prototype.getCurrentMap=function(){return ol.interaction.CurrentMap.prototype._currentMap},ol.interaction.CurrentMap.prototype.setCurrentMap=function(t){ol.interaction.CurrentMap.prototype._currentMap=t},ol.interaction.Blob=function(t){ol.interaction.Clip.call(this,t)},ol.ext.inherits(ol.interaction.Blob,ol.interaction.Clip),ol.interaction.Blob.prototype.precompose_=function(t){if(this.getActive()){var e=t.context,i=t.frameState.pixelRatio;if(e.save(),!this.pos)return e.beginPath(),e.moveTo(0,0),void e.clip();var o=[this.pos[0],this.pos[1]],n=t.inversePixelTransform;n?o=[o[0]*n[0]-o[1]*n[1]+n[4],-o[0]*n[2]+o[1]*n[3]+n[5]]:(o[0]*=i,o[1]*=i),this.frame||(this.frame=t.frameState.time);var r=t.frameState.time-this.frame;this.frame=t.frameState.time,o=this._getCenter(o,r);var s=this._calculate(r),a=s[0];e.beginPath(),e.moveTo(o[0]+a[0],o[1]+a[1]);for(var l=1;a=s[l];l++)e.lineTo(o[0]+a[0],o[1]+a[1]);e.clip(),t.frameState.animate=!0}},ol.interaction.Blob.prototype._getCenter=function(t,e){if(this._center){var i=this.get("stiffness")||20,o=-1*(this.get("damping")||7),n=Math.max(this.get("mass")||1,.1),r=Math.min(e/1e3,1/30),s=[i*(t[0]-this._center[0]),i*(t[1]-this._center[1])],a=[o*this._velocity[0],o*this._velocity[1]],l=[(s[0]+a[0])/n,(s[1]+a[1])/n];this._velocity[0]+=l[0]*r,this._velocity[1]+=l[1]*r,this._center[0]+=this._velocity[0]*r,this._center[1]+=this._velocity[1]*r}else this._center=t,this._velocity=[0,0];return this._center},ol.interaction.Blob.prototype._calculate=function(t){var e,i=this.get("points")||10;if(!this._waves||this._waves.length!==i)for(this._waves=[],e=0;e<i;e++)this._waves.push({angle:Math.random()*Math.PI,noise:Math.random()});var o=[],n=(this._velocity[0]*this._velocity[0]+this._velocity[1]*this._velocity[1])/500;for(this._rotation=(this._rotation||0)+(this._velocity[0]>0?1:-1)*Math.min(.015,n/7e4*t),e=0;e<i;e++){var r=2*e*Math.PI/i+this._rotation,s=this.radius+Math.min(this.radius,n),a=Math.cos(this._waves[e].angle)*s/4*this._waves[e].noise*(this.get("amplitude")||1);o.push([(this.radius+a)*Math.cos(r),(this.radius+a)*Math.sin(r)]),this._waves[e].angle+=(Math.PI+Math.random()+n/200)/350*t*(this.get("fuss")||1),this._waves[e].noise=Math.min(1,Math.max(0,this._waves[e].noise+.1*(Math.random()-.5)*(this.get("fuss")||1)))}return o.push(o[0]),ol.coordinate.cspline(o,{tension:this.get("tension")})},ol.interaction.CenterTouch=function(t){t=t||{},this._listener={};var e=/^pointermove$|^pointerup$/;this.ctouch=new ol.interaction.Interaction({handleEvent:function(t){return e.test(t.type)&&this.getMap()&&(t.coordinate=this.getMap().getView().getCenter(),t.pixel=this.getMap().getSize(),t.pixel=[t.pixel[0]/2,t.pixel[1]/2]),!0}}),this._target=new ol.control.Target({style:t.targetStyle,composite:t.composite}),ol.interaction.Interaction.call(this,{handleEvent:function(i){return e.test(i.type)&&(this.pos_=i.coordinate),!t.handleEvent||t.handleEvent.call(this,i)}})},ol.ext.inherits(ol.interaction.CenterTouch,ol.interaction.Interaction),ol.interaction.CenterTouch.prototype.setMap=function(t){this.getMap()&&(this.getMap().removeInteraction(this.ctouch),this.getMap().removeInteraction(this._target)),ol.interaction.Interaction.prototype.setMap.call(this,t),this.getMap()&&this.getActive()&&(this.getMap().addInteraction(this.ctouch),this.getMap().addControl(this._target))},ol.interaction.CenterTouch.prototype.setActive=function(t){ol.interaction.Interaction.prototype.setActive.call(this,t),this.pos_=null,this.getMap()&&(this.getActive()?(this.getMap().addInteraction(this.ctouch),this.getMap().addControl(this._target)):(this.getMap().removeInteraction(this.ctouch),this.getMap().removeControl(this._target)))},ol.interaction.CenterTouch.prototype.getPosition=function(){if(!this.pos_){var t=this.getMap().getSize();t=[t[0]/2,t[1]/2],this.pos_=this.getMap().getCoordinateFromPixel(t)}return this.pos_},ol.interaction.CopyPaste=function(t){t=t||{},this.features=[],this._cloneFeature=!0;var e=t.condition;"function"!=typeof e&&(e=function(t){if(t.originalEvent.ctrlKey){if(/^c$/i.test(t.originalEvent.key))return"copy";if(/^x$/i.test(t.originalEvent.key))return"cut";if(/^v$/i.test(t.originalEvent.key))return"paste"}return!1}),this._featuresSource=t.features||new ol.Collection,this.setSources(t.sources),this.setDestination(t.destination),ol.interaction.CurrentMap.call(this,{condition:t.mapCondition,onKeyDown:(function(t){switch(e(t)){case"copy":this.copy({silent:!1});break;case"cut":this.copy({cut:!0,silent:!1});break;case"paste":this.paste({silent:!1})}}).bind(this)})},ol.ext.inherits(ol.interaction.CopyPaste,ol.interaction.CurrentMap),ol.interaction.CopyPaste.prototype.setSources=function(t){t?(this._source=[],this._source=t instanceof Array?t:[t]):this._source=null},ol.interaction.CopyPaste.prototype.getSources=function(){return this._source},ol.interaction.CopyPaste.prototype.setDestination=function(t){this._destination=t},ol.interaction.CopyPaste.prototype.getDestination=function(){return this._destination},ol.interaction.CopyPaste.prototype.getFeatures=function(){return this.features},ol.interaction.CopyPaste.prototype.copy=function(t){var e=(t=t||{}).features||this._featuresSource.getArray();if(t.cut){var i=this._source||[this._destination];e.forEach(function(t){i.forEach(function(e){try{e.removeFeature(t)}catch(i){}})})}this._cloneFeature?(this.features=[],e.forEach((function(t){this.features.push(t.clone())}).bind(this))):this.features=e,!1===t.silent&&this.dispatchEvent({type:t.cut?"cut":"copy",time:(new Date).getTime()})},ol.interaction.CopyPaste.prototype.paste=function(t){var e=(t=t||{}).features||this.features;if(e){var i=t.destination||this._destination;i&&(i.addFeatures(this.features),this._cloneFeature&&this.copy({features:this.features}))}!1===t.silent&&this.dispatchEvent({type:"paste",features:e,time:(new Date).getTime()})},ol.interaction.Delete=function(t){ol.interaction.Select.call(this,t),this.on("select",(function(t){this.getFeatures().clear(),this.delete(t.selected)}).bind(this))},ol.ext.inherits(ol.interaction.Delete,ol.interaction.Select),ol.interaction.Delete.prototype._getSources=function(t){if(!this.getMap())return[];t||(t=this.getMap().getLayers());var e=[];return t.forEach((function(t){t.getLayers?e=e.concat(this._getSources(t.getLayers())):t.getSource&&t.getSource()instanceof ol.source.Vector&&e.push(t.getSource())}).bind(this)),e},ol.interaction.Delete.prototype.delete=function(t){if(t&&(t.length||t.getLength())){this.dispatchEvent({type:"deletestart",features:t});var e=[];this._getSources().forEach(function(i){try{t.forEach(function(t){i.removeFeature(t),e.push(t)})}catch(o){}}),this.dispatchEvent({type:"deleteend",features:e})}},ol.interaction.DragOverlay=function(t){t||(t={});var e=t.offset||[0,0];ol.interaction.Pointer.call(this,{handleDownEvent:function(i){var o=i.frameState.viewState.resolution,n=[i.coordinate[0]+e[0]*o,i.coordinate[1]-e[1]*o];return/^(BUTTON|A)$/.test(i.originalEvent.target.tagName)?(this._dragging=!1,!0):!!this._dragging&&(!1!==t.centerOnClick?this._dragging.setPosition(n,!0):n=this._dragging.getPosition(),this.dispatchEvent({type:"dragstart",overlay:this._dragging,originalEvent:i.originalEvent,frameState:i.frameState,coordinate:n}),!0)},handleDragEvent:function(t){var i=t.frameState.viewState.resolution,o=[t.coordinate[0]+e[0]*i,t.coordinate[1]-e[1]*i];this._dragging&&(this._dragging.setPosition(o,!0),this.dispatchEvent({type:"dragging",overlay:this._dragging,originalEvent:t.originalEvent,frameState:t.frameState,coordinate:o}))},handleUpEvent:function(t){var i=t.frameState.viewState.resolution;return!!this._dragging&&(this.dispatchEvent({type:"dragend",overlay:this._dragging,originalEvent:t.originalEvent,frameState:t.frameState,coordinate:[t.coordinate[0]+e[0]*i,t.coordinate[1]-e[1]*i]}),this._dragging=!1,!0)}}),this._overlays=[],t.overlays instanceof Array||(t.overlays=[t.overlays]),t.overlays.forEach(this.addOverlay.bind(this))},ol.ext.inherits(ol.interaction.DragOverlay,ol.interaction.Pointer),ol.interaction.DragOverlay.prototype.addOverlay=function(t){for(var e,i=0;e=this._overlays[i];i++)if(e===t)return;if(t.element.parentElement&&t.element.parentElement.classList.contains("ol-overlaycontainer-stopevent"))console.warn("[DragOverlay.addOverlay] overlay must be created with stopEvent set to false!");else{var o=(function(){this.getMap()===t.getMap()&&(this._dragging=t)}).bind(this);this._overlays.push({overlay:t,listener:o}),t.element.addEventListener("pointerdown",o)}},ol.interaction.DragOverlay.prototype.removeOverlay=function(t){for(var e,i=0;e=this._overlays[i];i++)if(e.overlay===t){var o=this._overlays.splice(i,1)[0];t.element.removeEventListener("pointerdown",o.listener);break}},ol.interaction.DrawHole=function(t){t||(t={});var e=this;this._select=new ol.interaction.Select({style:t.style}),this._select.setActive(!1);var i,o=t.geometryFunction;if(i=o?function(t,i){return i=e._geometryFn(t,i),o(t,i)}:function(t,i){return e._geometryFn(t,i)},t.type="Polygon",t.geometryFunction=i,ol.interaction.Draw.call(this,t),t.layers&&("function"==typeof t.layers?this.layers_=t.layers:t.layers.indexOf&&(this.layers_=function(e){return t.layers.indexOf(e)>=0})),"function"==typeof t.features)this._features=t.features;else if(t.features){var n=t.features;this._features=function(t){return n.indexOf?!!n[n.indexOf(t)]:!!n.item(n.getArray().indexOf(t))}}else this._features=function(){return!0};this.on("drawstart",this._startDrawing.bind(this)),this.on("drawend",this._finishDrawing.bind(this))},ol.ext.inherits(ol.interaction.DrawHole,ol.interaction.Draw),ol.interaction.DrawHole.prototype.setMap=function(t){this.getMap()&&this.getMap().removeInteraction(this._select),t&&t.addInteraction(this._select),ol.interaction.Draw.prototype.setMap.call(this,t)},ol.interaction.DrawHole.prototype.setActive=function(t){this._select.getFeatures().clear(),ol.interaction.Draw.prototype.setActive.call(this,t)},ol.interaction.DrawHole.prototype.removeLastPoint=function(){this._feature&&this._feature.getGeometry().getCoordinates()[0].length>2&&ol.interaction.Draw.prototype.removeLastPoint.call(this)},ol.interaction.DrawHole.prototype.getPolygon=function(){return this._polygon},ol.interaction.DrawHole.prototype._startDrawing=function(t){var e=this.getMap();this._feature=t.feature;var i=t.feature.getGeometry().getCoordinates()[0][0];this._current=null,e.forEachFeatureAtPixel(e.getPixelFromCoordinate(i),(function(t,e){if(this._features(t,e)){var o=t.getGeometry();if("Polygon"===o.getType()&&o.intersectsCoordinate(i))this._polygonIndex=!1,this._polygon=o,this._current=t;else if("MultiPolygon"===o.getType()&&o.intersectsCoordinate(i))for(var n,r=0;n=o.getPolygon(r);r++)if(n.intersectsCoordinate(i)){this._polygonIndex=r,this._polygon=n,this._current=t;break}}}).bind(this),{layerFilter:this.layers_}),this._select.getFeatures().clear(),this._current?this._select.getFeatures().push(this._current):(this.setActive(!1),this.setActive(!0))},ol.interaction.DrawHole.prototype._finishDrawing=function(t){t.hole=t.feature,t.feature=this._select.getFeatures().item(0),this.dispatchEvent({type:"modifystart",features:[this._current]});var e=t.hole.getGeometry().getCoordinates()[0];if(e.length>3)if(!1!==this._polygonIndex){for(var i,o=t.feature.getGeometry(),n=new ol.geom.MultiPolygon([]),r=0;i=o.getPolygon(r);r++)r===this._polygonIndex?(i.appendLinearRing(new ol.geom.LinearRing(e)),n.appendPolygon(i)):n.appendPolygon(i);t.feature.setGeometry(n)}else this.getPolygon().appendLinearRing(new ol.geom.LinearRing(e));this.dispatchEvent({type:"modifyend",features:[this._current]}),this._feature=null,this._select.getFeatures().clear()},ol.interaction.DrawHole.prototype._geometryFn=function(t,e){var i=t[0].pop();return this.getPolygon()&&!this.getPolygon().intersectsCoordinate(i)||(this.lastOKCoord=[i[0],i[1]]),t[0].push([this.lastOKCoord[0],this.lastOKCoord[1]]),e?e.setCoordinates([t[0].concat([t[0][0]])]):e=new ol.geom.Polygon(t),e},ol.interaction.DrawRegular=function(t){t||(t={}),this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.maxCircleCoordinates_=t.maxCircleCoordinates||100,this.features_=t.features,this.source_=t.source,this.conditionFn_=t.condition,this.squareFn_=t.squareCondition,this.centeredFn_=t.centerCondition,this.canRotate_=!1!==t.canRotate,this.geometryName_=t.geometryName,this.setSides(t.sides);var e=ol.style.Style.defaultStyle(!0);this.sketch_=new ol.Collection,this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:this.sketch_,useSpatialIndex:!1}),name:"DrawRegular overlay",displayInLayerSwitcher:!1,style:t.style||e}),ol.interaction.Interaction.call(this,{handleEvent:this.handleEvent_})},ol.ext.inherits(ol.interaction.DrawRegular,ol.interaction.Interaction),ol.interaction.DrawRegular.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Interaction.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},ol.interaction.DrawRegular.prototype.setActive=function(t){this.reset(),ol.interaction.Interaction.prototype.setActive.call(this,t)},ol.interaction.DrawRegular.prototype.reset=function(){this.overlayLayer_.getSource().clear(),this.started_=!1},ol.interaction.DrawRegular.prototype.setSides=function(t){t=parseInt(t),this.sides_=t>2?t:0},ol.interaction.DrawRegular.prototype.canRotate=function(t){return!0!==t&&!1!==t||(this.canRotate_=t),this.canRotate_},ol.interaction.DrawRegular.prototype.getSides=function(){return this.sides_},ol.interaction.DrawRegular.prototype.startAngle={default:Math.PI/2,3:-Math.PI/2,4:Math.PI/4},ol.interaction.DrawRegular.prototype.getGeom_=function(){if(this.overlayLayer_.getSource().clear(),!this.center_)return!1;var t;if(this.coord_){var e,i,o,n,r,s=this.center_,a=this.coord_;if(!this.sides_&&this.square_&&!this.centered_)return e=[a[0]-(s=[(a[0]+s[0])/2,(a[1]+s[1])/2])[0],a[1]-s[1]],o=Math.sqrt(e[0]*e[0]+e[1]*e[1]),n=new ol.geom.Circle(s,o,"XY"),r=this.getMap().getPixelFromCoordinate(s),i=Math.max(100,Math.abs(r[0]-this.coordPx_[0]),Math.abs(r[1]-this.coordPx_[1])),i=Math.min(this.maxCircleCoordinates_,Math.round(i/3)),ol.geom.Polygon.fromCircle(n,i,0);var l=this.canRotate_&&this.centered_&&this.square_;if(e=[a[0]-s[0],a[1]-s[1]],this.square_&&!l){var c=Math.max(Math.abs(e[0]),Math.abs(e[1]));a=[s[0]+(e[0]>0?c:-c),s[1]+(e[1]>0?c:-c)]}if((o=Math.sqrt(e[0]*e[0]+e[1]*e[1]))>0){var h;if(n=new ol.geom.Circle(s,o,"XY"),h=l?Math.atan2(e[1],e[0]):this.startAngle[this.sides_]||this.startAngle.default,this.sides_?t=ol.geom.Polygon.fromCircle(n,this.sides_,h):(r=this.getMap().getPixelFromCoordinate(this.center_),i=Math.max(100,Math.abs(r[0]-this.coordPx_[0]),Math.abs(r[1]-this.coordPx_[1])),i=Math.min(this.maxCircleCoordinates_,Math.round(i/(this.centered_?3:5))),t=ol.geom.Polygon.fromCircle(n,i,0)),l)return t;var u=t.getExtent(),d=((s=this.centered_?[2*this.center_[0]-this.coord_[0],2*this.center_[1]-this.coord_[1]]:this.center_)[0]-a[0])/(u[0]-u[2]),p=(s[1]-a[1])/(u[1]-u[3]);if(this.square_){var g=Math.min(Math.abs(d),Math.abs(p));d=Math.sign(d)*g,p=Math.sign(p)*g}var f=[s[0]-u[0]*d,s[1]-u[1]*p];return t.applyTransform(function(t,e,i){for(var o=0;o<t.length;o+=i)e[o]=t[o]*d+f[0],e[o+1]=t[o+1]*p+f[1];return e}),t}}return new ol.geom.Point(this.center_)},ol.interaction.DrawRegular.prototype.drawSketch_=function(t){if(this.overlayLayer_.getSource().clear(),t){this.square_=this.squareFn_?this.squareFn_(t):t.originalEvent.shiftKey,this.centered_=this.centeredFn_?this.centeredFn_(t):t.originalEvent.metaKey||t.originalEvent.ctrlKey;var e=this.getGeom_();if(e){var i=this.feature_;return"Polygon"===e.getType()&&i.getGeometry().setCoordinates(e.getCoordinates()),this.overlayLayer_.getSource().addFeature(i),this.coord_&&this.square_&&(this.canRotate_&&this.centered_&&this.coord_||!this.sides_&&!this.centered_)&&this.overlayLayer_.getSource().addFeature(new ol.Feature(new ol.geom.LineString([this.center_,this.coord_]))),i}}},ol.interaction.DrawRegular.prototype.drawPoint_=function(t,e){e||this.overlayLayer_.getSource().clear(),this.overlayLayer_.getSource().addFeature(new ol.Feature(new ol.geom.Point(t)))},ol.interaction.DrawRegular.prototype.handleEvent_=function(t){var e,i;switch(this._eventTime=new Date,t.type){case"pointerdown":if(this.conditionFn_&&!this.conditionFn_(t))break;this.downPx_=t.pixel,this.start_(t),this._longTouch=!1,setTimeout((function(){this._longTouch=new Date-this._eventTime>450,this._longTouch&&this.handleMoveEvent_(t)}).bind(this),500);break;case"pointerup":this.started_&&this.coord_&&(e=this.downPx_[0]-t.pixel[0])*e+(i=this.downPx_[1]-t.pixel[1])*i<=this.squaredClickTolerance_&&("pointermove"==this.lastEvent||"keydown"==this.lastEvent||(e=this.upPx_[0]-t.pixel[0])*e+(i=this.upPx_[1]-t.pixel[1])*i<=this.squaredClickTolerance_?this.end_(t):(this.handleMoveEvent_(t),this.drawPoint_(t.coordinate,!0))),this.upPx_=t.pixel;break;case"pointerdrag":if(this.started_){var o=this.getMap().getPixelFromCoordinate(this.center_);(e=o[0]-t.pixel[0])*e+(i=o[1]-t.pixel[1])*i<=this.squaredClickTolerance_&&this.reset()}return!this._longTouch;case"pointermove":this.started_&&(e=this.downPx_[0]-t.pixel[0])*e+(i=this.downPx_[1]-t.pixel[1])*i>this.squaredClickTolerance_&&(this.handleMoveEvent_(t),this.lastEvent=t.type);break;default:if(this.lastEvent=t.type,this.started_&&"dblclick"===t.type)return!1}return!0},ol.interaction.DrawRegular.prototype.finishDrawing=function(){this.started_&&this.coord_&&this.end_({pixel:this.upPx_,coordinate:this.coord_})},ol.interaction.DrawRegular.prototype.handleMoveEvent_=function(t){if(this.started_){this.coord_=t.coordinate,this.coordPx_=t.pixel;var e=this.drawSketch_(t);this.dispatchEvent({type:"drawing",feature:e,pixel:t.pixel,startCoordinate:this.center_,coordinate:t.coordinate,square:this.square_,centered:this.centered_})}else this.drawPoint_(t.coordinate)},ol.interaction.DrawRegular.prototype.start_=function(t){if(this.started_)this.coord_=t.coordinate;else{this.started_=!0,this.center_=t.coordinate,this.coord_=null;var e=this.feature_=new ol.Feature({});e.setGeometryName(this.geometryName_),e.setGeometry(new ol.geom.Polygon([[t.coordinate,t.coordinate,t.coordinate]])),this.drawSketch_(t),this.dispatchEvent({type:"drawstart",feature:e,pixel:t.pixel,coordinate:t.coordinate})}},ol.interaction.DrawRegular.prototype.end_=function(t){if(this.coord_=t.coordinate,this.started_=!1,!this.coord_||this.center_[0]===this.coord_[0]&&this.center_[1]===this.coord_[1])this.dispatchEvent({type:"drawcancel",feature:null,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_});else{var e=this.feature_;e.setGeometry(this.getGeom_()),this.source_?this.source_.addFeature(e):this.features_&&this.features_.push(e),this.dispatchEvent({type:"drawend",feature:e,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_})}this.center_=this.coord_=null,this.drawSketch_()},ol.interaction.DrawTouch=function(t){(t=t||{}).handleEvent=function(t){if(this.get("tap"))switch(this.sketch.setPosition(this.getPosition()),t.type){case"singleclick":this.addPoint();break;case"dblclick":return this.addPoint(),this.finishDrawing(),!1}return!0},t.sketchStyle||(t.sketchStyle=ol.style.Style.defaultStyle());var e=this.sketch=new ol.layer.SketchOverlay(t);e.on(["drawstart","drawabort"],(function(t){this.dispatchEvent(t)}).bind(this)),e.on(["drawend"],(function(e){e.feature&&e.valid&&t.source&&t.source.addFeature(e.feature),this.dispatchEvent(e)}).bind(this)),ol.interaction.CenterTouch.call(this,t),this._source=t.source,this.set("tap",!1!==t.tap)},ol.ext.inherits(ol.interaction.DrawTouch,ol.interaction.CenterTouch),ol.interaction.DrawTouch.prototype.setMap=function(t){if(this._listener)for(var e in this._listener)ol.Observable.unByKey(e);this._listener={},ol.interaction.CenterTouch.prototype.setMap.call(this,t),this.sketch.setMap(t),t&&(this._listener.center=t.on("postcompose",(function(){ol.coordinate.equal(this.getPosition(),this.sketch.getPosition()||[])||this.sketch.setPosition(this.getPosition())}).bind(this)))},ol.interaction.DrawTouch.prototype.setGeometryType=function(t){return this.sketch.setGeometryType(t)},ol.interaction.DrawTouch.prototype.getGeometryType=function(){return this.sketch.getGeometryType()},ol.interaction.DrawTouch.prototype.finishDrawing=function(){this.sketch.finishDrawing(!0)},ol.interaction.DrawTouch.prototype.addPoint=function(){this.sketch.addPoint(this.getPosition())},ol.interaction.DrawTouch.prototype.removeLastPoint=function(){this.sketch.removeLastPoint()},ol.interaction.DrawTouch.prototype.setActive=function(t){ol.interaction.CenterTouch.prototype.setActive.call(this,t),this.sketch.abortDrawing(),this.sketch.setVisible(t)},ol.interaction.DropFile=function(t){t=t||{},ol.interaction.DragAndDrop.call(this,{});var e=t.zone||document;e.addEventListener("dragenter",this.onstop),e.addEventListener("dragover",this.onstop),e.addEventListener("dragleave",this.onstop),this.formatConstructors_=t.formatConstructors||[ol.format.GPX,ol.format.GeoJSONX,ol.format.GeoJSONP,ol.format.GeoJSON,ol.format.IGC,ol.format.KML,ol.format.TopoJSON],this.projection_=t.projection,this.accept_=t.accept||["gpx","json","geojsonx","geojsonp","geojson","igc","kml","topojson"];var i=this;e.addEventListener("drop",function(t){return i.ondrop(t)})},ol.ext.inherits(ol.interaction.DropFile,ol.interaction.DragAndDrop),ol.interaction.DropFile.prototype.setMap=function(t){ol.interaction.Interaction.prototype.setMap.call(this,t)},ol.interaction.DropFile.prototype.onstop=function(t){return t.preventDefault(),t.stopPropagation(),!1},ol.interaction.DropFile.prototype.ondrop=function(t){if(t.preventDefault(),t.dataTransfer&&t.dataTransfer.files.length)for(var e,i=this,o=this.projection_||(this.getMap()?this.getMap().getView().getProjection():null),n=t.dataTransfer.files,r=/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/,s=0;e=n[s];s++){var a=e.name.match(r)[0],l=this.accept_.indexOf(a.toLocaleLowerCase())>=0;if(i.dispatchEvent({type:"loadstart",file:e,filesize:e.size,filetype:e.type,fileextension:a,projection:o,isok:l}),this.formatConstructors_.length){var c=new FileReader,h=this.formatConstructors_,u=e;c.onload=function(t){var e,n,r=t.target.result,s=[];for(e=0,n=h.length;e<n;++e){var a=h[e];try{if((s=(new a).readFeatures(r,{featureProjection:o}))&&s.length>0)return i.dispatchEvent({type:"addfeatures",features:s,file:u,projection:o}),void i.dispatchEvent({type:"loadend",features:s,file:u,projection:o})}catch(t){}}i.dispatchEvent({type:"loadend",file:u,result:r})},c.readAsText(e)}}return!1},ol.interaction.FillAttribute=function(t,e){if((t=t||{}).condition||(t.condition=ol.events.condition.click),ol.interaction.Select.call(this,t),this.setActive(!1!==t.active),this.set("name",t.name),this._attributes=e,this.on("select",(function(t){this.getFeatures().clear(),this.fill(t.selected,this._attributes)}).bind(this)),void 0===t.cursor){var i=document.createElement("CANVAS");i.width=i.height=32;var o=i.getContext("2d");o.beginPath(),o.moveTo(9,3),o.lineTo(2,9),o.lineTo(10,17),o.lineTo(17,11),o.closePath(),o.fillStyle="#fff",o.fill(),o.stroke(),o.beginPath(),o.moveTo(6,4),o.lineTo(0,8),o.lineTo(0,13),o.lineTo(3,17),o.lineTo(3,8),o.closePath(),o.fillStyle="#000",o.fill(),o.stroke(),o.moveTo(8,8),o.lineTo(10,0),o.lineTo(11,0),o.lineTo(13,3),o.lineTo(13,7),o.stroke(),this._cursor="url("+i.toDataURL()+") 0 13, auto"}t.cursor&&(this._cursor=t.cursor)},ol.ext.inherits(ol.interaction.FillAttribute,ol.interaction.Select),ol.interaction.FillAttribute.prototype.setCursor=function(t){this._cursor=t},ol.interaction.FillAttribute.prototype.getCursor=function(){return this._cursor},ol.interaction.FillAttribute.prototype.setActive=function(t){t!==this.getActive()&&(ol.interaction.Select.prototype.setActive.call(this,t),this.getMap()&&this._cursor&&(t?(this._previousCursor=this.getMap().getTargetElement().style.cursor,this.getMap().getTargetElement().style.cursor=this._cursor):(this.getMap().getTargetElement().style.cursor=this._previousCursor,this._previousCursor=void 0)))},ol.interaction.FillAttribute.prototype.setAttributes=function(t){this._attributes=t},ol.interaction.FillAttribute.prototype.setAttribute=function(t,e){this._attributes[t]=e},ol.interaction.FillAttribute.prototype.getAttributes=function(){return this._attributes},ol.interaction.FillAttribute.prototype.getAttribute=function(t){return this._attributes[t]},ol.interaction.FillAttribute.prototype.fill=function(t,e){if(t.length&&e){for(var i,o=!1,n=0;i=t[n];n++){for(var r in e)i.get(r)!==e[r]&&(o=!0);if(o)break}o&&(this.dispatchEvent({type:"setattributestart",features:t,properties:e}),t.forEach(function(t){for(var i in e)t.set(i,e[i])}),this.dispatchEvent({type:"setattributeend",features:t,properties:e}))}},ol.interaction.Flashlight=function(t){ol.interaction.Pointer.call(this,{handleDownEvent:this.setPosition,handleMoveEvent:this.setPosition}),t=t||{},this.pos=!1,this.radius=t.radius||100,this.setColor(t)},ol.ext.inherits(ol.interaction.Flashlight,ol.interaction.Pointer),ol.interaction.Flashlight.prototype.setMap=function(t){this.getMap()&&this.getMap().render(),this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.interaction.Pointer.prototype.setMap.call(this,t),t&&(this._listener=t.on("postcompose",this.postcompose_.bind(this)))},ol.interaction.Flashlight.prototype.setRadius=function(t){if(this.radius=t,this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.interaction.Flashlight.prototype.setColor=function(t){var e=ol.color.asArray(t.fill?t.fill:[0,0,0,.8]);if(this.startColor=ol.color.asString(e),t.color?e=this.endColor=ol.color.asString(ol.color.asArray(t.color)||t.color):(e[3]=0,this.endColor=ol.color.asString(e)),e[3]=.1,this.midColor=ol.color.asString(e),this.getMap())try{this.getMap().renderSync()}catch(i){}},ol.interaction.Flashlight.prototype.setPosition=function(t){if(this.pos=t.pixel?t.pixel:t,this.getMap())try{this.getMap().renderSync()}catch(t){}},ol.interaction.Flashlight.prototype.postcompose_=function(t){var e=ol.ext.getMapCanvas(this.getMap()).getContext("2d"),i=t.frameState.pixelRatio,o=e.canvas.width,n=e.canvas.height;if(e.save(),e.scale(i,i),this.pos){var r=Math.max(o,n),s=e.createRadialGradient(this.pos[0],this.pos[1],o*this.radius/r,this.pos[0],this.pos[1],n*this.radius/r);s.addColorStop(0,this.startColor),s.addColorStop(.8,this.midColor),s.addColorStop(1,this.endColor),e.fillStyle=s,e.fillRect(this.pos[0]-r,this.pos[1]-r,2*r,2*r)}else e.fillStyle=this.startColor,e.fillRect(0,0,o,n);e.restore()},ol.interaction.FocusMap=function(){ol.interaction.Interaction.call(this,{}),this.focusBt=ol.ext.element.create("BUTTON",{on:{focus:(function(){this.dispatchEvent({type:"focus"})}).bind(this)},style:{position:"absolute",zIndex:-1,top:0,opacity:0}})},ol.ext.inherits(ol.interaction.FocusMap,ol.interaction.Interaction),ol.interaction.FocusMap.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,this.getMap()&&this.getMap().getViewport().removeChild(this.focusBt),ol.interaction.Interaction.prototype.setMap.call(this,t),this.getMap()&&(this._listener=this.getMap().on("pointerdown",(function(){this.getActive()&&this.focusBt.focus()}).bind(this)),this.getMap().getViewport().appendChild(this.focusBt))},ol.interaction.GeolocationDraw=function(t){t||(t={}),this.geolocation=new ol.Geolocation({projection:"EPSG:4326",trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),this.geolocation.on("change",this.draw_.bind(this)),this.path_=[],this.lastPosition_=!1;var e=[255,255,255,1],i=[0,153,255,1],o=new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:i}),stroke:new ol.style.Stroke({color:e,width:1.5})}),n=[new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:5})}),new ol.style.Style({stroke:new ol.style.Stroke({color:i,width:3}),fill:new ol.style.Fill({color:[255,255,255,.5]})})],r=new ol.style.RegularShape({radius:10.5,points:3,rotation:0,fill:new ol.style.Fill({color:i}),stroke:new ol.style.Stroke({color:e,width:1.5})}),s=r.getImage(),a=s.getContext("2d"),l=document.createElement("canvas");l.width=l.height=s.width,l.getContext("2d").drawImage(s,0,0),a.clearRect(0,0,s.width,s.height),a.drawImage(l,0,0,s.width,s.height,3,0,s.width-6,s.height),this.locStyle={error:new ol.style.Style({fill:new ol.style.Fill({color:[255,0,0,.2]})}),warn:new ol.style.Style({fill:new ol.style.Fill({color:[255,192,0,.2]})}),ok:new ol.style.Style({fill:new ol.style.Fill({color:[0,255,0,.2]})})},this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector,name:"GeolocationDraw overlay",style:t.style||function(t){return void 0===t.get("heading")?n[1].setImage(o):(n[1].setImage(r),r.setRotation(t.get("heading")||0)),n}}),this.sketch_=[new ol.Feature,new ol.Feature,new ol.Feature],this.overlayLayer_.getSource().addFeatures(this.sketch_),this.features_=t.features,this.source_=t.source,this.condition_=t.condition||function(t){return t.getAccuracy()<this.get("minAccuracy")},ol.interaction.Interaction.call(this,{handleEvent:function(){return!this.get("followTrack")||"auto"==this.get("followTrack")}}),this.set("type",t.type||"LineString"),this.set("attributes",t.attributes||{}),this.set("minAccuracy",t.minAccuracy||20),this.set("tolerance",t.tolerance||5),this.set("zoom",t.zoom),this.set("minZoom",t.minZoom),this.setFollowTrack(void 0===t.followTrack||t.followTrack),this.setActive(!1)},ol.ext.inherits(ol.interaction.GeolocationDraw,ol.interaction.Interaction),ol.interaction.GeolocationDraw.prototype.simplify3D=function(t,e){var i=t.getCoordinates(),o=this.getMap().getView().getProjection();"Polygon"===this.get("type")&&(i=i[0]);for(var n,r=[i[0]],s=ol.proj.transform(i[0],o,"EPSG:4326"),a=1;a<i.length;a++)n=ol.proj.transform(i[a],o,"EPSG:4326"),ol.sphere.getDistance(s,n)>e&&(r.push(i[a]),s=n);return r[r.length-1]!==i[i.length-1]&&r.push(i[i.length-1]),"Polygon"===this.get("type")?new ol.geom.Polygon([r],"XYZM"):new ol.geom.LineString(r,"XYZM")},ol.interaction.GeolocationDraw.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Pointer.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&this.geolocation.setProjection(t.getView().getProjection())},ol.interaction.GeolocationDraw.prototype.setActive=function(t){if(t!==this.getActive()){if(ol.interaction.Interaction.prototype.setActive.call(this,t),this.overlayLayer_.setVisible(t),this.getMap()){this.geolocation.setTracking(t);try{this.getMap().renderSync()}catch(i){}}if(this.pause(!t),t)this.reset(),this.dispatchEvent({type:"drawstart",feature:this.sketch_[1]});else{var e=this.sketch_[1].clone();e.getGeometry()&&(this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)),this.dispatchEvent({type:"drawend",feature:e})}}},ol.interaction.GeolocationDraw.prototype.simulate=function(t,e){if(this._track&&clearTimeout(this._track.timeout),t){var i=(e=e||{}).delay||1e3;this._track={track:t,pos:0,timeout:setTimeout((function t(){if(this._track.pos>=this._track.track.length)this._track=!1;else{var o=this._track.track[this._track.pos];o[2]=o[3]||0,o[3]=(new Date).getTime(),this._track.pos++,!1!==e.repeat&&(this._track.pos=this._track.pos%this._track.track.length),this.getActive()&&this.draw_(!0,o,e.accuracy),this._track.timeout=setTimeout(t.bind(this),i)}}).bind(this),0)}}else this._track=!1},ol.interaction.GeolocationDraw.prototype.simulating=function(){return!!this._track},ol.interaction.GeolocationDraw.prototype.reset=function(){this.sketch_[1].setGeometry(),this.path_=[],this.lastPosition_=!1},ol.interaction.GeolocationDraw.prototype.start=function(){this.setActive(!0)},ol.interaction.GeolocationDraw.prototype.stop=function(){this.setActive(!1)},ol.interaction.GeolocationDraw.prototype.pause=function(t){this.pause_=!1!==t},ol.interaction.GeolocationDraw.prototype.isPaused=function(){return this.pause_},ol.interaction.GeolocationDraw.prototype.setFollowTrack=function(t){this.set("followTrack",t);var e,i=this.getMap();if(this.getActive()&&i)if("position"!==t&&(e=this.get("minZoom")?Math.max(this.get("minZoom"),i.getView().getZoom()):this.get("zoom")),!1===t||this.lastPosition_)"auto"===t&&this.lastPosition_&&i.getView().animate({center:this.lastPosition_,zoom:e});else{var o=this.path_[this.path_.length-1];o&&i.getView().animate({center:o,zoom:e})}this.lastPosition_=!1,this.dispatchEvent({type:"follow",following:!1!==t})},ol.interaction.GeolocationDraw.prototype.draw_=function(t,e,i){var o=this.getMap();if(o){var n,r,s,a,l;if(this._track){if(!0!==t)return;if(r=e,n=i||10,this.path_&&this.path_.length){var c=this.path_[this.path_.length-1];l=Math.atan2(e[0]-c[0],e[1]-c[1])}var h=new ol.geom.Circle(r,o.getView().getResolution()*n);s=ol.geom.Polygon.fromCircle(h)}else n=(a=this.geolocation).getAccuracy(),r=this.getPosition(a),s=a.getAccuracyGeometry(),l=a.getHeading();switch(this.get("followTrack")){case!0:1==this.get("followTrack")&&(this.get("minZoom")?this.get("minZoom")>o.getView().getZoom()&&o.getView().setZoom(this.get("minZoom")):o.getView().setZoom(this.get("zoom")||16),ol.extent.containsExtent(o.getView().calculateExtent(o.getSize()),s.getExtent())||o.getView().fit(s.getExtent())),o.getView().setCenter(r);break;case"position":o.getView().setCenter(r);break;case"auto":if(this.lastPosition_){var u=o.getView().getCenter();u[0]!=this.lastPosition_[0]||u[1]!=this.lastPosition_[1]?this.setFollowTrack(!1):(o.getView().setCenter(r),this.lastPosition_=r)}else o.getView().setCenter(r),this.get("minZoom")?this.get("minZoom")>o.getView().getZoom()&&o.getView().setZoom(this.get("minZoom")):this.get("zoom")&&o.getView().setZoom(this.get("zoom")),this.lastPosition_=r;break;case"visible":ol.extent.containsCoordinate(o.getView().calculateExtent(o.getSize()),r)||o.getView().setCenter(r)}var d,p=this.sketch_[0];if(p.setGeometry(s),n<this.get("minAccuracy")/2?p.setStyle(this.locStyle.ok):n<this.get("minAccuracy")?p.setStyle(this.locStyle.warn):p.setStyle(this.locStyle.error),this.pause_&&(this.lastPosition_=r),!this.pause_&&(!a||this.condition_.call(this,a))){switch(p=this.sketch_[1],this.path_.push(r),this.get("type")){case"Point":this.path_=[r],p.setGeometry(new ol.geom.Point(r,"XYZM"));var g=this.get("attributes");g.heading&&p.set("heading",a.getHeading()),g.accuracy&&p.set("accuracy",a.getAccuracy()),g.altitudeAccuracy&&p.set("altitudeAccuracy",a.getAltitudeAccuracy()),g.speed&&p.set("speed",a.getSpeed());break;case"LineString":this.path_.length>1?(d=new ol.geom.LineString(this.path_,"XYZM"),this.get("tolerance")&&(d=this.simplify3D(d,this.get("tolerance"))),p.setGeometry(d)):p.setGeometry();break;case"Polygon":this.path_.length>2?(d=new ol.geom.Polygon([this.path_],"XYZM"),this.get("tolerance")&&(d=this.simplify3D(d,this.get("tolerance"))),p.setGeometry(d)):p.setGeometry()}this.dispatchEvent({type:"drawing",feature:this.sketch_[1],geolocation:a})}this.sketch_[2].setGeometry(new ol.geom.Point(r)),this.sketch_[2].set("heading",l),this.dispatchEvent({type:"tracking",feature:this.sketch_[1],geolocation:a})}},ol.interaction.GeolocationDraw.prototype.getPosition=function(t){var e=t.getPosition();return e.push(Math.round(100*(t.getAltitude()||0))/100),e.push(Math.round((new Date).getTime()/1e3)),e},ol.interaction.Hover=function(t){t||(t={});var e=this,i=!1;ol.interaction.Interaction.call(this,{handleEvent:function(o){if(!e.getActive())return!0;switch(o.type){case"pointerdrag":i=!0;break;case"pointerup":i=!1;break;case"pointermove":i||e.handleMove_(o)}return!t.handleEvent||t.handleEvent(o)}}),this.setLayerFilter(t.layerFilter),t.layers&&t.layers.length&&this.setLayerFilter(function(e){return t.layers.indexOf(e)>=0}),this.setFeatureFilter(t.featureFilter),this.set("hitTolerance",t.hitTolerance),this.setCursor(t.cursor)},ol.ext.inherits(ol.interaction.Hover,ol.interaction.Interaction),ol.interaction.Hover.prototype.setMap=function(t){void 0!==this.previousCursor_&&this.getMap()&&(this.getMap().getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=void 0),ol.interaction.Interaction.prototype.setMap.call(this,t)},ol.interaction.Hover.prototype.setActive=function(t){if(ol.interaction.Interaction.prototype.setActive.call(this,t),this.cursor_&&this.getMap()&&this.getMap().getTargetElement()){var e=this.getMap().getTargetElement().style;void 0!==this.previousCursor_&&(e.cursor=this.previousCursor_,this.previousCursor_=void 0)}},ol.interaction.Hover.prototype.setCursor=function(t){!t&&void 0!==this.previousCursor_&&this.getMap()&&(this.getMap().getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=void 0),this.cursor_=t},ol.interaction.Hover.prototype.setFeatureFilter=function(t){this.featureFilter_="function"==typeof t?t:function(){return!0}},ol.interaction.Hover.prototype.setLayerFilter=function(t){this.layerFilter_="function"==typeof t?t:function(){return!0}},ol.interaction.Hover.prototype.handleMove_=function(t){var e=this.getMap();if(e){var i,o,n=this,r=e.forEachFeatureAtPixel(t.pixel,function(t,e){return n.featureFilter_.call(null,t,e)?(i=t,o=e,!0):(i=o=null,!1)},{hitTolerance:this.get("hitTolerance"),layerFilter:n.layerFilter_});if(r&&this.dispatchEvent({type:"hover",feature:i,layer:o,coordinate:t.coordinate,pixel:t.pixel,map:t.map,originalEvent:t.originalEvent,dragging:t.dragging}),this.feature_===i&&this.layer_===o||(this.feature_=i,this.layer_=o,this.dispatchEvent(i?{type:"enter",feature:i,layer:o,coordinate:t.coordinate,pixel:t.pixel,map:t.map,originalEvent:t.originalEvent,dragging:t.dragging}:{type:"leave",coordinate:t.coordinate,pixel:t.pixel,map:t.map,originalEvent:t.originalEvent,dragging:t.dragging})),this.cursor_){var s=e.getTargetElement().style;r?s.cursor!=this.cursor_&&(this.previousCursor_=s.cursor,s.cursor=this.cursor_):void 0!==this.previousCursor_&&(s.cursor=this.previousCursor_,this.previousCursor_=void 0)}}},ol.interaction.LongTouch=function(t){t||(t={}),this.delay_=t.delay||1e3;var e,i,o=t.handleLongTouchEvent||function(){},n=null,r=t.pixelTolerance||0;ol.interaction.Interaction.call(this,{handleEvent:function(t){if(this.getActive())switch(t.type){case"pointerdown":n&&clearTimeout(n),e=t.pixel,i={type:"longtouch",originalEvent:t.originalEvent,frameState:t.frameState,pixel:t.pixel,coordinate:t.coordinate,map:this.getMap()},n=setTimeout(function(){o(i),i.map.dispatchEvent(i)},this.delay_);break;case"pointerdrag":n&&(Math.abs(t.pixel[0]-e[0])>r||Math.abs(t.pixel[1]-e[1])>r)&&(clearTimeout(n),n=null);break;case"pointerup":n&&(clearTimeout(n),n=null)}else n&&(clearTimeout(n),n=null);return!0}})},ol.ext.inherits(ol.interaction.LongTouch,ol.interaction.Interaction),ol.interaction.Modify.prototype.getModifiedFeatures=function(){var t={};this.dragSegments_.forEach(function(e){var i=e[0].feature;window.ol&&window.ol.util?t[ol.util.getUid(i)]=i:t[ol.getUid(i)]=i});var e=[];for(var i in t)e.push(t[i]);return e},ol.interaction.ModifyFeature=function(t){var e,i;t||(t={}),ol.interaction.Pointer.call(this,{handleEvent:function(t){switch(t.type){case"pointerdown":return e=this.handleDownEvent(t),i=e||this._deleteCondition(t),!e;case"pointerup":return e=!1,this.handleUpEvent(t);case"pointerdrag":return!e||this.handleDragEvent(t);case"pointermove":return!!e||this.handleMoveEvent(t);case"singleclick":case"click":return!i;default:return!0}}}),this.snapDistance_=t.pixelTolerance||10,this.tolerance_=1e-10,this.cursor_=t.cursor,this.sources_=t.sources?t.sources instanceof Array?t.sources:[t.sources]:[],t.source&&this.sources_.push(t.source),t.features&&this.sources_.push(new ol.source.Vector({features:t.features})),this.filterSplit_=t.filter||function(){return!0},this._condition=t.condition||ol.events.condition.primaryAction,this._deleteCondition=t.deleteCondition||ol.events.condition.altKeyOnly,this._insertVertexCondition=t.insertVertexCondition||ol.events.condition.always;var o=function(){return[new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:[0,153,255,1]}),stroke:new ol.style.Stroke({color:"#FFF",width:1.25})})})]};t.style&&(o="function"==typeof t.style?t.style:function(){return t.style}),this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1}),name:"Modify overlay",displayInLayerSwitcher:!1,style:o,wrapX:t.wrapX})},ol.ext.inherits(ol.interaction.ModifyFeature,ol.interaction.Pointer),ol.interaction.ModifyFeature.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Interaction.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},ol.interaction.ModifyFeature.prototype.setActive=function(t){ol.interaction.Interaction.prototype.setActive.call(this,t),this.overlayLayer_&&this.overlayLayer_.getSource().clear()},ol.interaction.ModifyFeature.prototype.setFilter=function(t){"function"==typeof t?this.filterSplit_=t:void 0===t&&(this.filterSplit_=function(){return!0})},ol.interaction.ModifyFeature.prototype.getClosestFeature=function(t){for(var e,i,o=this.snapDistance_+1,n=0;n<this.sources_.length;n++){var r=this.sources_[n];if((e=r.getClosestFeatureToCoordinate(t.coordinate))&&this.filterSplit_(e)){var s=e.getGeometry().getClosestPoint(t.coordinate),a=ol.coordinate.dist2d(t.coordinate,s)/t.frameState.viewState.resolution;a<o&&(o=a,i=s);break}}if(o>this.snapDistance_)return this.currentFeature&&this.dispatchEvent({type:"select",selected:[],deselected:[this.currentFeature]}),this.currentFeature=null,!1;var l=this.getNearestCoord(i,e.getGeometry());if(l){l=l.coord;var c=this.getMap().getPixelFromCoordinate(l);return ol.coordinate.dist2d(t.pixel,c)<this.snapDistance_&&(i=l),this.currentFeature!==e&&this.dispatchEvent({type:"select",selected:[e],deselected:[this.currentFeature]}),this.currentFeature=e,{source:r,feature:e,coord:i}}},ol.interaction.ModifyFeature.prototype.getNearestCoord=function(t,e){var i,o,n,r,s;switch(e.getType()){case"Point":return{coord:e.getCoordinates(),dist:ol.coordinate.dist2d(e.getCoordinates(),t)};case"MultiPoint":return this.getNearestCoord(t,new ol.geom.LineString(e.getCoordinates()));case"LineString":case"LinearRing":var a;s=Number.MAX_VALUE;var l=e.getCoordinates();for(i=0;i<l.length;i++)(a=ol.coordinate.dist2d(t,l[i]))<s&&(s=a,r=l[i]);return{coord:r,dist:s};case"MultiLineString":var c=e.getLineStrings();for(r=!1,s=Number.MAX_VALUE,i=0;o=c[i];i++)(n=this.getNearestCoord(t,o))&&n.dist<s&&(s=n.dist,(r=n).ring=i);return r;case"Polygon":var h=e.getLinearRings();for(r=!1,s=Number.MAX_VALUE,i=0;o=h[i];i++)(n=this.getNearestCoord(t,o))&&n.dist<s&&(s=n.dist,(r=n).ring=i);return r;case"MultiPolygon":var u=e.getPolygons();for(r=!1,s=Number.MAX_VALUE,i=0;o=u[i];i++)(n=this.getNearestCoord(t,o))&&n.dist<s&&(s=n.dist,(r=n).poly=i);return r;case"GeometryCollection":var d=e.getGeometries();for(r=!1,s=Number.MAX_VALUE,i=0;o=d[i];i++)(n=this.getNearestCoord(t,o))&&n.dist<s&&(s=n.dist,(r=n).geom=i);return r;default:return!1}},ol.interaction.ModifyFeature.prototype.getArcs=function(t,e){var i,o,n,r,s,a=!1;switch(t.getType()){case"Point":ol.coordinate.equal(e,t.getCoordinates())&&(a={geom:t,type:t.getType(),coord1:[],coord2:[],node:!0});break;case"MultiPoint":for(i=t.getCoordinates(),o=0;o<i.length;o++)if(ol.coordinate.equal(e,i[o])){a={geom:t,type:t.getType(),index:o,coord1:[],coord2:[],node:!0};break}break;case"LinearRing":case"LineString":var l=t.getClosestPoint(e);if(ol.coordinate.dist2d(l,e)<1.5*this.tolerance_){var c;if((c="LinearRing"===t.getType()?(s=new ol.geom.LineString(t.getCoordinates())).splitAt(e,this.tolerance_):t.splitAt(e,this.tolerance_)).length>2){for(i=c[1].getCoordinates(),o=2;n=c[o];o++){var h=n.getCoordinates();h.shift(),i=i.concat(h)}c=[c[0],new ol.geom.LineString(i)]}if(2===c.length){var u=c[0].getCoordinates(),d=c[1].getCoordinates(),p=u.length+d.length-1;u.pop(),d.shift(),a={geom:t,type:t.getType(),coord1:u,coord2:d,node:t.getCoordinates().length===p,closed:!1}}else if(1===c.length){n=c[0].getCoordinates();var g=ol.coordinate.equal(n[0],e),f=ol.coordinate.equal(n[n.length-1],e);g?(n.shift(),f&&n.pop(),a={geom:t,type:t.getType(),coord1:[],coord2:n,node:!0,closed:f}):f&&(n.pop(),a={geom:t,type:t.getType(),coord1:n,coord2:[],node:!0,closed:!1})}}break;case"MultiLineString":var m=t.getLineStrings();for(o=0;r=m[o];o++)if(a=this.getArcs(r,e)){a.geom=t,a.type=t.getType(),a.lstring=o;break}break;case"Polygon":var y=t.getLinearRings();for(o=0;r=y[o];o++)if(a=this.getArcs(r,e)){a.geom=t,a.type=t.getType(),a.index=o;break}break;case"MultiPolygon":var v=t.getPolygons();for(o=0;r=v[o];o++)if(a=this.getArcs(r,e)){a.geom=t,a.type=t.getType(),a.poly=o;break}break;case"GeometryCollection":for(s=t.getGeometries(),o=0;r=s[o];o++)if(a=this.getArcs(r,e)){a.geom=t,a.g=o,a.typeg=a.type,a.type=t.getType();break}break;default:console.error("ol/interaction/ModifyFeature "+t.getType()+" not supported!")}return a},ol.interaction.ModifyFeature.prototype.handleDownEvent=function(t){if(!this.getActive())return!1;var e=this.getClosestFeature(t);if(e&&(this._condition(t)||this._deleteCondition(t))){var i=[];return this.arcs=[],this.sources_.forEach((function(t){var o=ol.extent.buffer(ol.extent.boundingExtent([e.coord]),this.tolerance_);i=i.concat(i,t.getFeaturesInExtent(o))}).bind(this)),this._modifiedFeatures=[],i.forEach((function(i){var o=this.getArcs(i.getGeometry(),e.coord);o&&(this._insertVertexCondition(t)||o.node)&&(o.feature=i,this._modifiedFeatures.push(i),this.arcs.push(o))}).bind(this)),!this._modifiedFeatures.length||(this._deleteCondition(t)?!this._removePoint(e,t):(this.dispatchEvent({type:"modifystart",coordinate:e.coord,originalEvent:t.originalEvent,features:this._modifiedFeatures}),this.handleDragEvent({coordinate:e.coord,originalEvent:t.originalEvent}),!0))}return!1},ol.interaction.ModifyFeature.prototype.getModifiedFeatures=function(){return this._modifiedFeatures||[]},ol.interaction.ModifyFeature.prototype.removePoint=function(){this._removePoint({},{})},ol.interaction.ModifyFeature.prototype._getModification=function(t){var e=t.coord1.concat(t.coord2);switch(t.type){case"LineString":if(t.closed&&e.push(e[0]),e.length>1&&t.geom.getCoordinates().length!=e.length)return t.coords=e,!0;break;case"MultiLineString":if(t.closed&&e.push(e[0]),e.length>1){var i=t.geom.getCoordinates();if(i[t.lstring].length!=e.length)return i[t.lstring]=e,t.coords=i,!0}break;case"Polygon":if(t.closed&&e.push(e[0]),e.length>3&&(i=t.geom.getCoordinates())[t.index].length!=e.length)return i[t.index]=e,t.coords=i,!0;break;case"MultiPolygon":if(t.closed&&e.push(e[0]),e.length>3&&(i=t.geom.getCoordinates())[t.poly][t.index].length!=e.length)return i[t.poly][t.index]=e,t.coords=i,!0;break;case"GeometryCollection":t.type=t.typeg;var o=t.geom,n=o.getGeometries();t.geom=n[t.g];var r=this._getModification(t);return o.setGeometries(n),t.geom=o,t.type="GeometryCollection",r}return!1},ol.interaction.ModifyFeature.prototype._removePoint=function(t,e){if(!this.arcs)return!1;this.overlayLayer_.getSource().clear();var i=!1;return this.arcs.forEach((function(t){i=i||this._getModification(t)}).bind(this)),i&&(this.dispatchEvent({type:"modifystart",coordinate:t.coord,originalEvent:e.originalEvent,features:this._modifiedFeatures}),this.arcs.forEach((function(t){if("GeometryCollection"===t.geom.getType()){if(t.coords){var e=t.geom.getGeometries();e[t.g].setCoordinates(t.coords),t.geom.setGeometries(e)}}else t.coords&&t.geom.setCoordinates(t.coords)}).bind(this)),this.dispatchEvent({type:"modifyend",coordinate:t.coord,originalEvent:e.originalEvent,features:this._modifiedFeatures})),this.arcs=[],i},ol.interaction.ModifyFeature.prototype.handleUpEvent=function(t){return!(!this.getActive()||this.arcs&&this.arcs.length&&(this.overlayLayer_.getSource().clear(),this.dispatchEvent({type:"modifyend",coordinate:t.coordinate,originalEvent:t.originalEvent,features:this._modifiedFeatures}),this.arcs=[],0))},ol.interaction.ModifyFeature.prototype.setArcCoordinates=function(t,e){var i;switch(t.type){case"Point":t.geom.setCoordinates(e[0]);break;case"MultiPoint":(i=t.geom.getCoordinates())[t.index]=e[0],t.geom.setCoordinates(i);break;case"LineString":t.geom.setCoordinates(e);break;case"MultiLineString":(i=t.geom.getCoordinates())[t.lstring]=e,t.geom.setCoordinates(i);break;case"Polygon":(i=t.geom.getCoordinates())[t.index]=e,t.geom.setCoordinates(i);break;case"MultiPolygon":(i=t.geom.getCoordinates())[t.poly][t.index]=e,t.geom.setCoordinates(i);break;case"GeometryCollection":t.type=t.typeg;var o=t.geom,n=o.getGeometries();t.geom=n[t.g],this.setArcCoordinates(t,e),o.setGeometries(n),t.geom=o,t.type="GeometryCollection"}},ol.interaction.ModifyFeature.prototype.handleDragEvent=function(t){if(!this.getActive())return!1;if(!this.arcs)return!0;this.overlayLayer_.getSource().clear();var e=new ol.Feature(new ol.geom.Point(t.coordinate));return this.overlayLayer_.getSource().addFeature(e),!this.arcs.length||(this.arcs.forEach((function(e){var i=e.coord1.concat([t.coordinate],e.coord2);e.closed&&i.push(t.coordinate),this.setArcCoordinates(e,i)}).bind(this)),this.dispatchEvent({type:"modifying",coordinate:t.coordinate,originalEvent:t.originalEvent,features:this._modifiedFeatures}),!0)},ol.interaction.ModifyFeature.prototype.handleMoveEvent=function(t){if(!this.getActive())return!1;this.overlayLayer_.getSource().clear();var e=this.getClosestFeature(t);if(e){var i=new ol.Feature(new ol.geom.Point(e.coord));this.overlayLayer_.getSource().addFeature(i)}var o=t.map.getTargetElement();this.cursor_&&(e?o.style.cursor!=this.cursor_&&(this.previousCursor_=o.style.cursor,o.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(o.style.cursor=this.previousCursor_,this.previousCursor_=void 0))},ol.interaction.ModifyFeature.prototype.getCurrentFeature=function(){return this.currentFeature},ol.interaction.ModifyTouch=function(t){var e=this;t||(t={}),this._popup=new ol.Overlay.Popup({popupClass:t.className||"modifytouch",positioning:t.positioning||"bottom-rigth",offsetBox:t.offsetBox||10}),this._source=t.source,this._features=t.features;var i=document.createElement("a");i.appendChild(document.createTextNode(t.title||"remove point")),i.onclick=function(){e.removePoint()},this.setPopupContent(i);var o=(t.pixelTolerance||0)+5;t.condition=function(t){var e,i,n=this.getMap().getFeaturesAtPixel(t.pixel,{hitTolerance:o}),r=!1;if(n){var s=this._features;if(!s){e=[t.pixel[0]-o,t.pixel[1]-o],i=[t.pixel[0]+o,t.pixel[1]+o],e=this.getMap().getCoordinateFromPixel(e),i=this.getMap().getCoordinateFromPixel(i);var a=ol.extent.boundingExtent([e,i]);s=this._source.getFeaturesInExtent(a)}s.getArray&&(s=s.getArray());for(var l,c=0;(l=n[c])&&!(s.indexOf(l)>=0);c++);if(l){e=t.pixel,i=l.getGeometry().getClosestPoint(t.coordinate),i=this.getMap().getPixelFromCoordinate(i);var h=e[0]-i[0],u=e[1]-i[1];r=Math.sqrt(h*h+u*u)<o}}return this.showDeleteBt(r?{type:"show",feature:l,coordinate:t.coordinate}:{type:"hide"}),!0},t.insertVertexCondition=function(){return this.showDeleteBt({type:"hide"}),!0},ol.interaction.Modify.call(this,t),this.on(["modifystart","modifyend"],function(){this.showDeleteBt({type:"hide",modifying:!0})}),this.set("usePopup",!1!==t.usePopup)},ol.ext.inherits(ol.interaction.ModifyTouch,ol.interaction.Modify),ol.interaction.ModifyTouch.prototype.setMap=function(t){this.getMap()&&this.getMap().removeOverlay(this._popup),ol.interaction.Modify.prototype.setMap.call(this,t),this.getMap()&&this.getMap().addOverlay(this._popup)},ol.interaction.ModifyTouch.prototype.setActive=function(t){ol.interaction.Modify.prototype.setActive.call(this,t),this.showDeleteBt({type:"hide"})},ol.interaction.ModifyTouch.prototype.removePoint=function(){new Date-this._timeout<200||(ol.interaction.Modify.prototype.removePoint.call(this),this.showDeleteBt({type:"hide"}))},ol.interaction.ModifyTouch.prototype.showDeleteBt=function(t){this.get("usePopup")&&"show"===t.type?this._popup.show(t.coordinate,this._menu):this._popup.hide(),t.type+="popup",this.dispatchEvent(t),this._timeout=new Date},ol.interaction.ModifyTouch.prototype.setPopupContent=function(t){this._menu=t},ol.interaction.ModifyTouch.prototype.getPopupContent=function(){return this._menu},ol.interaction.Offset=function(t){t||(t={}),ol.interaction.Pointer.call(this,{handleDownEvent:this.handleDownEvent_,handleDragEvent:this.handleDragEvent_,handleMoveEvent:this.handleMoveEvent_,handleUpEvent:this.handleUpEvent_}),this.features_=t.features,this.layers_=t.layers?t.layers instanceof Array?t.layers:[t.layers]:null,this.set("duplicate",t.duplicate),this.source_=t.source,this._style="function"==typeof t.style?t.style:function(){return t.style?t.style:ol.style.Style.defaultStyle(!0)},this.previousCursor_=!1},ol.ext.inherits(ol.interaction.Offset,ol.interaction.Pointer),ol.interaction.Offset.prototype.setMap=function(t){ol.interaction.Pointer.prototype.setMap.call(this,t)},ol.interaction.Offset.prototype.getFeatureAtPixel_=function(t){var e=this;return this.getMap().forEachFeatureAtPixel(t.pixel,function(i,o){var n;if(e.layers_){for(var r=0;r<e.layers_.length;r++)if(e.layers_[r]===o){n=i;break}}else e.features_?e.features_.forEach(function(t){t===i&&(n=i)}):n=i;var s=n.getGeometry().getType();if(n&&/Polygon|LineString/.test(s)){if("Polygon"===s&&n.getGeometry().getCoordinates().length>1)return!1;var a=n.getGeometry().getClosestPoint(t.coordinate),l=a[0]-t.coordinate[0],c=a[1]-t.coordinate[1];return Math.sqrt(l*l+c*c)/t.frameState.viewState.resolution<5&&{feature:n,hit:a,coordinates:n.getGeometry().getCoordinates(),geom:n.getGeometry().clone(),geomType:s}}return!1},{hitTolerance:5})},ol.interaction.Offset.prototype.handleDownEvent_=function(t){return this.current_=this.getFeatureAtPixel_(t),!!this.current_&&(this.currentStyle_=this.current_.feature.getStyle(),this.source_&&(this.get("duplicate")||t.originalEvent.ctrlKey)?(this.current_.feature=this.current_.feature.clone(),this.current_.feature.setStyle(this._style(this.current_.feature)),this.source_.addFeature(this.current_.feature)):(this.current_.feature.setStyle(this._style(this.current_.feature)),this._modifystart=!0),this.dispatchEvent({type:"offsetstart",feature:this.current_.feature,offset:0}),!0)},ol.interaction.Offset.prototype.handleDragEvent_=function(t){this._modifystart&&(this.dispatchEvent({type:"modifystart",features:[this.current_.feature]}),this._modifystart=!1);var e,i,o,n,r=this.current_.geom.getClosestPoint(t.coordinate),s=ol.coordinate.dist2d(r,t.coordinate);switch(this.current_.geomType){case"Polygon":if(e=ol.coordinate.findSegment(r,this.current_.coordinates[0]).segment){(i=[e[1][0]-e[0][0],e[1][1]-e[0][1]])[0]*(o=[t.coordinate[0]-r[0],t.coordinate[1]-r[1]])[1]-i[1]*o[0]>0&&(s=-s),n=[];for(var a=0;a<this.current_.coordinates.length;a++)n.push(ol.coordinate.offsetCoords(this.current_.coordinates[a],0==a?s:-s));this.current_.feature.setGeometry(new ol.geom.Polygon(n))}break;case"LineString":(e=ol.coordinate.findSegment(r,this.current_.coordinates).segment)&&((i=[e[1][0]-e[0][0],e[1][1]-e[0][1]])[0]*(o=[t.coordinate[0]-r[0],t.coordinate[1]-r[1]])[1]-i[1]*o[0]>0&&(s=-s),n=ol.coordinate.offsetCoords(this.current_.coordinates,s),this.current_.feature.setGeometry(new ol.geom.LineString(n)))}this.dispatchEvent({type:"offsetting",feature:this.current_.feature,offset:s,segment:[r,t.coordinate],coordinate:t.coordinate})},ol.interaction.Offset.prototype.handleUpEvent_=function(t){this._modifystart||this.dispatchEvent({type:"offsetend",feature:this.current_.feature,coordinate:t.coordinate}),this.current_.feature.setStyle(this.currentStyle_),this.current_=!1},ol.interaction.Offset.prototype.handleMoveEvent_=function(t){this.getFeatureAtPixel_(t)?(!1===this.previousCursor_&&(this.previousCursor_=t.map.getTargetElement().style.cursor),t.map.getTargetElement().style.cursor="pointer"):(t.map.getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=!1)},ol.interaction.Ripple=function(t){ol.interaction.Pointer.call(this,{handleDownEvent:this.rainDrop,handleMoveEvent:this.rainDrop}),this.riprad=(t=t||{}).radius||3,this.ripplemap=[],this.last_map=[],this.rains(this.interval),t.layer.on(["postcompose","postrender"],this.postcompose_.bind(this))},ol.ext.inherits(ol.interaction.Ripple,ol.interaction.Pointer),ol.interaction.Ripple.prototype.rains=function(t){this.onrain&&clearTimeout(this.onrain);var e=this,i=("number"==typeof t?t:1e3)/2,o=3*i/2,n=Math.random;o&&function t(){e.width&&e.rainDrop([n()*e.width,n()*e.height]),e.onrain=setTimeout(t,n()*i+o)}()},ol.interaction.Ripple.prototype.rainDrop=function(t){if(this.width){var e,i;t.pixel?(e=t.pixel[0]*this.ratio,i=t.pixel[1]*this.ratio):(e=t[0]*this.ratio,i=t[1]*this.ratio),e<<=0;for(var o=(i<<=0)-this.riprad*this.ratio;o<i+this.riprad*this.ratio;o++)for(var n=e-this.riprad*this.ratio;n<e+this.riprad*this.ratio;n++)this.ripplemap[this.oldind+o*this.width+n]+=128}},ol.interaction.Ripple.prototype.postcompose_=function(t){var e,i,o,n,r,s=t.context,a=s.canvas;if(this.width!=a.width||this.height!=a.height){this.width=a.width,this.height=a.height,this.ratio=t.frameState.pixelRatio,this.half_width=this.width>>1,this.half_height=this.height>>1,this.size=this.width*(this.height+2)*2,this.oldind=this.width,this.newind=this.width*(this.height+3);for(var l=0;l<this.size;l++)this.last_map[l]=this.ripplemap[l]=0}this.texture=s.getImageData(0,0,this.width,this.height),this.ripple=s.getImageData(0,0,this.width,this.height);var c=this.oldind;this.oldind=this.newind,this.newind=c,l=0;for(var h=this.ripple.data,u=this.texture.data,d=0;d<this.height;d++)for(var p=0;p<this.width;p++){var g=this.newind+l,f=this.oldind+l;o=this.ripplemap[f-this.width]+this.ripplemap[f+this.width]+this.ripplemap[f-1]+this.ripplemap[f+1]>>1,o-=this.ripplemap[g],this.ripplemap[g]=o-=o>>5,this.last_map[l]!=(o=1024-o)&&(this.last_map[l]=o,(e=((p-this.half_width)*o/1024<<0)+this.half_width)>=this.width&&(e=this.width-1),e<0&&(e=0),(i=((d-this.half_height)*o/1024<<0)+this.half_height)>=this.height&&(i=this.height-1),i<0&&(i=0),h[n=4*l]=u[r=4*(e+i*this.width)],h[n+1]=u[r+1],h[n+2]=u[r+2]),++l}s.putImageData(this.ripple,0,0),this.getMap().render()},ol.interaction.SelectCluster=function(t){this.pointRadius=(t=t||{}).pointRadius||12,this.circleMaxObjects=t.circleMaxObjects||10,this.maxObjects=t.maxObjects||60,this.spiral=!1!==t.spiral,this.animate=t.animate,this.animationDuration=t.animationDuration||500,this.selectCluster_=!1!==t.selectCluster,this._autoClose=!1!==t.autoClose;var e=this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:new ol.Collection,wrapX:t.wrapX,useSpatialIndex:!0}),name:"Cluster overlay",updateWhileAnimating:!0,updateWhileInteracting:!0,displayInLayerSwitcher:!1,style:t.featureStyle});if(t.layers)if("function"==typeof t.layers){var i=t.layers;t.layers=function(t){return t===e||i(t)}}else t.layers.push&&t.layers.push(this.overlayLayer_);if(t.filter){var o=t.filter;t.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))&&o(t,e)}}else t.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))};this.filter_=t.filter,this._autoClose||t.toggleCondition||(t.toggleCondition=ol.events.condition.singleClick),ol.interaction.Select.call(this,t),this.on("select",this.selectCluster.bind(this))},ol.ext.inherits(ol.interaction.SelectCluster,ol.interaction.Select),ol.interaction.SelectCluster.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.interaction.Select.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&t.getView()&&(this._listener=t.getView().on("change:resolution",this.clear.bind(this)))},ol.interaction.SelectCluster.prototype.clear=function(){this.getFeatures().clear(),this.overlayLayer_.getSource().clear()},ol.interaction.SelectCluster.prototype.getLayer=function(){return this.overlayLayer_},ol.interaction.SelectCluster.prototype.selectCluster=function(t){if(t instanceof ol.Feature&&(t={selected:[t]}),t.selected.length){var e=t.selected[0];if(!e.get("selectclusterfeature")){var i=this.overlayLayer_.getSource();this._autoClose&&i.clear();var o=e.get("features");if(o&&1!=o.length){this.selectCluster_||this.getFeatures().clear();var n,r,s,a,l,c,h,u=e.getGeometry().getCoordinates(),d=this.getMap().getView().getResolution(),p=[];if(!this.spiral||o.length<=this.circleMaxObjects)for(a=Math.min(o.length,this.circleMaxObjects),n=d*this.pointRadius*(.5+a/4),s=0;s<a;s++)r=2*Math.PI*s/a,2!=a&&4!=a||(r+=Math.PI/4),l=[u[0]+n*Math.sin(r),u[1]+n*Math.cos(r)],(c=new ol.Feature({selectclusterfeature:!0,features:[o[s]],geometry:new ol.geom.Point(l)})).setStyle(o[s].getStyle()),p.push(c),h=new ol.Feature({selectclusterlink:!0,geometry:new ol.geom.LineString([u,l])}),p.push(h);else{r=0;var g=2*this.pointRadius;for(a=Math.min(this.maxObjects,o.length),s=0;s<a;s++){r+=(g+.1)/(n=g/2+g*r/(2*Math.PI));var f=d*n*Math.sin(r),m=d*n*Math.cos(r);l=[u[0]+f,u[1]+m],(c=new ol.Feature({selectclusterfeature:!0,features:[o[s]],geometry:new ol.geom.Point(l)})).setStyle(o[s].getStyle()),p.push(c),h=new ol.Feature({selectclusterlink:!0,geometry:new ol.geom.LineString([u,l])}),p.push(h)}}e.set("selectcluserfeatures",p),this.animate?this.animateCluster_(u,p):i.addFeatures(p)}}}else this._autoClose?this.clear():t.deselected.forEach(t=>{t.get("selectcluserfeatures").forEach(t=>{this.overlayLayer_.getSource().removeFeature(t)})})},ol.interaction.SelectCluster.prototype.animateCluster_=function(t,e){if(this.listenerKey_&&ol.Observable.unByKey(this.listenerKey_),e.length){var i=this.overlayLayer_.getStyle(),o="function"==typeof i?i:i.length?function(){return i}:function(){return[i]},n=this.animationDuration||500,r=(new Date).getTime();this.listenerKey_=this.overlayLayer_.on(["postcompose","postrender"],(function(i){for(var s,a=i.vectorContext||ol.render.getVectorContext(i),l=i.frameState.pixelRatio,c=this.getMap().getView().getResolution(),h=ol.easing.easeOut((i.frameState.time-r)/n),u=0;s=e[u];u++)if(s.get("features")){var d=s.getGeometry().getCoordinates();d[0]=t[0]+h*(d[0]-t[0]),d[1]=t[1]+h*(d[1]-t[1]);for(var p=new ol.geom.Point(d),g=o(s,c),f=0;f<g.length;f++){var m,y=!ol.Map.prototype.getFeaturesAtPixel&&g[f].getImage();y&&(m=y.getScale(),y.setScale(l)),a.setStyle?(a.setStyle(g[f]),a.drawGeometry(p)):(a.setImageStyle(y),a.drawPointGeometry(p)),y&&y.setScale(m)}}if(h>1)return ol.Observable.unByKey(this.listenerKey_),this.overlayLayer_.getSource().addFeatures(e),void this.overlayLayer_.changed();i.frameState.animate=!0}).bind(this));var s=new ol.Feature(new ol.geom.Point(this.getMap().getView().getCenter()));s.setStyle(new ol.style.Style({image:new ol.style.Circle({})})),this.overlayLayer_.getSource().addFeature(s)}},ol.interaction.SelectCluster.prototype.getClusterExtent=function(t){if(!t.get("features"))return null;var e=ol.extent.createEmpty();return t.get("features").forEach(function(t){e=ol.extent.extend(e,t.getGeometry().getExtent())}),e[0]===e[2]&&e[1]===e[3]?null:e},ol.interaction.SnapGuides=function(t){function e(t,e){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],n=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=i*r-o*n;if(0!=s){var a=(i*t[0][1]-i*e[0][1]-o*t[0][0]+o*e[0][0])/s;return[e[0][0]+a*n,e[0][1]+a*r]}return!1}function i(t,e){var i=t[0]-e[0],o=t[1]-e[1];return Math.sqrt(i*i+o*o)}t||(t={}),this.snapDistance_=t.pixelTolerance||10,this.enableInitialGuides_=t.enableInitialGuides||!1;var o=[new ol.style.Style({stroke:new ol.style.Stroke({color:"#ffcc33",lineDash:[8,5],width:1.25})})];t.style&&(o=t.style instanceof Array?t.style:[t.style]),this.overlaySource_=new ol.source.Vector({features:new ol.Collection,useSpatialIndex:!1});var n=t.vectorClass||ol.layer.Vector;this.overlayLayer_=new n({renderMode:"image",source:this.overlaySource_,style:function(){return o},name:"Snap overlay",displayInLayerSwitcher:!1}),ol.interaction.Interaction.call(this,{handleEvent:function(t){if(this.getActive()){for(var o,n=this.overlaySource_.getFeatures(),r=null,s=null,a=t.frameState.viewState.resolution,l=0;o=n[l];l++){var c=o.getGeometry().getClosestPoint(t.coordinate);if(i(c,t.coordinate)/a<this.snapDistance_){if(r){var h=e(r.getGeometry().getCoordinates(),o.getGeometry().getCoordinates());h&&i(h,t.coordinate)/a<this.snapDistance_&&(s=h)}else s=c;r=o}}s&&(t.coordinate=s)}return!0}})},ol.ext.inherits(ol.interaction.SnapGuides,ol.interaction.Interaction),ol.interaction.SnapGuides.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Interaction.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&(this.projExtent_=t.getView().getProjection().getExtent())},ol.interaction.SnapGuides.prototype.setActive=function(t){this.overlayLayer_.setVisible(t),ol.interaction.Interaction.prototype.setActive.call(this,t)},ol.interaction.SnapGuides.prototype.clearGuides=function(t){if(t)for(var e,i=0;e=t[i];i++)try{this.overlaySource_.removeFeature(e)}catch(o){}else this.overlaySource_.clear()},ol.interaction.SnapGuides.prototype.getGuides=function(){return this.overlaySource_.getFeaturesCollection()},ol.interaction.SnapGuides.prototype.addGuide=function(t,e){if(t){var i=this.getMap(),o=i.getView().calculateExtent(i.getSize()),n=Math.max(this.projExtent_[2]-this.projExtent_[0],this.projExtent_[3]-this.projExtent_[1]);(o=ol.extent.buffer(o,1.5*n))[0]<this.projExtent_[0]&&(o[0]=this.projExtent_[0]),o[1]<this.projExtent_[1]&&(o[1]=this.projExtent_[1]),o[2]>this.projExtent_[2]&&(o[2]=this.projExtent_[2]),o[3]>this.projExtent_[3]&&(o[3]=this.projExtent_[3]);var r=t[0][0]-t[1][0],s=t[0][1]-t[1][1],a=1/Math.sqrt(r*r+s*s),l=function(i){for(var l,c=[],h=n*i*2,u=0;(i>0?u<h:u>h)&&(l=e?[t[0][0]+s*a*u,t[0][1]-r*a*u]:[t[0][0]+r*a*u,t[0][1]+s*a*u],ol.extent.containsCoordinate(o,l));u+=n*i/100)c.push(l);return new ol.Feature(new ol.geom.LineString([c[0],c[c.length-1]]))},c=l(1),h=l(-1);return this.overlaySource_.addFeature(c),this.overlaySource_.addFeature(h),[c,h]}},ol.interaction.SnapGuides.prototype.addOrthoGuide=function(t){return this.addGuide(t,!0)},ol.interaction.SnapGuides.prototype.setDrawInteraction=function(t){var e=this,i=0,o=[];function n(t){var n=t.target.getCoordinates();switch(t.target.getType()){case"Point":return;case"Polygon":n=n[0].slice(0,-1)}var r=n.length;if(2===r&&e.enableInitialGuides_){var s=n[0][0],a=n[0][1];n=[[s,a],[s,a-1]]}if(r!=i&&(e.enableInitialGuides_?r>=2:r>2)){e.clearGuides(o);try{var l=n[r-2],c=n[r-2-1];r>2&&(l[0]!==c[0]||l[1]!==c[1])&&(o=e.addOrthoGuide([n[r-2],n[r-2-1]])),o=(o=o.concat(e.addGuide([n[0],n[1]]))).concat(e.addOrthoGuide([n[0],n[1]])),i=r}catch(t){}}}t.on("drawstart",function(t){t.feature.getGeometry().on("change",n)}),t.on(["drawend","change:active"],function(t){e.clearGuides(o),t.feature&&t.feature.getGeometry().un("change",n),i=0,o=[]})},ol.interaction.SnapGuides.prototype.setModifyInteraction=function(t){function e(t,e){return(t%e+e)%e}var i=this,o=[];function n(t){var n=t.target.vertexFeature_;if(n){var r=t.target.getModifiedFeatures()[0].getGeometry(),s=r.getCoordinates();switch(r.getType()){case"Point":return;case"Polygon":s=s[0].slice(0,-1)}var a=n.getGeometry().getCoordinates(),l=s.findIndex(function(t){return t[0]===a[0]&&t[1]===a[1]}),c=s.length;i.clearGuides(o),o=(o=(o=(o=i.addOrthoGuide([s[e(l-1,c)],s[e(l-2,c)]])).concat(i.addGuide([s[e(l-1,c)],s[e(l-2,c)]]))).concat(i.addGuide([s[e(l+1,c)],s[e(l+2,c)]]))).concat(i.addOrthoGuide([s[e(l+1,c)],s[e(l+2,c)]]))}}t.on("modifystart",function(t){setTimeout(n,0,t)}),t.on("modifyend",function(){i.clearGuides(o),o=[]})},ol.interaction.SnapLayerPixel=function(t){this._layer=(t=t||{}).layer,this._layer.on(["postcompose","postrender"],(function(t){this._ctx=t.context}).bind(this));var e=t.radius||8,i=2*e;ol.interaction.Interaction.call(this,{handleEvent:function(t){if(this._layer.getVisible()&&this._layer.getOpacity()&&ol.events.condition.altKeyOnly(t)&&this.getMap()){var o,n,r,s,a=t.pixel[0]-e,l=t.pixel[1]-e,c=this._ctx.getImageData(a,l,i,i).data,h=-1,u=[];for(o=0;o<i;o++)for(u.push([]),n=0;n<i;n++){var d=c[3+4*(o+n*i)];u[o].push(d>10?d:0)}for(o=1;o<i-1;o++)for(n=1;n<i-1;n++){var p=u[o][n+1]+u[o][n]+u[o][n+1]+u[o-1][n-1]+u[o-1][n]+u[o-1][n+1]+u[o+1][n-1]+u[o+1][n]+u[o+1][n+1];p>h&&(h=p,r=o,s=n)}t.pixel=[a+r,l+s],t.coordinate=this.getMap().getCoordinateFromPixel(t.pixel)}return!0}})},ol.ext.inherits(ol.interaction.SnapLayerPixel,ol.interaction.Interaction),ol.interaction.Split=function(t){t||(t={}),ol.interaction.Interaction.call(this,{handleEvent:function(t){switch(t.type){case"singleclick":return this.handleDownEvent(t);case"pointermove":return this.handleMoveEvent(t);default:return!0}}}),this.snapDistance_=t.snapDistance||25,this.tolerance_=t.tolerance||1e-10,this.cursor_=t.cursor,this.sources_=t.sources?t.sources instanceof Array?t.sources:[t.sources]:[],t.features&&this.sources_.push(new ol.source.Vector({features:t.features})),this.filterSplit_=t.filter||function(){return!0};var e=[255,255,255,1],i=[0,153,255,1],o=new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),n=new ol.style.Stroke({color:"#3399CC",width:1.25}),r=[new ol.style.Style({image:new ol.style.Circle({fill:o,stroke:n,radius:5}),fill:o,stroke:n})],s=[new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:5})}),new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:i}),stroke:new ol.style.Stroke({color:e,width:1.5})}),stroke:new ol.style.Stroke({color:i,width:3})})];t.sketchStyle&&(r=t.sketchStyle instanceof Array?t.sketchStyle:[t.sketchStyle]),t.featureStyle&&(s=t.featureStyle instanceof Array?t.featureStyle:[t.featureStyle]),this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1}),name:"Split overlay",displayInLayerSwitcher:!1,style:function(t){return t._sketch_?r:s}})},ol.ext.inherits(ol.interaction.Split,ol.interaction.Interaction),ol.interaction.Split.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Interaction.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},ol.interaction.Split.prototype.getClosestFeature=function(t){var e,i,o,n,r=this.snapDistance_+1;if(this.sources_.forEach(function(s){var a=s.getClosestFeatureToCoordinate(t.coordinate);if(a&&a.getGeometry().splitAt){var l=a.getGeometry().getClosestPoint(t.coordinate),c=new ol.geom.LineString([t.coordinate,l]),h=c.getLength()/t.frameState.viewState.resolution;h<r&&(e=s,r=h,i=a,n=c,o=l)}}),r>this.snapDistance_)return!1;var s=this.getNearestCoord(o,i.getGeometry().getCoordinates()),a=this.getMap().getPixelFromCoordinate(s);return ol.coordinate.dist2d(t.pixel,a)<this.snapDistance_&&(o=s),{source:e,feature:i,coord:o,link:n}},ol.interaction.Split.prototype.getNearestCoord=function(t,e){for(var i,o,n=Number.MAX_VALUE,r=0;r<e.length;r++)(i=ol.coordinate.dist2d(t,e[r]))<n&&(n=i,o=e[r]);return o},ol.interaction.Split.prototype.handleDownEvent=function(t){var e=this.getClosestFeature(t);if(e){var i=this;i.overlayLayer_.getSource().clear();var o,n=e.feature.getGeometry().splitAt(e.coord,this.tolerance_);if(n.length>1){var r=[];for(o=0;o<n.length;o++){var s=e.feature.clone();s.setGeometry(n[o]),r.push(s)}for(i.dispatchEvent({type:"beforesplit",original:e.feature,features:r}),e.source.dispatchEvent({type:"beforesplit",original:e.feature,features:r}),e.source.removeFeature(e.feature),o=0;o<r.length;o++)e.source.addFeature(r[o]);i.dispatchEvent({type:"aftersplit",original:e.feature,features:r}),e.source.dispatchEvent({type:"aftersplit",original:e.feature,features:r})}}return!1},ol.interaction.Split.prototype.handleMoveEvent=function(t){var e=t.map;this.overlayLayer_.getSource().clear();var i,o,n=this.getClosestFeature(t);n&&this.filterSplit_(n.feature)?(this.overlayLayer_.getSource().addFeature(n.feature),(i=new ol.Feature(new ol.geom.Point(n.coord)))._sketch_=!0,this.overlayLayer_.getSource().addFeature(i),(o=new ol.Feature(n.link))._sketch_=!0,this.overlayLayer_.getSource().addFeature(o),this.dispatchEvent({type:"pointermove",coordinate:t.coordinate,frameState:t.frameState,originalEvent:t.originalEvent,map:t.map,pixel:t.pixel,feature:n.feature,linkGeometry:n.link})):this.dispatchEvent(t);var r=e.getTargetElement();this.cursor_&&(n?r.style.cursor!=this.cursor_&&(this.previousCursor_=r.style.cursor,r.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(r.style.cursor=this.previousCursor_,this.previousCursor_=void 0))},ol.interaction.Splitter=function(t){t||(t={}),ol.interaction.Interaction.call(this,{handleEvent:function(t){return"pointermove"!=t.type&&"pointerdrag"!=t.type?(this.lastEvent_&&(this.splitSource(this.lastEvent_.feature),this.lastEvent_=null),this.moving_=!1):this.moving_=!0,!0}}),this.added_=[],this.removed_=[],this.source_=t.features?new ol.source.Vector({features:t.features}):t.source?t.source:new ol.source.Vector({features:new ol.Collection});var e=this.triggerSource;t.triggerFeatures&&(e=new ol.source.Vector({features:t.triggerFeatures})),e?(e.on("addfeature",this.onAddFeature.bind(this)),e.on("changefeature",this.onChangeFeature.bind(this)),e.on("removefeature",this.onRemoveFeature.bind(this))):(this.source_.on("addfeature",this.onAddFeature.bind(this)),this.source_.on("changefeature",this.onChangeFeature.bind(this)),this.source_.on("removefeature",this.onRemoveFeature.bind(this))),this.tolerance_=t.tolerance||1e-10,this.filterSplit_=t.filter||function(){return!0}},ol.ext.inherits(ol.interaction.Splitter,ol.interaction.Interaction),ol.interaction.Splitter.prototype.intersectSegs=function(t,e){var i=this.tolerance_,o=t[0][0]-t[1][0],n=e[0][0]-e[1][0],r=t[0][1]-t[1][1],s=e[0][1]-e[1][1],a=o*s-r*n;if(Math.abs(a)<i)return!1;var l=((t[0][0]-e[1][0])*s-(t[0][1]-e[1][1])*n)/a;if(Math.abs(l)<i)return t[0];if(Math.abs(1-l)<i)return t[1];if(l<0||l>1)return!1;var c=((t[0][1]-e[1][1])*o-(t[0][0]-e[1][0])*r)/a;if(Math.abs(c)<i)return e[1];if(Math.abs(1-c)<i)return e[0];if(c<0||c>1)return!1;var h=t[0][0]*t[1][1]-t[0][1]*t[1][0],u=e[0][0]*e[1][1]-e[0][1]*e[1][0];return[(h*n-u*o)/a,(h*s-u*r)/a]},ol.interaction.Splitter.prototype.splitSource=function(t,e){this.getActive()&&(this.splitting||(this.source_.dispatchEvent({type:"beforesplit",feaure:t,source:this.source_}),this.dispatchEvent({type:"beforesplit",feaure:t,source:this.source_}),e?this._splitSource(t):setTimeout((function(){this._splitSource(t)}).bind(this))))},ol.interaction.Splitter.prototype._splitSource=function(t){var e,i,o;this.splitting=!0,this.added_=[],this.removed_=[];var n,r=t.getGeometry().getCoordinates(),s=[];function a(e){if(e!==t)for(var i=e.getGeometry().getCoordinates(),o=0;o<i.length-1;o++){var r=this.intersectSegs(n,[i[o],i[o+1]]);if(r&&(s.push(r),(l=e.getGeometry().splitAt(r,this.tolerance_))&&l.length>1))return h=e,!0}return!1}for(e=0;e<r.length-1;e++){n=[r[e],r[e+1]];for(var l,c=ol.extent.buffer(ol.extent.boundingExtent(n),this.tolerance_);;){var h=!1;if(this.source_.forEachFeatureIntersectingExtent(c,a.bind(this)),!h)break;var u=h;for(this.source_.removeFeature(u),i=0;i<l.length;i++)(o=u.clone()).setGeometry(l[i]),this.source_.addFeature(o)}}for(e=0;e<r.length-2;e++)for(var d=e+1;d<r.length-1;d++){var p=this.intersectSegs([r[e],r[e+1]],[r[d],r[d+1]]);p&&p!=r[e+1]&&s.push(p)}var g=!1;if(s.length){var f=t.getGeometry().splitAt(s,this.tolerance_);if(f.length>1){for(i=0;i<f.length;i++)(o=t.clone()).setGeometry(f[i]),this.source_.addFeature(o);g=!0}}setTimeout((function(){g&&this.source_.removeFeature(t),this.source_.dispatchEvent({type:"aftersplit",featureAdded:this.added_,featureRemoved:this.removed_,source:this.source_}),this.dispatchEvent({type:"aftersplit",featureAdded:this.added_,featureRemoved:this.removed_,source:this.source_}),this.splitting=!1}).bind(this))},ol.interaction.Splitter.prototype.onAddFeature=function(t){this.splitSource(t.feature),this.splitting&&this.added_.push(t.feature)},ol.interaction.Splitter.prototype.onRemoveFeature=function(t){if(this.splitting){var e=this.added_.indexOf(t.feature);-1==e?this.removed_.push(t.feature):this.added_.splice(e,1)}},ol.interaction.Splitter.prototype.onChangeFeature=function(t){this.moving_?this.lastEvent_=t:this.splitSource(t.feature,!0)},ol.interaction.Synchronize=function(t){t||(t={});var e=this;ol.interaction.Interaction.call(this,{handleEvent:function(t){return"pointermove"==t.type&&e.handleMove_(t),!0}}),this.maps=t.maps||[],!1===t.active&&this.setActive(!1)},ol.ext.inherits(ol.interaction.Synchronize,ol.interaction.Interaction),ol.interaction.Synchronize.prototype.setMap=function(t){this._listener&&(ol.Observable.unByKey(this._listener.center),ol.Observable.unByKey(this._listener.rotation),ol.Observable.unByKey(this._listener.resolution),this.getMap().getTargetElement().removeEventListener("mouseout",this._listener.mouseout)),this._listener=null,ol.interaction.Interaction.prototype.setMap.call(this,t),t&&(this._listener={},this._listener.center=this.getMap().getView().on("change:center",this.syncMaps.bind(this)),this._listener.rotation=this.getMap().getView().on("change:rotation",this.syncMaps.bind(this)),this._listener.resolution=this.getMap().getView().on("change:resolution",this.syncMaps.bind(this)),this._listener.mouseout=this.handleMouseOut_.bind(this),this.getMap().getTargetElement()&&this.getMap().getTargetElement().addEventListener("mouseout",this._listener.mouseout),this.syncMaps())},ol.interaction.Synchronize.prototype.setActive=function(t){ol.interaction.Interaction.prototype.setActive.call(this,t),this.syncMaps()},ol.interaction.Synchronize.prototype.syncMaps=function(){if(this.getActive()){var t=this.getMap();if(t){if(t.get("lockView"))return;for(var e=0;e<this.maps.length;e++)this.maps[e].set("lockView",!0),this.maps[e].getView().getRotation()!=t.getView().getRotation()&&this.maps[e].getView().setRotation(t.getView().getRotation()),this.maps[e].getView().getCenter()!=t.getView().getCenter()&&this.maps[e].getView().setCenter(t.getView().getCenter()),this.maps[e].getView().getResolution()!=t.getView().getResolution()&&this.maps[e].getView().setResolution(t.getView().getResolution()),this.maps[e].set("lockView",!1)}}},ol.interaction.Synchronize.prototype.handleMove_=function(t){for(var e=0;e<this.maps.length;e++)this.maps[e].showTarget(t.coordinate);this.getMap().showTarget()},ol.interaction.Synchronize.prototype.handleMouseOut_=function(){for(var t=0;t<this.maps.length;t++)this.maps[t]._targetOverlay&&this.maps[t]._targetOverlay.setPosition(void 0)},ol.Map.prototype.showTarget=function(t){if(!this._targetOverlay){var e=document.createElement("div");e.classList.add("ol-target"),this._targetOverlay=new ol.Overlay({element:e}),this._targetOverlay.setPositioning("center-center"),this.addOverlay(this._targetOverlay),e.parentElement.classList.add("ol-target-overlay"),this._targetOverlay.setPosition([0,0])}this._targetOverlay.setPosition(t)},ol.Map.prototype.hideTarget=function(){this.removeOverlay(this._targetOverlay),this._targetOverlay=void 0},ol.interaction.TinkerBell=function(t){t=t||{},ol.interaction.Pointer.call(this,{handleDownEvent:this.onMove,handleMoveEvent:this.onMove}),this.set("color",t.color?ol.color.asString(t.color):"#fff"),this.sparkle=[0,0],this.sparkles=[],this.lastSparkle=this.time=new Date;var e=this;this.out_=function(){e.isout_=!0},this.isout_=!0},ol.ext.inherits(ol.interaction.TinkerBell,ol.interaction.Pointer),ol.interaction.TinkerBell.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,this.getMap()&&(t.getViewport().removeEventListener("mouseout",this.out_,!1),this.getMap().render()),ol.interaction.Pointer.prototype.setMap.call(this,t),t&&(this._listener=t.on("postcompose",this.postcompose_.bind(this)),t.getViewport().addEventListener("mouseout",this.out_,!1))},ol.interaction.TinkerBell.prototype.onMove=function(t){this.sparkle=t.pixel,this.isout_=!1,this.getMap().render()},ol.interaction.TinkerBell.prototype.postcompose_=function(t){var e=t.context||ol.ext.getMapCanvas(this.getMap()).getContext("2d"),i=t.frameState.time-this.time;this.time=t.frameState.time,t.frameState.time-this.lastSparkle>30&&!this.isout_&&(this.lastSparkle=t.frameState.time,this.sparkles.push({p:[this.sparkle[0]+15*Math.random()-7.5,this.sparkle[1]+15*Math.random()],o:1})),e.save(),e.scale(t.frameState.pixelRatio,t.frameState.pixelRatio),e.fillStyle=this.get("color");for(var o,n=this.sparkles.length-1;o=this.sparkles[n];n--){if(o.o<.2){this.sparkles.splice(0,n+1);break}e.globalAlpha=o.o,e.beginPath(),e.arc(o.p[0],o.p[1],2.2,0,2*Math.PI,!1),e.fill(),o.o*=.98,o.p[0]+=Math.random()-.5,o.p[1]+=i*(1+Math.random())/30}e.restore(),this.sparkles.length&&this.getMap().render()},ol.interaction.TouchCompass=function(t){if(t=t||{},ol.interaction.Pointer.call(this,{handleDownEvent:function(t){var e=this.getCenter_(),i=t.pixel[0]-e[0],o=t.pixel[1]-e[1];return this.start=t,Math.sqrt(i*i+o*o)<this.size/2},handleDragEvent:function(t){if(!this.pos){this.pos=this.start;try{this.getMap().renderSync()}catch(t){}}this.pos=t},handleUpEvent:function(){return this.pos=!1,!0}}),this.ondrag_=t.onDrag,this.size=t.size||80,this.alpha=t.alpha||.5,!ol.interaction.TouchCompass.prototype.compass){var e=ol.interaction.TouchCompass.prototype.compass=document.createElement("canvas"),i=e.getContext("2d"),o=e.width=e.height=this.size,n=o/10,r=o/2,s=.22*r;i.translate(r,r),i.fillStyle="#999",i.strokeStyle="#ccc",i.lineWidth=n,i.beginPath(),i.arc(0,0,.42*o,0,2*Math.PI),i.fill(),i.stroke(),i.fillStyle="#99f",i.beginPath(),i.moveTo(0,0),i.lineTo(r,0),i.lineTo(s,s),i.moveTo(0,0),i.lineTo(-r,0),i.lineTo(-s,-s),i.moveTo(0,0),i.lineTo(0,r),i.lineTo(-s,s),i.moveTo(0,0),i.lineTo(0,-r),i.lineTo(s,-s),i.moveTo(0,0),i.fill(),i.fillStyle="#eee",i.beginPath(),i.moveTo(0,0),i.lineTo(r,0),i.lineTo(s,-s),i.moveTo(0,0),i.lineTo(-r,0),i.lineTo(-s,s),i.moveTo(0,0),i.lineTo(0,r),i.lineTo(s,s),i.moveTo(0,0),i.lineTo(0,-r),i.lineTo(-s,-s),i.moveTo(0,0),i.fill()}},ol.ext.inherits(ol.interaction.TouchCompass,ol.interaction.Pointer),ol.interaction.TouchCompass.prototype.compass=null,ol.interaction.TouchCompass.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.interaction.Pointer.prototype.setMap.call(this,t),t&&(this._listener=t.on("postcompose",this.drawCompass_.bind(this)),ol.ext.getMapCanvas(t))},ol.interaction.TouchCompass.prototype.setActive=function(t){if(ol.interaction.Pointer.prototype.setActive.call(this,t),this.getMap())try{this.getMap().renderSync()}catch(e){}},ol.interaction.TouchCompass.prototype.getCenter_=function(){var t=this.size,e=this.getMap().getSize();return[e[0]/2,e[1]-10-t/2]},ol.interaction.TouchCompass.prototype.drawCompass_=function(t){if(this.getActive()){var e=t.context||ol.ext.getMapCanvas(this.getMap()).getContext("2d"),i=t.frameState.pixelRatio;e.save(),e.scale(i,i),e.globalAlpha=this.alpha,e.strokeStyle="#fff",e.lineWidth=5;var o=this.size,n=this.getCenter_();if(e.drawImage(this.compass,0,0,this.compass.width,this.compass.height,n[0]-o/2,n[1]-o/2,o,o),this.pos)for(var r=this.pos.pixel[0]-this.start.pixel[0],s=this.pos.pixel[1]-this.start.pixel[1],a=1;a<=4;a++)e.beginPath(),e.arc(n[0]+r/4*a,n[1]+s/4*a,o/2*(.6+.4*a/4),0,2*Math.PI),e.stroke();if(e.restore(),this.pos){if(this.ondrag_){var l=this.getMap().getView().getResolution(),c={dpixel:[this.pos.pixel[0]-this.start.pixel[0],this.pos.pixel[1]-this.start.pixel[1]]};c.traction=[c.dpixel[0]*l,-c.dpixel[1]*l],this.ondrag_(c,this.pos)}t.frameState.animate=!0}}},ol.interaction.TouchCursor=function(t){t=t||{},this._listeners={};var e=[-35,-35];if(this.ctouch=new ol.interaction.Interaction({handleEvent:(function(t){if(!/drag/.test(t.type)&&this.getMap())t.coordinate=this.overlay.getPosition(),t.pixel=this.getMap().getPixelFromCoordinate(t.coordinate),this._lastEvent=t;else{var i=t.frameState.viewState.resolution,o=Math.cos(t.frameState.viewState.rotation),n=Math.sin(t.frameState.viewState.rotation);t.coordinate=[t.coordinate[0]+o*e[0]*i+n*e[1]*i,t.coordinate[1]+n*e[0]*i-o*e[1]*i],t.pixel=this.getMap().getPixelFromCoordinate(t.coordinate)}return!0}).bind(this)}),this.ctouch.set("onTop",!0),this.overlay=new ol.Overlay.Fixed({className:("ol-touch-cursor "+(t.className||"")).trim(),positioning:"top-left",element:ol.ext.element.create("DIV",{}),stopEvent:!1}),ol.interaction.DragOverlay.call(this,{centerOnClick:!1,overlays:this.overlay}),this.setPosition(t.coordinate,!0),this.set("maxButtons",t.maxButtons||5),t.buttons){t.buttons.length>this.get("maxButtons")&&this.set("maxButtons",t.buttons.length);var i=this.overlay.element,o=t.buttons.length>4?0:1;t.buttons.forEach(function(t,e){e<5&&ol.ext.element.create("DIV",{className:((t.className||"")+" ol-button ol-button-"+(e+o)).trim(),html:ol.ext.element.create("DIV",{html:t.html}),click:t.click,on:t.on,parent:i})})}var n=!1,r=!1;this.on("dragstart",function(t){return this._pixel=this.getMap().getPixelFromCoordinate(this.overlay.getPosition()),r=t,!t.overlay}),this.on("dragend",(function(t){return this._pixel=this.getMap().getPixelFromCoordinate(this.overlay.getPosition()),!t.overlay||(n?(this.dispatchEvent({type:"dragend",dragging:n,originalEvent:t.originalEvent,frameState:t.frameState,pixel:this._pixel,coordinate:this.overlay.getPosition()}),n=!1):t.originalEvent.target===this.overlay.element&&this.dispatchEvent({type:"click",dragging:n,originalEvent:t.originalEvent,frameState:t.frameState,pixel:this._pixel,coordinate:this.overlay.getPosition()}),!1)}).bind(this)),this.on("dragging",(function(t){return this._pixel=this.getMap().getPixelFromCoordinate(this.overlay.getPosition()),!t.overlay||(n=!0,r&&(this.dispatchEvent({type:"dragstart",dragging:n,originalEvent:r.originalEvent,frameState:t.frameState,pixel:this._pixel,coordinate:r.coordinate}),r=!1),this.dispatchEvent({type:"dragging",dragging:n,originalEvent:t.originalEvent,frameState:t.frameState,pixel:this._pixel,coordinate:this.overlay.getPosition()}),!1)}).bind(this))},ol.ext.inherits(ol.interaction.TouchCursor,ol.interaction.DragOverlay),ol.interaction.TouchCursor.prototype.setMap=function(t){for(var e in this.getMap()&&(this.getMap().removeInteraction(this.ctouch),this.getActive()&&this.getMap().removeOverlay(this.overlay)),this._listeners)ol.Observable.unByKey(this._listeners[e]);this._listeners={},ol.interaction.DragOverlay.prototype.setMap.call(this,t),t&&(this.getActive()&&(t.addOverlay(this.overlay),setTimeout((function(){this.setPosition(this.getPosition()||t.getView().getCenter())}).bind(this))),t.addInteraction(this.ctouch),this._listeners.addInteraction=t.getInteractions().on("add",(function(e){e.element.get("onTop")||(t.removeInteraction(this.ctouch),t.addInteraction(this.ctouch))}).bind(this)))},ol.interaction.TouchCursor.prototype.setActive=function(t,e){t!==this.getActive()?(this.ctouch.setActive(t),t?(this.getMap()&&this.getMap().addOverlay(this.overlay),e?this.setPosition(e):this.getMap()&&this.setPosition(this.getMap().getView().getCenter()),this._activate=setTimeout((function(){this.overlay.element.classList.add("active")}).bind(this),100)):(this.setPosition(),this.overlay.element.classList.remove("active"),this._activate&&clearTimeout(this._activate),this.getMap()&&this.getMap().removeOverlay(this.overlay)),ol.interaction.DragOverlay.prototype.setActive.call(this,t)):e?this.setPosition(e):this.getMap()&&this.setPosition(this.getMap().getView().getCenter())},ol.interaction.TouchCursor.prototype.setPosition=function(t){this.overlay.setPosition(t,!0),this.getMap()&&t&&(this._pixel=this.getMap().getPixelFromCoordinate(t))},ol.interaction.TouchCursor.prototype.offsetPosition=function(t){var e=this.overlay.getPosition();e&&this.overlay.setPosition([e[0]+t[0],e[1]+t[1]])},ol.interaction.TouchCursor.prototype.getPosition=function(){return this.overlay.getPosition()},ol.interaction.TouchCursor.prototype.getPixel=function(){if(this.getMap())return this.getMap().getPixelFromCoordinate(this.getPosition())},ol.interaction.TouchCursor.prototype.getOverlay=function(){return this.overlay},ol.interaction.TouchCursor.prototype.getOverlayElement=function(){return this.overlay.element},ol.interaction.TouchCursor.prototype.getButtonElement=function(t){return"number"==typeof t?this.getOverlayElement().getElementsByClassName("ol-button")[t]:this.getOverlayElement().getElementsByClassName(t)[0]},ol.interaction.TouchCursor.prototype.removeButton=function(t){if(void 0===t)for(var e=this.getOverlayElement().getElementsByClassName("ol-button"),i=e.length-1;i>=0;i--)this.getOverlayElement().removeChild(e[i]);else{var o=this.getButtonElement(t);o&&this.getOverlayElement().removeChild(o)}},ol.interaction.TouchCursor.prototype.addButton=function(t){var e=this.getOverlayElement().getElementsByClassName("ol-button"),i=this.get("maxButtons")||5;if(e.length>=i)console.error("[ol/interaction/TouchCursor~addButton] too many button on the cursor (max="+i+")...");else{var o=ol.ext.element.create("DIV",{className:((t.className||"")+" ol-button").trim(),html:ol.ext.element.create("DIV",{html:t.html}),click:t.click,on:t.on});t.before&&0!==e.length?this.getOverlayElement().insertBefore(o,e[0]):this.getOverlayElement().appendChild(o);for(var n=e.length>=i?0:1,r=0;r<e.length;r++)e[r].className=e[r].className.replace(/ol-button-\d/g,"").trim()+" ol-button-"+(r+n)}},ol.interaction.TouchCursorDraw=function(t){t=t||{};var e=this.sketch=new ol.layer.SketchOverlay({type:t.type});e.on("drawend",(function(e){e.valid&&t.source&&t.source.addFeature(e.feature),this.getOverlayElement().classList.add("nodrawing"),this.dispatchEvent(e)}).bind(this)),e.on("drawstart",(function(t){this.getOverlayElement().classList.remove("nodrawing"),this.dispatchEvent(t)}).bind(this)),e.on("drawabort",(function(t){this.getOverlayElement().classList.add("nodrawing"),this.dispatchEvent(t)}).bind(this)),ol.interaction.TouchCursor.call(this,{className:t.className,coordinate:t.coordinate}),this.getOverlayElement().classList.add("nodrawing"),this.set("types",t.types),this.setType(t.type),this.on("click",(function(){this.sketch.addPoint(this.getPosition())}).bind(this)),this.on("dragging",(function(){this.sketch.setPosition(this.getPosition())}).bind(this))},ol.ext.inherits(ol.interaction.TouchCursorDraw,ol.interaction.TouchCursor),ol.interaction.TouchCursorDraw.prototype.setMap=function(t){ol.interaction.TouchCursor.prototype.setMap.call(this,t),this.sketch.setMap(t),t&&(this._listeners.movend=t.on("moveend",(function(){this.sketch.setPosition(this.getPosition())}).bind(this)))},ol.interaction.TouchCursorDraw.prototype.setActive=function(t,e){ol.interaction.TouchCursor.prototype.setActive.call(this,t,e),this.sketch.abortDrawing(),this.sketch.setPosition(e),this.sketch.setVisible(t)},ol.interaction.TouchCursorDraw.prototype.setType=function(t){this.removeButton();var e=this.sketch;this.getOverlayElement().classList.remove(e.getGeometryType());var i=e.setGeometryType();t=e.setGeometryType(t),this.getOverlayElement().classList.add(t),this.dispatchEvent({type:"change:type",oldValue:i});var o=this.get("types");if(o&&o.length){var n=o[(o.indexOf(t)+1)%o.length];this.addButton({className:"ol-button-type "+n,click:(function(){this.setType(n)}).bind(this)})}"Point"!==t&&(this.addButton({className:"ol-button-x",click:function(){e.abortDrawing()}}),"Circle"!==t&&(this.addButton({className:"ol-button-check",click:function(){e.finishDrawing(!0)}}),this.addButton({className:"ol-button-remove",click:function(){e.removeLastPoint()}})))},ol.interaction.TouchCursorDraw.prototype.getType=function(){return this.sketch.getGeometryType()},ol.interaction.TouchCursorModify=function(t){t=t||{};var e=!1,i=!1,o=!1,n=this._modify=new ol.interaction.ModifyFeature({source:t.source,sources:t.sources,features:t.features,pixelTolerance:t.pixelTolerance,filter:t.filter,style:t.style||[new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:10,radius2:0,stroke:new ol.style.Stroke({color:[255,255,255,.5],width:3})})}),new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:10,radius2:0,stroke:new ol.style.Stroke({color:[0,153,255,1],width:1.25})})})],wrapX:t.wrapX,condition:function(t){return t.dragging||i},deleteCondition:function(){return o}});ol.interaction.TouchCursor.call(this,{className:("disable "+t.className).trim(),coordinate:t.coordinate,buttons:[{className:"ol-button-move",on:{pointerdown:function(){e=!0},pointerup:function(){e=!1}}},{className:"ol-button-add",click:(function(){i=!0,n.handleDownEvent(this._lastEvent),n.handleUpEvent(this._lastEvent),i=!1}).bind(this)},{className:"ol-button-remove",click:(function(){o=!0,n.handleDownEvent(this._lastEvent),o=!1}).bind(this)}]}),n.on("select",(function(t){t.selected.length?this.getOverlayElement().classList.remove("disable"):this.getOverlayElement().classList.add("disable")}).bind(this)),this.on("dragstart",(function(){e&&n.handleDownEvent(this._lastEvent)}).bind(this)),this.on("dragging",function(t){e&&n.handleDragEvent(t)}),this.on("dragend",function(t){n.handleUpEvent(t),e=!1})},ol.ext.inherits(ol.interaction.TouchCursorModify,ol.interaction.TouchCursor),ol.interaction.TouchCursorModify.prototype.setMap=function(t){this.getMap()&&this.getMap().removeInteraction(this._modify),t&&t.addInteraction(this._modify),ol.interaction.TouchCursor.prototype.setMap.call(this,t)},ol.interaction.TouchCursorModify.prototype.setActive=function(t,e){ol.interaction.TouchCursor.prototype.setActive.call(this,t,e),this._modify.setActive(t)},ol.interaction.TouchCursorModify.prototype.getInteraction=function(){return this._modify},ol.interaction.TouchCursorSelect=function(t){t=t||{},ol.interaction.TouchCursor.call(this,{className:"ol-select "+(t.className||""),coordinate:t.coordinate}),this._selection=null,this._layerFilter=t.layerFilter,this._filter=t.filter,this._style=t.style||ol.style.Style.defaultStyle(!0),this.set("hitTolerance",t.hitTolerance||0),this.on(["change:active","dragging"],function(){this.select()})},ol.ext.inherits(ol.interaction.TouchCursorSelect,ol.interaction.TouchCursor),ol.interaction.TouchCursorSelect.prototype.setMap=function(t){ol.interaction.TouchCursor.prototype.setMap.call(this,t),t&&(this._listeners.movend=t.on("moveend",(function(){this.select()}).bind(this)))},ol.interaction.TouchCursorSelect.prototype.getSelection=function(){return this._selection?this._selection.feature:null},ol.interaction.TouchCursorSelect.prototype.setPosition=function(t){ol.interaction.TouchCursor.prototype.setPosition.call(this,t),this.select()},ol.interaction.TouchCursorSelect.prototype.select=function(t){var e=this._selection;if(this.getActive()&&this.getPosition()){if(!t){var i=this.getMap().getFeaturesAtPixel(this.getPixel(),{layerFilter:this._layerFilter,filter:this._filter,hitTolerance:this.get("hitTolerance")});t=i?i[0]:null}t?e&&t===e.feature?e=null:(this._selection={feature:t,style:t.getStyle()},t.setStyle(this._style),this.dispatchEvent({type:"select",selected:[t],deselected:e?[e.feature]:[]})):(this._selection=null,this.dispatchEvent({type:"select",selected:[],deselected:e?[e.feature]:[]}))}else this._selection=null,this.dispatchEvent({type:"select",selected:[],deselected:e?[e.feature]:[]});e&&e.feature.setStyle(e.style),this._selection?this.getOverlayElement().classList.remove("disable"):this.getOverlayElement().classList.add("disable")},ol.interaction.Transform=function(t){t||(t={});var e=this;this.selection_=new ol.Collection,this.handles_=new ol.Collection,this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:this.handles_,useSpatialIndex:!1,wrapX:!1}),name:"Transform overlay",displayInLayerSwitcher:!1,style:function(t){return e.style[(t.get("handle")||"default")+(t.get("constraint")||"")+(t.get("option")||"")]}}),ol.interaction.Pointer.call(this,{handleDownEvent:this.handleDownEvent_,handleDragEvent:this.handleDragEvent_,handleMoveEvent:this.handleMoveEvent_,handleUpEvent:this.handleUpEvent_}),this.features_=t.features,"function"==typeof t.filter&&(this._filter=t.filter),this.layers_=t.layers?t.layers instanceof Array?t.layers:[t.layers]:null,this._handleEvent=t.condition||function(){return!0},this.addFn_=t.addCondition||function(){return!1},this.set("translateFeature",!1!==t.translateFeature),this.set("translate",!1!==t.translate),this.set("translateBBox",!0===t.translateBBox),this.set("stretch",!1!==t.stretch),this.set("scale",!1!==t.scale),this.set("rotate",!1!==t.rotate),this.set("keepAspectRatio",t.keepAspectRatio||function(t){return t.originalEvent.shiftKey}),this.set("modifyCenter",t.modifyCenter||function(t){return t.originalEvent.metaKey||t.originalEvent.ctrlKey}),this.set("noFlip",t.noFlip||!1),this.set("selection",!1!==t.selection),this.set("hitTolerance",t.hitTolerance||0),this.set("enableRotatedTransform",t.enableRotatedTransform||!1),this.set("keepRectangle",t.keepRectangle||!1),this.on("propertychange",function(){this.drawSketch_()}),this.setDefaultStyle()},ol.ext.inherits(ol.interaction.Transform,ol.interaction.Pointer),ol.interaction.Transform.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",rotate0:"move",scale:"nesw-resize",scale1:"nwse-resize",scale2:"nesw-resize",scale3:"nwse-resize",scalev:"ew-resize",scaleh1:"ns-resize",scalev2:"ew-resize",scaleh3:"ns-resize"},ol.interaction.Transform.prototype.setMap=function(t){var e=this.getMap();if(e){var i=e.getTargetElement();e.removeLayer(this.overlayLayer_),this.previousCursor_&&i&&(i.style.cursor=this.previousCursor_),this.previousCursor_=void 0}ol.interaction.Pointer.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),null===t&&this.select(null),null!==t&&(this.isTouch=/touch/.test(t.getViewport().className),this.setDefaultStyle())},ol.interaction.Transform.prototype.setActive=function(t){this.select(null),this.overlayLayer_.setVisible(t),ol.interaction.Pointer.prototype.setActive.call(this,t)},ol.interaction.Transform.prototype.setDefaultStyle=function(t){var e=(t=t||{}).pointStroke||new ol.style.Stroke({color:[255,0,0,1],width:1}),i=t.stroke||new ol.style.Stroke({color:[255,0,0,1],width:1,lineDash:[4,4]}),o=t.fill||new ol.style.Fill({color:[255,0,0,.01]}),n=t.pointFill||new ol.style.Fill({color:[255,255,255,.8]}),r=new ol.style.RegularShape({fill:n,stroke:e,radius:this.isTouch?12:6,points:15});r.getAnchor()[0]=this.isTouch?-10:-5;var s=new ol.style.RegularShape({fill:n,stroke:e,radius:this.isTouch?16:8,points:4,angle:Math.PI/4}),a=new ol.style.RegularShape({fill:n,stroke:e,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});function l(t,e,i){return[new ol.style.Style({image:t,stroke:e,fill:i})]}this.style={default:l(s,i,o),translate:l(s,e,n),rotate:l(r,e,n),rotate0:l(s,e,n),scale:l(s,e,n),scale1:l(s,e,n),scale2:l(s,e,n),scale3:l(s,e,n),scalev:l(a,e,n),scaleh1:l(a,e,n),scalev2:l(a,e,n),scaleh3:l(a,e,n)},this.drawSketch_()},ol.interaction.Transform.prototype.setStyle=function(t,e){if(e){this.style[t]=e instanceof Array?e:[e];for(var i=0;i<this.style[t].length;i++){var o=this.style[t][i].getImage();o&&("rotate"==t&&(o.getAnchor()[0]=-5),this.isTouch&&o.setScale(1.8));var n=this.style[t][i].getText();n&&("rotate"==t&&n.setOffsetX(this.isTouch?14:7),this.isTouch&&n.setScale(1.8))}this.drawSketch_()}},ol.interaction.Transform.prototype.getFeatureAtPixel_=function(t){var e=this;return this.getMap().forEachFeatureAtPixel(t,function(t,i){var o=!1;if(!i){if(t===e.bbox_)return!!e.get("translateBBox")&&{feature:t,handle:"translate",constraint:"",option:""};if(e.handles_.forEach(function(e){e===t&&(o=!0)}),o)return{feature:t,handle:t.get("handle"),constraint:t.get("constraint"),option:t.get("option")}}if(!e.get("selection"))return e.selection_.getArray().some(function(e){return t===e})?{feature:t}:null;if(e._filter)return e._filter(t,i)?{feature:t}:null;if(e.layers_){for(var n=0;n<e.layers_.length;n++)if(e.layers_[n]===i)return{feature:t};return null}return e.features_?(e.features_.forEach(function(e){e===t&&(o=!0)}),o?{feature:t}:null):{feature:t}},{hitTolerance:this.get("hitTolerance")})||{}},ol.interaction.Transform.prototype.getGeometryRotateToZero_=function(t,e){var i=t.getGeometry(),o=this.getMap().getView().getRotation();if(0===o||!this.get("enableRotatedTransform"))return e?i.clone():i;var n=i.clone();return n.rotate(-1*o,this.getMap().getView().getCenter()),n},ol.interaction.Transform.prototype._isRectangle=function(t){return!(!this.get("keepRectangle")||"Polygon"!==t.getType())&&5===t.getCoordinates()[0].length},ol.interaction.Transform.prototype.drawSketch_=function(t){var e,i,o,n=this.selection_.item(0)&&this._isRectangle(this.selection_.item(0).getGeometry());if(this.overlayLayer_.getSource().clear(),this.selection_.getLength()){var r,s=this.getMap().getView().getRotation(),a=this.getGeometryRotateToZero_(this.selection_.item(0)).getExtent();if(n&&(r=this.getGeometryRotateToZero_(this.selection_.item(0)).getCoordinates()[0].slice(0,4)).unshift(r[3]),a=ol.extent.buffer(a,0),this.selection_.forEach((function(t){var e=this.getGeometryRotateToZero_(t).getExtent();ol.extent.extend(a,e)}).bind(this)),!0===t)this.ispt_||(this.overlayLayer_.getSource().addFeature(new ol.Feature({geometry:new ol.geom.Point(this.center_),handle:"rotate0"})),o=ol.geom.Polygon.fromExtent(a),this.get("enableRotatedTransform")&&0!==s&&o.rotate(s,this.getMap().getView().getCenter()),i=this.bbox_=new ol.Feature(o),this.overlayLayer_.getSource().addFeature(i));else{if(this.ispt_){var l=this.getMap().getPixelFromCoordinate([a[0],a[1]]);l&&(a=ol.extent.boundingExtent([this.getMap().getCoordinateFromPixel([l[0]-10,l[1]-10]),this.getMap().getCoordinateFromPixel([l[0]+10,l[1]+10])]))}o=n?new ol.geom.Polygon([r]):ol.geom.Polygon.fromExtent(a),this.get("enableRotatedTransform")&&0!==s&&o.rotate(s,this.getMap().getView().getCenter()),i=this.bbox_=new ol.Feature(o);var c=[],h=o.getCoordinates()[0];if(!this.ispt_){if(c.push(i),!this.iscircle_&&this.get("stretch")&&this.get("scale"))for(e=0;e<h.length-1;e++)i=new ol.Feature({geometry:new ol.geom.Point([(h[e][0]+h[e+1][0])/2,(h[e][1]+h[e+1][1])/2]),handle:"scale",constraint:e%2?"h":"v",option:e}),c.push(i);if(this.get("scale"))for(e=0;e<h.length-1;e++)i=new ol.Feature({geometry:new ol.geom.Point(h[e]),handle:"scale",option:e}),c.push(i);this.get("translate")&&!this.get("translateFeature")&&(i=new ol.Feature({geometry:new ol.geom.Point([(h[0][0]+h[2][0])/2,(h[0][1]+h[2][1])/2]),handle:"translate"}),c.push(i))}!this.iscircle_&&this.get("rotate")&&(i=new ol.Feature({geometry:new ol.geom.Point(h[3]),handle:"rotate"}),c.push(i)),this.overlayLayer_.getSource().addFeatures(c)}}},ol.interaction.Transform.prototype.select=function(t,e){if(!t)return this.selection_.clear(),void this.drawSketch_();if(t.getGeometry&&t.getGeometry()){if(e)this.selection_.push(t);else{var i=this.selection_.getArray().indexOf(t);this.selection_.removeAt(i)}this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:t,features:this.selection_})}},ol.interaction.Transform.prototype.setSelection=function(t){this.selection_.clear(),t.forEach((function(t){this.selection_.push(t)}).bind(this)),this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",features:this.selection_})},ol.interaction.Transform.prototype.watchFeatures_=function(){this._featureListeners&&this._featureListeners.forEach(function(t){ol.Observable.unByKey(t)}),this._featureListeners=[],this.selection_.forEach((function(t){this._featureListeners.push(t.on("change",(function(){this.isUpdating_||this.drawSketch_()}).bind(this)))}).bind(this))},ol.interaction.Transform.prototype.handleDownEvent_=function(t){if(this._handleEvent(t,this.selection_)){var e=this.getFeatureAtPixel_(t.pixel),i=e.feature;if(this.selection_.getLength()&&this.selection_.getArray().indexOf(i)>=0&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))&&(e.handle="translate"),e.handle){this.mode_=e.handle,this.opt_=e.option,this.constraint_=e.constraint;var o=this.getMap().getView().getRotation();this.coordinate_=t.coordinate,this.pixel_=t.pixel,this.geoms_=[],this.rotatedGeoms_=[];for(var n,r=ol.extent.createEmpty(),s=ol.extent.createEmpty(),a=0;n=this.selection_.item(a);a++)if(this.geoms_.push(n.getGeometry().clone()),r=ol.extent.extend(r,n.getGeometry().getExtent()),this.get("enableRotatedTransform")&&0!==o){var l=this.getGeometryRotateToZero_(n,!0);this.rotatedGeoms_.push(l),s=ol.extent.extend(s,l.getExtent())}if(this.extent_=ol.geom.Polygon.fromExtent(r).getCoordinates()[0],this.get("enableRotatedTransform")&&0!==o&&(this.rotatedExtent_=ol.geom.Polygon.fromExtent(s).getCoordinates()[0]),"rotate"===this.mode_){this.center_=this.getCenter()||ol.extent.getCenter(r);var c=t.map.getTargetElement();c.style.cursor=this.Cursors.rotate0,this.previousCursor_=c.style.cursor}else this.center_=ol.extent.getCenter(r);return this.angle_=Math.atan2(this.center_[1]-t.coordinate[1],this.center_[0]-t.coordinate[0]),this.dispatchEvent({type:this.mode_+"start",feature:this.selection_.item(0),features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!0}if(this.get("selection")){if(i){this.addFn_(t)||this.selection_.clear();var h=this.selection_.getArray().indexOf(i);h<0?this.selection_.push(i):this.selection_.removeAt(h)}else this.selection_.clear();return this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:i,features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!1}}},ol.interaction.Transform.prototype.getFeatures=function(){return this.selection_},ol.interaction.Transform.prototype.getCenter=function(){return this.get("center")},ol.interaction.Transform.prototype.setCenter=function(t){return this.set("center",t)},ol.interaction.Transform.prototype.handleDragEvent_=function(t){if(this._handleEvent(t,this.features_)){var e,i,o,n,r=this.getMap().getView().getRotation(),s=[this.coordinate_[0],this.coordinate_[1]],a=[t.coordinate[0],t.coordinate[1]];switch(this.isUpdating_=!0,this.mode_){case"rotate":var l=Math.atan2(this.center_[1]-a[1],this.center_[0]-a[0]);if(!this.ispt)for(e=0;o=this.selection_.item(e);e++)(n=this.geoms_[e].clone()).rotate(l-this.angle_,this.center_),"Circle"==n.getType()&&n.setCenterAndRadius(n.getCenter(),n.getRadius()),o.setGeometry(n);this.drawSketch_(!0),this.dispatchEvent({type:"rotating",feature:this.selection_.item(0),features:this.selection_,angle:l-this.angle_,pixel:t.pixel,coordinate:t.coordinate});break;case"translate":var c=a[0]-s[0],h=a[1]-s[1];for(e=0;o=this.selection_.item(e);e++)o.getGeometry().translate(c,h);this.handles_.forEach(function(t){t.getGeometry().translate(c,h)}),this.coordinate_=t.coordinate,this.dispatchEvent({type:"translating",feature:this.selection_.item(0),features:this.selection_,delta:[c,h],pixel:t.pixel,coordinate:t.coordinate});break;case"scale":var u=this.center_;if(this.get("modifyCenter")(t)){var d=this.extent_;this.get("enableRotatedTransform")&&0!==r&&(d=this.rotatedExtent_),u=d[(Number(this.opt_)+2)%4]}var p=1==this.geoms_.length&&this._isRectangle(this.geoms_[0]),g=this.constraint_,f=this.opt_,m=this.coordinate_,y=t.coordinate;if(this.get("enableRotatedTransform")&&0!==r){var v=new ol.geom.Point(this.coordinate_);v.rotate(-1*r,u),m=v.getCoordinates();var x=new ol.geom.Point(t.coordinate);x.rotate(-1*r,u),y=x.getCoordinates()}var b=(y[0]-u[0])/(m[0]-u[0]),w=(y[1]-u[1])/(m[1]-u[1]),_=[y[0]-m[0],y[1]-m[1]];if(this.get("enableRotatedTransform")&&0!==r){var S=new ol.geom.Point(u);S.rotate(-1*r,this.getMap().getView().getCenter()),u=S.getCoordinates()}for(this.get("noFlip")&&(b<0&&(b=-b),w<0&&(w=-w)),this.constraint_?"h"==this.constraint_?b=1:w=1:this.get("keepAspectRatio")(t)&&(b=w=Math.min(b,w)),e=0;o=this.selection_.item(e);e++)(n=0!==r&&this.get("enableRotatedTransform")?this.rotatedGeoms_[e].clone():this.geoms_[e].clone()).applyTransform(function(t,e,o){if(o<2)return e;if(p){var r=[[6],[0,8],[2],[4]],s=[t[0],t[1]],a=[t[2],t[3]],l=[t[4],t[5]],c=[t[6],t[7]],h=[t[8],t[9]];if(g){var d=f%2==0?countVector(s,a):countVector(c,s),m=projectVectorOnVector(_,d),v=[...r[f],...r[f+1<r.length?f+1:0]];for(i=0;i<t.length;i+=o)e[i]=v.includes(i)?t[i]+m[0]:t[i],e[i+1]=v.includes(i)?t[i+1]+m[1]:t[i+1]}else{var x,S;switch(f){case 0:x=projectVectorOnVector(_=countVector(c,y),countVector(l,c)),S=projectVectorOnVector(_,countVector(s,c)),[e[0],e[1]]=movePoint(s,x),[e[4],e[5]]=movePoint(l,S),[e[6],e[7]]=movePoint(c,_),[e[8],e[9]]=movePoint(h,x);break;case 1:x=projectVectorOnVector(_=countVector(s,y),countVector(c,s)),S=projectVectorOnVector(_,countVector(a,s)),[e[0],e[1]]=movePoint(s,_),[e[2],e[3]]=movePoint(a,x),[e[6],e[7]]=movePoint(c,S),[e[8],e[9]]=movePoint(h,_);break;case 2:x=projectVectorOnVector(_=countVector(a,y),countVector(s,a)),S=projectVectorOnVector(_,countVector(l,a)),[e[0],e[1]]=movePoint(s,S),[e[2],e[3]]=movePoint(a,_),[e[4],e[5]]=movePoint(l,x),[e[8],e[9]]=movePoint(h,S);break;case 3:x=projectVectorOnVector(_=countVector(l,y),countVector(a,l)),S=projectVectorOnVector(_,countVector(c,l)),[e[2],e[3]]=movePoint(a,S),[e[4],e[5]]=movePoint(l,_),[e[6],e[7]]=movePoint(c,x)}}}else for(i=0;i<t.length;i+=o)1!=b&&(e[i]=u[0]+(t[i]-u[0])*b),1!=w&&(e[i+1]=u[1]+(t[i+1]-u[1])*w);return"Circle"==n.getType()&&n.setCenterAndRadius(n.getCenter(),n.getRadius()),e}),this.get("enableRotatedTransform")&&0!==r&&n.rotate(r,this.getMap().getView().getCenter()),o.setGeometry(n);this.drawSketch_(),this.dispatchEvent({type:"scaling",feature:this.selection_.item(0),features:this.selection_,scale:[b,w],pixel:t.pixel,coordinate:t.coordinate})}this.isUpdating_=!1}},ol.interaction.Transform.prototype.handleMoveEvent_=function(t){if(this._handleEvent(t,this.features_)&&!this.mode_){var e=this.getFeatureAtPixel_(t.pixel),i=t.map.getTargetElement();if(e.feature){var o=e.handle?this.Cursors[(e.handle||"default")+(e.constraint||"")+(e.option||"")]:this.Cursors.select;void 0===this.previousCursor_&&(this.previousCursor_=i.style.cursor),i.style.cursor=o}else void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_),this.previousCursor_=void 0}},ol.interaction.Transform.prototype.handleUpEvent_=function(t){return"rotate"===this.mode_&&(t.map.getTargetElement().style.cursor=this.Cursors.default,this.previousCursor_=void 0),this.dispatchEvent({type:this.mode_+"end",feature:this.selection_.item(0),features:this.selection_,oldgeom:this.geoms_[0],oldgeoms:this.geoms_}),this.drawSketch_(),this.mode_=null,!1},ol.interaction.Transform.prototype.getFeatures=function(){return this.selection_},ol.interaction.UndoRedo=function(t){t||(t={}),ol.interaction.Interaction.call(this,{handleEvent:function(){return!0}}),this._layers=t.layers,this._undoStack=new ol.Collection,this._redoStack=new ol.Collection,this._undo=[],this._redo=[],this._undoStack.on("add",(function(t){void 0===t.element.level?(t.element.level=this._level,t.element.level||(t.element.view={center:this.getMap().getView().getCenter(),zoom:this.getMap().getView().getZoom()},this._undo.push(t.element))):t.element.level||this._undo.push(this._redo.shift()),t.element.level||this.dispatchEvent({type:"stack:add",action:t.element}),this._reduce()}).bind(this)),this._undoStack.on("remove",(function(t){t.element.level||(this._doShift?this._undo.shift():this._undo.length&&this._redo.push(this._undo.pop()),this._doClear||this.dispatchEvent({type:"stack:remove",action:t.element,shift:this._doShift}))}).bind(this)),this._block=0,this._level=0,this._doShift=!1,this._record=!0,this._defs={}},ol.ext.inherits(ol.interaction.UndoRedo,ol.interaction.Interaction),ol.interaction.UndoRedo.prototype.define=function(t,e,i){this._defs[t]={undo:e,redo:i}},ol.interaction.UndoRedo.prototype.length=function(t){return"redo"===t?this._redo.length:this._undo.length},ol.interaction.UndoRedo.prototype.setMaxLength=function(t){(t=parseInt(t))&&t<0&&(t=0),this.set("maxLength",t),this._reduce()},ol.interaction.UndoRedo.prototype.size=function(t){return"redo"===t?this._redoStack.getLength():this._undoStack.getLength()},ol.interaction.UndoRedo.prototype.setMaxSize=function(t){(t=parseInt(t))&&t<0&&(t=0),this.set("maxSize",t),this._reduce()},ol.interaction.UndoRedo.prototype._reduce=function(){if(this.get("maxLength"))for(;this.length()>this.get("maxLength");)this.shift();if(this.get("maxSize"))for(;this.length()>1&&this.size()>this.get("maxSize");)this.shift()},ol.interaction.UndoRedo.prototype.getStack=function(t){return"redo"===t?this._redo:this._undo},ol.interaction.UndoRedo.prototype.push=function(t,e,i){return this._defs[t]?(this._undoStack.push({type:t,name:i,custom:!0,prop:e}),!0):(console.warn('[UndoRedoInteraction]: "'+t+'" is not defined.'),!1)},ol.interaction.UndoRedo.prototype.shift=function(){this._doShift=!0;var t=this._undoStack.removeAt(0);if(this._doShift=!1,"blockstart"===t.type)for(t=this._undoStack.item(0);this._undoStack.getLength()&&t.level>0;)this._undoStack.removeAt(0),t=this._undoStack.item(0)},ol.interaction.UndoRedo.prototype.setActive=function(t){ol.interaction.Interaction.prototype.setActive.call(this,t),this._record=t},ol.interaction.UndoRedo.prototype.setMap=function(t){this._mapListener&&this._mapListener.forEach(function(t){ol.Observable.unByKey(t)}),this._mapListener=[],ol.interaction.Interaction.prototype.setMap.call(this,t),t&&(this._mapListener.push(t.on("undoblockstart",this.blockStart.bind(this))),this._mapListener.push(t.on("undoblockend",this.blockEnd.bind(this)))),this._watchSources(),this._watchInteractions()},ol.interaction.UndoRedo.prototype._watchSources=function(){var t=this.getMap();this._sourceListener&&this._sourceListener.forEach(function(t){ol.Observable.unByKey(t)}),this._sourceListener=[];var e=this;t&&(function t(i,o){return o||(o=[]),i.forEach(function(i){i instanceof ol.layer.Vector?(!e._layers||e._layers.indexOf(i)>=0)&&o.push(i):i.getLayers&&t(i.getLayers(),o)}),o}(t.getLayers()).forEach((function(t){var e=t.getSource();this._sourceListener.push(e.on(["addfeature","removefeature"],this._onAddRemove.bind(this))),this._sourceListener.push(e.on("clearstart",(function(){this.blockStart("clear")}).bind(this))),this._sourceListener.push(e.on("clearend",this.blockEnd.bind(this)))}).bind(this)),this._sourceListener.push(t.getLayers().on(["add","remove"],this._watchSources.bind(this))))},ol.interaction.UndoRedo.prototype._watchInteractions=function(){var t=this.getMap();this._interactionListener&&this._interactionListener.forEach(function(t){ol.Observable.unByKey(t)}),this._interactionListener=[],t&&(t.getInteractions().forEach((function(t){this._interactionListener.push(t.on(["setattributestart","modifystart","rotatestart","translatestart","scalestart","deletestart","deleteend","beforesplit","aftersplit"],this._onInteraction.bind(this)))}).bind(this)),this._interactionListener.push(t.getInteractions().on(["add","remove"],this._watchInteractions.bind(this))))},ol.interaction.UndoRedo.prototype._onAddRemove=function(t){this._record&&(this._redoStack.clear(),this._redo.length=0,this._undoStack.push({type:t.type,source:t.target,feature:t.feature}))},ol.interaction.UndoRedo.prototype._onInteraction=function(t){var e=this._onInteraction[t.type];e&&e.call(this,t)},ol.interaction.UndoRedo.prototype._onInteraction.setattributestart=function(t){this.blockStart(t.target.get("name")||"setattribute");var e=Object.assign({},t.properties);t.features.forEach((function(t){var i={};for(var o in e)i[o]=t.get(o);this._undoStack.push({type:"changeattribute",feature:t,newProperties:e,oldProperties:i})}).bind(this)),this.blockEnd()},ol.interaction.UndoRedo.prototype._onInteraction.rotatestart=ol.interaction.UndoRedo.prototype._onInteraction.translatestart=ol.interaction.UndoRedo.prototype._onInteraction.scalestart=ol.interaction.UndoRedo.prototype._onInteraction.modifystart=function(t){this.blockStart(t.type.replace(/start$/,"")),t.features.forEach((function(t){this._undoStack.push({type:"changegeometry",feature:t,oldGeom:t.getGeometry().clone()})}).bind(this)),this.blockEnd()},ol.interaction.UndoRedo.prototype.blockStart=function(t){this._redoStack.clear(),this._redo.length=0,this._undoStack.push({type:"blockstart",name:t}),this._level++},ol.interaction.UndoRedo.prototype._onInteraction.beforesplit=function(){var t=this._undoStack.getLength();t>2&&"blockend"===this._undoStack.item(t-1).type&&"changegeometry"===this._undoStack.item(t-2).type?this._undoStack.pop():this.blockStart("split")},ol.interaction.UndoRedo.prototype._onInteraction.deletestart=function(){this.blockStart("delete")},ol.interaction.UndoRedo.prototype.blockEnd=function(){this._undoStack.push({type:"blockend"}),this._level--},ol.interaction.UndoRedo.prototype._onInteraction.aftersplit=ol.interaction.UndoRedo.prototype._onInteraction.deleteend=ol.interaction.UndoRedo.prototype.blockEnd,ol.interaction.UndoRedo.prototype._handleDo=function(t,e){if(this.getActive()){if(this._record=!1,t.custom)this._defs[t.type]?e?this._defs[t.type].undo(t.prop):this._defs[t.type].redo(t.prop):console.warn('[UndoRedoInteraction]: "'+t.type+'" is not defined.');else switch(t.type){case"addfeature":e?t.source.removeFeature(t.feature):t.source.addFeature(t.feature);break;case"removefeature":e?t.source.addFeature(t.feature):t.source.removeFeature(t.feature);break;case"changegeometry":var i=t.feature.getGeometry();t.feature.setGeometry(t.oldGeom),t.oldGeom=i;break;case"changeattribute":var o=t.newProperties,n=t.oldProperties;for(var r in n)void 0===n?t.feature.unset(r):t.feature.set(r,n[r]);t.oldProperties=o,t.newProperties=n;break;case"blockstart":this._block+=e?-1:1;break;case"blockend":this._block+=e?1:-1;break;default:console.warn('[UndoRedoInteraction]: "'+t.type+'" is not defined.')}this._block<0&&(this._block=0),this._block&&(e?this.undo():this.redo()),this._record=!0,this.dispatchEvent({type:e?"undo":"redo",action:t})}},ol.interaction.UndoRedo.prototype.undo=function(){var t=this._undoStack.item(this._undoStack.getLength()-1);t&&(this._redoStack.push(t),this._undoStack.pop(),this._handleDo(t,!0))},ol.interaction.UndoRedo.prototype.redo=function(){var t=this._redoStack.item(this._redoStack.getLength()-1);t&&(this._undoStack.push(t),this._redoStack.pop(),this._handleDo(t,!1))},ol.interaction.UndoRedo.prototype.clear=function(){this._doClear=!0,this._undo.length=this._redo.length=0,this._undoStack.clear(),this._redoStack.clear(),this._doClear=!1,this.dispatchEvent({type:"stack:clear"})},ol.interaction.UndoRedo.prototype.hasUndo=function(){return this._undoStack.getLength()},ol.interaction.UndoRedo.prototype.hasRedo=function(){return this._redoStack.getLength()},ol.source.BinBase=function(t){t=t||{},this._bindModify=this._onModifyFeature.bind(this),this._watch=!0,ol.source.Vector.call(this,t),this._origin=t.source,this._listen=!1!==t.listenChange,this._geomFn=t.geometryFunction||ol.coordinate.getFeatureCenter||function(t){return t.getGeometry().getFirstCoordinate()},this.reset(),this._origin.on("addfeature",this._onAddFeature.bind(this)),this._origin.on("removefeature",this._onRemoveFeature.bind(this)),this._origin.on("clearstart",this._onClearFeature.bind(this)),this._origin.on("clearend",this._onClearFeature.bind(this)),"function"==typeof t.flatAttributes&&(this._flatAttributes=t.flatAttributes)},ol.ext.inherits(ol.source.BinBase,ol.source.Vector),ol.source.BinBase.prototype._onAddFeature=function(t,e,i){var o=t.feature||t.target;(e=e||this.getBinAt(this._geomFn(o),!0))&&e.get("features").push(o),this._listen&&!1!==i&&o.on("change",this._bindModify)},ol.source.BinBase.prototype._onRemoveFeature=function(t,e,i){if(this._watch){var o=t.feature||t.target;if(e=e||this.getBinAt(this._geomFn(o))){for(var n,r=e.get("features"),s=0;n=r[s];s++)if(n===o){r.splice(s,1);break}r.length||this.removeFeature(e)}this._listen&&!1!==i&&o.un("change",this._bindModify)}},ol.source.BinBase.prototype._onClearFeature=function(t){"clearstart"===t.type?(this._listen&&this._origin.getFeatures().forEach((function(t){t.un("change",this._bindModify)}).bind(this)),this.clear(),this._watch=!1):this._watch=!0},ol.source.BinBase.prototype.getBin=function(t){for(var e,i=this.getFeatures(),o=0;e=i[o];o++)for(var n,r=e.get("features"),s=0;n=r[s];s++)if(n===t)return e;return null},ol.source.BinBase.prototype.getGridGeomAt=function(t){return new ol.geom.Polygon([t])},ol.source.BinBase.prototype.getBinAt=function(t,e){var i={},o=this.getGridGeomAt(t,i);if(!o)return null;var n=o.getInteriorPoint?o.getInteriorPoint().getCoordinates():o.getInteriorPoints().getCoordinates()[0],r=this.getFeaturesAtCoordinate(n)[0];return!r&&e&&(i.geometry=o,i.features=[],i.center=n,r=new ol.Feature(i),this.addFeature(r)),r||null},ol.source.BinBase.prototype._onModifyFeature=function(t){var e=this.getBin(t.target),i=this.getBinAt(this._geomFn(t.target),"create");e!==i&&(e&&this._onRemoveFeature(t,e,!1),i&&this._onAddFeature(t,i,!1)),this.changed()},ol.source.BinBase.prototype.reset=function(){this.clear();for(var t,e=this._origin.getFeatures(),i=0;t=e[i];i++)this._onAddFeature({feature:t});this.changed()},ol.source.BinBase.prototype.getGridFeatures=function(){var t=[];return this.getFeatures().forEach((function(e){var i=new ol.Feature(e.getGeometry().clone());for(var o in e.getProperties())"features"!==o&&"geometry"!==o&&i.set(o,e.get(o));i.set("nb",e.get("features").length),this._flatAttributes(i,e.get("features")),t.push(i)}).bind(this)),t},ol.source.BinBase.prototype._flatAttributes=function(){},ol.source.BinBase.prototype.setFlatAttributesFn=function(t){"function"==typeof t&&(this._flatAttributes=t)},ol.source.BinBase.prototype.getSource=function(){return this._origin},ol.source.DBPedia=function(t){var e=t||{};e.loader=this._loaderFn,this._url=e.url||"http://fr.dbpedia.org/sparql",this._maxResolution=e.maxResolution||100,this._lang=e.lang||"fr",this._limit=e.limit||1e3,e.attributions||(e.attributions=["&copy; <a href='http://dbpedia.org/'>DBpedia</a> CC-by-SA"]),e.strategy||(e.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,e)},ol.ext.inherits(ol.source.DBPedia,ol.source.Vector),ol.source.DBPedia.prototype.readFeature=function(t,e,i){for(var o in e)"uri"===e[o].type&&(e[o].value=encodeURI(e[o].value)),t.set(o,e[o].value);return!i||i.get("subject")!=e.subject.value||(i.set("type",i.get("type")+"\n"+e.type.value),!1)},ol.source.DBPedia.prototype.querySubject=function(){return"?subject rdfs:label ?label. OPTIONAL {?subject dbpedia-owl:thumbnail ?thumbnail}.OPTIONAL {?subject dbpedia-owl:abstract ?abstract} . OPTIONAL {?subject rdf:type ?type}"},ol.source.DBPedia.prototype.queryFilter=function(){return"lang(?label) = '"+this._lang+"' && lang(?abstract) = '"+this._lang+"'"},ol.source.DBPedia.prototype._loaderFn=function(t,e,i){if(!(e>this._maxResolution)){var o=this,n=ol.proj.transformExtent(t,i,"EPSG:4326"),r="PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> SELECT DISTINCT * WHERE { ?subject geo:lat ?lat . ?subject geo:long ?long . "+this.querySubject()+" . FILTER("+this.queryFilter()+") . FILTER(xsd:float(?lat) <= "+n[3]+" && "+n[1]+" <= xsd:float(?lat) && xsd:float(?long) <= "+n[2]+" && "+n[0]+" <= xsd:float(?long) ) . } LIMIT "+this._limit;ol.ext.Ajax.get({url:this._url,data:{query:r,format:"json"},success:function(t){var e,n,r,s=t.results.bindings,a=[],l=null;for(var c in s)e=s[c],n=[Number(s[c].long.value),Number(s[c].lat.value)],r=new ol.Feature(new ol.geom.Point(ol.proj.transform(n,"EPSG:4326",i))),o.readFeature(r,e,l)&&(a.push(r),l=r);o.addFeatures(a)}})}},ol,ol,function(){var t={};ol.style.clearDBPediaStyleCache=function(){t={}},ol.style.dbPediaStyleFunction=function(e){var i;switch(e||(e={}),typeof e.glyph){case"function":i=e.glyph;break;case"string":i=function(){return e.glyph};break;default:i=function(t){var e=t.get("type");if(e){if(e.match("/Museum"))return"fa-camera";if(e.match("/Monument"))return"fa-building";if(e.match("/Sculpture"))return"fa-android";if(e.match("/Religious"))return"fa-institution";if(e.match("/Castle"))return"fa-key";if(e.match("Water"))return"fa-tint";if(e.match("Island"))return"fa-leaf";if(e.match("/Event"))return"fa-heart";if(e.match("/Artwork"))return"fa-asterisk";if(e.match("/Stadium"))return"fa-futbol-o";if(e.match("/Place"))return"fa-street-view"}return"fa-star"}}var o=e.radius||8,n=e.fill||new ol.style.Fill({color:"navy"}),r=e.stroke||new ol.style.Stroke({color:"#fff",width:2}),s=e.prefix?e.prefix+"_":"";return function(e){var a=i(e),l=s+a,c=t[l];return c||(t[l]=c=new ol.style.Style({image:new ol.style.FontSymbol({glyph:a,radius:o,fill:n,stroke:r})})),[c]}}}(),ol.source.DFCI=function(t){(t=t||{}).loader=this._calcGrid,t.strategy=function(t,e){return this.resolution&&this.resolution!=e&&(this.clear(),this.refresh()),[t]},this._bbox=[[0,16e5],[11e5,26e5]],ol.source.Vector.call(this,t),this.set("resolutions",t.resolutions||[1e3,100,20]),proj4.defs["EPSG:27572"]||proj4.defs("EPSG:27572","+proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),ol.proj.proj4.register(proj4)},ol.ext.inherits(ol.source.DFCI,ol.source.Vector),ol.source.DFCI.prototype._calcGrid=function(t,e,i){var o,n,r=this.get("resolutions");e>(r[0]||1e3)?this.resolution!=e&&(this._features0||(this._features0=this._getFeatures(0,n=[this._bbox[0][0],this._bbox[0][1],this._bbox[1][0],this._bbox[1][1]],i)),this.addFeatures(this._features0)):e>(r[1]||100)?(this.clear(),n=ol.proj.transformExtent(t,i,"EPSG:27572"),o=this._getFeatures(1,n,i),this.addFeatures(o)):e>(r[2]||0)?(this.clear(),n=ol.proj.transformExtent(t,i,"EPSG:27572"),o=this._getFeatures(2,n,i),this.addFeatures(o)):(this.clear(),n=ol.proj.transformExtent(t,i,"EPSG:27572"),o=this._getFeatures(3,n,i),this.addFeatures(o)),this.resolution=e},ol.source.DFCI.prototype._midPt=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},ol.source.DFCI.prototype._trFeature=function(t,e,i,o){var n=new ol.geom.Polygon([t]),r=new ol.Feature(n.transform("EPSG:27572",o));return r.set("id",e),r.set("level",i),r},ol.source.DFCI.prototype._getFeatures=function(t,e,i){var o,n=[],r=1e5;t>0&&(r/=5),t>1&&(r/=10);for(var s=[Math.max(this._bbox[0][0],Math.floor(e[0]/r)*r),Math.max(this._bbox[0][1],Math.floor(e[1]/r)*r)],a=[Math.min(this._bbox[1][0]+99999,Math.floor(e[2]/r)*r),Math.min(this._bbox[1][1]+99999,Math.floor(e[3]/r)*r)],l=s[0];l<=a[0];l+=r)for(var c=s[1];c<=a[1];c+=r){var h,u=[[l,c],[l+r,c],[l+r,c+r],[l,c+r],[l,c]];if(t>2){var d=this._midPt(u[0],u[2]),p=[];for(o=0;o<u.length;o++)p.push(this._midPt(u[o],d));for(n.push(this._trFeature(p,ol.coordinate.toDFCI([l,c],2)+".5",t,i)),o=0;o<4;o++)(p=[]).push(u[o]),p.push(this._midPt(u[o],u[(o+1)%4])),p.push(this._midPt(d,p[1])),p.push(this._midPt(d,u[o])),h=this._midPt(u[o],u[(o+3)%4]),p.push(this._midPt(d,h)),p.push(h),p.push(u[o]),n.push(this._trFeature(p,ol.coordinate.toDFCI([l,c],2)+"."+(4-o),t,i))}else n.push(this._trFeature(u,ol.coordinate.toDFCI([l,c],t),t,i))}return n},ol.source.DayNight=function(t){(t=t||{}).loader=this._loader,t.strategy=ol.loadingstrategy.all,ol.source.Vector.call(this,t),this.set("time",t.time||new Date),this.set("step",t.step||1)},ol.ext.inherits(ol.source.DayNight,ol.source.Vector),function(){function t(t){var e=Math.PI/180,i=t-2451545,o=280.46+.9856474*i,n=357.528+.9856003*i;return n%=360,{lambda:(o%=360)+1.915*Math.sin(n*e)+.02*Math.sin(2*n*e),R:1.00014-.01671*Math.cos(n*e)-.0014*Math.cos(2*n*e)}}function e(t){var e=(t-2451545)/36525;return 23.43929111-e*(46.836769/3600-e*(1831e-7/3600+e*(5.565e-7-e*(1.6e-10-4.34e-8*e/3600))))}function i(t,e){var i=180/Math.PI,o=Math.PI/180,n=Math.atan(Math.cos(e*o)*Math.tan(t*o))*i,r=Math.asin(Math.sin(e*o)*Math.sin(t*o))*i;return{alpha:n+=90*Math.floor(t/90)-90*Math.floor(n/90),delta:r}}ol.source.DayNight.prototype._loader=function(t,e,i){var o=this.getCoordinates(this.get("time")),n=new ol.geom.Polygon([o]);n.transform("EPSG:4326",i),this.addFeature(new ol.Feature(n))},ol.source.DayNight.prototype.setTime=function(t){this.set("time",t),this.refresh()},ol.source.DayNight.prototype.getSunPosition=function(o){var n=(o?new Date(o):new Date)/864e5+2440587.5,r=(18.697374558+24.06570982441908*(n-2451545))%24,s=t(n),a=e(n),l=i(s.lambda,a);return[l.alpha-15*r,l.delta]},ol.source.DayNight.prototype.getCoordinates=function(o,n){for(var r=180/Math.PI,s=Math.PI/180,a=(o?new Date(o):new Date)/864e5+2440587.5,l=(18.697374558+24.06570982441908*(a-2451545))%24,c=[],h=t(a),u=e(a),d=i(h.lambda,u),p=this.get("step")||1,g=-180;g<=180;g+=p){var f=g,m=Math.atan(-Math.cos((15*l+f-d.alpha)*s)/Math.tan(d.delta*s))*r;c.push([f,m])}switch(n){case"line":break;case"day":d.delta*=-1;default:m=d.delta<0?90:-90;for(var y=180;y>=-180;y-=p)c.push([y,m]);c.push(c[0])}if("daynight"===n){var v=[];c.forEach(function(t){v.push(t.slice())}),v[0][1]=-v[0][1],v[v.length-1][1]=-v[0][1],v[v.length-1][1]=-v[0][1],c=[c,v]}return c}}(),ol.source.Delaunay=function(t){this._nodes=(t=t||{}).source,delete t.source,ol.source.Vector.call(this,t),this.hull=[],this._nodes.on("addfeature",this._onAddNode.bind(this)),this._nodes.on("removefeature",this._onRemoveNode.bind(this)),this.set("epsilon",t.epsilon||1e-4)},ol.ext.inherits(ol.source.Delaunay,ol.source.Vector),ol.source.Delaunay.prototype.clear=function(t){ol.source.Vector.prototype.clear.call(this,t),this.getNodeSource().clear(t)},ol.source.Delaunay.prototype._addTriangle=function(t){t.push(t[0]);var e=new ol.Feature(new ol.geom.Polygon([t]));return this.addFeature(e),this.flip.push(e),e},ol.source.Delaunay.prototype.getNodes=function(){return this._nodes.getFeatures()},ol.source.Delaunay.prototype.getNodeSource=function(){return this._nodes},ol.source.Delaunay.prototype._onRemoveNode=function(t){var e=t.feature.getGeometry().getCoordinates();if(e&&!this.getNodesAt(e).length){var i,o=this.getTrianglesAt(e);this.flip=[];for(var n=[];o.length;){var r=o.pop();this.removeFeature(r),r=r.getGeometry().getCoordinates()[0];var s=[];for(i=0;i<3;i++)l=r[i],ol.coordinate.equal(l,e)||s.push(l);n.push(s)}for(s=n.pop(),i=0;;){var a=n[i];if(m(a[0],a[1],0)||m(a[1],a[0],0)||m(a[0],a[1],s.length-1)||m(a[1],a[0],s.length-1)?(n.splice(i,1),i=0):i++,!n.length)break;if(i>=n.length)throw"[DELAUNAY:removePoint] No edge found"}var l,c=ol.coordinate.equal(s[0],s[s.length-1]);for(c&&s.pop();l=this.hull[i];i++)if(ol.coordinate.equal(e,l)){this.hull.splice(i,1);break}this.hull=ol.coordinate.convexHull(this.hull.concat(s));var h,u=function(t){for(var e,i=0,o=0;o<t.length;o++)i+=(t[e=(o+1)%t.length][0]-t[o][0])*(t[e][1]+t[o][1]);return i>=0?1:-1},d=s.slice();for(c?h=u(s):(d.push(e),h=u(d)),i=0;i<=s.length+1&&!(s.length<3);i++){var p=[s[i%s.length],s[(i+1)%s.length],s[(i+2)%s.length]];if(u(p)===h){for(var g=!0,f=i+3;f<i+s.length;f++)if(this.inCircle(s[f%s.length],p)){g=!1;break}g&&(this._addTriangle(p),s.splice((i+1)%s.length,1),i=-1)}}this.flipTriangles()}function m(t,e,i){return!!ol.coordinate.equal(t,s[i])&&(i?s.push(e):s.unshift(e),!0)}},ol.source.Delaunay.prototype._onAddNode=function(t){var e,i,o=t.feature;if("Point"===o.getGeometry().getType()){this.flip=[];var n=this.getNodes(),r=o.getGeometry().getCoordinates();if(this.getNodesAt(r).length>1)this._nodes.removeFeature(o);else if(n.length<=3){if(3===n.length){var s=[];for(e=0;e<3;e++)s.push(n[e].getGeometry().getCoordinates());this._addTriangle(s),this.hull=ol.coordinate.convexHull(s)}}else{var a=this.getFeaturesAtCoordinate(r)[0];if(a){this.removeFeature(a),a.set("del",!0);var l=a.getGeometry().getCoordinates()[0];for(e=0;e<3;e++)this._addTriangle([r,l[e],l[(e+1)%3]])}else{var c=this.hull.slice();for(c.push(r),c=ol.coordinate.convexHull(c),e=0;(i=c[e])&&!ol.coordinate.equal(i,r);e++);var h=c[e=0!==e?e-1:c.length-1],u=c[(e+2)%c.length];for(e=0;(i=this.hull[e])&&!ol.coordinate.equal(i,h);e++);for(;;){if(e>1e3){console.error("[DELAUNAY:addPoint] Too many iterations");break}if(e++,this._addTriangle([r,i=this.hull[e%this.hull.length],h]),h=i,i[0]===u[0]&&i[1]===u[1])break}this.hull=c}this.flipTriangles()}}else this._nodes.removeFeature(o)},ol.source.Delaunay.prototype.flipTriangles=function(){for(var t,e=1e3;this.flip.length;){if(e--<0){console.error("[DELAUNAY:flipTriangles] Too many iterations");break}var i=this.flip.pop();if(!i.get("del"))for(var o=i.getGeometry().getCoordinates()[0],n=0;n<3;n++){var r=this.getTrianglesAt([(o[(n+1)%3][0]+o[n][0])/2,(o[(n+1)%3][1]+o[n][1])/2]),s=null;if(r.length>1){var a=r[0].getGeometry().getCoordinates()[0],l=r[1].getGeometry().getCoordinates()[0];for(t=0;t<l.length;t++)if(!this._ptInTriangle(l[t],a)){s=l[t];break}}if(s&&this.inCircle(s,a)){var c;for(t=0;t<a.length;t++)if(!this._ptInTriangle(a[t],l)){c=a.splice(t,1)[0];break}if(this.intersectSegs([s,c],a)){for(;r.length;){var h=r.pop();h.set("del",!0),this.removeFeature(h)}this._addTriangle([s,c,a[0]]),this._addTriangle([s,c,a[1]])}}}}},ol.source.Delaunay.prototype.intersectSegs=function(t,e){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],n=i*(e[1][1]-e[0][1])-o*(e[1][0]-e[0][0]);if(0!=n){var r=(i*t[0][1]-i*e[0][1]-o*t[0][0]+o*e[0][0])/n;return 0<r&&r<1}return!1},ol.source.Delaunay.prototype._ptInTriangle=function(t,e){for(var i,o=0;i=e[o];o++)if(ol.coordinate.equal(t,i))return!0;return!1},ol.source.Delaunay.prototype.listpt=function(t){for(var e,i="",o=0;e=t[o];o++){var n=this._nodes.getClosestFeatureToCoordinate(e);ol.coordinate.equal(n.getGeometry().getCoordinates(),e)||(n=null),i+=(i?", ":"")+(n?n.get("id"):"?")}return i},ol.source.Delaunay.prototype.inCircle=function(t,e){var i=this.getCircumCircle(e);return ol.coordinate.dist2d(t,i.center)<i.radius},ol.source.Delaunay.prototype.getCircumCircle=function(t){var e=t[0][0],i=t[0][1],o=t[1][0],n=t[1][1],r=t[2][0],s=t[2][1],a=(e-o)/(n-i),l=(e-r)/(s-i),c=(i+n)/2-a*(e+o)/2,h=((i+s)/2-l*(e+r)/2-c)/(a-l),u=[h,a*h+c];return{center:u,radius:ol.coordinate.dist2d(u,t[0])}},ol.source.Delaunay.prototype.getTrianglesAt=function(t){var e=ol.extent.buffer(ol.extent.boundingExtent([t]),this.get("epsilon")),i=[];return this.forEachFeatureIntersectingExtent(e,function(t){i.push(t)}),i},ol.source.Delaunay.prototype.getNodesAt=function(t){var e=ol.extent.buffer(ol.extent.boundingExtent([t]),this.get("epsilon"));return this._nodes.getFeaturesInExtent(e)},ol.source.Delaunay.prototype.calculateVoronoi=function(t){var e=[];return this.getNodes().forEach((function(i){var o=i.getGeometry().getCoordinates(),n=!1;if(!0!==t)for(var r=0;r<this.hull.length;r++)if(ol.coordinate.equal(o,this.hull[r])){n=!0;break}if(!n){var s=this.getTrianglesAt(o),a=[];s.forEach((function(t){var e=this.getCircumCircle(t.getGeometry().getCoordinates()[0]);a.push({pt:e.center,d:Math.atan2(e.center[1]-o[1],e.center[0]-o[0])})}).bind(this)),a.sort(function(t,e){return t.d-e.d});var l=[];a.forEach(function(t){l.push(t.pt)}),l.push(l[0]);var c=i.getProperties();c.geometry=new ol.geom.Polygon([l]),e.push(new ol.Feature(c))}}).bind(this)),e},ol.source.FeatureBin=function(t){var e;(t=t||{}).binSource?(this._sourceFeature=t.binSource,this._sourceFeature.on(["addfeature","changefeature","removefeature"],(function(){e&&clearTimeout(e),e=setTimeout((function(){this.reset()}).bind(this))}).bind(this))):this._sourceFeature=new ol.source.Vector({features:t.features||[]}),ol.source.BinBase.call(this,t)},ol.ext.inherits(ol.source.FeatureBin,ol.source.BinBase),ol.source.FeatureBin.prototype.setFeatures=function(t){this._sourceFeature.clear(),this._sourceFeature.addFeatures(t||[]),this.reset()},ol.source.FeatureBin.prototype.getGridGeomAt=function(t,e){var i=this._sourceFeature.getFeaturesAtCoordinate(t)[0];if(!i)return null;var o=i.getProperties();for(var n in o)"geometry"!==n&&(e[n]=o[n]);return i.getGeometry()},ol.source.GeoImage=function(t){var e={attributions:t.attributions,logo:t.logo,projection:t.projection};this._image=t.image?t.image:new Image,this._image.crossOrigin=t.crossOrigin;var i=this;this._image.onload=function(){i.setCrop(i.crop),i.changed()},t.image||(this._image.src=t.url),e.canvasFunction=this.calculateImage,ol.source.ImageCanvas.call(this,e),this.center=t.imageCenter,this.setScale(t.imageScale),this.rotate=t.imageRotate?t.imageRotate:0,this.crop=t.imageCrop,this.mask=t.imageMask,this.setCrop(this.crop),this.on("change",(function(){this.set("extent",this.calculateExtent())}).bind(this))},ol.ext.inherits(ol.source.GeoImage,ol.source.ImageCanvas),ol.source.GeoImage.prototype.calculateImage=function(t,e,i,o){if(this.center){var n=document.createElement("canvas");n.width=o[0],n.height=o[1];var r=n.getContext("2d");if(!this._imageSize)return n;if(this.mask){r.beginPath();var s=p(this.mask[0]);r.moveTo(s[0],s[1]);for(var a=1;a<this.mask.length;a++)s=p(this.mask[a]),r.lineTo(s[0],s[1]);r.clip()}var l=p(this.center),c=(this._image.naturalWidth/2-this.crop[0])*this.scale[0]/e*i,h=(this._image.naturalHeight/2-this.crop[1])*this.scale[1]/e*i,u=this._imageSize[0]*this.scale[0]/e*i,d=this._imageSize[1]*this.scale[1]/e*i;return r.translate(l[0],l[1]),this.rotate&&r.rotate(this.rotate),r.drawImage(this._image,this.crop[0],this.crop[1],this._imageSize[0],this._imageSize[1],-c,-h,u,d),n}function p(e){return[(e[0]-t[0])/(t[2]-t[0])*o[0],(e[1]-t[3])/(t[1]-t[3])*o[1]]}},ol.source.GeoImage.prototype.getCenter=function(){return this.center},ol.source.GeoImage.prototype.setCenter=function(t){this.center=t,this.changed()},ol.source.GeoImage.prototype.getScale=function(){return this.scale},ol.source.GeoImage.prototype.setScale=function(t){switch(typeof t){case"number":t=[t,t];break;case"object":if(2!=t.length)return;break;default:return}this.scale=t,this.changed()},ol.source.GeoImage.prototype.getRotation=function(){return this.rotate},ol.source.GeoImage.prototype.setRotation=function(t){this.rotate=t,this.changed()},ol.source.GeoImage.prototype.getGeoImage=function(){return this._image},ol.source.GeoImage.prototype.getCrop=function(){return this.crop},ol.source.GeoImage.prototype.setMask=function(t){this.mask=t,this.changed()},ol.source.GeoImage.prototype.getMask=function(){return this.mask},ol.source.GeoImage.prototype.setCrop=function(t){if(this._image.naturalWidth){if(t){switch(typeof t){case"number":t=[t,t,this._image.naturalWidth-t,this._image.naturalHeight-t];break;case"object":if(4!=t.length)return;break;default:return}t=ol.extent.boundingExtent([[t[0],t[1]],[t[2],t[3]]]),this.crop=[Math.max(0,t[0]),Math.max(0,t[1]),Math.min(this._image.naturalWidth,t[2]),Math.min(this._image.naturalHeight,t[3])]}else this.crop=[0,0,this._image.naturalWidth,this._image.naturalHeight];this.crop[2]<=this.crop[0]&&(this.crop[2]=this.crop[0]+1),this.crop[3]<=this.crop[1]&&(this.crop[3]=this.crop[1]+1),this._imageSize=[this.crop[2]-this.crop[0],this.crop[3]-this.crop[1]],this.changed()}else this.crop=t},ol.source.GeoImage.prototype.getExtent=function(t){var e=this.get("extent");if(e||(e=this.calculateExtent()),t)for(var i=0;i<t.length;i++)t[i]=e[i];return e},ol.source.GeoImage.prototype.calculateExtent=function(t){var e;if(!1!==t&&this.getMask())e=new ol.geom.Polygon([this.getMask()]);else{var i=this.getCenter(),o=this.getScale(),n=this.getGeoImage().width*o[0],r=this.getGeoImage().height*o[1],s=ol.extent.boundingExtent([[i[0]-n/2,i[1]-r/2],[i[0]+n/2,i[1]+r/2]]);(e=ol.geom.Polygon.fromExtent(s)).rotate(-this.getRotation(),i)}return e.getExtent()},ol.source.GeoRSS=function(t){(t=t||{}).loader=this._loaderFn,ol.source.Vector.call(this,t)},ol.ext.inherits(ol.source.GeoRSS,ol.source.Vector),ol.source.GeoRSS.prototype._loaderFn=function(t,e,i){ol.ext.Ajax.get({url:this.getUrl(),dataType:"XML",error:function(){console.log("oops")},success:(function(t){var e=(new ol.format.GeoRSS).readFeatures(t,{featureProjection:i});this.addFeatures(e)}).bind(this)})},ol.source.Geoportail=function(t,e){e=e||{},t.layer&&(t=(e=t).layer);for(var i=new Array,o=new Array,n=ol.extent.getWidth(ol.proj.get("EPSG:3857").getExtent())/256,r=0;r<=(e.maxZoom?e.maxZoom:20);r++)i[r]=r,o[r]=n/Math.pow(2,r);var s=new ol.tilegrid.WMTS({origin:[-20037508,20037508],resolutions:o,matrixIds:i});s.minZoom=e.minZoom?e.minZoom:0;var a=[ol.source.Geoportail.prototype.attribution];e.attributions&&(a=e.attributions),this._server=e.server||"https://wxs.ign.fr/geoportail/wmts",this._gppKey=e.gppKey||e.key||"choisirgeoportail";var l={url:this.serviceURL(),layer:t,matrixSet:"PM",format:e.format?e.format:"image/jpeg",projection:"EPSG:3857",tileGrid:s,style:e.style?e.style:"normal",attributions:a,crossOrigin:void 0===e.crossOrigin?"anonymous":e.crossOrigin,wrapX:!(!1===e.wrapX)};ol.source.WMTS.call(this,l),e.authentication&&this.setTileLoadFunction(ol.source.Geoportail.tileLoadFunctionWithAuthentication(e.authentication,this.getFormat()))},ol.ext.inherits(ol.source.Geoportail,ol.source.WMTS),ol.source.Geoportail.prototype.attribution='<a href="http://www.geoportail.gouv.fr/">G\xe9oportail</a> &copy; <a href="http://www.ign.fr/">IGN-France</a>',ol.source.Geoportail.prototype.serviceURL=function(){return this._server?this._server.replace(/^(https?:\/\/[^/]*)(.*)$/,"$1/"+this._gppKey+"$2"):(window.geoportailConfig?window.geoportailConfig.url:"https://wxs.ign.fr/")+this._gppKey+"/geoportail/wmts"},ol.source.Geoportail.prototype.getGPPKey=function(){return this._gppKey},ol.source.Geoportail.prototype.setGPPKey=function(t,e){this._gppKey=t;var i=this.serviceURL();this.setTileUrlFunction(function(){var t=ol.source.Geoportail.prototype.getTileUrlFunction().apply(this,arguments);if(t){var e=t.split("?");return i+"?"+e[1]}return t}),e&&this.setTileLoadFunction(ol.source.Geoportail.tileLoadFunctionWithAuthentication(e,this.getFormat()))},ol.source.Geoportail.prototype.getFeatureInfoUrl=function(t,e,i,o){o=o||{},i||(i=this.getProjection());var n=this.tileGrid.getTileCoordForCoordAndResolution(t,e),r=this.getTileUrlFunction()(n,1,i);if(!r)return r;var s=this.tileGrid.getResolution(n[0]),a=this.tileGrid.getTileCoordExtent(n),l=Math.floor((t[0]-a[0])/(s/1)),c=Math.floor((a[3]-t[1])/(s/1));return r.replace(/Request=GetTile/i,"Request=getFeatureInfo")+"&INFOFORMAT="+(o.INFO_FORMAT||"text/plain")+"&I="+l+"&J="+c},ol.source.Geoportail.prototype.getFeatureInfo=function(t,e,i){var o=this.getFeatureInfoUrl(t,e,null,i);ol.ext.Ajax.get({url:o,dataType:i.format||"text/plain",options:{encode:!1},success:function(t){i.callback&&i.callback(t)},error:i.error||function(){}})},ol.source.Geoportail.tileLoadFunctionWithAuthentication=function(t,e){if(t)return function(i,o){var n=new XMLHttpRequest;n.open("GET",o),n.setRequestHeader("Authorization","Basic "+t),n.responseType="arraybuffer",n.onload=function(){var t=new Uint8Array(this.response),o=new Blob([t],{type:e}),n=(window.URL||window.webkitURL).createObjectURL(o);i.getImage().src=n},n.onerror=function(){i.getImage().src=""},n.send()}},ol.source.GridBin=function(t){t=t||{},ol.source.BinBase.call(this,t),this.set("gridProjection",t.gridProjection||"EPSG:4326"),this.set("size",t.size||1)},ol.ext.inherits(ol.source.GridBin,ol.source.BinBase),ol.source.GridBin.prototype.setGridProjection=function(t){this.set("gridProjection",t),this.reset()},ol.source.GridBin.prototype.setSize=function(t){this.set("size",t),this.reset()},ol.source.GridBin.prototype.getGridGeomAt=function(t){t=ol.proj.transform(t,this.getProjection()||"EPSG:3857",this.get("gridProjection"));var e=this.get("size"),i=e*Math.floor(t[0]/e),o=e*Math.floor(t[1]/e);return new ol.geom.Polygon([[[i,o],[i+e,o],[i+e,o+e],[i,o+e],[i,o]]]).transform(this.get("gridProjection"),this.getProjection()||"EPSG:3857")},ol.source.HexBin=function(t){t=t||{},this._hexgrid=new ol.HexGrid(t),ol.source.BinBase.call(this,t)},ol.ext.inherits(ol.source.HexBin,ol.source.BinBase),ol.source.HexBin.prototype.getGridGeomAt=function(t){var e=this._hexgrid.coord2hex(t);return new ol.geom.Polygon([this._hexgrid.getHexagon(e)])},ol.source.HexBin.prototype.setSize=function(t,e){this._hexgrid.setSize(t),e||this.reset()},ol.source.HexBin.prototype.getSize=function(){return this._hexgrid.getSize()},ol.source.HexBin.prototype.setLayout=function(t,e){this._hexgrid.setLayout(t),e||this.reset()},ol.source.HexBin.prototype.getLayout=function(){return this._hexgrid.getLayout()},ol.source.HexBin.prototype.setOrigin=function(t,e){this._hexgrid.setOrigin(t),e||this.reset()},ol.source.HexBin.prototype.getOrigin=function(){return this._hexgrid.getOrigin()},ol.source.HexBin.prototype.getHexFeatures=function(){return ol.source.BinBase.prototype.getGridFeatures.call(this)},ol.source.IDW=function(t){(t=t||{}).canvasFunction=this.calculateImage,this._source=t.source,this._canvas=document.createElement("CANVAS"),this._source.on(["addfeature","removefeature","clear","removefeature"],(function(){this.changed()}).bind(this)),ol.source.ImageCanvas.call(this,t),this.set("scale",t.scale||4),this._weight="function"==typeof t.weight?t.weight:function(e){return e.get(t.weight||"weight")}},ol.ext.inherits(ol.source.IDW,ol.source.ImageCanvas),ol.source.IDW.prototype.getSource=function(){return this._source},ol.source.IDW.prototype.hue2rgb=function(t){return(t=(t+6)%6)<1?Math.round(255*t):t<3?255:t<4?Math.round(255*(4-t)):0},ol.source.IDW.prototype.getColor=function(t){var e=4-.04*t;return[this.hue2rgb(e+2),this.hue2rgb(e),this.hue2rgb(e-2),255]},ol.source.IDW.prototype.setData=function(t,e,i){var o=this.getColor(t);e[i]=o[0],e[i+1]=o[1],e[i+2]=o[2],e[i+3]=o[3]},ol.source.IDW.prototype.getValue=function(t){if(!this._canvas)return null;var e=this.transform(t);return this._canvas.getContext("2d").getImageData(Math.round(e[0]),Math.round(e[1]),1,1).data},ol.source.IDW.prototype.calculateImage=function(t,e,i,o){if(!this._source)return this._canvas;var n,r,s=document.createElement("CANVAS"),a=s.width=Math.round(o[0]/(this.get("scale")*i)),l=s.height=Math.round(o[1]/(this.get("scale")*i)),c=s.getContext("2d"),h=c.getImageData(0,0,a,l),u=[],d=a/(t[2]-t[0]),p=l/(t[1]-t[3]),g=this.transform=function(e,i){return[(e[0]-t[0])*d,(e[1]-t[3])*p,i]};for(this._source.getFeatures().forEach((function(t){u.push(g(t.getGeometry().getFirstCoordinate(),this._weight(t)))}).bind(this)),r=0;r<l;r++)for(n=0;n<a;n++){for(var f=0,m=0,y=0;y<u.length;++y){var v=n-u[y][0],x=r-u[y][1],b=v*v+x*x;if(0===b){m=1,f=u[y][2];break}var w=1/(b*b);f+=w*u[y][2],m+=w}this.setData(f/m,h.data,4*(r*a+n))}return c.putImageData(h,0,0),this._canvas.width=Math.round(o[0]),this._canvas.height=Math.round(o[1]),this._canvas.getContext("2d").drawImage(s,0,0,o[0],o[1]),this._canvas},ol.source.InseeBin=function(t){t=t||{},this._grid=new ol.InseeGrid({size:t.size}),ol.source.BinBase.call(this,t)},ol.ext.inherits(ol.source.InseeBin,ol.source.BinBase),ol.source.InseeBin.prototype.setSize=function(t){this.getSize()!==t&&(this._grid.set("size",t),this.reset())},ol.source.InseeBin.prototype.getSize=function(){return this._grid.get("size")},ol.source.InseeBin.prototype.getGridGeomAt=function(t){return this._grid.getGridAtCoordinate(t,this.getProjection())},ol.source.InseeBin.prototype.getGridExtent=function(t){return this._grid.getExtent(t)},ol.source.Mapillary=function(t){var e=t||{};e.loader=this._loaderFn,this._maxResolution=e.maxResolution||100,this._limit=e.limit||100,e.attributions||(e.attributions=["&copy; <a href='https://www.mapillary.com/'>Mapillary</a>"]),e.strategy||(e.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,e)},ol.ext.inherits(ol.source.Mapillary,ol.source.Vector),ol.source.Mapillary.prototype.readFeature=function(){return!0},ol.source.Mapillary.prototype._loaderFn=function(t,e,i){if(!(e>this._maxResolution)){var o=ol.proj.transformExtent(t,i,"EPSG:4326"),n=Date.now()-15552e6,r="https://a.mapillary.com/v2/search/im?client_id="+this.get("clientId")+"&max_lat="+o[3]+"&max_lon="+o[2]+"&min_lat="+o[1]+"&min_lon="+o[0]+"&limit="+(this._limit-1)+"&start_time="+n;ol.ext.Ajax.get({url:r,dataType:"jsonp",success:function(t){console.log(t)}})}},ol.source.OilPainting=function(t){t.operation=this._operation,t.operationType="image",ol.source.Raster.call(this,t),this.set("radius",t.radius||4),this.set("intensity",t.intensity||25),this.on("beforeoperations",(function(t){var e=Math.round((t.extent[2]-t.extent[0])/t.resolution),i=Math.round((t.extent[3]-t.extent[1])/t.resolution);t.data.image=new ImageData(e,i),t.data.radius=Number(this.get("radius"))||1,t.data.intensity=Number(this.get("intensity"))}).bind(this))},ol.ext.inherits(ol.source.OilPainting,ol.source.Raster),ol.source.OilPainting.prototype.set=function(t,e){if(e)switch(t){case"intensity":case"radius":(e=Number(e))<1&&(e=1),this.changed()}return ol.source.Raster.prototype.set.call(this,t,e)},ol.source.OilPainting.prototype._operation=function(t,e){for(var i=t[0].width,o=t[0].height,n=t[0].data,r=[],s=e.image,a=s.data,l=[],c=[],h=0;h<o;h++){l[h]=[],c[h]=[];for(var u=0;u<i;u++){var d=4*(h*i+u),p=n[d],g=n[d+1],f=n[d+2];l[h][u]=Math.round((p+g+f)/3*e.intensity/255),c[h][u]={r:p,g:g,b:f}}}var m=e.radius;for(h=0;h<o;h++)for(u=0;u<i;u++){r=[];for(var y=-m;y<=m;y++)for(var v=-m;v<=m;v++)if(h+y>0&&h+y<o&&u+v>0&&u+v<i){var x=l[h+y][u+v];r[x]?(r[x].val++,r[x].r+=c[h+y][u+v].r,r[x].g+=c[h+y][u+v].g,r[x].b+=c[h+y][u+v].b):r[x]={val:1,r:c[h+y][u+v].r,g:c[h+y][u+v].g,b:c[h+y][u+v].b}}r.sort(function(t,e){return e.val-t.val});var b=r[0].val,w=4*(h*i+u);a[w]=~~(r[0].r/b),a[w+1]=~~(r[0].g/b),a[w+2]=~~(r[0].b/b),a[w+3]=255}return s},ol.source.Overpass=function(t){(t=t||{}).loader=this._loaderFn,this._url=t.url||"https://overpass-api.de/api/interpreter",this._maxResolution=t.maxResolution||100,t.attributions||(t.attributions=ol.source.OSM.ATTRIBUTION),t.strategy||(t.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,t),this._types={node:!1!==t.node,way:!1!==t.way,rel:!0===t.rel},this._filter=t.filter},ol.ext.inherits(ol.source.Overpass,ol.source.Vector),ol.source.Overpass.prototype._loaderFn=function(t,e,i){if(!(e>this._maxResolution)){var o=this,n=ol.proj.transformExtent(t,i,"EPSG:4326"),r="[bbox:"+(n=n[1]+","+n[0]+","+n[3]+","+n[2])+"][out:xml][timeout:25];";for(var s in r+="(",this._types)if(this._types[s]){r+=s;for(var a,l=0;a=this._filter[l];l++)r+="["+a+"]";r+=";"}r+=");out;>;out skel qt;";var c=new XMLHttpRequest;c.open("POST",this._url,!0),c.onload=function(){for(var t,e=(new ol.format.OSMXML).readFeatures(this.responseText,{featureProjection:i}),n=[],r=0;t=e[r];r++)o.hasFeature(t)||n.push(t);o.addFeatures(n)},c.onerror=function(){console.log(arguments)},c.send("data="+r)}},ol.source.Overpass.prototype.hasFeature=function(t){for(var e,i=t.getGeometry().getFirstCoordinate(),o=t.getId(),n=this.getFeaturesInExtent([i[0]-.1,i[1]-.1,i[0]+.1,i[1]+.1]),r=0;e=n[r];r++)if(o===e.getId())return!0;return!1},ol.source.TileWFS=function(t){(t=t||{}).featureLimit||(t.featureLimit=1/0);var e=t.tileZoom||14,i={strategy:ol.loadingstrategy.tile(ol.tilegrid.createXYZ({minZoom:e,maxZoom:e,tileSize:512}))},o=new ol.format.GeoJSON,n=t.url+"?service=WFS&request=GetFeature&version="+(t.version||"1.1.0")+"&typename="+(t.typeName||"")+"&outputFormat=application/json";t.maxFeatures&&(n+="&maxFeatures="+t.maxFeatures+"&count="+t.maxFeatures);var r={loading:0,loaded:0};i.loader=function(e,i,s){r.loading===r.loaded&&(r.loading=r.loaded=0,this.getFeatures().length>t.maxFeatures&&(this.clear(),this.refresh())),r.loading++,this.dispatchEvent({type:"tileloadstart",loading:r.loading,loaded:r.loaded}),this._loadTile(n,e,s,o,r)},ol.source.Vector.call(this,i),this.set("pagination",t.pagination)},ol.ext.inherits(ol.source.TileWFS,ol.source.Vector),ol.source.TileWFS.prototype._loadTile=function(t,e,i,o,n){var r=t+"&srsname="+i.getCode()+"&bbox="+e.join(",")+","+i.getCode();this.get("pagination")&&!/&startIndex/.test(t)&&(r+="&startIndex=0"),ol.ext.Ajax.get({url:r,success:(function(r){if(n.loaded++,r.error)this.dispatchEvent({type:"tileloaderror",error:r,loading:n.loading,loaded:n.loaded});else{var s=r.numberReturned||0;/&startIndex/.test(t)&&(s+=parseInt(t.replace(/.*&startIndex=(\d*).*/,"$1")),t=t.replace(/&startIndex=(\d*)/,"")),s<r.totalFeatures?this.get("pagination")?(t+="&startIndex="+s,n.loaded--,this._loadTile(t,e,i,o,n)):(this.dispatchEvent({type:"overload",total:r.totalFeatures,returned:r.numberReturned}),this.dispatchEvent({type:"tileloadend",loading:n.loading,loaded:n.loaded})):this.dispatchEvent({type:"tileloadend",loading:n.loading,loaded:n.loaded});var a=o.readFeatures(r,{featureProjection:i});a.length>0&&this.addFeatures(a)}}).bind(this),error:(function(t){n.loaded++,this.dispatchEvent({type:"tileloaderror",error:t,loading:n.loading,loaded:n.loaded})}).bind(this)})},function(){var t=ol.source.Vector.prototype.clear;ol.source.Vector.prototype.clear=function(e){this.dispatchEvent({type:"clearstart"}),t.call(this,e),this.dispatchEvent({type:"clearend"})}}(),ol.layer.Vector3D=function(t){this._source=(t=t||{}).source,this.height_=this.getHfn(t.height);var e=document.createElement("canvas");ol.layer.Image.call(this,{source:new ol.source.ImageCanvas({canvasFunction:function(t,i,o,n){return e.width=n[0],e.height=n[1],e}}),center:t.center||[.5,1],defaultHeight:t.defaultHeight||0,maxResolution:t.maxResolution||1/0}),this.setStyle(t.style),this.on(["postcompose","postrender"],this.onPostcompose_.bind(this))},ol.ext.inherits(ol.layer.Vector3D,ol.layer.Image),ol.layer.Vector3D.prototype.setHeight=function(t){this.height_=this.getHfn(t),this.changed()},ol.layer.Vector3D.prototype.setStyle=function(t){if(this._style=t instanceof ol.style.Style?t:new ol.style.Style,this._style.getStroke()||this._style.setStroke(new ol.style.Stroke({width:1,color:"red"})),this._style.getFill()||this._style.setFill(new ol.style.Fill({color:"rgba(0,0,255,0.5)"})),this._style.getText()||this._style.setText(new ol.style.Fill({color:"red"})),t&&t.getGeometry()){var e=t.getGeometry();this.set("geometry","function"==typeof e?e:function(){return e})}else this.set("geometry",function(t){return t.getGeometry()})},ol.layer.Vector3D.prototype.getStyle=function(){return this._style},ol.layer.Vector3D.prototype.onPostcompose_=function(t){var e=t.frameState.viewState.resolution;if(!(e>this.get("maxResolution"))){if(this.res_=400*e,this.animate_){var i=t.frameState.time-this.animate_;i<this.animateDuration_?(this.elapsedRatio_=this.easing_(i/this.animateDuration_),t.frameState.animate=!0):(this.animate_=!1,this.height_=this.toHeight_)}var o=t.frameState.pixelRatio,n=t.context,r=this.matrix_=t.frameState.coordinateToPixelTransform;r||((r=t.frameState.coordinateToPixelMatrix)[2]=r[4],r[3]=r[5],r[4]=r[12],r[5]=r[13]),this.center_=[n.canvas.width*this.get("center")[0]/o,n.canvas.height*this.get("center")[1]/o];var s=this._source.getFeaturesInExtent(t.frameState.extent);n.save(),n.scale(o,o);var a=this.getStyle();n.lineWidth=a.getStroke().getWidth(),n.lineCap=a.getStroke().getLineCap(),n.strokeStyle=ol.color.asString(a.getStroke().getColor()),n.fillStyle=ol.color.asString(a.getFill().getColor());for(var l=[],c=0;c<s.length;c++)l.push(this.getFeature3D_(s[c],this._getFeatureHeight(s[c])));this.drawFeature3D_(n,l),n.restore()}},ol.layer.Vector3D.prototype.getHfn=function(t){switch(typeof t){case"function":return t;case"string":var e=this.get("defaultHeight");return function(i){return Number(i.get(t))||e};case"number":return function(){return t};default:return function(){return 10}}},ol.layer.Vector3D.prototype.animate=function(t){this.toHeight_=this.getHfn((t=t||{}).height),this.animate_=(new Date).getTime(),this.animateDuration_=t.duration||1e3,this.easing_=t.easing||ol.easing.easeOut,this.changed()},ol.layer.Vector3D.prototype.animating=function(){return this.animate_&&(new Date).getTime()-this.animate_>this.animateDuration_&&(this.animate_=!1),!!this.animate_},ol.layer.Vector3D.prototype._getFeatureHeight=function(t){if(this.animate_){var e=this.height_(t),i=this.toHeight_(t);return e*(1-this.elapsedRatio_)+this.elapsedRatio_*i}return this.height_(t)},ol.layer.Vector3D.prototype.hvector_=function(t,e){var i=[t[0]*this.matrix_[0]+t[1]*this.matrix_[1]+this.matrix_[4],t[0]*this.matrix_[2]+t[1]*this.matrix_[3]+this.matrix_[5]];return{p0:i,p1:[i[0]+e/this.res_*(i[0]-this.center_[0]),i[1]+e/this.res_*(i[1]-this.center_[1])]}},ol.layer.Vector3D.prototype.getFeature3D_=function(t,e){var i=this.get("geometry")(t),o=i.getCoordinates();switch(i.getType()){case"Polygon":o=[o];case"MultiPolygon":for(var n=[],r=0;r<o.length;r++)for(var s=0;s<o[r].length;s++){for(var a=[],l=0;l<o[r][s].length;l++)a.push(this.hvector_(o[r][s][l],e));n.push(a)}return{type:"MultiPolygon",feature:t,geom:n};case"Point":return{type:"Point",feature:t,geom:this.hvector_(o,e)};default:return{}}},ol.layer.Vector3D.prototype.drawFeature3D_=function(t,e){var i,o,n,r;for(i=0;i<e.length;i++)switch(e[i].type){case"MultiPolygon":for(o=0;o<e[i].geom.length;o++)for(n=e[i].geom[o],r=0;r<n.length;r++)t.beginPath(),t.moveTo(n[r].p0[0],n[r].p0[1]),t.lineTo(n[r].p1[0],n[r].p1[1]),t.stroke();break;case"Point":var s=e[i].geom;t.beginPath(),t.moveTo(s.p0[0],s.p0[1]),t.lineTo(s.p1[0],s.p1[1]),t.stroke()}for(i=0;i<e.length;i++)switch(e[i].type){case"MultiPolygon":for(t.beginPath(),o=0;o<e[i].geom.length;o++){if(n=e[i].geom[o],0==o)for(t.moveTo(n[0].p1[0],n[0].p1[1]),r=1;r<n.length;r++)t.lineTo(n[r].p1[0],n[r].p1[1]);else for(t.moveTo(n[0].p1[0],n[0].p1[1]),r=n.length-2;r>=0;r--)t.lineTo(n[r].p1[0],n[r].p1[1]);t.closePath()}t.fill("evenodd"),t.stroke();break;case"Point":var a=(n=e[i]).feature.get("label");if(a){var l=n.geom.p1,c=t.measureText(a),h=Number(t.font.match(/\d+(\.\d+)?/g).join([]));t.fillRect(l[0]-c.width/2-5,l[1]-h-5,c.width+10,h+10),t.strokeRect(l[0]-c.width/2-5,l[1]-h-5,c.width+10,h+10),t.save(),t.fillStyle=ol.color.asString(this._style.getText().getFill().getColor()),t.textAlign="center",t.textBaseline="bottom",t.fillText(a,l[0],l[1]),t.restore()}}},ol.source.WikiCommons=function(t){var e=t||{};e.loader=this._loaderFn,this._maxResolution=e.maxResolution||100,this._lang=e.lang||"fr",this._limit=e.limit||100,e.attributions||(e.attributions=["&copy; <a href='https://commons.wikimedia.org/'>Wikimedia Commons</a>"]),e.strategy||(e.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,e)},ol.ext.inherits(ol.source.WikiCommons,ol.source.Vector),ol.source.WikiCommons.prototype.readFeature=function(t,e){return t.set("descriptionurl",e.descriptionurl),t.set("url",e.url),t.set("title",e.title.replace(/^file:|.jpg$/gi,"")),t.set("thumbnail",e.url.replace(/^(.+wikipedia\/commons)\/([a-zA-Z0-9]\/[a-zA-Z0-9]{2})\/(.+)$/,"$1/thumb/$2/$3/200px-$3")),t.set("user",e.user),e.extmetadata&&e.extmetadata.LicenseShortName&&t.set("copy",e.extmetadata.LicenseShortName.value),!0},ol.source.WikiCommons.prototype._loaderFn=function(t,e,i){if(!(e>this._maxResolution)){var o=this,n=ol.proj.transformExtent(t,i,"EPSG:4326");ol.ext.Ajax.get({url:"https://commons.wikimedia.org/w/api.php?action=query&format=json&origin=*&prop=coordinates|imageinfo&generator=geosearch&iiprop=timestamp|user|url|extmetadata|metadata|size&iiextmetadatafilter=LicenseShortName&ggsbbox="+n[3]+"|"+n[0]+"|"+n[1]+"|"+n[2]+"&ggslimit="+this._limit+"&iilimit="+(this._limit-1)+"&ggsnamespace=6",success:function(t){var e,n,r,s=[];if(t.query&&t.query.pages){for(var a in t.query.pages){if((e=t.query.pages[a]).coordinates&&e.coordinates.length)n=[e.coordinates[0].lon,e.coordinates[0].lat];else{var l=e.imageinfo[0].metadata;if(!l)continue;n=[];for(var c=0,h=0;h<l.length;h++)"GPSLongitude"==l[h].name&&(n[0]=l[h].value,c++),"GPSLatitude"==l[h].name&&(n[1]=l[h].value,c++);if(2!=c)continue}r=new ol.Feature(new ol.geom.Point(ol.proj.transform(n,"EPSG:4326",i))),e.imageinfo[0].title=e.title,o.readFeature(r,e.imageinfo[0])&&s.push(r)}o.addFeatures(s)}}})}},ol.layer.AnimatedCluster=function(t){var e=t||{};ol.layer.Vector.call(this,e),this.oldcluster=new ol.source.Vector,this.clusters=[],this.animation={start:!1},this.set("animationDuration","number"==typeof e.animationDuration?e.animationDuration:700),this.set("animationMethod",e.animationMethod||ol.easing.easeOut),this.getSource().on("change",this.saveCluster.bind(this)),this.on(["precompose","prerender"],this.animate.bind(this)),this.on(["postcompose","postrender"],this.postanimate.bind(this))},ol.ext.inherits(ol.layer.AnimatedCluster,ol.layer.Vector),ol.layer.AnimatedCluster.prototype.saveCluster=function(){if(this.oldcluster){if(this.oldcluster.clear(),!this.get("animationDuration"))return;var t=this.getSource().getFeatures();t.length&&t[0].get("features")&&(this.oldcluster.addFeatures(this.clusters),this.clusters=t.slice(0),this.sourceChanged=!0)}},ol.layer.AnimatedCluster.prototype.getClusterForFeature=function(t,e){for(var i,o=0;i=e[o];o++){var n=i.get("features");if(n&&n.length)for(var r,s=0;r=n[s];s++)if(t===r)return i}return!1},ol.layer.AnimatedCluster.prototype.stopAnimation=function(){this.animation.start=!1,this.animation.cA=[],this.animation.cB=[]},ol.layer.AnimatedCluster.prototype.animate=function(t){var e=this.get("animationDuration");if(e){var i,o,n=t.frameState.viewState.resolution,r=this.animation,s=t.frameState.time;if(r.resolution!=n&&this.sourceChanged){var a=t.frameState.extent;for(r.resolution<n?(a=ol.extent.buffer(a,100*n),r.cA=this.oldcluster.getFeaturesInExtent(a),r.cB=this.getSource().getFeaturesInExtent(a),r.revers=!1):(a=ol.extent.buffer(a,100*n),r.cA=this.getSource().getFeaturesInExtent(a),r.cB=this.oldcluster.getFeaturesInExtent(a),r.revers=!0),r.clusters=[],i=0;o=r.cA[i];i++){var l=o.get("features");if(l&&l.length){var c=this.getClusterForFeature(l[0],r.cB);c&&r.clusters.push({f:o,pt:c.getGeometry().getCoordinates()})}}if(r.resolution=n,this.sourceChanged=!1,!r.clusters.length||r.clusters.length>1e3)return void this.stopAnimation();s=r.start=(new Date).getTime()}if(r.start){var h=t.vectorContext||ol.render.getVectorContext(t),u=(s-r.start)/e;u>1&&(this.stopAnimation(),u=1),u=this.get("animationMethod")(u);var d=this.getStyle(),p="function"==typeof d?d:d.length?function(){return d}:function(){return[d]};for(t.context.save(),t.context.globalAlpha=this.getOpacity(),i=0;c=r.clusters[i];i++){var g=c.f.getGeometry().getCoordinates(),f=g[0]-c.pt[0],m=g[1]-c.pt[1];r.revers?(g[0]=c.pt[0]+u*f,g[1]=c.pt[1]+u*m):(g[0]=g[0]-u*f,g[1]=g[1]-u*m);var y=p(c.f,n,!0);if(y.length||(y=[y]),1!==c.f.get("features").length||f||m){var v=new ol.geom.Point(g);l=new ol.Feature(v)}else l=c.f.get("features")[0];for(var x,b=0;x=y[b];b++)if(x.getText()&&/\n/.test(x.getText().getText())){var w,_=x.getText().getOffsetX(),S=x.getText().getOffsetY(),C=x.getText().getRotation()||0,k=1.2*Number((x.getText().getFont()||"10px").match(/\d+/)),A=x.getText().getText().split("\n"),E=A.length-1,T=x.clone();A.forEach(function(e,i){switch(1==i&&(T.setImage(),T.setFill(),T.setStroke()),x.getText().getTextBaseline()){case"alphabetic":case"ideographic":case"bottom":w=E;break;case"hanging":case"top":w=0;break;default:w=E/2}T.getText().setOffsetX(_-Math.sin(C)*k*(i-w)),T.getText().setOffsetY(S+Math.cos(C)*k*(i-w)),T.getText().setText(e),h.drawFeature(l,ol.ext.getVectorContextStyle(t,T))})}else h.drawFeature(l,ol.ext.getVectorContextStyle(t,x))}t.context.restore(),t.frameState.animate=!0,t.context.save(),t.context.beginPath(),t.context.rect(0,0,0,0),t.context.clip(),this.clip_=!0}}},ol.layer.AnimatedCluster.prototype.postanimate=function(t){this.clip_&&(t.context.restore(),this.clip_=!1)},ol.layer.GeoImage=function(t){ol.layer.Image.call(this,t)},ol.ext.inherits(ol.layer.GeoImage,ol.layer.Image),ol.layer.GeoImage.prototype.getExtent=function(){return this.getSource().getExtent()},ol.layer.Geoportail=function(t,e,i){e=e||{},i=i||{},"string"!=typeof t&&(i=e||{},t=(e=t).layer);var o=e.maxZoom;e.source&&(t=e.source.getLayer(),e.gppKey=e.source.getGPPKey());var n=window.geoportailConfig&&(window.geoportailConfig.capabilities[e.gppKey||e.key]||window.geoportailConfig.capabilities.default)||ol.layer.Geoportail.capabilities;for(var r in(n=n[t])||(n=ol.layer.Geoportail.capabilities[t]),n||(n={title:t,originators:[]},console.error('ol.layer.Geoportail: no layer definition for "'+t+'"\nTry to use ol/layer/Geoportail~loadCapabilities() to get it.')),n)void 0===i[r]&&(i[r]=n[r]);this._originators=n.originators,i.gppKey||i.key||(i.gppKey=e.gppKey||e.key),e.source||(e.source=new ol.source.Geoportail(t,i)),e.title||(e.title=n.title),e.name||(e.name=t),e.layer=t,e.queryable||(e.queryable=n.queryable),e.desc||(e.desc=n.desc),!e.extent&&n.bbox&&n.bbox[0]>-170&&n.bbox[2]<170&&(e.extent=ol.proj.transformExtent(n.bbox,"EPSG:4326",e.projection||"EPSG:3857")),e.maxZoom=o,!e.maxResolution&&i.minZoom&&(e.source.getTileGrid().minZoom-=i.minZoom>1?2:1,e.maxResolution=e.source.getTileGrid().getResolution(e.source.getTileGrid().minZoom),e.source.getTileGrid().minZoom=i.minZoom),ol.layer.Tile.call(this,e)},ol.ext.inherits(ol.layer.Geoportail,ol.layer.Tile),ol.layer.Geoportail.capabilities={"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2":{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",title:"Plan IGN v2",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-175,-85,175,85],desc:"Cartographie multi-\xe9chelles sur le territoire national, issue des bases de donn\xe9es vecteur de l\u2019IGN, mis \xe0 jour r\xe9guli\xe8rement et r\xe9alis\xe9e selon un processus enti\xe8rement automatis\xe9. Version actuellement en beta test",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-175,-85,175,85]}]}}},"CADASTRALPARCELS.PARCELLAIRE_EXPRESS":{key:"parcellaire",server:"https://wxs.ign.fr/geoportail/wmts",layer:"CADASTRALPARCELS.PARCELLAIRE_EXPRESS",title:"PCI vecteur",format:"image/png",style:"PCI vecteur",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Plan cadastral informatis\xe9 vecteur de la DGFIP.",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS":{key:"ortho",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS",title:"Photographies a\xe9riennes",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,bbox:[-178.18713,-22.767689,167.94624,51.11242],desc:"Photographies a\xe9riennes",originators:{CRCORSE:{href:"http://www.corse.fr//",attribution:"CRCORSE",logo:"https://wxs.ign.fr/static/logos/CRCORSE/CRCORSE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[8.428783,41.338627,9.688606,43.08541]}]},SIGLR:{href:"http://www.siglr.org//",attribution:"SIGLR",logo:"https://wxs.ign.fr/static/logos/SIGLR/SIGLR.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.6784439,42.316307,4.8729386,44.978218]}]},"BOURGOGNE-FRANCHE-COMTE":{href:"https://www.bourgognefranchecomte.fr/",attribution:"Auvergne",logo:"https://wxs.ign.fr/static/logos/BOURGOGNE-FRANCHE-COMTE/BOURGOGNE-FRANCHE-COMTE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.837849,46.131435,7.1713247,48.408287]}]},FEDER_AUVERGNE:{href:"http://www.europe-en-auvergne.eu/",attribution:"Auvergne",logo:"https://wxs.ign.fr/static/logos/FEDER_AUVERGNE/FEDER_AUVERGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0398402,44.60505,3.38408,45.49146]}]},FEDER_PAYSDELALOIRE:{href:"https://www.europe.paysdelaloire.fr/",attribution:"Pays-de-la-Loire",logo:"https://wxs.ign.fr/static/logos/FEDER_PAYSDELALOIRE/FEDER_PAYSDELALOIRE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-2.457367,46.19304,.951426,48.57609]}]},IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:13,maxZoom:20,constraint:[{minZoom:19,maxZoom:19,bbox:[-63.160706,-21.401262,55.84643,51.11242]},{bbox:[.035491213,43.221077,6.0235267,49.696926]},{minZoom:20,maxZoom:20,bbox:[.035491213,43.221077,6.0235267,49.696926]},{minZoom:13,maxZoom:18,bbox:[-178.18713,-21.401329,55.85611,51.11242]}]},"E-MEGALIS":{href:"http://www.e-megalisbretagne.org//",attribution:"Syndicat mixte de coop\xe9ration territoriale (e-Megalis)",logo:"https://wxs.ign.fr/static/logos/E-MEGALIS/E-MEGALIS.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-3.7059498,47.971947,-1.8486879,48.99035]}]},FEDER2:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds europ\xe9en de d\xe9veloppement \xe9conomique et r\xe9gional",logo:"https://wxs.ign.fr/static/logos/FEDER2/FEDER2.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.3577043,48.824635,4.269964,50.37648]}]},PREFECTURE_GUADELOUPE:{href:"www.guadeloupe.pref.gouv.fr/",attribution:"guadeloupe",logo:"https://wxs.ign.fr/static/logos/PREFECTURE_GUADELOUPE/PREFECTURE_GUADELOUPE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-61.82342,14.371942,-60.787838,16.521578]}]},OCCITANIE:{href:"https://www.laregion.fr/",attribution:"La R\xe9gion Occitanie; Pyr\xe9n\xe9es - M\xe9diterran\xe9e",logo:"https://wxs.ign.fr/static/logos/OCCITANIE/OCCITANIE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.2086434,48.805965,2.4859917,48.915382]}]},RGD_SAVOIE:{href:"http://www.rgd.fr",attribution:"R\xe9gie de Gestion de Donn\xe9es des Pays de Savoie (RGD 73-74)",logo:"https://wxs.ign.fr/static/logos/RGD_SAVOIE/RGD_SAVOIE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:19,maxZoom:19,bbox:[5.7759595,45.65335,7.0887337,46.438328]},{minZoom:13,maxZoom:18,bbox:[5.5923314,45.017353,7.2323394,46.438328]}]},CG45:{href:"http://www.loiret.com",attribution:"Le conseil g\xe9n\xe9ral du Loiret",logo:"https://wxs.ign.fr/static/logos/CG45/CG45.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.4883244,47.471867,3.1349874,48.354233]}]},CRAIG:{href:"http://www.craig.fr",attribution:"Centre R\xe9gional Auvergnat de l'Information G\xe9ographique (CRAIG)",logo:"https://wxs.ign.fr/static/logos/CRAIG/CRAIG.gif",minZoom:13,maxZoom:20,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0398402,44.60505,6.4295278,46.8038]},{minZoom:20,maxZoom:20,bbox:[2.2243388,44.76621,2.7314367,45.11295]}]},"e-Megalis":{href:"http://www.e-megalisbretagne.org//",attribution:"Syndicat mixte de coop\xe9ration territoriale (e-Megalis)",logo:"https://wxs.ign.fr/static/logos/e-Megalis/e-Megalis.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-5.1937118,47.23789,-.98568505,48.980812]}]},PPIGE:{href:"http://www.ppige-npdc.fr/",attribution:"PPIGE",logo:"https://wxs.ign.fr/static/logos/PPIGE/PPIGE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.5212119,49.957302,4.2673664,51.090965]}]},CG06:{href:"http://www.cg06.fr",attribution:"D\xe9partement Alpes Maritimes (06) en partenariat avec\xa0: Groupement Orthophoto 06 (NCA, Ville de Cannes, CARF, CASA,CG06, CA de Grasse)\xa0",logo:"https://wxs.ign.fr/static/logos/CG06/CG06.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[6.6093955,43.44647,7.7436337,44.377018]}]},"MEGALIS-BRETAGNE":{href:"https://www.megalisbretagne.org/",attribution:"Syndicat mixte M\xe9galis Bretagne",logo:"https://wxs.ign.fr/static/logos/MEGALIS-BRETAGNE/MEGALIS-BRETAGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-5.2086344,47.591938,-3.3396015,48.808697]}]},FEDER:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds europ\xe9en de d\xe9veloppement \xe9conomique et r\xe9gional",logo:"https://wxs.ign.fr/static/logos/FEDER/FEDER.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-1.9662633,42.316307,8.25674,50.18387]},{minZoom:0,maxZoom:12,bbox:[-2.400665,41.333557,9.560094,50.366302]}]},"LANGUEDOC-ROUSSILLON":{href:"https://www.laregion.fr/",attribution:"R\xe9gion Occitanie",logo:"https://wxs.ign.fr/static/logos/LANGUEDOC-ROUSSILLON/LANGUEDOC-ROUSSILLON.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.6784439,42.63972,4.208843,43.979004]}]},GRAND_EST:{href:"https://www.grandest.fr/",attribution:"Hauts-de-France",logo:"https://wxs.ign.fr/static/logos/GRAND_EST/GRAND_EST.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[5.362788,47.390827,7.6924667,49.58011]}]},CNES_AUVERGNE:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_AUVERGNE/CNES_AUVERGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.2656832,45.279934,4.0227704,46.8038]}]},HAUTS_DE_FRANCE:{href:"https://www.hautsdefrance.fr/",attribution:"Hauts-de-France",logo:"https://wxs.ign.fr/static/logos/HAUTS_DE_FRANCE/HAUTS_DE_FRANCE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0740242,48.81521,4.3390365,51.11242]}]},MPM:{href:"http://www.marseille-provence.com/",attribution:"Marseille Provence M\xe9tropole",logo:"https://wxs.ign.fr/static/logos/MPM/MPM.gif",minZoom:20,maxZoom:20,constraint:[{minZoom:20,maxZoom:20,bbox:[5.076959,43.153347,5.7168245,43.454994]}]},DITTT:{href:"http://www.dittt.gouv.nc/portal/page/portal/dittt/",attribution:"Direction des Infrastructures, de la Topographie et des Transports Terrestres",logo:"https://wxs.ign.fr/static/logos/DITTT/DITTT.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[163.47784,-22.767689,167.94624,-19.434975]}]},CNES_978:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_978/CNES_978.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-63.160706,18.04345,-62.962185,18.133898]}]},CNES_ALSACE:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_ALSACE/CNES_ALSACE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[6.8086324,47.39981,7.668318,48.32695]}]},CNES_974:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_974/CNES_974.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[55.205757,-21.401262,55.84643,-20.862825]}]},CNES_975:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_975/CNES_975.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-56.410988,46.734093,-56.10308,47.149963]}]},CNES_976:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_976/CNES_976.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[44.916977,-13.089187,45.30442,-12.564543]}]},CNES_977:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_977/CNES_977.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-62.952805,17.862621,-62.78276,17.98024]}]},CNES:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES/CNES.gif",minZoom:13,maxZoom:16,constraint:[{minZoom:13,maxZoom:16,bbox:[-55.01953,1.845384,-50.88867,6.053161]}]},ASTRIUM:{href:"http://www.geo-airbusds.com/",attribution:"Airbus Defence and Space",logo:"https://wxs.ign.fr/static/logos/ASTRIUM/ASTRIUM.gif",minZoom:13,maxZoom:16,constraint:[{minZoom:13,maxZoom:16,bbox:[-55.01953,1.845384,-50.88867,6.053161]}]},CNES_971:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_971/CNES_971.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-61.82342,15.819616,-60.99497,16.521578]}]},CNES_972:{href:"http://www.cnes.fr/",attribution:"Centre national d'\xe9tudes spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_972/CNES_972.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-61.247208,14.371855,-60.778458,14.899901]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD",title:"Carte IGN",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.62723,-84.5047,179.74588,85.47958],desc:"Cartographie topographique multi-\xe9chelles du territoire fran\xe7ais issue des bases de donn\xe9es vecteur de l\u2019IGN - emprise nationale, visible du 1/200 au 1/130000000",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:5,maxZoom:5,bbox:[-179.57285,-83.84196,178.4975,85.36646]},{minZoom:0,maxZoom:2,bbox:[-175.99709,-84.42859,175.99709,84.2865]},{minZoom:3,maxZoom:3,bbox:[-176.23093,-84.5047,179.08267,84.89126]},{minZoom:4,maxZoom:4,bbox:[-179.62723,-84.0159,-179.21112,85.47958]},{minZoom:6,maxZoom:8,bbox:[-179.49689,-84.02368,179.74588,85.30035]},{minZoom:15,maxZoom:18,bbox:[-5.6663494,41.209736,10.819784,51.175068]},{minZoom:14,maxZoom:14,bbox:[-5.713191,40.852314,11.429714,51.44377]},{minZoom:13,maxZoom:13,bbox:[-63.37252,13.428586,11.429714,51.44377]},{minZoom:11,maxZoom:12,bbox:[-63.37252,13.428586,11.496459,51.444122]},{minZoom:9,maxZoom:9,bbox:[-64.81273,13.428586,11.496459,51.444016]},{minZoom:10,maxZoom:10,bbox:[-63.37252,13.428586,11.496459,51.444016]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS",title:"Cartes IGN",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-180,-75,180,80],desc:"Cartes IGN",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:7,maxZoom:7,bbox:[-178.20573,-68.138855,144.84375,51.909786]},{minZoom:8,maxZoom:8,bbox:[-178.20573,-68.138855,168.24327,51.909786]},{minZoom:13,maxZoom:13,bbox:[-178.20573,-67.101425,168.24327,51.44377]},{minZoom:14,maxZoom:14,bbox:[-178.20573,-67.101425,168.23909,51.44377]},{minZoom:11,maxZoom:12,bbox:[-178.20573,-67.101425,168.24327,51.444122]},{minZoom:9,maxZoom:10,bbox:[-178.20573,-68.138855,168.24327,51.444016]},{minZoom:15,maxZoom:15,bbox:[-178.20573,-46.502903,168.23909,51.175068]},{minZoom:16,maxZoom:16,bbox:[-178.20573,-46.502903,168.29811,51.175068]},{minZoom:0,maxZoom:6,bbox:[-180,-60,180,80]},{minZoom:18,maxZoom:18,bbox:[-5.6663494,41.209736,10.819784,51.175068]},{minZoom:17,maxZoom:17,bbox:[-179.5,-75,179.5,75]}]},DITTT:{href:"http://www.dittt.gouv.nc/portal/page/portal/dittt/",attribution:"Direction des Infrastructures, de la Topographie et des Transports Terrestres",logo:"https://wxs.ign.fr/static/logos/DITTT/DITTT.gif",minZoom:8,maxZoom:16,constraint:[{minZoom:8,maxZoom:10,bbox:[163.47784,-22.972307,168.24327,-19.402702]},{minZoom:11,maxZoom:13,bbox:[163.47784,-22.972307,168.24327,-19.494438]},{minZoom:14,maxZoom:15,bbox:[163.47784,-22.764496,168.23909,-19.493542]},{minZoom:16,maxZoom:16,bbox:[163.47784,-22.809465,168.29811,-19.403923]}]}}},"ADMINEXPRESS-COG-CARTO.LATEST":{key:"administratif",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ADMINEXPRESS-COG-CARTO.LATEST",title:"ADMINEXPRESS COG CARTO",format:"image/png",style:"normal",queryable:!0,tilematrix:"PM",minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Limites administratives Express COG code officiel g\xe9ographique 2021",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"GEOGRAPHICALGRIDSYSTEMS.SLOPES.MOUNTAIN":{key:"altimetrie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.SLOPES.MOUNTAIN",title:"Carte des pentes",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:17,bbox:[-63.161392,-21.544624,56.001812,51.099052],desc:"Carte des zones ayant une valeur de pente sup\xe9rieure \xe0 30\xb0-35\xb0-40\xb0-45\xb0 d'apr\xe8s la BD ALTI au pas de 5m",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:17,constraint:[{minZoom:0,maxZoom:17,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"ELEVATION.SLOPES":{key:"altimetrie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ELEVATION.SLOPES",title:"Altitude",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:6,maxZoom:14,bbox:[-178.20589,-22.595179,167.43176,50.93085],desc:"La couche altitude se compose d'un MNT (Mod\xe8le Num\xe9rique de Terrain) affich\xe9 en teintes hypsom\xe9triques et issu de la BD ALTI\xae.",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:14,constraint:[{minZoom:6,maxZoom:14,bbox:[55.205746,-21.392344,55.846554,-20.86271]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1":{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1",title:"Plan IGN j+1",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Plan IGN j+1",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179,-80,179,80]}]}}},"TRANSPORTNETWORKS.ROADS":{key:"topographie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"TRANSPORTNETWORKS.ROADS",title:"Routes",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Affichage du r\xe9seau routier fran\xe7ais et europ\xe9en.",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information g\xe9ographique et foresti\xe8re",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:14,bbox:[-63.969162,-21.49687,55.964417,71.584076]}]}}}},ol.layer.Geoportail.register=function(t,e){ol.layer.Geoportail.capabilities[t]=e},ol.layer.Geoportail.isRegistered=function(t){return ol.layer.Geoportail.capabilities[t]&&ol.layer.Geoportail.capabilities[t].key},ol.layer.Geoportail.loadCapabilities=function(t,e){var i=function(){},o=function(){},n=function(){};this.getCapabilities(t,e).then(function(t){ol.layer.Geoportail.capabilities=t,i(t)}).catch(function(t){o(t)}).finally(function(t){n(t)});var r={then:function(t){return"function"==typeof t&&(i=t),r},catch:function(t){return"function"==typeof t&&(o=t),r},finally:function(t){return"function"==typeof t&&(n=t),r}};return r},ol.layer.Geoportail.getCapabilities=function(t){var e={},i=function(){},o=function(){},n=function(){},r=[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135,.29858214169740677,.14929107084870338];function s(t){t=281e-6*Number(t);for(var e=0;e<r.length;e++)if(t>r[e])return e}function a(t){for(var e=t.constraint.length-1;e>0;e--)for(var i=0;i<e;i++){for(var o=!0,n=0;n<4;n++)if(t.constraint[e].bbox[n]!=t.constraint[i].bbox[n]){o=!1;break}if(o&&(t.constraint[e].maxZoom==t.constraint[i].minZoom||t.constraint[i].maxZoom==t.constraint[e].minZoom||t.constraint[e].maxZoom+1==t.constraint[i].minZoom||t.constraint[i].maxZoom+1==t.constraint[e].minZoom||t.constraint[e].minZoom-1==t.constraint[i].maxZoom||t.constraint[i].minZoom-1==t.constraint[e].maxZoom)){t.constraint[i].maxZoom=Math.max(t.constraint[e].maxZoom,t.constraint[i].maxZoom),t.constraint[i].minZoom=Math.min(t.constraint[e].minZoom,t.constraint[i].minZoom),t.constraint.splice(e,1);break}}}ol.ext.Ajax.get({url:"https://wxs.ign.fr/"+t+"/autoconf/",dataType:"TEXT",error:function(t){o(t),n({})},success:function(o){for(var r,l=(new DOMParser).parseFromString(o,"text/xml").getElementsByTagName("Layer"),c=0;r=l[c];c++)if(/WMTS/.test(r.getElementsByTagName("Server")[0].attributes.service.value)){for(var h,u={key:t,server:r.getElementsByTagName("gpp:Key")[0].innerHTML.replace(t+"/",""),layer:r.getElementsByTagName("Name")[0].innerHTML,title:r.getElementsByTagName("Title")[0].innerHTML,format:r.getElementsByTagName("Format")[0].innerHTML,style:r.getElementsByTagName("Style")[0].getElementsByTagName("Name")[0].innerHTML,queryable:"1"===r.attributes.queryable.value,tilematrix:"PM",minZoom:s(r.getElementsByTagName("sld:MaxScaleDenominator")[0].innerHTML),maxZoom:s(r.getElementsByTagName("sld:MinScaleDenominator")[0].innerHTML),bbox:JSON.parse("["+r.getElementsByTagName("gpp:BoundingBox")[0].innerHTML+"]"),desc:r.getElementsByTagName("Abstract")[0].innerHTML.replace(/^<!\[CDATA\[(.*)\]\]>$/,"$1"),originators:{}},d=r.getElementsByTagName("gpp:Originator"),p=0;h=d[p];p++){for(var g,f=u.originators[h.attributes.name.value]={href:h.getElementsByTagName("gpp:URL")[0].innerHTML,attribution:h.getElementsByTagName("gpp:Attribution")[0].innerHTML,logo:h.getElementsByTagName("gpp:Logo")[0].innerHTML,minZoom:20,maxZoom:0,constraint:[]},m=h.getElementsByTagName("gpp:Constraint"),y=0;g=m[y];y++){var v=s(g.getElementsByTagName("sld:MinScaleDenominator")[0].innerHTML),x=s(g.getElementsByTagName("sld:MaxScaleDenominator")[0].innerHTML);x>f.maxZoom&&(f.maxZoom=x),x<f.minZoom&&(f.minZoom=x),v>f.maxZoom&&(f.maxZoom=v),v<f.minZoom&&(f.minZoom=v),f.constraint.push({minZoom:x,maxZoom:v,bbox:JSON.parse("["+g.getElementsByTagName("gpp:BoundingBox")[0].innerHTML+"]")})}a(f)}e[u.layer]=u}i(e),n(e)}});var l={then:function(t){return"function"==typeof t&&(i=t),l},catch:function(t){return"function"==typeof t&&(o=t),l},finally:function(t){return"function"==typeof t&&(n=t),l}};return l},ol.source.Source.prototype.getPreview=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANeSURBVHic7ZpPiE1RHMc/780MBhkik79JSUlIUbOxI+wkI2yRhYSUlJLNpJF/xcpiJBmZGBZsNM1CkmhKITGkGbH0/BuPmXnP4rxbb/TOn3fvOffeec6nfqvb/b7f93fveeec37ng8Xg8Ho/nf6Uu4d+fDswFssCvhHOJhaXAMeApMAQUyyIPPAdOAiuTStAVy4EHjDWsix5gdRLJ2mY34ulWYz6IEeA4kIk9awtkgTOEM/5vdAKT4k0/Ou3YMR/ELcbRm9AKFLBbgCJwNE4TYZkJfMG++SIwDCyLz0o4bI17WdyJz0r1TAZ+oDcxCBwAFgIzEIuhvcBbg3sLwOK4DFXLFvQGniCGSSUagS4DjUPOHESkA3XiOWCORqMR6Nfo9DjI3QqPUSd+ylBnv0Zn0GrWFvmIOvGNhjqrNDp/EAutyFgRKUM2tgO+Gur81FxvAKYZaimxXYBvmuuLDHWWaK4X0RfJCNsF6NdcbzXU2a65PohYFKWOc+jn8PUajbWIXaBKp9NB7lZYh34OzwFbFfd/NtDYYSth27urLGIm0M31AL3APWAAmIooymaDnPIl/Vz4NN1yHrd7gcvxWQnHAuA3bsyPop8hUsE13BSgK04TUViBeFo2zedJ8S6wElexW4D2eNOPTjNi6WvD/DtEr8E6tk6GGoAmxFY2iFHE9NZiQf8gogiB9gTEH23izAZuE77vHyU+ANucO1QwD3hD/MbLowAcdm20EmkwXx4n3NodS9rMB2HabYpEWs0HcRqHp0fNwAvJD+eBTZr7p6BvmQVxUaEzEbiruNfJekH15L8jtrEm7JJolEcOmKXRqQOuKDQuY7HZY8s8iNfzkSLxIuI43FTrkkLnOlBfRW4VsWk+oAX5weknxFAxJQNckGgVgZuIRVoomoGXEmGTMa+iQ6K7M4SW7k24QYgiuDQPYinbhugiF4H3RGtzZYCzyIvQXfpNI1ybLyeLpf5+iTbkRbiP2EcocTHm4+YI8iI8RFHwWjAfsA95Q+YZFU6wasl8wB7kReijtNbIILa0vcg/PRlGfPQwHmlCviDqAzaA+OREtzqr1ejOIDorxlNEjTGUBV4nnUWCvAJxGDlA8q9j3DEArAn2zvXAfOwfl6eVAmJrPpJ0Ih6Px+PxeJLjLwPul3vj5d0eAAAAAElFTkSuQmCC"},ol.source.Tile.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var i=this.getTileGrid().getTileCoordForCoordAndResolution(t,e);return this.getTileUrlFunction().call(this,i,this.getProjection())},ol.source.TileWMS.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var i=this.getTileUrlFunction();if(i){var o=(this.getTileGrid()||this.getTileGridForProjection(this.getProjection())).getTileCoordForCoordAndResolution(t,e);return i.call(this,o,1,this.getProjection())}return(this.getGetFeatureInfoUrl?this.getGetFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{}):this.getFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{})).replace(/getfeatureinfo/i,"GetMap")},ol.layer.Base.prototype.getPreview=function(t,e,i){if(this.get("preview"))return[this.get("preview")];if(e||(e=150),e<this.getMinResolution()||e>this.getMaxResolution()){var o=this.getMinResolution(),n=this.getMaxResolution();for(n>1e5&&(n=156543),o<.15&&(o=.15),e=n;n>o;)n/=2,e=o*=2}var r=this.getExtent();return t||(t=[21020,6355964]),r&&!ol.extent.containsCoordinate(r,t)&&(t=[(r[0]+r[2])/2,(r[1]+r[3])/2]),i&&(t=ol.proj.transform(t,i,this.getSource().getProjection())),this.getSource&&this.getSource()?[this.getSource().getPreview(t,e)]:[]},ol.layer.Group.prototype.getPreview=function(t,e){if(this.get("preview"))return[this.get("preview")];var i=[];if(this.getLayers)for(var o=this.getLayers().getArray(),n=0;n<o.length;n++)i=i.concat(o[n].getPreview(t,e));return i},ol.layer.Maplibre=function(t){ol.layer.Layer||console.error("[ol/layer/MapLibre] bad ol version (need ol@6+)"),(t=t||{}).render=function(e){this._container||this._create(t.style),this._container.style.width=1*e.size[0]+"px",this._container.style.height=1*e.size[1]+"px";var i=this.glMap;if(!i)return null;var o=i.getCanvas();o.style.transform="scale(1)",e.size[0]===o.width&&e.size[1]===o.height||i.resize(),o.style.opacity=this.getOpacity();var n=e.viewState;return i.jumpTo({center:ol.proj.toLonLat(n.center),zoom:n.zoom-1,bearing:180*-n.rotation/Math.PI,animate:!1}),i._frame&&(i._frame.cancel(),i._frame=null),i._render(),this._container},ol.layer.Layer.call(this,t)},ol.layer.Layer||(ol.layer.Layer=function(){}),ol.ext.inherits(ol.layer.Maplibre,ol.layer.Layer),ol.layer.Maplibre.prototype.getMapGL=function(){return this.glMap},ol.layer.Maplibre.prototype.setStyle=function(t){this.set("style",t),this.getMapGL()&&this.getMapGL().setStyle(t),this.changed()},ol.layer.Maplibre.prototype.getStyle=function(){return this.getMapGL().get("style")},ol.layer.Maplibre.prototype._create=function(t){this._container=ol.ext.element.create("DIV",{className:"ol-maplibre-gl",style:{position:"absolute",top:0,left:0},parent:document.body}),this.glMap=new mapboxgl.Map({container:this._container,style:t,center:[3,47],zoom:5,pitch:0,antialias:!0,attributionControl:!1,boxZoom:!1,doubleClickZoom:!1,dragPan:!1,dragRotate:!1,interactive:!1,keyboard:!1,pitchWithRotate:!1,scrollZoom:!1,touchZoomRotate:!1})},ol.layer.Vector.prototype.setRender3D=function(t){t.setLayer(this)},ol.render3D=function(t){(t=t||{}).maxResolution=t.maxResolution||100,t.defaultHeight=t.defaultHeight||0,ol.Object.call(this,t),this.setStyle(t.style),this.set("ghost",t.ghost),this.setActive(t.active||!1!==t.active),this.height_=t.height=this.getHfn(t.height),t.layer&&this.setLayer(t.layer)},ol.ext.inherits(ol.render3D,ol.Object),ol.render3D.prototype.setStyle=function(t){if(this._style=t instanceof ol.style.Style?t:new ol.style.Style,this._style.getStroke()||this._style.setStroke(new ol.style.Stroke({width:1,color:"red"})),this._style.getFill()||this._style.setFill(new ol.style.Fill({color:"rgba(0,0,255,0.5)"})),t&&t.getGeometry()){var e=t.getGeometry();this.set("geometry","function"==typeof e?e:function(){return e})}else this.set("geometry",function(t){return t.getGeometry()})},ol.render3D.prototype.getStyle=function(){return this._style},ol.render3D.prototype.setActive=function(t){this._active="function"==typeof t?t:function(){return t},this.layer_&&this.layer_.changed()},ol.render3D.prototype.getActive=function(){return this._active()},ol.render3D.prototype.onPostcompose_=function(t){if(this.getActive()){var e=t.frameState.viewState.resolution;if(!(e>this.get("maxResolution"))){if(this.res_=400*e,this.animate_){var i=t.frameState.time-this.animate_;i<this.animateDuration_?(this.elapsedRatio_=this.easing_(i/this.animateDuration_),t.frameState.animate=!0):(this.animate_=!1,this.height_=this.toHeight_)}var o=t.frameState.pixelRatio,n=t.context,r=this.matrix_=t.frameState.coordinateToPixelTransform;r||((r=t.frameState.coordinateToPixelMatrix)[2]=r[4],r[3]=r[5],r[4]=r[12],r[5]=r[13]),this.center_=[n.canvas.width/2/o,n.canvas.height/o];var s=this.layer_.getSource().getFeaturesInExtent(t.frameState.extent);n.save(),n.scale(o,o);var a=this.getStyle();n.lineWidth=a.getStroke().getWidth(),n.strokeStyle=ol.color.asString(a.getStroke().getColor()),n.fillStyle=ol.color.asString(a.getFill().getColor());for(var l=[],c=0;c<s.length;c++){var h=this.getFeatureHeight(s[c]);h&&l.push(this.getFeature3D_(s[c],h))}this.get("ghost")?this.drawGhost3D_(n,l):this.drawFeature3D_(n,l),n.restore()}}},ol.render3D.prototype.setLayer=function(t){this._listener&&this._listener.forEach(function(t){ol.Observable.unByKey(t)}),this.layer_=t,this._listener=t.on(["postcompose","postrender"],this.onPostcompose_.bind(this))},ol.render3D.prototype.getHfn=function(t){switch(typeof t){case"function":return t;case"string":var e=this.get("defaultHeight");return function(i){return Number(i.get(t))||e};case"number":return function(){return t};default:return function(){return 10}}},ol.render3D.prototype.animate=function(t){this.toHeight_=this.getHfn((t=t||{}).height),this.animate_=(new Date).getTime(),this.animateDuration_=t.duration||1e3,this.easing_=t.easing||ol.easing.easeOut,this.layer_.changed()},ol.render3D.prototype.animating=function(){return this.animate_&&(new Date).getTime()-this.animate_>this.animateDuration_&&(this.animate_=!1),!!this.animate_},ol.render3D.prototype.getFeatureHeight=function(t){if(this.animate_){var e=this.height_(t),i=this.toHeight_(t);return e*(1-this.elapsedRatio_)+this.elapsedRatio_*i}return this.height_(t)},ol.render3D.prototype.hvector_=function(t,e){var i=[t[0]*this.matrix_[0]+t[1]*this.matrix_[1]+this.matrix_[4],t[0]*this.matrix_[2]+t[1]*this.matrix_[3]+this.matrix_[5]];return{p0:i,p1:[i[0]+e/this.res_*(i[0]-this.center_[0]),i[1]+e/this.res_*(i[1]-this.center_[1])]}},ol.render3D.prototype.getFeature3D_=function(t,e){var i=this.get("geometry")(t),o=i.getCoordinates();switch(i.getType()){case"Polygon":o=[o];case"MultiPolygon":for(var n=[],r=0;r<o.length;r++)for(var s=0;s<o[r].length;s++){for(var a=[],l=0;l<o[r][s].length;l++)a.push(this.hvector_(o[r][s][l],e));n.push(a)}return{type:"MultiPolygon",feature:t,geom:n,height:e};case"Point":return{type:"Point",feature:t,geom:this.hvector_(o,e),height:e};default:return{}}},ol.render3D.prototype.drawFeature3D_=function(t,e){var i,o,n,r;for(i=0;i<e.length;i++)switch(e[i].type){case"MultiPolygon":for(o=0;o<e[i].geom.length;o++)for(n=e[i].geom[o],r=0;r<n.length;r++)t.beginPath(),t.moveTo(n[r].p0[0],n[r].p0[1]),t.lineTo(n[r].p1[0],n[r].p1[1]),t.stroke();break;case"Point":var s=e[i].geom;t.beginPath(),t.moveTo(s.p0[0],s.p0[1]),t.lineTo(s.p1[0],s.p1[1]),t.stroke()}for(i=0;i<e.length;i++)switch(e[i].type){case"MultiPolygon":for(t.beginPath(),o=0;o<e[i].geom.length;o++){if(n=e[i].geom[o],0==o)for(t.moveTo(n[0].p1[0],n[0].p1[1]),r=1;r<n.length;r++)t.lineTo(n[r].p1[0],n[r].p1[1]);else for(t.moveTo(n[0].p1[0],n[0].p1[1]),r=n.length-2;r>=0;r--)t.lineTo(n[r].p1[0],n[r].p1[1]);t.closePath()}t.fill("evenodd"),t.stroke();break;case"Point":var a=(n=e[i]).feature.get("label");if(a){var l=n.geom.p1,c=t.fillStyle;t.fillStyle=t.strokeStyle,t.textAlign="center",t.textBaseline="bottom",t.fillText(a,l[0],l[1]);var h=t.measureText(a),u=Number(t.font.match(/\d+(\.\d+)?/g).join([]));t.fillStyle="rgba(255,255,255,0.5)",t.fillRect(l[0]-h.width/2-5,l[1]-u-5,h.width+10,u+10),t.strokeRect(l[0]-h.width/2-5,l[1]-u-5,h.width+10,u+10),t.fillStyle=c}}},ol.render3D.prototype.drawGhost3D_=function(t,e){var i,o,n,r;for(i=0;i<e.length;i++)switch(e[i].type){case"MultiPolygon":for(o=0;o<e[i].geom.length;o++)for(n=e[i].geom[o],r=0;r<n.length-1;r++){t.beginPath(),t.moveTo(n[r].p0[0],n[r].p0[1]),t.lineTo(n[r].p1[0],n[r].p1[1]),t.lineTo(n[r+1].p1[0],n[r+1].p1[1]),t.lineTo(n[r+1].p0[0],n[r+1].p0[1]),t.lineTo(n[r].p0[0],n[r].p0[1]);var s=[(n[r].p0[0]+n[r+1].p0[0])/2,(n[r].p0[1]+n[r+1].p0[1])/2],a=[n[r].p0[1]-n[r+1].p0[1],-n[r].p0[0]+n[r+1].p0[0]],l=ol.coordinate.getIntersectionPoint([s,[s[0]+a[0],s[1]+a[1]]],[n[r].p1,n[r+1].p1]),c=t.createLinearGradient(s[0],s[1],l[0],l[1]);c.addColorStop(0,"rgba(255,255,255,.2)"),c.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=c,t.fill()}break;case"Point":var h=e[i].geom;t.beginPath(),t.moveTo(h.p0[0],h.p0[1]),t.lineTo(h.p1[0],h.p1[1]),t.stroke()}},ol.layer.SketchOverlay=function(t){var e=(t=t||{}).style||ol.style.Style.defaultStyle(!0),i=t.sketchStyle;i||(i=ol.style.Style.defaultStyle(),(i=[new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:10,radius2:0,stroke:new ol.style.Stroke({color:[255,255,255,.5],width:3})})}),i[0].clone()])[1].setImage(new ol.style.RegularShape({points:4,radius:10,radius2:0,stroke:new ol.style.Stroke({color:[0,153,255,1],width:1.25})}))),this._geom=[],ol.layer.Vector.call(this,{name:"sketch",source:new ol.source.Vector({useSpatialIndex:!1}),style:function(t){return t.get("sketch")?i:e},updateWhileAnimating:!0,updateWhileInteracting:!0}),this.getSource().addFeatures([new ol.Feature({sketch:!0,geometry:new ol.geom.Point([])}),new ol.Feature({sketch:!0,geometry:new ol.geom.LineString([])}),new ol.Feature,new ol.Feature(new ol.geom.Point([]))]),this.setGeometryType(t.type)},ol.ext.inherits(ol.layer.SketchOverlay,ol.layer.Vector),ol.layer.SketchOverlay.prototype.setGeometryType=function(t){var e=/^Point$|^LineString$|^Polygon$|^Circle$/.test(t)?t:"LineString";return e!==this._type&&(this.abortDrawing(),this._type=e),this._type},ol.layer.SketchOverlay.prototype.getGeometryType=function(){return this._type},ol.layer.SketchOverlay.prototype.addPoint=function(t){return this._lastCoord!==this._position&&(this._geom.length||this.startDrawing(),this._geom.push(t),this._lastCoord=t,this._position=t,this.drawSketch(),"Point"===this.getGeometryType()&&this.finishDrawing(),"Circle"===this.getGeometryType()&&this._geom.length>=2&&this.finishDrawing(),!0)},ol.layer.SketchOverlay.prototype.removeLastPoint=function(){this._geom.pop(),this._lastCoord=this._geom[this._geom.length-1],this.drawSketch()},ol.layer.SketchOverlay.prototype.startDrawing=function(t){t=t||{},this._geom=[],t.type&&this.setGeometryType(t.type),this.drawSketch(),this._drawing||this.dispatchEvent({type:"drawstart",feature:this.getFeature()}),this._drawing=!0},ol.layer.SketchOverlay.prototype.finishDrawing=function(t){var e=this.getSource().getFeatures()[2].clone(),i=!!e;switch(this.getGeometryType()){case"Circle":case"LineString":i=this._geom.length>1;break;case"Polygon":i=this._geom.length>2}return!(t&&!i)&&(this._geom=[],this._lastCoord=null,this.drawSketch(),this._drawing&&this.dispatchEvent({type:"drawend",valid:i,feature:e}),this._drawing=!1,e)},ol.layer.SketchOverlay.prototype.abortDrawing=function(){this._drawing&&this.dispatchEvent({type:"drawabort",feature:this.getFeature()}),this._drawing=!1,this._geom=[],this._lastCoord=null,this.drawSketch()},ol.layer.SketchOverlay.prototype.setPosition=function(t){this._position=t,this.drawLink()},ol.layer.SketchOverlay.prototype.getPosition=function(){return this._position},ol.layer.SketchOverlay.prototype.drawLink=function(){var t=this.getSource().getFeatures();this._position?(this._lastCoord&&this._lastCoord===this._position?t[0].getGeometry().setCoordinates([]):t[0].getGeometry().setCoordinates(this._position),this._geom.length?"Circle"===this.getGeometryType()?t[1].setGeometry(new ol.geom.Circle(this._geom[0],ol.coordinate.dist2d(this._geom[0],this._position))):"Polygon"===this.getGeometryType()?t[1].setGeometry(new ol.geom.LineString([this._lastCoord,this._position,this._geom[0]])):t[1].setGeometry(new ol.geom.LineString([this._lastCoord,this._position])):t[1].setGeometry(new ol.geom.LineString([]))):(t[0].getGeometry().setCoordinates([]),t[1].setGeometry(new ol.geom.LineString([])))},ol.layer.SketchOverlay.prototype.getFeature=function(){return this.getSource().getFeatures()[2]},ol.layer.SketchOverlay.prototype.drawSketch=function(){this.drawLink();var t=this.getSource().getFeatures();if(this._geom.length)switch(this._lastCoord||(this._lastCoord=this._geom[this._geom.length-1]),t[3].getGeometry().setCoordinates(this._lastCoord),this._type){case"Point":t[2].setGeometry(new ol.geom.Point(this._lastCoord));break;case"Circle":t[2].getGeometry()?t[2].getGeometry().setRadius(ol.coordinate.dist2d(this._geom[0],this._geom[this._geom.length-1])):t[2].setGeometry(new ol.geom.Circle(this._geom[0],ol.coordinate.dist2d(this._geom[0],this._geom[this._geom.length-1])));break;case"LineString":t[2].getGeometry()?t[2].getGeometry().setCoordinates(this._geom):t[2].setGeometry(new ol.geom.LineString(this._geom));break;case"Polygon":this._geom.push(this._geom[0]),t[2].getGeometry()?t[2].getGeometry().setCoordinates([this._geom]):t[2].setGeometry(new ol.geom.Polygon([this._geom])),this._geom.pop();break;default:console.error("[ol/layer/SketchOverlay~drawSketch] geometry type not supported ("+this._type+")")}else t[2].setGeometry(null),t[3].setGeometry(new ol.geom.Point([]))},ol.PerspectiveMap=function(t){var e=t.target instanceof Element?t.target:document.getElementById(t.target);"absolute"!==window.getComputedStyle(e).position&&(e.style.position="relative"),e.style.overflow="hidden";var i=ol.ext.element.create("DIV",{className:"ol-perspective-map",parent:e}),o={};Object.assign(o,t),o.target=i,ol.Map.call(this,o),this._tiltCondition=t.tiltCondition||ol.events.condition.altKeyOnly},ol.ext.inherits(ol.PerspectiveMap,ol.Map),ol.PerspectiveMap.prototype.getPixelRatio=function(){return window.devicePixelRatio},ol.PerspectiveMap.prototype.setPerspective=function(t,e){e=e||{},t>30?t=30:t<0&&(t=0);var i=this._angle||0,o=Math.round(10*t)/10,n=this.getTarget().querySelector(".ol-layers").style;cancelAnimationFrame(this._animatedPerspective),requestAnimationFrame((function(t){this._animatePerpective(t,t,n,i,o,e.duration,e.easing||ol.easing.inAndOut)}).bind(this))},ol.PerspectiveMap.prototype._animatePerpective=function(t,e,i,o,n,r,s){var a,l,c;0===r?(a=1,l=!0):l=(a=(e-t)/(r||500))>=1,a=s(a);var h=(c=this._angle=l?n:o+(n-o)*a)/30;i.transform="translateY(-"+17*h+"%) perspective(200px) rotateX("+c+"deg) scaleY("+(1-h/2)+")",this.getMatrix3D(!0),this.render(),l||requestAnimationFrame((function(e){this._animatePerpective(t,e,i,o,n,r||500,s||ol.easing.inAndOut)}).bind(this)),this.dispatchEvent({type:"change:perspective",angle:c,animating:!l})},ol.PerspectiveMap.prototype.handleMapBrowserEvent=function(t){if(t.pixel=[t.originalEvent.offsetX/this.getPixelRatio(),t.originalEvent.offsetY/this.getPixelRatio()],t.coordinate=this.getCoordinateFromPixel(t.pixel),ol.Map.prototype.handleMapBrowserEvent.call(this,t),this._tiltCondition(t))switch(t.type){case"pointerdown":this._dragging=t.originalEvent.offsetY;break;case"pointerup":this._dragging=!1;break;case"pointerdrag":if(!1!==this._dragging){var e=t.originalEvent.offsetY>this._dragging?.5:-.5;e&&this.setPerspective((this._angle||0)+e,{duration:0}),this._dragging=t.originalEvent.offsetY}}else this._dragging=!1},ol.PerspectiveMap.prototype.getMatrix3D=function(t){if(t){var e=this.getTarget().querySelector(".ol-layers"),i=ol.matrix3D.getTransform(e),o=ol.matrix3D.getTransformOrigin(e);this._matrixTransform=ol.matrix3D.computeTransformMatrix(i,o)}return this._matrixTransform||(this._matrixTransform=ol.matrix3D.identity()),this._matrixTransform},ol.PerspectiveMap.prototype.getPixelScreenFromCoordinate=function(t){var e=this.getPixelFromCoordinate(t),i=this.getMatrix3D(),o=ol.matrix3D.transformVertex(i,e);return[(o=ol.matrix3D.projectVertex(o))[0],o[1]]},ol.PerspectiveMap.prototype.getPixelFromPixelScreen=function(t){var e=ol.matrix3D.inverse(this.getMatrix3D()),i=ol.matrix3D.transformVertex(e,t);return[(i=ol.matrix3D.projectVertex(i))[0],i[1]]},function(){var t=ol.Overlay.prototype.updatePixelPosition;ol.Overlay.prototype.updatePixelPosition=function(){var e=this.getMap();if(e&&e instanceof ol.PerspectiveMap){var i=this.getPosition();if(!e||!e.isRendered()||!i)return void this.setVisible(!1);var o=e.getPixelScreenFromCoordinate(i),n=e.getSize();o[0]-=n[0]/4,o[1]-=n[1]/4,this.updateRenderedPosition(o,n)}else t.call(this)}}(),window.ol&&!ol.particule&&(ol.particule={}),ol.particule.Base=function(t){t||(t={}),ol.Object.call(this),this.setOverlay(t.overlay),this.coordinate=t.coordinate||[0,0]},ol.ext.inherits(ol.particule.Base,ol.Object),ol.particule.Base.prototype.setOverlay=function(t){this._overlay=t},ol.particule.Base.prototype.getOverlay=function(){return this._overlay},ol.particule.Base.prototype.draw=function(){},ol.particule.Base.prototype.update=function(){},ol.particule.Base.prototype.getRandomCoord=function(t){return this.getOverlay().randomCoord?this.getOverlay().randomCoord():[t,0]},ol.particule.Bird=function(t){t||(t={}),ol.particule.Base.call(this,t),this.bird=new Image,this.bird.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABDCAQAAAD+S8VaAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAAvMAAALzAdLpCioAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAG90lEQVR42uWaaVRTRxTHJ4AUUIoIiqISOArIDiIhBBfccCMoR0vVUpXjTqun4Fr1tO5i3YuodaFqRMECKm4VUHEhUvWgBYuilgpiRVZpCARI3r8fWA4hYY9AXu77+ObNzO/O8u787xDSyeYSTzSICpu+DjV0ogrze84PBneByuJv3JpbBlx6MEBbJfG/8S2RAACFXXtU0gERN1BjCc9UEN/e7I2w1gFPinv3UDkHbFiGOqOwJVjlHMALRT3LLJ7trGIOuHwFUsY7q2IOuJ0u7YB//pswWFn6/vnUcbOCAn7ctfnUrsijl85dv5pw786fd9OTsvg5/JykN3fTb6ZcTDgVvefIkqXmVvKr0NN/IUQDO7C1qwJrOwyftIZ7cmIiN21eZlB+SOUtFKNl9kF0hb9ujmyVM73FMmWv3m+2J4zxw74NDN5/5vT1qzeT7j3n5/Bz7mcmPk24cy32Ai8i9Pj2nwIX+jo4kc8UMMqeXr5bfC6N/2tUHrdsCQ4gAR/QNhNRJ8+6GklXH7xStlxW+ViLxrpjqBswJ/z4rYyCFrQnwJPCxGe/x53i+fO+XOth2xpsvQm+PkfGP3YuYIo1oInTyIJiLDFtoZfUP+AXeaW2rZHXKZ8xJ35NeU+1odVSbIIBbEQeb70Tffd6ckmj0QbDy9/zOufdILE6SN0TBkVafnn0ka/NatrrditDXpmYKw36pREwPyr+Y0V72n0CsxoedTDFrMJJyRMDZJYIx8+yYICQKbDJtcjtL9IGAcEMKN7efIy+snnTYv/tR8Ry3+eWRUYFzavRB9SWL7icXKWAVrPRr96wEqjBTjg5bop03GGi77XF85FdqVZNIQ1konOsEvx35yOCN1xMFimszjNSDqh+ektGfVG3xjyTzaqkX3uDTiaCdh0ZA/qSgWXWWfb7CYMQQsiUUANK1j8hoJf1lSFUg0u+z1xCiFuMUYWsAy7QCj9ZzhIgIDCkpi4nhBCGsafNGx2peXCQRvhlcGrEAQSOhYQQQtyTG74YCglN8CswrVF8goEVhBBCrMzdozi33OOHJmvUvQqghQtKMEUu+GDB0Cj2Q/vsUdJn0JH8+oXG4rWS46djSD0ePcr2lUuafbZlIbN0UAnngpyA0I3FumeZxxQYVlZ/ooWleKm0+FHQbTDuWnAp5F6cbNfskcDtcg9J9aMGNUxDIiglgy+CPxhypj4Ddu/cfFpxOrIqrv7QAsH4V2nwYxoEvwQEOpRlAeeG07hWnopH7FMHgTr6VmhAA1xEQNjF4bMxQwpcj2I9duVZLiVtTb7YT7T2I30JccyqrrA7ZuESRF0SvhQ/QKfByDu/VZAs5O6rXS9U6onZ+A2CLgQvwWn0l5n4TAFnjOKksR5En6i73q6/q3IRhvwugB8LBylwi6IhixxX9Wd/CoWQwTrJTuaEOSwzENcKDR7Yj4xOg4+Hq3SEXzX8fIfcObAZPizV+bGxqLZhMyxBWgdP+xi4ScGbCNnhhrodqxnrso65pLidNxMQENihqoPgS3AY5rU7krh35eCPbon2c4hap2nnxob2GQQE+zpAM4qFb53EoUWxE3t93jXyBwyXcG1KD+8/IXwBAmFYg26Vx37oHjnIlnQlGzbJvMCX+lQrPgT6dat9yAcT/S6aSOIs2rjjxLaQ9SsX83gv8uShiNuAn4mR9fZ5dizpphRpREvj1YvOhiU84OdmoghFyKH47y/GHohtLf45ITvVuLyfyKLI5RlntyJSXx2+P+gaejt5O7FNCSEkcFHTuAmPom6/qqxJqFRee33wHGc6rVLjXtym8C8nTTcnDNMh/n5BfnN8mFY18jWdbPlceeBViEsPi16xxFSL7ncjukVelTvxUzsxjOlAUzsULv8/GfdEJa7G7D7YWLCcUzbNkfb42zaXNaG2h4XTHH/n9x+bjIHKqeAdNMZf55fbrKBYLNq+lqb433lkFrUk5hNKdu6mIf5XA1KetzibR+09TLcfonrMtVYlNKk9h2gV//FCW3tCFmMXT0nOe83bxpklbdDJqrD+BC1mwUzTtOw2Sl/UFjpsh8ci2pHirFgxV8nxV/oJxO2RwR6+HNFbmfkZ15PaqwQe/VmJ+R18Aql37XTAsQ9EefUBW6NeEk34IaWN8HkIQk+Jva0SzwGXP6p1XDeEoqB1qx/L0B3dKY+VSr0JDurDFNaK2ZoYg5142sx1m3LEYxUsq+Vv8ejVSv8bdJ/UXySds9eDB4JwEnFIRS6KUIi/8RJxCEEARte74GBR6DycFpGgtZNFPkHrHgOx61miSaPDEOtEn8qWwvepZMc5Mel3ItZmHbbM12wSXV/snMHZQ6eRlzEzI9d9rnftskwERhXVNxF7ik1Krd87pbLCbWYR9Y7v0f/htaJHbsoDhwAAAABJRU5ErkJggg==",this.set("size",[this.bird.width||50,this.bird.height||50])},ol.ext.inherits(ol.particule.Bird,ol.particule.Base),ol.particule.Bird.prototype.draw=function(t){var e=this.getOverlay().get("angle");t.save(),t.translate(this.coordinate[0],this.coordinate[1]),t.rotate(e+Math.PI/2),t.scale(.5,.5),t.drawImage(this.bird,-this.bird.width/2,-this.bird.height/2),t.restore()},ol.particule.Bird.prototype.update=function(t){var e=this.getOverlay().get("speed")*t/this.getOverlay()._fps,i=this.getOverlay().get("angle");this.coordinate[0]+=e*Math.cos(i),this.coordinate[1]+=e*Math.sin(i)},ol.particule.Cloud=function(t){t||(t={}),ol.particule.Base.call(this,t),this.set("size",[100,100]);var e=document.createElement("CANVAS");e.width=200,e.height=200;var i=e.getContext("2d"),o=this.gradient=i.createRadialGradient(50,50,0,50,50,50);o.addColorStop(0,"rgba(255,255,255,.2"),o.addColorStop(1,"rgba(255,255,255,0"),this.image=e;for(var n=0;n<7;n++){i.save();var r=100*Math.random(),s=100*Math.random();i.translate(r,s),i.fillStyle=o,i.fillRect(0,0,e.width,e.height),i.restore()}},ol.ext.inherits(ol.particule.Cloud,ol.particule.Base),ol.particule.Cloud.prototype.draw=function(t){t.save(),t.translate(this.coordinate[0],this.coordinate[1]),t.drawImage(this.image,-this.image.width/2,-this.image.width/2),t.restore()},ol.particule.Cloud.prototype.update=function(t){var e=this.getOverlay().get("speed")*t/this.getOverlay()._fps,i=this.getOverlay().get("angle");this.coordinate[0]+=e*Math.cos(i),this.coordinate[1]+=e*Math.sin(i)},ol.particule.Rain=function(t){t||(t={}),ol.particule.Base.call(this,t),this.z=Math.floor(5*Math.random())+1;var e=document.createElement("CANVAS");e.width=50,e.height=50;var i=e.getContext("2d");this.gradient=i.createRadialGradient(0,0,0,0,0,25),this.gradient.addColorStop(0,"rgba(0,0,80,0)"),this.gradient.addColorStop(1,"rgba(0,0,80,.3)")},ol.ext.inherits(ol.particule.Rain,ol.particule.Base),ol.particule.Rain.prototype.draw=function(t){t.save();var e=this.getOverlay().get("angle");t.beginPath();var i=10*Math.cos(e)*(1+this.z/2),o=10*Math.sin(e)*(1+this.z/2);t.lineWidth=Math.round(this.z/2),t.strokeStyle=this.gradient,t.translate(this.coordinate[0],this.coordinate[1]),t.moveTo(0,0),t.lineTo(i,o),t.stroke(),t.restore()},ol.particule.Rain.prototype.update=function(t){var e=this.getOverlay().get("speed")*t/this.getOverlay()._fps*this.z,i=this.getOverlay().get("angle");this.coordinate[0]+=e*Math.cos(i),this.coordinate[1]+=e*Math.sin(i)},ol.particule.RainDrop=function(t){t||(t={}),ol.particule.Base.call(this,t),this.size=0;var e=document.createElement("CANVAS");e.width=100,e.height=100;var i=e.getContext("2d"),o=i.createRadialGradient(50,50,0,50,50,50);o.addColorStop(0,"rgba(128,128,192,.8"),o.addColorStop(1,"rgba(128,128,192,0"),this.image=e,i.fillStyle=o,i.fillRect(0,0,e.width,e.height)},ol.ext.inherits(ol.particule.RainDrop,ol.particule.Base),ol.particule.RainDrop.prototype.draw=function(t){this.size>0&&(t.save(),t.translate(this.coordinate[0],this.coordinate[1]),t.globalAlpha=this.size/50,t.scale(1-this.size/50,1-this.size/50),t.drawImage(this.image,-50,-50),t.restore())},ol.particule.RainDrop.prototype.update=function(t){(this.size>0||Math.random()<.01)&&(this.size<=0&&(this.size=50,this.coordinates=this.getRandomCoord()),this.size=this.size-Math.round(t/20))},ol.particule.Snow=function(t){t||(t={}),ol.particule.Base.call(this,t),this.z=(Math.floor(5*Math.random())+1)/5,this.angle=Math.random()*Math.PI;var e=document.createElement("CANVAS");e.width=20,e.height=20;var i=e.getContext("2d"),o=i.createRadialGradient(10,10,0,10,10,10);o.addColorStop(0,"rgba(255, 255, 255,1)"),o.addColorStop(.8,"rgba(210, 236, 242,.8)"),o.addColorStop(1,"rgba(237, 247, 249,0)"),this.image=e,i.fillStyle=o,i.fillRect(0,0,e.width,e.height)},ol.ext.inherits(ol.particule.Snow,ol.particule.Base),ol.particule.Snow.prototype.draw=function(t){t.save(),t.translate(this.coordinate[0],this.coordinate[1]),t.globalAlpha=.4+this.z/2,t.scale(this.z,this.z),t.drawImage(this.image,-10,-10),t.restore()},ol.particule.Snow.prototype.update=function(t){var e=this.getOverlay().get("speed")*t/this.getOverlay()._fps*this.z*5,i=this.getOverlay().get("angle");this.angle=this.angle+t/this.getOverlay()._fps/100,this.coordinate[0]+=2*Math.sin(this.angle+this.z)+e*Math.cos(i),this.coordinate[1]+=Math.cos(this.angle)+e*Math.sin(i)},ol.Overlay.Popup=function(t){this.offsetBox="number"==typeof(t=t||{}).offsetBox?[t.offsetBox,t.offsetBox,t.offsetBox,t.offsetBox]:t.offsetBox;var e=document.createElement("div");t.element=e,this.closeBox=t.closeBox,this.onclose=t.onclose,this.onshow=t.onshow,ol.ext.element.create("BUTTON",{className:"closeBox"+(t.closeBox?" hasclosebox":""),type:"button",click:(function(){this.hide()}).bind(this),parent:e}),!1!==t.anchor&&ol.ext.element.create("DIV",{className:"anchor",parent:e}),this.content=ol.ext.element.create("DIV",{html:t.html||"",className:"ol-popup-content",parent:e}),t.minibar&&ol.ext.element.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),t.stopEvent&&(e.addEventListener("mousedown",function(t){t.stopPropagation()}),e.addEventListener("touchstart",function(t){t.stopPropagation()})),ol.Overlay.call(this,t),this._elt=e,this.setPositioning(t.positioning||"auto"),this.setPopupClass(t.popupClass||t.className||"default"),t.anim&&this.addPopupClass("anim"),t.position&&setTimeout((function(){this.show(t.position)}).bind(this))},ol.ext.inherits(ol.Overlay.Popup,ol.Overlay),ol.Overlay.Popup.prototype.getClassPositioning=function(){var t="",e=this.getPositioning();return/bottom/.test(e)&&(t+="ol-popup-bottom "),/top/.test(e)&&(t+="ol-popup-top "),/left/.test(e)&&(t+="ol-popup-left "),/right/.test(e)&&(t+="ol-popup-right "),/^center/.test(e)&&(t+="ol-popup-middle "),/center$/.test(e)&&(t+="ol-popup-center "),t},ol.Overlay.Popup.prototype.setClosebox=function(t){this.closeBox=t,t?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")},ol.Overlay.Popup.prototype.setPopupClass=function(t){var e=["ol-popup"];this.getVisible()&&e.push("visible"),this.element.className="";var i=this.getClassPositioning().split(" ").filter(function(t){return t.length>0});t?t.split(" ").filter(function(t){return t.length>0}).forEach(function(t){e.push(t)}):e.push("default"),i.forEach(function(t){e.push(t)}),this.closeBox&&e.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,e)},ol.Overlay.Popup.prototype.addPopupClass=function(t){this.element.classList.add(t)},ol.Overlay.Popup.prototype.removePopupClass=function(t){this.element.classList.remove(t)},ol.Overlay.Popup.prototype.setPositioning=function(t){void 0!==t&&(/auto/.test(t)?(this.autoPositioning=t.split("-"),1==this.autoPositioning.length&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,"center"==(t=t.replace(/auto/g,"center"))&&(t="bottom-center"),this.setPositioning_(t))},ol.Overlay.Popup.prototype.setPositioning_=function(t){if(this.element){ol.Overlay.prototype.setPositioning.call(this,t),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var e=this.getClassPositioning().split(" ").filter(function(t){return t.length>0});this.element.classList.add.apply(this.element.classList,e)}},ol.Overlay.Popup.prototype.getVisible=function(){return this.element.classList.contains("visible")},ol.Overlay.Popup.prototype.show=function(t,e){e||"string"!=typeof t||(e=t,t=null),!0===t&&(t=this.getPosition());var i=this,o=this.getMap();if(o&&(e&&e!==this.prevHTML&&(this.prevHTML=e,this.content.innerHTML="",e instanceof Element?this.content.appendChild(e):ol.ext.element.create("DIV",{html:e,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach(function(t){t.addEventListener("load",function(){try{o.renderSync()}catch(t){}i.content.dispatchEvent(new Event("scroll"))})})),t)){if(this.autoPositioning){var n=o.getPixelFromCoordinate(t),r=o.getSize(),s=[];s[0]="auto"==this.autoPositioning[0]?n[1]<r[1]/3?"top":"bottom":this.autoPositioning[0],s[1]=n[0]<2*r[0]/3?"left":"right",this.setPositioning_(s[0]+"-"+s[1]),this.offsetBox&&this.setOffset([this.offsetBox["left"==s[1]?2:0],this.offsetBox["top"==s[0]?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(t),this.element.parentElement.style.display="","function"==typeof this.onshow&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout(function(){i.element.classList.add("visible")},0)}},ol.Overlay.Popup.prototype.hide=function(){null!=this.getPosition()&&("function"==typeof this.onclose&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))},ol.Overlay.AnimatedCanvas=function(t){t||(t={}),this._canvas=ol.ext.element.create("CANVAS",{className:((t.className||"")+" ol-animated-overlay").trim()}),this._ctx=this._canvas.getContext("2d"),ol.Overlay.call(this,{element:this._canvas,stopEvent:!1}),this._listener=[],this._time=0,this._particuleClass=t.particule||ol.particule.Base,t.createParticule&&(this._createParticule=t.createParticule),this._fps=1e3/(t.fps||25);var e=this._createParticule();this._psize=e.get("size")||[50,50],this.set("density",t.density||.5),this.set("speed",t.speed||4),this.set("angle","number"==typeof t.angle?t.angle:Math.PI/4),!1!==t.animate&&this.setAnimation(!0),document.addEventListener("visibilitychange",(function(){this._pause=!0}).bind(this))},ol.ext.inherits(ol.Overlay.AnimatedCanvas,ol.Overlay),ol.Overlay.AnimatedCanvas.prototype.setVisible=function(t){this.element.style.display=t?"block":"none",t&&this.setAnimation(this.get("animation"))},ol.Overlay.AnimatedCanvas.prototype.getVisible=function(){return"none"!=this.element.style.display},ol.Overlay.AnimatedCanvas.prototype.updatePixelPosition=function(){},ol.Overlay.AnimatedCanvas.prototype.setMap=function(t){if(this.getMap()&&this.getMap().getViewport().querySelector(".ol-overlaycontainer").removeChild(this._canvas),this._listener.forEach(function(t){ol.Observable.unByKey(t)}),this._listener=[],ol.Overlay.prototype.setMap.call(this,t),t){var e=t.getSize();this._canvas.width=e[0],this._canvas.height=e[1],this.draw(),this._listener.push(t.on("change:size",(function(){var e=t.getSize();this._canvas.width===e[0]&&this._canvas.height===e[1]||(this._canvas.width=e[0],this._canvas.height=e[1],this.draw())}).bind(this)))}},ol.Overlay.AnimatedCanvas.prototype.getParticules=function(){var t=this._psize[0],e=this._psize[1],i=this.get("density")*this._canvas.width*this._canvas.height/t/e<<0;if(this._particules||(this._particules=[]),i>this._particules.length)for(var o=this._particules.length;o<i;o++)this._particules.push(this._createParticule(this,this.randomCoord()));else this._particules.length=i;return this._particules},ol.Overlay.AnimatedCanvas.prototype._createParticule=function(t,e){return new this._particuleClass({overlay:t,coordinate:e})},ol.Overlay.AnimatedCanvas.prototype.randomCoord=function(){return[Math.random()*(this._canvas.width+this._psize[0])-this._psize[0]/2,Math.random()*(this._canvas.height+this._psize[1])-this._psize[1]/2]},ol.Overlay.AnimatedCanvas.prototype.draw=function(t){var e=this._ctx;this.clear(),e.beginPath(),this.getParticules().forEach((function(e){t&&(e.update(t),this.testExit(e)),e.draw(this._ctx)}).bind(this))},ol.Overlay.AnimatedCanvas.prototype.testExit=function(t){var e=this._psize;t.coordinate[0]<-e[0]?(t.coordinate[0]=this._canvas.width+e[0],t.coordinate[1]=Math.random()*(this._canvas.height+e[1])-e[1]/2):t.coordinate[0]>this._canvas.width+e[0]?(t.coordinate[0]=-e[0],t.coordinate[1]=Math.random()*(this._canvas.height+e[1])-e[1]/2):t.coordinate[1]<-e[1]?(t.coordinate[0]=Math.random()*(this._canvas.width+e[0])-e[0]/2,t.coordinate[1]=this._canvas.height+e[1]):t.coordinate[1]>this._canvas.height+e[1]&&(t.coordinate[0]=Math.random()*(this._canvas.width+e[0])-e[0]/2,t.coordinate[1]=-e[1])},ol.Overlay.AnimatedCanvas.prototype.clear=function(){this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height)},ol.Overlay.AnimatedCanvas.prototype.getCanvas=function(){return this._canvas},ol.Overlay.AnimatedCanvas.prototype.setAnimation=function(t){this.set("animation",t=!1!==t),t?(this._pause=!0,requestAnimationFrame(this._animate.bind(this))):this.dispatchEvent({type:"animation:stop",time:this._time})},ol.Overlay.AnimatedCanvas.prototype._animate=function(t){this.getVisible()&&this.get("animation")&&(this._pause?requestAnimationFrame((function(t){this._time=t,requestAnimationFrame(this._animate.bind(this))}).bind(this)):(t-this._time>this._fps&&(this.draw(t-this._time),this._time=t),requestAnimationFrame(this._animate.bind(this)))),this._pause=!1},ol.Overlay.Fixed=function(t){ol.Overlay.call(this,t)},ol.ext.inherits(ol.Overlay.Fixed,ol.Overlay),ol.Overlay.Fixed.prototype.setPosition=function(t,e){this.getMap()&&t&&(this._pixel=this.getMap().getPixelFromCoordinate(t)),ol.Overlay.prototype.setPosition.call(this,t),e&&ol.Overlay.prototype.updatePixelPosition.call(this)},ol.Overlay.Fixed.prototype.updatePixelPosition=function(){if(this.getMap()&&this._pixel&&this.getPosition()){var t=this.getMap().getPixelFromCoordinate(this.getPosition());Math.round(1e3*t[0])===Math.round(1e3*this._pixel[0])&&Math.round(1e3*t[0])===Math.round(1e3*this._pixel[0])||this.setPosition(this.getMap().getCoordinateFromPixel(this._pixel))}},ol.Overlay.FixedPopup=function(t){t.anchor=!1,t.positioning=t.positioning||"center-center",t.className=(t.className||"")+" ol-fixPopup",ol.Overlay.Popup.call(this,t),this.set("minScale",t.minScale||.5),this.set("maxScale",t.maxScale||2);var e=document.createElement("canvas");this._overlay=new ol.layer.Image({source:new ol.source.ImageCanvas({canvasFunction:function(t,i,o,n){return e.width=n[0],e.height=n[1],e}})}),this._style=t.style||new ol.style.Style({fill:new ol.style.Fill({color:[102,153,255]})}),this._overlay.on(["postcompose","postrender"],(function(t){if(this.getVisible()&&this._pixel){var e=this.getMap(),i=this.getPosition(),o=e.getPixelFromCoordinate(i),n=this.element.getBoundingClientRect(),r=this.getMap().getTargetElement().getBoundingClientRect(),s=[n.left-r.left+n.width/2,n.top-r.top+n.height/2];t.context.save();var a=t.inversePixelTransform;a?t.context.transform(a[0],a[1],a[2],a[3],a[4],a[5]):t.context.scale(t.frameState.pixelRatio,t.frameState.pixelRatio),t.context.beginPath(),t.context.moveTo(o[0],o[1]),Math.abs(s[0]-o[0])>Math.abs(s[1]-o[1])?(t.context.lineTo(s[0],s[1]-8),t.context.lineTo(s[0],s[1]+8)):(t.context.lineTo(s[0]-8,s[1]),t.context.lineTo(s[0]+8,s[1])),t.context.moveTo(o[0],o[1]),this._style.getFill()&&(t.context.fillStyle=ol.color.asString(this._style.getFill().getColor()),t.context.fill()),this._style.getStroke()&&(t.context.strokeStyle=ol.color.asString(this._style.getStroke().getColor()),t.context.lineWidth=this._style.getStroke().width(),t.context.stroke()),t.context.restore()}}).bind(this));var i=(function(){this.setPixelPosition()}).bind(this);function o(t){var e=0,i=0,o=0;for(var n in t)e+=t[n].clientX,i+=t[n].clientY,o++;return[e/o,i/o]}function n(t){var e=Object.keys(t);return!(e.length<2)&&ol.coordinate.dist2d([t[e[0]].clientX,t[e[0]].clientY],[t[e[1]].clientX,t[e[1]].clientY])}this.on(["hide","show"],(function(){setTimeout(i)}).bind(this));var r,s,a,l,c={},h={},u=[];this.element.addEventListener("pointerdown",(function(t){for(var e in t.preventDefault(),t.stopPropagation(),c)h[e]&&(c[e]=h[e]);c[t.pointerId]=t,u=this._pixel,s=this.get("rotation")||0,a=this.get("scale")||1,r=n(c),l=!1}).bind(this)),this.element.addEventListener("click",function(t){l&&(t.preventDefault(),t.stopPropagation())},!0);var d=(function(t){c[t.pointerId]&&(delete c[t.pointerId],t.preventDefault()),h[t.pointerId]&&delete h[t.pointerId]}).bind(this);document.addEventListener("pointerup",d),document.addEventListener("pointercancel",d),document.addEventListener("pointermove",(function(t){if(c[t.pointerId]){t.preventDefault(),h[t.pointerId]=t;var e=o(c),i=o(h),d=i[0]-e[0],p=i[1]-e[1];l=l||Math.abs(d)>3||Math.abs(p)>3;var g=function(){var t,e,i=Object.keys(c);if(i.length<2)return!1;var o=[(e=c[i[1]]).clientX-(t=c[i[0]]).clientX,e.clientY-t.clientY],n=[(e=h[i[1]]).clientX-(t=h[i[0]]).clientX,e.clientY-t.clientY],r=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=360*Math.acos((o[0]*n[0]+o[1]*n[1])/(r*s))/Math.PI;return o[0]*n[1]-o[1]*n[0]<0?-a:a}();g&&this.setRotation(s+1.5*g,!1);var f=n(h);!1!==f&&r&&(this.setScale(a*f/r,!1),r=a*f/this.get("scale")),this.setPixelPosition([u[0]+d,u[1]+p])}}).bind(this))},ol.ext.inherits(ol.Overlay.FixedPopup,ol.Overlay.Popup),ol.Overlay.FixedPopup.prototype.setMap=function(t){ol.Overlay.Popup.prototype.setMap.call(this,t),this._overlay.setMap(this.getMap()),this._listener&&ol.Observable.unByKey(this._listener),t&&(this._listener=t.on("change:size",(function(){this.setPixelPosition()}).bind(this)))},ol.Overlay.FixedPopup.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e)if(this._pixel)this.setVisible(!0);else{this._pixel=t.getPixelFromCoordinate(e);var i=t.getSize();this.updateRenderedPosition(this._pixel,i)}else this.setVisible(!1)},ol.Overlay.FixedPopup.prototype.updateRenderedPosition=function(t,e){ol.Overlay.Popup.prototype.updateRenderedPosition.call(this,t,e),this.setRotation(),this.setScale()},ol.Overlay.FixedPopup.prototype.setPixelPosition=function(t,e){var i,o=this.getMap(),n=o?o.getSize():[0,0];if(e&&(this.setPositioning(e),(i=ol.ext.element.offsetRect(this.element)).width=i.height=0,/top/.test(e)?t[1]+=i.height/2:t[1]=/bottom/.test(e)?n[1]-i.height/2-t[1]:n[1]/2+t[1],/left/.test(e)?t[0]+=i.width/2:t[0]=/right/.test(e)?n[0]-i.width/2-t[0]:n[0]/2+t[0]),t&&(this._pixel=t),o&&this._pixel){this.updateRenderedPosition(this._pixel,n);var r=!1;i=ol.ext.element.offsetRect(this.element);var s=ol.ext.element.offsetRect(o.getTargetElement());i.left<s.left?(this._pixel[0]=this._pixel[0]+s.left-i.left,r=!0):i.left+i.width>s.left+s.width&&(this._pixel[0]=this._pixel[0]+s.left-i.left+s.width-i.width,r=!0),i.top<s.top?(this._pixel[1]=this._pixel[1]+s.top-i.top,r=!0):i.top+i.height>s.top+s.height&&(this._pixel[1]=this._pixel[1]+s.top-i.top+s.height-i.height,r=!0),r&&this.updateRenderedPosition(this._pixel,n),this._overlay.changed()}},ol.Overlay.FixedPopup.prototype.getPixelPosition=function(){return this._pixel},ol.Overlay.FixedPopup.prototype.setPopupClass=function(t){ol.Overlay.Popup.prototype.setPopupClass.call(this,t),this.addPopupClass("ol-fixPopup")},ol.Overlay.FixedPopup.prototype.setRotation=function(t,e){"number"==typeof t&&this.set("rotation",t),!1!==e&&(this.element.style.transform=/rotate/.test(this.element.style.transform)?this.element.style.transform.replace(/rotate\((-?[\d,.]+)deg\)/,"rotate("+(this.get("rotation")||0)+"deg)"):this.element.style.transform+" rotate("+(this.get("rotation")||0)+"deg)")},ol.Overlay.FixedPopup.prototype.setScale=function(t,e){"number"==typeof t&&this.set("scale",t),t=Math.min(Math.max(this.get("minScale")||0,this.get("scale")||1),this.get("maxScale")||2),this.set("scale",t),!1!==e&&(this.element.style.transform=/scale/.test(this.element.style.transform)?this.element.style.transform.replace(/scale\(([\d,.]+)\)/,"scale("+t+")"):this.element.style.transform+" scale("+t+")")},ol.Overlay.FixedPopup.prototype.setLinkStyle=function(t){this._style=t,this._overlay.changed()},ol.Overlay.FixedPopup.prototype.getLinkStyle=function(){return this._style},ol.Overlay.Magnify=function(t){var e=document.createElement("div");e.className="ol-magnify",this._elt=e,ol.Overlay.call(this,{positioning:t.positioning||"center-center",element:this._elt,stopEvent:!1}),this.mgmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:t.target||this._elt,view:new ol.View({projection:t.projection}),layers:t.layers}),this.mgview_=this.mgmap_.getView(),this.external_=!!t.target,this.set("zoomOffset",t.zoomOffset||1),this.set("active",!0),this.on("propertychange",this.setView_.bind(this))},ol.ext.inherits(ol.Overlay.Magnify,ol.Overlay),ol.Overlay.Magnify.prototype.setMap=function(t){this.getMap()&&this.getMap().getViewport().removeEventListener("mousemove",this.onMouseMove_),this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.Overlay.prototype.setMap.call(this,t),t.getViewport().addEventListener("mousemove",this.onMouseMove_.bind(this)),this._listener=t.getView().on("propertychange",this.setView_.bind(this)),this.setView_()},ol.Overlay.Magnify.prototype.getMagMap=function(){return this.mgmap_},ol.Overlay.Magnify.prototype.getActive=function(){return this.get("active")},ol.Overlay.Magnify.prototype.setActive=function(t){return this.set("active",t)},ol.Overlay.Magnify.prototype.onMouseMove_=function(t){var e=this;if(e.get("active")){var i=e.getMap().getEventCoordinate(t);e.external_||e.setPosition(i),e.mgview_.setCenter(i),e._elt.querySelector("canvas")&&"none"!=e._elt.querySelector("canvas").style.display||e.mgmap_.updateSize()}else e.setPosition()},ol.Overlay.Magnify.prototype.setView_=function(t){if(this.get("active")){if(!t)return this.setView_({key:"rotation"}),void this.setView_({key:"resolution"});switch(t.key){case"rotation":this.mgview_.setRotation(this.getMap().getView().getRotation());break;case"zoomOffset":case"resolution":var e=Math.max(0,this.getMap().getView().getZoom()+Number(this.get("zoomOffset")));this.mgview_.setZoom(e)}}else this.setPosition()},ol.Overlay.Placemark=function(t){(t=t||{}).popupClass=(t.popupClass||"")+" placemark anim",t.positioning="bottom-center",ol.Overlay.Popup.call(this,t),this.setPositioning=function(){},t.color&&(this.element.style.color=t.color),t.backgroundColor&&(this.element.style.backgroundColor=t.backgroundColor),t.contentColor&&this.setContentColor(t.contentColor),t.size&&this.setRadius(t.size)},ol.ext.inherits(ol.Overlay.Placemark,ol.Overlay.Popup),ol.Overlay.Placemark.prototype.show=function(t,e){!0===t&&(t=this.getPosition()),this.hide(),ol.Overlay.Popup.prototype.show.apply(this,[t,e])},ol.Overlay.Placemark.prototype.setColor=function(t){this.element.style.color=t},ol.Overlay.Placemark.prototype.setBackgroundColor=function(t){this._elt.style.backgroundColor=t},ol.Overlay.Placemark.prototype.setContentColor=function(t){var e=this.element.getElementsByClassName("ol-popup-content")[0];e&&(e.style.color=t)},ol.Overlay.Placemark.prototype.setClassName=function(t){var e=this.element.className;this.element.className="ol-popup placemark ol-popup-bottom ol-popup-center "+(/visible/.test(e)?"visible ":"")+(/anim/.test(e)?"anim ":"")+t},ol.Overlay.Placemark.prototype.setRadius=function(t){this.element.style.fontSize=t+"px"},ol.Overlay.PopupFeature=function(t){t=t||{},ol.Overlay.Popup.call(this,t),this.setTemplate(t.template),this.set("canFix",t.canFix),this.set("showImage",t.showImage),this.set("maxChar",t.maxChar||200),this.set("keepSelection",t.keepSelection),t.select&&"function"==typeof t.select.on&&(this._select=t.select,t.select.on("select",(function(e){this._noselect||(e.selected[0]?this.show(e.mapBrowserEvent.coordinate,t.select.getFeatures().getArray(),e.selected[0]):this.hide())}).bind(this)))},ol.ext.inherits(ol.Overlay.PopupFeature,ol.Overlay.Popup),ol.Overlay.PopupFeature.prototype.setTemplate=function(t){this._template=t,this._attributeObject(this._template)},ol.Overlay.PopupFeature.prototype._attributeObject=function(t){if(t&&t.attributes instanceof Array){var e={};t.attributes.forEach(function(t){e[t]=!0}),t.attributes=e}return t.attributes},ol.Overlay.PopupFeature.prototype.show=function(t,e,i){(t instanceof ol.Feature||t instanceof Array&&t[0]instanceof ol.Feature)&&(e=t,t=null),e instanceof Array||(e=[e]),this._features=e.slice(),this._count||(this._count=1),this._count=1;var o=this.get("keepSelection")&&i||e[0],n=this._getHtml(o);n?(this.element.classList.contains("ol-fixed")||this.hide(),t&&"Point"!==e[0].getGeometry().getType()||(t=e[0].getGeometry().getFirstCoordinate()),ol.Overlay.Popup.prototype.show.call(this,t,n)):this.hide()},ol.Overlay.PopupFeature.prototype._getHtml=function(t){if(!t)return"";var e=ol.ext.element.create("DIV",{className:"ol-popupfeature"});this.get("canFix")&&ol.ext.element.create("I",{className:"ol-fix",parent:e}).addEventListener("click",(function(){this.element.classList.toggle("ol-fixed")}).bind(this));var i,o=this._template;if("function"==typeof o)o=o(t,this._count,this._features.length);else if(!o||!o.attributes)for(var n in(o=o||{}).attributes={},t.getProperties())"geometry"!=n&&(o.attributes[n]=n);if(o.title&&(i="function"==typeof o.title?o.title(t):t.get(o.title),ol.ext.element.create("H1",{html:i,parent:e})),o.attributes){var r,s=ol.ext.element.create("TABLE",{parent:e}),a=this._attributeObject(o),l=t.getProperties();for(var c in a)if(l.hasOwnProperty(c)){var h,u=a[c],d=l[c];"function"==typeof u.format&&(d=u.format(d,t));var p=!0;if("boolean"==typeof u.visible?p=u.visible:"function"==typeof u.visible&&(p=u.visible(t,d)),p){if(r=ol.ext.element.create("TR",{parent:s}),ol.ext.element.create("TD",{html:u.title||c,parent:r}),this.get("showImage")&&/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/.test(d))h=ol.ext.element.create("IMG",{src:d});else{h=(u.before||"")+d+(u.after||"");var g=this.get("maxChar")||200;"string"==typeof h&&h.length>g&&(h=h.substr(0,g)+"[...]")}ol.ext.element.create("TD",{html:h,parent:r})}}}if(ol.ext.element.create("BUTTON",{className:"ol-zoombt",parent:e}).addEventListener("click",(function(){if("Point"===t.getGeometry().getType())this.getMap().getView().animate({center:t.getGeometry().getFirstCoordinate(),zoom:Math.max(this.getMap().getView().getZoom(),18)});else{var e=t.getGeometry().getExtent();this.getMap().getView().fit(e,{duration:1e3})}}).bind(this)),!this.get("keepSelection")&&this._features.length>1){var f=ol.ext.element.create("DIV",{className:"ol-count",parent:e});ol.ext.element.create("DIV",{className:"ol-prev",parent:f,click:(function(){this._count--,this._count<1&&(this._count=this._features.length),e=this._getHtml(this._features[this._count-1]),setTimeout((function(){ol.Overlay.Popup.prototype.show.call(this,this.getPosition(),e)}).bind(this),350)}).bind(this)}),ol.ext.element.create("TEXT",{html:this._count+"/"+this._features.length,parent:f}),ol.ext.element.create("DIV",{className:"ol-next",parent:f,click:(function(){this._count++,this._count>this._features.length&&(this._count=1),e=this._getHtml(this._features[this._count-1]),setTimeout((function(){ol.Overlay.Popup.prototype.show.call(this,this.getPosition(),e)}).bind(this),350)}).bind(this)})}return this._select&&!this.get("keepSelection")&&(this._noselect=!0,this._select.getFeatures().clear(),this._select.getFeatures().push(t),this._noselect=!1),this.dispatchEvent({type:"select",feature:t,index:this._count}),e},ol.Overlay.PopupFeature.prototype.setFix=function(t){t?this.element.classList.add("ol-fixed"):this.element.classList.remove("ol-fixed")},ol.Overlay.PopupFeature.prototype.getFix=function(){return this.element.classList.contains("ol-fixed")},ol.Overlay.PopupFeature.localString=function(t,e){return function(i){if(i&&i.toLocaleString)return i.toLocaleString(t,e);var o=new Date(i);return isNaN(o)?i:o.toLocaleString(t,e)}},ol.Overlay.Tooltip=function(t){(t=t||{}).popupClass=t.popupClass||t.className||"tooltips black",t.positioning=t.positioning||"center-left",t.stopEvent=!!t.stopEvent,ol.Overlay.Popup.call(this,t),this.set("maximumFractionDigits",t.maximumFractionDigits||2),"function"==typeof t.formatLength&&(this.formatLength=t.formatLength),"function"==typeof t.formatArea&&(this.formatArea=t.formatArea),"function"==typeof t.getHTML&&(this.getHTML=t.getHTML),this._interaction=new ol.interaction.Interaction({handleEvent:(function(t){if("pointermove"===t.type||"click"===t.type){var e=this.getHTML(this._feature,this.get("info"));e?this.show(t.coordinate,e):this.hide(),this._coord=t.coordinate}return!0}).bind(this)})},ol.ext.inherits(ol.Overlay.Tooltip,ol.Overlay.Popup),ol.Overlay.Tooltip.prototype.setMap=function(t){this.getMap()&&this.getMap().removeInteraction(this._interaction),ol.Overlay.Popup.prototype.setMap.call(this,t),this.getMap()&&this.getMap().addInteraction(this._interaction)},ol.Overlay.Tooltip.prototype.getHTML=function(t,e){return this.get("measure")?this.get("measure")+(e?"<br/>"+e:""):e||""},ol.Overlay.Tooltip.prototype.setInfo=function(t){t?setTimeout((function(){this.set("info",t),this.show(this._coord,this.get("info"))}).bind(this)):(this.set("info",""),this.hide())},ol.Overlay.Tooltip.prototype.removeFeature=function(){this.setFeature()},ol.Overlay.Tooltip.prototype.formatArea=function(t){return t>Math.pow(10,-1*this.get("maximumFractionDigits"))?t>1e4?(t/1e6).toLocaleString(void 0,{maximumFractionDigits:this.get("maximumFractionDigits)")})+" km\xb2":t.toLocaleString(void 0,{maximumFractionDigits:this.get("maximumFractionDigits")})+" m\xb2":""},ol.Overlay.Tooltip.prototype.formatLength=function(t){return t>Math.pow(10,-1*this.get("maximumFractionDigits"))?t>100?(t/1e3).toLocaleString(void 0,{maximumFractionDigits:this.get("maximumFractionDigits")})+" km":t.toLocaleString(void 0,{maximumFractionDigits:this.get("maximumFractionDigits")})+" m":""},ol.Overlay.Tooltip.prototype.setFeature=function(t){t&&t.feature&&(t=t.feature),this._feature=t,this._listener&&this._listener.forEach(function(t){ol.Observable.unByKey(t)}),this._listener=[],this.set("measure",""),t&&this._listener.push(t.getGeometry().on("change",(function(t){var e,i=t.target;i.getArea?e=this.formatArea(ol.sphere.getArea(i,{projection:this.getMap().getView().getProjection()})):i.getLength&&(e=this.formatLength(ol.sphere.getLength(i,{projection:this.getMap().getView().getProjection()}))),this.set("measure",e)}).bind(this)))},ol,function(){var t=function(t,e,i){return(t[0]-i[0])*(e[1]-i[1])-(t[1]-i[1])*(e[0]-i[0])<=0};ol.coordinate.convexHull=function(e){var i;e.sort(function(t,e){return t[0]==e[0]?t[1]-e[1]:t[0]-e[0]});var o=[];for(i=0;i<e.length;i++){for(;o.length>=2&&t(o[o.length-2],o[o.length-1],e[i]);)o.pop();o.push(e[i])}var n=[];for(i=e.length-1;i>=0;i--){for(;n.length>=2&&t(n[n.length-2],n[n.length-1],e[i]);)n.pop();n.push(e[i])}return n.pop(),o.pop(),o.concat(n)};var e=function(t){var i,o,n=[];switch(t.getType()){case"Point":n.push(t.getCoordinates());break;case"LineString":case"LinearRing":case"MultiPoint":n=t.getCoordinates();break;case"MultiLineString":for(o=t.getLineStrings(),i=0;i<o.length;i++)n.concat(e(o[i]));break;case"Polygon":n=e(t.getLinearRing(0));break;case"MultiPolygon":for(o=t.getPolygons(),i=0;i<o.length;i++)n.concat(e(o[i]));break;case"GeometryCollection":for(o=t.getGeometries(),i=0;i<o.length;i++)n.concat(e(o[i]))}return n};ol.geom.Geometry.prototype.convexHull=function(){return ol.coordinate.convexHull(e(this))}}(),ol.coordinate.toDFCI=function(t,e,i){e||0===e||(e=3),i&&(ol.proj.get("EPSG:27572")||(proj4.defs["EPSG:27572"]||proj4.defs("EPSG:27572","+proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),ol.proj.proj4.register(proj4)),t=ol.proj.transform(t,i,"EPSG:27572"));var o=t[0],n=t[1],r="",s=1e5;if(r+=String.fromCharCode(65+Math.floor((o<8e5?o:o+2e5)/s))+String.fromCharCode(65+Math.floor((n<23e5?n:n+2e5)/s)-15),0===e)return r;var a=2e4;if(r+=2*Math.floor(o%s/a),r+=2*Math.floor(n%s/a),1===e)return r;var l=2e3,c=Math.floor(o%a/l);if(r+=String.fromCharCode(65+(c<8?c:c+2)),r+=Math.floor(n%a/l),2===e)return r;var h=Math.floor(o%l/500),u=Math.floor(n%l/500);return r+(h<1?u>1?".1":".4":h>2?u>1?".2":".3":u>2?h<2?".1":".2":u<1?h<2?".4":".3":".5")},ol.coordinate.fromDFCI=function(t,e){var i,o=1e5,n=t.charCodeAt(0)-65;n=(n<8?n:n-2)*o;var r=t.charCodeAt(1)-65;if(r=(r<8?r:r-2)*o+15e5,2===t.length)i=[n+o/2,r+o/2];else if(o/=5,n+=Number(t.charAt(2))/2*o,r+=Number(t.charAt(3))/2*o,4===t.length)i=[n+o/2,r+o/2];else{o/=10;var s=t.charCodeAt(4)-65;if(n+=(s<8?s:s-2)*o,r+=Number(t.charAt(5))*o,6===t.length)i=[n+o/2,r+o/2];else switch(t.charAt(7)){case"1":i=[n+o/4,r+3*o/4];break;case"2":i=[n+3*o/4,r+3*o/4];break;case"3":i=[n+3*o/4,r+o/4];break;case"4":i=[n+o/4,r+o/4];break;default:i=[n+o/2,r+o/2]}}return e&&(ol.proj.get("EPSG:27572")||(proj4.defs["EPSG:27572"]||proj4.defs("EPSG:27572","+proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),ol.proj.proj4.register(proj4)),i=ol.proj.transform(i,"EPSG:27572",e)),i},ol.coordinate.validDFCI=function(t){if(t.length<2||t.length>8)return!1;if(/[^A-H|^K-N]/.test(t.substr(0,1)))return!1;if(/[^B-H|^K-N]/.test(t.substr(1,1)))return!1;if(t.length>2){if(t.length<4)return!1;if(/[^0,^2,^4,^6,^8]/.test(t.substr(2,1)))return!1;if(/[^0,^2,^4,^6,^8]/.test(t.substr(3,1)))return!1}if(t.length>4){if(t.length<6)return!1;if(/[^A-H|^K-L]/.test(t.substr(4,1)))return!1;if(/[^0-9]/.test(t.substr(5,1)))return!1}if(t.length>6){if(t.length<8)return!1;if("."!==t.substr(6,1))return!1;if(/[^1-5]/.test(t.substr(7,1)))return!1}return!0},ol.coordinate.validDFCICoord=function(t,e){return e&&(ol.proj.get("EPSG:27572")||(proj4.defs["EPSG:27572"]||proj4.defs("EPSG:27572","+proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),ol.proj.proj4.register(proj4)),t=ol.proj.transform(t,e,"EPSG:27572")),!(0>t[0]||t[0]>12e5||16e5>t[1]||t[1]>27e5)},ol.graph={},ol.graph.Dijskra=function(t){this.source=(t=t||{}).source,this.nodes=new ol.source.Vector,this.maxIteration=t.maxIteration||2e4,this.stepIteration=t.stepIteration||2e3,this.astar=!0,this.candidat=[],ol.Object.call(this),this.set("epsilon",t.epsilon||1e-6)},ol.ext.inherits(ol.graph.Dijskra,ol.Object),ol.graph.Dijskra.prototype.weight=function(){return 1},ol.graph.Dijskra.prototype.direction=function(){return 2},ol.graph.Dijskra.prototype.getLength=function(t){return t.getGeometry&&(t=t.getGeometry()),t.getLength()},ol.graph.Dijskra.prototype.getNodeSource=function(){return this.nodes},ol.graph.Dijskra.prototype.getEdges=function(t){var e=ol.extent.buffer(ol.extent.boundingExtent([t]),this.get("epsilon")),i=[];return this.source.forEachFeatureIntersectingExtent(e,function(t){i.push(t)}),i},ol.graph.Dijskra.prototype.getNode=function(t){var e=ol.extent.buffer(ol.extent.boundingExtent([t]),this.get("epsilon")),i=[];return this.nodes.forEachFeatureIntersectingExtent(e,function(t){i.push(t)}),i[0]},ol.graph.Dijskra.prototype.addNode=function(t,e,i,o,n){if(this.wdist&&e>this.wdist)return!1;var r=this.getNode(t),s=e+this.getLength(new ol.geom.LineString([this.end,t]))*this.weight();if(this.astar&&this.wdist&&s>this.wdist)return!1;if(r){if(r!==this.arrival&&r.get("wdist")<=e)return r;r.set("dist",i),r.set("wdist",e),r.set("dtotal",s),r.set("from",o),r.set("prev",n),r===this.arrival&&(this.wdist=e),this.candidat.push(r)}else r=new ol.Feature({geometry:new ol.geom.Point(t),from:o,prev:n,dist:i||0,wdist:e,dtotal:s}),e<0?r.set("wdist",!1):this.candidat.push(r),this.nodes.addFeature(r);return r},ol.graph.Dijskra.prototype.closestCoordinate=function(t){var e=this.source.getClosestFeatureToCoordinate(t),i=e.getGeometry().getFirstCoordinate(),o=e.getGeometry().getLastCoordinate();return ol.coordinate.dist2d(t,i)<ol.coordinate.dist2d(t,o)?i:o},ol.graph.Dijskra.prototype.path=function(t,e){if(this.running)return!1;if(t=this.closestCoordinate(t),this.end=this.closestCoordinate(e),t[0]===this.end[0]&&t[1]===this.end[1])return this.dispatchEvent({type:"finish",route:[],wDistance:-1,distance:this.wdist}),!1;var i=this;return this.nodes.clear(),this.candidat=[],this.wdist=0,this.running=!0,this.addNode(t,0),this.arrival=this.addNode(this.end,-1),this.nb=0,this.dispatchEvent({type:"start"}),setTimeout(function(){i._resume()}),[t,this.end]},ol.graph.Dijskra.prototype.resume=function(){this.running||this.candidat.length&&(this.running=!0,this.nb=0,this._resume())},ol.graph.Dijskra.prototype.pause=function(){this.running&&(this.nb=-1)},ol.graph.Dijskra.prototype.getBestWay=function(){for(var t,e,i=-1,o=0;e=this.candidat[o];o++)e.get("wdist")>i&&(t=e,i=e.get("wdist"));return this.getRoute(t)},ol.graph.Dijskra.prototype._resume=function(){if(this.running){for(;this.candidat.length;){this.candidat.sort(function(t,e){return t.get("dtotal")<e.get("dtotal")?1:t.get("dtotal")===e.get("dtotal")?0:-1});for(var t,e=this.candidat.pop(),i=e.getGeometry().getCoordinates(),o=this.getEdges(i),n=0;t=o[n];n++){if(e.get("from")!==t){var r=this.getLength(t);r<0&&console.log("distance < 0!");var s=e.get("wdist")+r*this.weight(t);r=e.get("dist")+r;var a=t.getGeometry().getFirstCoordinate(),l=t.getGeometry().getLastCoordinate(),c=this.direction(t);0!==c&&(i[0]===a[0]&&i[1]===a[1]&&-1!==c&&this.addNode(l,s,r,t,e),i[0]===l[0]&&i[0]===l[0]&&1!==c&&this.addNode(a,s,r,t,e))}if(-1===this.nb||this.nb++>this.maxIteration)return this.running=!1,void this.dispatchEvent({type:"pause",overflow:-1!==this.nb});if(!(this.nb%this.stepIteration)){var h=this;return window.setTimeout(function(){h._resume()},5),void this.dispatchEvent({type:"calculating"})}}}this.nodes.clear(),this.running=!1,this.dispatchEvent({type:"finish",route:this.getRoute(this.arrival),wDistance:this.wdist,distance:this.arrival.get("dist")})}},ol.graph.Dijskra.prototype.getRoute=function(t){for(var e=[];t;)e.unshift(t.get("from")),t=t.get("prev");return e.shift(),e},ol.geom.GPAltiCode=function(t,e){e=e||{};var i=t.getType();if("Point"===i||"LineString"===i){var o=e.projection||"EPSG:3857",n=e.sampling||0;if(e.samplingDist){var r=t.getLength();n=Math.max(n,Math.round(r/e.samplingDist))}n>5e3&&(n=5e3),n<2&&(n=0),t=t.clone().transform(o,"EPSG:4326");var s,a=[],l=[];switch(i){case"Point":s=[t.getCoordinates()];break;case"LineString":s=t.getCoordinates();break;default:return}n<=s.length&&(n=0),s.forEach(function(t){a.push(Math.round(1e6*t[0])/1e6),l.push(Math.round(1e6*t[1])/1e6)});var c="lon="+a.join("|")+"&lat="+l.join("|");n&&(c+="&sampling="+n),ol.ext.Ajax.get({url:"https://wxs.ign.fr/"+(e.apiKey||"essentiels")+"/alti/rest/"+(a.length>1?"elevationLine":"elevation")+".json?"+c,success:function(t){var r=[];t.elevations.forEach(function(t,e){r.push(n?[t.lon,t.lat,t.z]:[s[e][0],s[e][1],t.z])}),"Point"===i&&(r=r[0]);var a=ol.geom.createFromType(i,r);a.transform("EPSG:4326",o),"function"==typeof e.success&&e.success(a)},error:function(t){"function"==typeof e.error&&e.error(t)}})}else console.warn("[GPAltiCode] "+i+" not supported...")},ol.coordinate.GPAltiCode=function(t,e){e=e||{};var i=t[0].length?new ol.geom.LineString(t):new ol.geom.Point(t);ol.geom.GPAltiCode(i,{projection:e.projection,apiKey:e.apiKey,sampling:e.sampling,samplingDist:e.samplingDist,success:function(t){"function"==typeof e.success&&e.success(t.getCoordinates())},error:e.error})},ol.coordinate.dist2d=function(t,e){var i=t[0]-e[0],o=t[1]-e[1];return Math.sqrt(i*i+o*o)},ol.coordinate.equal=function(t,e){return t[0]==e[0]&&t[1]==e[1]},ol.coordinate.getFeatureCenter=function(t){return ol.coordinate.getGeomCenter(t.getGeometry())},ol.coordinate.getGeomCenter=function(t){switch(t.getType()){case"Point":return t.getCoordinates();case"MultiPolygon":t=t.getPolygon(0);case"Polygon":return t.getInteriorPoint().getCoordinates();default:return t.getClosestPoint(ol.extent.getCenter(t.getExtent()))}},ol.coordinate.offsetCoords=function(t,e){var i,o,n,r,s,a,l,c,h,u,d,p,g,f=[],m=t.length-1,y=m,v=ol.coordinate.equal(t[0],t[m]);v||(g=[(d=t[0])[0]+((p=t[1])[1]-d[1])/ol.coordinate.dist2d(d,p)*e,d[1]-(p[0]-d[0])/ol.coordinate.dist2d(d,p)*e],f.push(g),t.push(t[m]),m++,y--);for(var x=0;x<y;x++)i=((p=t[(x+1)%m])[1]-(d=t[x])[1])/(p[0]-d[0]),o=((g=t[(x+2)%m])[1]-p[1])/(g[0]-p[0]),Math.abs(i-o)>1e-10&&(n=Math.sqrt((p[0]-d[0])*(p[0]-d[0])+(p[1]-d[1])*(p[1]-d[1])),r=Math.sqrt((g[0]-p[0])*(g[0]-p[0])+(g[1]-p[1])*(g[1]-p[1])),h=(o*(a=p[0]+e*(g[1]-p[1])/r)-i*(s=d[0]+e*(p[1]-d[1])/n)+(l=d[1]-e*(p[0]-d[0])/n)-(c=p[1]-e*(g[0]-p[0])/r))/(o-i),u=(i*o*(a-s)+o*l-i*c)/(o-i),p[0]-d[0]==0&&(u=o*(h=p[0]+e*(p[1]-d[1])/Math.abs(p[1]-d[1]))-o*a+c),g[0]-p[0]==0&&(u=i*(h=g[0]+e*(g[1]-p[1])/Math.abs(g[1]-p[1]))-i*s+l),f.push([h,u]));return v?f.push(f[0]):(t.pop(),g=[(d=t[t.length-1])[0]-((p=t[t.length-2])[1]-d[1])/ol.coordinate.dist2d(d,p)*e,d[1]+(p[0]-d[0])/ol.coordinate.dist2d(d,p)*e],f.push(g)),f},ol.coordinate.findSegment=function(t,e){for(var i=0;i<e.length-1;i++){var o=e[i],n=e[i+1];if(ol.coordinate.equal(t,o)||ol.coordinate.equal(t,n))return{index:1,segment:[o,n]};var r=ol.coordinate.dist2d(o,n),s=[(n[0]-o[0])/r,(n[1]-o[1])/r],a=ol.coordinate.dist2d(o,t),l=[(t[0]-o[0])/a,(t[1]-o[1])/a];if(Math.abs(s[0]*l[1]-s[1]*l[0])<1e-10)return{index:1,segment:[o,n]}}return{index:-1}},ol.coordinate.splitH=function(t,e,i){for(var o,n=[],r=0;r<t.length-1;r++)t[r].length&&t[r+1].length&&(t[r][1]<=e&&t[r+1][1]>e||t[r][1]>=e&&t[r+1][1]<e)&&n.push({contour:i,index:r,pt:[(o=(e-t[r][1])/(t[r+1][1]-t[r][1]))*(t[r+1][0]-t[r][0])+t[r][0],e],abs:o});n.sort(function(t,e){return t.pt[0]-e.pt[0]});for(var s=[],a=0;a<n.length-1;a+=2)s.push([n[a],n[a+1]]);return s},ol.geom.createFromType=function(t,e){switch(t){case"LineString":return new ol.geom.LineString(e);case"LinearRing":return new ol.geom.LinearRing(e);case"MultiLineString":return new ol.geom.MultiLineString(e);case"MultiPoint":return new ol.geom.MultiPoint(e);case"MultiPolygon":return new ol.geom.MultiPolygon(e);case"Point":return new ol.geom.Point(e);case"Polygon":return new ol.geom.Polygon(e);default:return console.error("[createFromType] Unsupported type: "+t),null}},ol.coordinate.getIntersectionPoint=function(t,e){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],n=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=i*r-o*n;if(0!=s){var a=(i*t[0][1]-i*e[0][1]-o*t[0][0]+o*e[0][0])/s;return[e[0][0]+a*n,e[0][1]+a*r]}return!1},ol,function(){function t(t,e){for(var i=t.length-1;i>0;i--)(t[i][0]>e&&t[i-1][0]<e||t[i][0]<e&&t[i-1][0]>e)&&t.splice(i,0,[e,(e-t[i][0])/(t[i-1][0]-t[i][0])*(t[i-1][1]-t[i][1])+t[i][1]])}function e(t,e){for(var i=t.length-1;i>0;i--)(t[i][1]>e&&t[i-1][1]<e||t[i][1]<e&&t[i-1][1]>e)&&t.splice(i,0,[(e-t[i][1])/(t[i-1][1]-t[i][1])*(t[i-1][0]-t[i][0])+t[i][0],e])}ol.extent.intersection=function(i,o){var n="Polygon"===o.getType();if(!n&&"MultiPolygon"!==o.getType())return null;var r=o.getCoordinates();return n&&(r=[r]),r.forEach(function(o){o.forEach(function(o){t(o,i[0]),t(o,i[2]),e(o,i[1]),e(o,i[3])})}),r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){t[0]<i[0]?t[0]=i[0]:t[0]>i[2]&&(t[0]=i[2]),t[1]<i[1]?t[1]=i[1]:t[1]>i[3]&&(t[1]=i[3])})})}),n?new ol.geom.Polygon(r[0]):new ol.geom.MultiPolygon(r)}}(),ol.coordinate.sampleAt=function(t,e,i,o){var n=[];!1!==o&&n.push(t);var r=ol.coordinate.dist2d(t,e);if(r){var s=Math.round(r/i);if(s>1)for(var a=(e[0]-t[0])/s,l=(e[1]-t[1])/s,c=1;c<s;c++)n.push([t[0]+a*c,t[1]+l*c])}return n.push(e),n},ol.geom.Polygon.prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach(function(e){for(var o=[],n=1;n<e.length;n++)o=o.concat(ol.coordinate.sampleAt(e[n-1],e[n],t,1===n));i.push(o)}),new ol.geom.Polygon(i)},ol.geom.MultiPolygon.prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach(function(e){var o=[];i.push(o),e.forEach(function(e){for(var i=[],n=1;n<e.length;n++)i=i.concat(ol.coordinate.sampleAt(e[n-1],e[n],t,1===n));o.push(i)})}),new ol.geom.MultiPolygon(i)},ol.geom.Circle.prototype.intersection=function(t,e){if(t.sampleAt){var i=ol.extent.buffer(this.getCenter().concat(this.getCenter()),this.getRadius());t=(t=ol.extent.intersection(i,t)).simplify(e);var o=this.getCenter(),n=this.getRadius(),r=t.sampleAt(e).getCoordinates();switch(t.getType()){case"Polygon":r=[r];case"MultiPolygon":var s=!1,a=[];return r.forEach(function(t){var e=[];a.push(e),t.forEach(function(t){var i=[];e.push(i),t.forEach(function(t){var e=ol.coordinate.dist2d(o,t);e>n?(s=!0,i.push([o[0]+n/e*(t[0]-o[0]),o[1]+n/e*(t[1]-o[1])])):i.push(t)})})}),s?"Polygon"===t.getType()?new ol.geom.Polygon(a[0]):new ol.geom.MultiPolygon(a):t}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: "+t.getType());return t},ol.geom.LineString.prototype.splitAt=function(t,e){var i;if(!t)return[this];if(e||(e=1e-10),t.length&&t[0].length){var o=[this];for(i=0;i<t.length;i++){for(var n=[],r=0;r<o.length;r++){var s=o[r].splitAt(t[i],e);n=n.concat(s)}o=n}return o}if(ol.coordinate.equal(t,this.getFirstCoordinate())||ol.coordinate.equal(t,this.getLastCoordinate()))return[this];var a=this.getCoordinates(),l=[a[0]],c=[];for(i=0;i<a.length-1;i++)if(!ol.coordinate.equal(a[i],a[i+1])){if(ol.coordinate.equal(t,a[i+1]))l.push(a[i+1]),c.push(new ol.geom.LineString(l)),l=[];else if(!ol.coordinate.equal(t,a[i])){var h,u=!1;a[i][0]==a[i+1][0]?(h=(a[i][1]-t[1])/(a[i][1]-a[i+1][1]),u=a[i][0]==t[0]&&0<h&&h<=1):a[i][1]==a[i+1][1]?(h=(a[i][0]-t[0])/(a[i][0]-a[i+1][0]),u=a[i][1]==t[1]&&0<h&&h<=1):(h=(a[i][0]-t[0])/(a[i][0]-a[i+1][0]),u=Math.abs(h-(a[i][1]-t[1])/(a[i][1]-a[i+1][1]))<=e&&0<h&&h<=1),u&&(l.push(t),c.push(new ol.geom.LineString(l)),l=[t])}l.push(a[i+1])}return l.length>1&&c.push(new ol.geom.LineString(l)),c.length?c:[this]},ol.geom.MultiPolygon.prototype.scribbleFill=function(t){var e,i,o,n=[],r=this.getPolygons();for(e=0;i=r[e];e++){var s=i.scribbleFill(t);s&&n.push(s)}if(!n.length)return null;var a,l=n[0];for(e=0;o=n[e];e++){a=o.getLineStrings();for(var c=0;c<a.length;c++)l.appendLineString(a[c])}return l},ol.geom.Polygon.prototype.scribbleFill=function(t){var e,i,o,n=t.interval,r=t.angle||Math.PI/2,s=this.clone();s.rotate(r,[0,0]);var a=s.getCoordinates(),l=a[0];for(e=1;e<a.length;e++)l.push([]),l=l.concat(a[e]);for(var c=s.getExtent(),h=[],u=(Math.floor(c[1]/n)+1)*n;u<c[3];u+=n)o=ol.coordinate.splitH(l,u,e),h=h.concat(o);if(!h.length)return null;var d=l.length-1,p=h[0][0].index;for(i=0;o=h[i];i++)h[i][0].index=(h[i][0].index-p+d)%d,h[i][1].index=(h[i][1].index-p+d)%d;for(var g=[];;){for(i=0;(o=h[i])&&o[0].done;i++);if(!o)break;for(var f=[];o;){o[0].done=!0,f.push(o[0].pt),f.push(o[1].pt);for(var m=o[0].pt[1]+n,y=1/0,v=null;h[i]&&!(h[i][0].pt[1]>m);){if(h[i][0].pt[1]===m){var x=Math.min((h[i][0].index-o[0].index+d)%d,(o[0].index-h[i][0].index+d)%d),b=Math.min((o[1].index-o[0].index+d)%d,(o[0].index-o[1].index+d)%d);x<y&&x<b&&(y=x,v=h[i][0].done?null:h[i])}i++}o=v}f.length&&g.push(f)}if(!g.length)return null;var w=new ol.geom.MultiLineString(g);return w.rotate(-r,[0,0]),w.cspline({pointsPerSeg:8,tension:.9})},ol.geohash={base32:"0123456789bcdefghjkmnpqrstuvwxyz"},ol.geohash.fromLonLat=function(t,e){var i=t[0],o=t[1];if(!e){for(var n=1;n<=12;n++){var r=ol.geohash.fromLonLat([i,o],n),s=ol.geohash.toLonLat(r);if(s.lat==o&&s.lon==i)return r}e=12}(e<1||e>12)&&(e=12);for(var a=0,l=0,c=!0,h="",u=-90,d=90,p=-180,g=180;h.length<e;){if(c){var f=(p+g)/2;i>=f?(a=2*a+1,p=f):(a*=2,g=f)}else{var m=(u+d)/2;o>=m?(a=2*a+1,u=m):(a*=2,d=m)}c=!c,5==++l&&(h+=ol.geohash.base32.charAt(a),l=0,a=0)}return h},ol.geohash.toLonLat=function(t){var e=ol.geohash.getExtent(t),i=e[1],o=e[0],n=e[3],r=e[2],s=(i+n)/2,a=(o+r)/2;return s=s.toFixed(Math.floor(2-Math.log(n-i)/Math.LN10)),a=a.toFixed(Math.floor(2-Math.log(r-o)/Math.LN10)),[Number(a),Number(s)]},ol.geohash.getExtent=function(t){if(!t)return!1;t=t.toLowerCase();for(var e=!0,i=-90,o=90,n=-180,r=180,s=0;s<t.length;s++){var a=t.charAt(s),l=ol.geohash.base32.indexOf(a);if(-1==l)return!1;for(var c=4;c>=0;c--){var h=l>>c&1;if(e){var u=(n+r)/2;1==h?n=u:r=u}else{var d=(i+o)/2;1==h?i=d:o=d}e=!e}}return[n,i,r,o]},ol.geohash.getAdjacent=function(t,e){if(t=t.toLowerCase(),e=e.toLowerCase(),!t)return!1;if(-1=="nsew".indexOf(e))return!1;var i=t.slice(-1),o=t.slice(0,-1),n=t.length%2;return-1!={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]}[e][n].indexOf(i)&&""!=o&&(o=ol.geohash.getAdjacent(o,e)),o+ol.geohash.base32.charAt({n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]}[e][n].indexOf(i))},ol.geohash.getNeighbours=function(t){return{n:ol.geohash.getAdjacent(t,"n"),ne:ol.geohash.getAdjacent(ol.geohash.getAdjacent(t,"n"),"e"),e:ol.geohash.getAdjacent(t,"e"),se:ol.geohash.getAdjacent(ol.geohash.getAdjacent(t,"s"),"e"),s:ol.geohash.getAdjacent(t,"s"),sw:ol.geohash.getAdjacent(ol.geohash.getAdjacent(t,"s"),"w"),w:ol.geohash.getAdjacent(t,"w"),nw:ol.geohash.getAdjacent(ol.geohash.getAdjacent(t,"n"),"w")}},ol.sphere.greatCircleBearing=function(t,e){var i=Math.PI/180,o=[t[0]*i,t[1]*i],n=[e[0]*i,e[1]*i];return Math.atan2(Math.sin(n[0]-o[0])*Math.cos(n[1]),Math.cos(o[1])*Math.sin(n[1])-Math.sin(o[1])*Math.cos(n[1])*Math.cos(n[0]-o[0]))},ol.sphere.computeDestinationPoint=function(t,e,i,o){o=o||{};var n=Math.PI/180,r=t[1]*n,s=t[0]*n,a=e/(o.radius||6371008.8),l=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(i)),c=(s+Math.atan2(Math.sin(i)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(l)))/n;return!1!==o.normalize&&(c<-180||c>180)&&(c=540*c%360-180),[c,l/n]},ol.sphere.greatCircleTrack=function(t,e,i){i=i||{};for(var o=ol.sphere.greatCircleBearing(t,e),n=ol.sphere.getDistance(t,e,i.radius),r=i.distance||1e3,s=r,a=[t];s<n;)a.push(ol.sphere.computeDestinationPoint(t,s,o,{radius:i.radius,normalize:!1})),s+=r;var l=ol.sphere.computeDestinationPoint(t,n,o,{radius:i.radius,normalize:!1});return Math.abs(l[0]-e[0])>1&&(l[0]>e[0]?e[0]+=360:e[0]-=360),a.push(e),a},ol.sphere.getMapScale=function(t,e){var i=t.getView(),o=i.getProjection(),n=i.getCenter(),r=t.getPixelFromCoordinate(n);r[1]+=1;var s=t.getCoordinateFromPixel(r);return ol.sphere.getDistance(ol.proj.transform(n,o,"EPSG:4326"),ol.proj.transform(s,o,"EPSG:4326"))*((e||96)/.0254)},ol.sphere.setMapScale=function(t,e,i){if(t&&e){var o=e;if("string"==typeof e&&((o=e.split("/")[1])||(o=e),o=o.replace(/[^\d]/g,""),o=parseInt(o)),!o)return;var n=t.getView(),r=n.getProjection(),s=n.getCenter(),a=t.getPixelFromCoordinate(s);a[1]+=1;var l=t.getCoordinateFromPixel(a),c=ol.sphere.getDistance(ol.proj.transform(s,r,"EPSG:4326"),ol.proj.transform(l,r,"EPSG:4326"));return c*=(i||96)/.0254,n.setResolution(n.getResolution()*o/c),o}},ol.Map.prototype.animExtent=function(t,e){var i;(e=e||{}).projection&&(t=ol.proj.transformExtent(t,e.projection,this.getView().getProjection()));var o=(new Date).getTime(),n=e.duration||1e3,r=e.easing||ol.easing.upAndDown,s=e.style&&e.style.getWidth()||2,a=e.style&&e.style.getColr()||"red";i=this.on("postcompose",(function(e){var l=e.frameState,c=l.pixelRatio,h=l.time-o;if(h>n)ol.Observable.unByKey(i);else{var u=h/n,d=this.getPixelFromCoordinate([t[0],t[1]]),p=this.getPixelFromCoordinate([t[2],t[3]]),g=e.context;g.save(),g.scale(c,c),g.beginPath(),g.globalAlpha=r(1-u),g.lineWidth=s,g.strokeStyle=a,g.rect(d[0],d[1],p[0]-d[0],p[1]-d[1]),g.stroke(),g.restore(),l.animate=!0}}).bind(this));try{this.renderSync()}catch(l){}},ol.geom.Geometry.prototype.cspline=function(t){return this.calcCSpline_?(this.csplineGeometryRevision==this.getRevision()&&this.csplineOption==JSON.stringify(t)||(this.csplineGeometry_=this.calcCSpline_(t),this.csplineGeometryRevision=this.getRevision(),this.csplineOption=JSON.stringify(t)),this.csplineGeometry_):this},ol.geom.GeometryCollection.prototype.calcCSpline_=function(t){for(var e=[],i=this.getGeometries(),o=0;o<i.length;o++)e.push(i[o].cspline(t));return new ol.geom.GeometryCollection(e)},ol.geom.MultiLineString.prototype.calcCSpline_=function(t){for(var e=[],i=this.getLineStrings(),o=0;o<i.length;o++)e.push(i[o].cspline(t).getCoordinates());return new ol.geom.MultiLineString(e)},ol.geom.Polygon.prototype.calcCSpline_=function(t){for(var e=[],i=this.getCoordinates(),o=0;o<i.length;o++)e.push(new ol.geom.LineString(i[o]).cspline(t).getCoordinates());return new ol.geom.Polygon(e)};ol.geom.MultiPolygon.prototype.calcCSpline_=function(t){for(var e=[],i=this.getPolygons(),o=0;o<i.length;o++)e.push(i[o].cspline(t).getCoordinates());return new ol.geom.MultiPolygon(e)},ol.coordinate.cspline=function(t,e){e||(e={});var i="number"==typeof e.tension?e.tension:.5,o=0,n=t[0];t.forEach(function(t){o+=ol.coordinate.dist2d(n,t),n=t});var r,s,a,l,c,h,u,d,p,g,f,m,y,v,x=e.resolution||o/t.length/(e.pointsPerSeg||10),b=[];function w(t,e,i,o){var n=i-t,r=o-e;return Math.sqrt(n*n+r*r)}for(r=t.slice(0),t.length>2&&t[0][0]==t[t.length-1][0]&&t[0][1]==t[t.length-1][1]?(r.unshift(t[t.length-2]),r.push(t[1])):(r.unshift(t[0]),r.push(t[t.length-1])),v=1;v<r.length-2;v++){var _=w(r[v][0],r[v][1],r[v+1][0],r[v+1][1]),S=Math.round(_/x),C=1;if(e.normalize){_=w(r[v+1][0],r[v+1][1],r[v-1][0],r[v-1][1]);var k=w(r[v+2][0],r[v+2][1],r[v][0],r[v][1]);C=_<k?_/k:k/_}for(l=(r[v+1][0]-r[v-1][0])*i*C,c=(r[v+2][0]-r[v][0])*i*C,h=(r[v+1][1]-r[v-1][1])*i*C,u=(r[v+2][1]-r[v][1])*i*C,y=0;y<=S;y++)m=y/S,d=2*Math.pow(m,3)-3*Math.pow(m,2)+1,p=-2*Math.pow(m,3)+3*Math.pow(m,2),g=Math.pow(m,3)-2*Math.pow(m,2)+m,f=Math.pow(m,3)-Math.pow(m,2),a=d*r[v][1]+p*r[v+1][1]+g*h+f*u,(s=d*r[v][0]+p*r[v+1][0]+g*l+f*c)&&a&&b.push([s,a])}return b},ol.geom.LineString.prototype.calcCSpline_=function(t){var e=this.getCoordinates(),i=ol.coordinate.cspline(e,t);return new ol.geom.LineString(i)},ol.HexGrid=function(t){t=t||{},ol.Object.call(this,t),this.size_=t.size||8e4,this.origin_=t.origin||[0,0],this.layout_=this.layout[t.layout]||this.layout.pointy},ol.ext.inherits(ol.HexGrid,ol.Object),ol.HexGrid.prototype.layout={pointy:[Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,Math.cos(Math.PI/180*30),Math.sin(Math.PI/180*30),Math.cos(Math.PI/180*90),Math.sin(Math.PI/180*90),Math.cos(Math.PI/180*150),Math.sin(Math.PI/180*150),Math.cos(Math.PI/180*210),Math.sin(Math.PI/180*210),Math.cos(Math.PI/180*270),Math.sin(Math.PI/180*270),Math.cos(Math.PI/180*330),Math.sin(Math.PI/180*330)],flat:[1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,Math.cos(Math.PI/180*0),Math.sin(Math.PI/180*0),Math.cos(Math.PI/180*60),Math.sin(Math.PI/180*60),Math.cos(Math.PI/180*120),Math.sin(Math.PI/180*120),Math.cos(Math.PI/180*180),Math.sin(Math.PI/180*180),Math.cos(Math.PI/180*240),Math.sin(Math.PI/180*240),Math.cos(Math.PI/180*300),Math.sin(Math.PI/180*300)]},ol.HexGrid.prototype.setLayout=function(t){this.layout_=this.layout[t]||this.layout.pointy,this.changed()},ol.HexGrid.prototype.getLayout=function(){return 0!=this.layout_[9]?"pointy":"flat"},ol.HexGrid.prototype.setOrigin=function(t){this.origin_=t,this.changed()},ol.HexGrid.prototype.getOrigin=function(){return this.origin_},ol.HexGrid.prototype.setSize=function(t){this.size_=t||8e4,this.changed()},ol.HexGrid.prototype.getSize=function(){return this.size_},ol.HexGrid.prototype.cube2hex=function(t){return[t[0],t[2]]},ol.HexGrid.prototype.hex2cube=function(t){return[t[0],-t[0]-t[1],t[1]]},ol.HexGrid.prototype.hex2offset=function(t){return this.layout_[9]?[t[0]+(t[1]-(1&t[1]))/2,t[1]]:[t[0],t[1]+(t[0]+(1&t[0]))/2]},ol.HexGrid.prototype.offset2hex=function(t){return this.layout_[9]?[t[0]-(t[1]-(1&t[1]))/2,t[1]]:[t[0],t[1]-(t[0]+(1&t[0]))/2]},ol.HexGrid.prototype.cube_round=function(t){var e=Math.round(t[0]),i=Math.round(t[1]),o=Math.round(t[2]),n=Math.abs(e-t[0]),r=Math.abs(i-t[1]),s=Math.abs(o-t[2]);return n>r&&n>s?e=-i-o:r>s?i=-e-o:o=-e-i,[e,i,o]},ol.HexGrid.prototype.hex_round=function(t){return this.cube2hex(this.cube_round(this.hex2cube(t)))},ol.HexGrid.prototype.hex_corner=function(t,e,i){return[t[0]+e*this.layout_[8+i%6*2],t[1]+e*this.layout_[9+i%6*2]]},ol.HexGrid.prototype.getHexagonAtCoord=function(t){return this.getHexagon(this.coord2hex(t))},ol.HexGrid.prototype.getHexagon=function(t){for(var e=[],i=this.hex2coord(t),o=0;o<=7;o++)e.push(this.hex_corner(i,this.size_,o,this.layout_[8]));return e},ol.HexGrid.prototype.hex2coord=function(t){return[this.origin_[0]+this.size_*(this.layout_[0]*t[0]+this.layout_[1]*t[1]),this.origin_[1]+this.size_*(this.layout_[2]*t[0]+this.layout_[3]*t[1])]},ol.HexGrid.prototype.coord2hex=function(t){var e=[(t[0]-this.origin_[0])/this.size_,(t[1]-this.origin_[1])/this.size_];return this.hex_round([this.layout_[4]*e[0]+this.layout_[5]*e[1],this.layout_[6]*e[0]+this.layout_[7]*e[1]])},ol.HexGrid.prototype.cube_distance=function(t,e){return Math.max(Math.abs(t[0]-e[0]),Math.abs(t[1]-e[1]),Math.abs(t[2]-e[2]))},function(){function t(t,e,i){return t+(e-t)*i}function e(e,i,o){return[t(e[0]+1e-6,i[0],o),t(e[1]+1e-6,i[1],o),t(e[2]+1e-6,i[2],o)]}ol.HexGrid.prototype.cube_line=function(t,i){var o=this.cube_distance(t,i);if(!o)return[t];for(var n=[],r=0;r<=o;r++)n.push(this.cube_round(e(t,i,r/o)));return n}}(),ol.HexGrid.prototype.neighbors={cube:[[1,-1,0],[1,0,-1],[0,1,-1],[-1,1,0],[-1,0,1],[0,-1,1]],hex:[[1,0],[1,-1],[0,-1],[-1,0],[-1,1],[0,1]]},ol.HexGrid.prototype.hex_neighbors=function(t,e){if(void 0!==e)return[t[0]+this.neighbors.hex[e%6][0],t[1]+this.neighbors.hex[e%6][1]];var i=[];for(e=0;e<6;e++)i.push([t[0]+this.neighbors.hex[e][0],t[1]+this.neighbors.hex[e][1]]);return i},ol.HexGrid.prototype.cube_neighbors=function(t,e){if(void 0!==e)return[t[0]+this.neighbors.cube[e%6][0],t[1]+this.neighbors.cube[e%6][1],t[2]+this.neighbors.cube[e%6][2]];var i=[];for(e=0;e<6;e++)i.push([t[0]+this.neighbors.cube[e][0],t[1]+this.neighbors.cube[e][1],t[2]+this.neighbors.cube[e][2]]);for(e=0;e<6;e++)i[e]=this.cube2hex(i[e]);return i},ol.InseeGrid=function(t){t=t||{},proj4.defs["EPSG:3035"]||(proj4.defs("EPSG:3035","+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"),ol.proj.proj4.register(proj4)),ol.Object.call(this,t);var e=Math.max(200,200*Math.round((t.size||0)/200));this.set("size",e)},ol.ext.inherits(ol.InseeGrid,ol.Object),ol.InseeGrid.extent=[32e5,2e6,43e5,314e4],ol.InseeGrid.prototype.getExtent=function(t){return ol.proj.transformExtent(ol.InseeGrid.extent,t||"EPSG:3035","EPSG:3857")},ol.InseeGrid.prototype.getGridAtCoordinate=function(t,e){var i=ol.proj.transform(t,e||"EPSG:3857","EPSG:3035"),o=this.get("size"),n=Math.floor(i[0]/o)*o,r=Math.floor(i[1]/o)*o,s=new ol.geom.Polygon([[[n,r],[n+o,r],[n+o,r+o],[n,r+o],[n,r]]]);return s.transform("EPSG:3035",e||"EPSG:3857"),s},ol.Map.prototype.markup=function(t,e){var i,o=this;(e=e||{}).projection&&(t=ol.proj.transform(t,e.projection,this.getView().getProjection()));var n=(new Date).getTime(),r=e.delay||3e3,s=1e3,a=e.maxZoom||100,l=ol.easing.easeOut,c=e.style;c||(c=new ol.style.Circle({radius:10,stroke:new ol.style.Stroke({color:"red",width:2})})),c instanceof ol.style.Image&&(c=new ol.style.Style({image:c})),c instanceof Array||(c=[c]),setTimeout(function(){if(i)try{o.renderSync()}catch(t){}},r),i=this.on("postcompose",(function(e){var o=e.frameState,h=o.time-n;if(h>r+s)ol.Observable.unByKey(i),i=null;else{r>h&&this.getView().getZoom()>a&&(r=h);var u=o.pixelRatio,d=0;h>r&&(d=(h-r)/s);var p=e.context;p.save(),p.beginPath(),p.globalAlpha=l(1-d);for(var g=0;g<c.length;g++){var f=c[g].getImage(),m=f.getScale();f.setScale(m*u),e.vectorContext.setStyle(c[g]),e.vectorContext.drawGeometry(new ol.geom.Point(t)),f.setScale(m)}p.restore(),h>=r&&(o.animate=!0)}}).bind(this));try{this.renderSync()}catch(h){}return i.stop=function(){r=s=0;try{this.target.renderSync()}catch(h){}},i},ol.ordering={},ol.ordering.yOrdering=function(){return function(t,e){return e.getGeometry().getExtent()[1]-t.getGeometry().getExtent()[1]}},ol.ordering.zIndex=function(t){t||(t={});var e=t.attribute||"zIndex";return t.equalFn?function(i,o){return i.get(e)==o.get(e)?t.equalFn(i,o):i.get(e)<o.get(e)?1:-1}:function(t,i){return t.get(e)==i.get(e)?0:t.get(e)<i.get(e)?1:-1}},ol.Map.prototype.pulse=function(t,e){var i;(e=e||{}).projection&&(t=ol.proj.transform(t,e.projection,this.getView().getProjection()));var o=(new Date).getTime(),n=e.duration||3e3,r=e.easing||ol.easing.easeOut,s=e.style;s||(s=new ol.style.Circle({radius:30,stroke:new ol.style.Stroke({color:"red",width:2})})),s instanceof ol.style.Image&&(s=new ol.style.Style({image:s})),s instanceof Array||(s=[s]);var a=e.amplitude||1;a<0&&(a=0);var l=e.radius||15;l<0&&(l=5),i=this.on("postcompose",(function(e){var l=e.frameState,c=l.pixelRatio,h=l.time-o;if(h>n)ol.Observable.unByKey(i);else{var u=h/n,d=e.context;d.save(),d.beginPath();var p=r(u);d.globalAlpha=r(1-u),console.log("anim");for(var g=0;g<s.length;g++){var f=s[g].getImage(),m=f.getScale();f.setScale(c*m*(1+a*(p-1))),e.vectorContext.setStyle(s[g]),e.vectorContext.drawGeometry(new ol.geom.Point(t)),f.setScale(m)}d.restore(),l.animate=!0}}).bind(this));try{this.renderSync()}catch(c){}},ol.style.Chart=function(t){var e=t||{},i=0;t.stroke&&(i=t.stroke.getWidth()),ol.style.RegularShape.call(this,{radius:e.radius+i,fill:new ol.style.Fill({color:[0,0,0]}),rotation:e.rotation,displacement:e.displacement,snapToPixel:e.snapToPixel}),e.scale&&this.setScale(e.scale),this._stroke=e.stroke,this._radius=e.radius||20,this._donutratio=e.donutRatio||.5,this._type=e.type,this._offset=[e.offsetX?e.offsetX:0,e.offsetY?e.offsetY:0],this._animation="number"==typeof e.animation?{animate:!0,step:e.animation}:this._animation={animate:!1,step:1},this._max=e.max,this._data=e.data,e.colors instanceof Array?this._colors=e.colors:(this._colors=ol.style.Chart.colors[e.colors],this._colors||(this._colors=ol.style.Chart.colors.classic)),this.renderChart_()},ol.ext.inherits(ol.style.Chart,ol.style.RegularShape),ol.style.Chart.colors={classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],dark:["#960","#003","#900","#060","#099","#909","#990","#090"],pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]},ol.style.Chart.prototype.clone=function(){var t=new ol.style.Chart({type:this._type,radius:this._radius,rotation:this.getRotation(),scale:this.getScale(),data:this.getData(),snapToPixel:!!this.getSnapToPixel&&this.getSnapToPixel(),stroke:this._stroke,colors:this._colors,offsetX:this._offset[0],offsetY:this._offset[1],animation:this._animation});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t},ol.style.Chart.prototype.getData=function(){return this._data},ol.style.Chart.prototype.setData=function(t){this._data=t,this.renderChart_()},ol.style.Chart.prototype.getRadius=function(){return this._radius},ol.style.Chart.prototype.setRadius=function(t,e){this._radius=t,this.donuratio_=e||this.donuratio_,this.renderChart_()},ol.style.Chart.prototype.setAnimation=function(t){if(!1===t){if(0==this._animation.animate)return;this._animation.animate=!1}else{if(this._animation.step==t)return;this._animation.animate=!0,this._animation.step=t}this.renderChart_()},ol.style.Chart.prototype.renderChart_=function(t){if(t){var e,i=0;this._stroke&&(e=ol.color.asString(this._stroke.getColor()),i=this._stroke.getWidth());var o=this.getImage(t),n=o.getContext("2d");n.save(),n.setTransform(t,0,0,t,0,0),n.clearRect(0,0,o.width,o.height),n.lineJoin="round";var r,s,a=0;for(r=0;r<this._data.length;r++)a+=this._data[r];n.translate(0,0);var l=this._animation.animate?this._animation.step:1;switch(this._type){case"donut":case"pie3D":case"pie":var c,h=Math.PI*(l-1.5);for(s=o.width/2/t,n.strokeStyle=e,n.lineWidth=i,n.save(),"pie3D"==this._type&&(n.translate(0,.3*s),n.scale(1,.7),n.beginPath(),n.fillStyle="#369",n.arc(s,1.4*s,this._radius*l,0,2*Math.PI),n.fill(),n.stroke()),"donut"==this._type&&(n.save(),n.beginPath(),n.rect(0,0,2*s,2*s),n.arc(s,s,this._radius*l*this._donutratio,0,2*Math.PI),n.clip("evenodd")),r=0;r<this._data.length;r++)n.beginPath(),n.moveTo(s,s),n.fillStyle=this._colors[r%this._colors.length],c=h+2*Math.PI*this._data[r]/a*l,n.arc(s,s,this._radius*l,h,c),n.closePath(),n.fill(),n.stroke(),h=c;"donut"==this._type&&(n.restore(),n.beginPath(),n.strokeStyle=e,n.lineWidth=i,n.arc(s,s,this._radius*l*this._donutratio,Math.PI*(l-1.5),h),n.stroke()),n.restore();break;case"bar":default:var u=0;if(this._max)u=this._max;else for(r=0;r<this._data.length;r++)u<this._data[r]&&(u=this._data[r]);var d,p=Math.min(5,2*this._radius/this._data.length),g=o.width/t-i,f=(s=o.width/2/t)-this._data.length*p/2;for(n.strokeStyle=e,n.lineWidth=i,r=0;r<this._data.length;r++){n.beginPath(),n.fillStyle=this._colors[r%this._colors.length],d=f+p;var m=this._data[r]/u*2*this._radius*l;n.rect(f,g-m,p,m),n.closePath(),n.fill(),n.stroke(),f=d}}if(n.restore(),!this.setDisplacement){var y=this.getAnchor();y[0]=s-this._offset[0],y[1]=s-this._offset[1]}}else this.getPixelRatio?(t=window.devicePixelRatio,this.renderChart_(t),this.getPixelRatio&&1!==t&&this.renderChart_(1)):this.renderChart_(1)},ol.style.FillPattern=function(t){var e;t||(t={});var i=this.canvas_=document.createElement("canvas"),o=(Number(t.scale)>0?Number(t.scale):1)*ol.has.DEVICE_PIXEL_RATIO||ol.has.DEVICE_PIXEL_RATIO,n=i.getContext("2d");if(t.image){var r;t.image.load();var s=t.image.getImage();if(s.width)i.width=Math.round(s.width*o),i.height=Math.round(s.height*o),n.globalAlpha="number"==typeof t.opacity?t.opacity:1,n.drawImage(s,0,0,s.width,s.height,0,0,i.width,i.height),e=n.createPattern(i,"repeat");else{var a=this;e=[0,0,0,0],s.onload=function(){i.width=Math.round(s.width*o),i.height=Math.round(s.height*o),n.globalAlpha="number"==typeof t.opacity?t.opacity:1,n.drawImage(s,0,0,s.width,s.height,0,0,i.width,i.height),e=n.createPattern(i,"repeat"),a.setColor(e)}}}else{var l=this.getPattern_(t);if(i.width=Math.round(l.width*o),i.height=Math.round(l.height*o),n.beginPath(),t.fill&&(n.fillStyle=ol.color.asString(t.fill.getColor()),n.fillRect(0,0,i.width,i.height)),n.scale(o,o),n.lineCap="round",n.lineWidth=l.stroke||1,n.fillStyle=ol.color.asString(t.color||"#000"),n.strokeStyle=ol.color.asString(t.color||"#000"),l.circles)for(r=0;r<l.circles.length;r++){var c=l.circles[r];n.beginPath(),n.arc(c[0],c[1],c[2],0,2*Math.PI),l.fill&&n.fill(),l.stroke&&n.stroke()}if(l.repeat||(l.repeat=[[0,0]]),l.char&&(n.font=l.font||l.width+"px Arial",n.textAlign="center",n.textBaseline="middle",l.angle?(n.fillText(l.char,l.width/4,l.height/4),n.fillText(l.char,5*l.width/4,5*l.height/4),n.fillText(l.char,l.width/4,5*l.height/4),n.fillText(l.char,5*l.width/4,l.height/4),n.fillText(l.char,3*l.width/4,3*l.height/4),n.fillText(l.char,-l.width/4,-l.height/4),n.fillText(l.char,3*l.width/4,-l.height/4),n.fillText(l.char,-l.width/4,3*l.height/4)):n.fillText(l.char,l.width/2,l.height/2)),l.lines)for(r=0;r<l.lines.length;r++)for(var h=0;h<l.repeat.length;h++){var u=l.lines[r];n.beginPath(),n.moveTo(u[0]+l.repeat[h][0],u[1]+l.repeat[h][1]);for(var d=2;d<u.length;d+=2)n.lineTo(u[d]+l.repeat[h][0],u[d+1]+l.repeat[h][1]);l.fill&&n.fill(),l.stroke&&n.stroke(),n.save(),n.strokeStyle="red",n.strokeWidth=.1,n.restore()}if(e=n.createPattern(i,"repeat"),t.offset){var p=t.offset;if("number"==typeof p&&(p=[p,p]),p instanceof Array){var g=Math.round(p[0]*o),f=Math.round(p[1]*o);n.scale(1/o,1/o),n.clearRect(0,0,i.width,i.height),n.translate(g,f),n.fillStyle=e,n.fillRect(-g,-f,i.width,i.height),e=n.createPattern(i,"repeat")}}}ol.style.Fill.call(this,{color:e})},ol.ext.inherits(ol.style.FillPattern,ol.style.Fill),ol.style.FillPattern.prototype.clone=function(){var t=ol.style.Fill.prototype.clone.call(this);return t.canvas_=this.canvas_,t},ol.style.FillPattern.prototype.getImage=function(){return this.canvas_},ol.style.FillPattern.prototype.getPattern_=function(t){var e,i=ol.style.FillPattern.prototype.patterns[t.pattern]||ol.style.FillPattern.prototype.patterns.dot,o=Math.round(t.spacing)||10;switch(t.pattern){case"dot":case"circle":e=0===t.size?0:t.size/2||2,t.angle?(o=i.width=i.height=Math.round(1.4*o),i.circles=[[o/4,o/4,e],[3*o/4,3*o/4,e]],"circle"==t.pattern&&(i.circles=i.circles.concat([[o/4+o,o/4,e],[o/4,o/4+o,e],[3*o/4-o,3*o/4,e],[3*o/4,3*o/4-o,e],[o/4+o,o/4+o,e],[3*o/4-o,3*o/4-o,e]]))):(i.width=i.height=o,i.circles=[[o/2,o/2,e]],"circle"==t.pattern&&(i.circles=i.circles.concat([[o/2+o,o/2,e],[o/2-o,o/2,e],[o/2,o/2+o,e],[o/2,o/2-o,e],[o/2+o,o/2+o,e],[o/2+o,o/2-o,e],[o/2-o,o/2+o,e],[o/2-o,o/2-o,e]])));break;case"tile":case"square":e=0===t.size?0:t.size/2||2,t.angle?(i.width=i.height=o,i.lines=[[o/2-e,o/2,o/2,o/2-e,o/2+e,o/2,o/2,o/2+e,o/2-e,o/2]]):(i.width=i.height=o,i.lines=[[o/2-e,o/2-e,o/2+e,o/2-e,o/2+e,o/2+e,o/2-e,o/2+e,o/2-e,o/2-e]]),"square"==t.pattern&&(i.repeat=[[0,0],[0,o],[o,0],[0,-o],[-o,0],[-o,-o],[o,o],[-o,o],[o,-o]]);break;case"cross":t.angle&&(t.angle=45);case"hatch":var n=Math.round(((t.angle||0)-90)%360);n>180&&(n-=360),n*=Math.PI/180;var r=Math.cos(n),s=Math.sin(n);if(Math.abs(s)<1e-4)i.width=i.height=o,i.lines=[[0,.5,o,.5]],i.repeat=[[0,0],[0,o]];else if(Math.abs(r)<1e-4)i.width=i.height=o,i.lines=[[.5,0,.5,o]],i.repeat=[[0,0],[o,0]],"cross"==t.pattern&&(i.lines.push([0,.5,o,.5]),i.repeat.push([0,o]));else{var a=i.width=Math.round(Math.abs(o/s))||1,l=i.height=Math.round(Math.abs(o/r))||1;"cross"==t.pattern?(i.lines=[[-a,-l,2*a,2*l],[2*a,-l,-a,2*l]],i.repeat=[[0,0]]):r*s>0?(i.lines=[[-a,-l,2*a,2*l]],i.repeat=[[0,0],[a,0],[0,l]]):(i.lines=[[2*a,-l,-a,2*l]],i.repeat=[[0,0],[-a,0],[0,l]])}i.stroke=0===t.size?0:t.size||4}return i},ol.style.FillPattern.addPattern=function(t,e){e||(e={}),ol.style.FillPattern.prototype.patterns[t||e.char]={width:e.width||e.size||10,height:e.height||e.size||10,font:e.font,char:e.char,circles:e.circles,lines:e.lines,repeat:e.repeat,stroke:e.stroke,angle:e.angle,fill:e.fill}},ol.style.FillPattern.prototype.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:!1,fill:!0},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:!1},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:!1},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:!0},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:60,height:40,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],repeat:[[30,0],[-15,20],[15,20],[45,20]],stroke:1},conglomerate2:{width:60,height:40,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],repeat:[[30,0],[-15,20],[15,20],[45,20]],fill:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},reed:{width:26,height:23,lines:[[2.5,10,2,7],[4.5,10,4.2,4],[6.5,10,6.8,4],[8.5,10,9,6],[3.7,4,3.7,2.5],[4.7,4,4.7,2.5],[6.3,4,6.3,2.5],[7.3,4,7.3,2.5]],circles:[[4.2,2.5,.5],[18.2,12.5,.5],[6.8,2.5,.5],[20.8,12.5,.5],[9,6,.5],[23,16,.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},forest2:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],fill:1,stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},tree2:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78,4.95,10.61,7.78,10.61]],repeat:[[3,1],[18,16]],fill:1,stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pine2:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49,2.83,11.31,5.66,11.31]],repeat:[[3,1],[18,16]],fill:1,stroke:1},mixtree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78,4.95,10.61,7.78,10.61],[23.66,27.31,20.83,27.31,20.83,24.49,18,24.49,20.83,16,23.66,24.49,20.83,24.49,20.83,27.31,23.66,27.31]],repeat:[[3,1]],stroke:1},mixtree2:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78,4.95,10.61,7.78,10.61],[23.66,27.31,20.83,27.31,20.83,24.49,18,24.49,20.83,16,23.66,24.49,20.83,24.49,20.83,27.31,23.66,27.31]],repeat:[[3,1]],fill:1,stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}},ol.style.FlowLine=function(t){t||(t={}),ol.style.Style.call(this,{renderer:this._render.bind(this),stroke:t.stroke,text:t.text,zIndex:t.zIndex,geometry:t.geometry}),this._visible=!1!==t.visible,"function"==typeof t.width?this._widthFn=t.width:this.setWidth(t.width),this.setWidth2(t.width2),"function"==typeof t.color?this._colorFn=t.color:this.setColor(t.color),this.setColor2(t.color2),this.setLineCap(t.lineCap),this.setArrow(t.arrow),this.setArrowSize(t.arrowSize),this.setArrowColor(t.arrowColor),this._offset=[0,0],this.setOffset(t.offset0,0),this.setOffset(t.offset1,1),this._noOverlap=t.noOverlap},ol.ext.inherits(ol.style.FlowLine,ol.style.Style),ol.style.FlowLine.prototype.setWidth=function(t){this._width=t||0},ol.style.FlowLine.prototype.setWidth2=function(t){this._width2=t},ol.style.FlowLine.prototype.getOffset=function(t){return this._offset[t]},ol.style.FlowLine.prototype.setOffset=function(t,e){switch(t=Math.max(0,parseFloat(t)),e){case 0:this._offset[0]=t;break;case 1:this._offset[1]=t}},ol.style.FlowLine.prototype.setLineCap=function(t){this._lineCap="round"===t?"round":"butt"},ol.style.FlowLine.prototype.getWidth=function(t,e){return this._widthFn?this._widthFn(t,e):this._width+(("number"==typeof this._width2?this._width2:this._width)-this._width)*e},ol.style.FlowLine.prototype.setColor=function(t){try{this._color=ol.color.asArray(t)}catch(e){this._color=[0,0,0,1]}},ol.style.FlowLine.prototype.setColor2=function(t){try{this._color2=ol.color.asArray(t)}catch(e){this._color2=null}},ol.style.FlowLine.prototype.setArrowColor=function(t){try{this._acolor=ol.color.asString(t)}catch(e){this._acolor=null}},ol.style.FlowLine.prototype.getColor=function(t,e){if(this._colorFn)return ol.color.asString(this._colorFn(t,e));var i=this._color,o=this._color2||this._color;return"rgba("+ +Math.round(i[0]+(o[0]-i[0])*e)+","+Math.round(i[1]+(o[1]-i[1])*e)+","+Math.round(i[2]+(o[2]-i[2])*e)+","+(i[3]+(o[3]-i[3])*e)+")"},ol.style.FlowLine.prototype.getArrow=function(){return this._arrow},ol.style.FlowLine.prototype.setArrow=function(t){this._arrow=parseInt(t),(this._arrow<-1||this._arrow>2)&&(this._arrow=0)},ol.style.FlowLine.prototype.getArrowSize=function(){return this._arrowSize||[16,16]},ol.style.FlowLine.prototype.setArrowSize=function(t){Array.isArray(t)?this._arrowSize=t:"number"==typeof t&&(this._arrowSize=[t,t])},ol.style.FlowLine.prototype.drawArrow=function(t,e,i,o,n){var r=this.getArrowSize()[0]*n,s=ol.coordinate.dist2d(e,i),a=(e[0]-i[0])/s,l=(e[1]-i[1])/s;o=Math.max(this.getArrowSize()[1]/2,o/2)*n,t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[0]-r*a+o*l,e[1]-r*l-o*a),t.lineTo(e[0]-r*a-o*l,e[1]-r*l+o*a),t.lineTo(e[0],e[1]),t.fill()},ol.style.FlowLine.prototype._render=function(t,e){if("LineString"===e.geometry.getType()){var i,o,n,r=e.context;if(!this._visible){var s=e.pixelRatio/e.resolution,a=Math.cos(e.rotation),l=Math.sin(e.rotation);o=e.geometry.getCoordinates();var c=t[0][0]-o[0][0]*s*a-o[0][1]*s*l,h=t[0][1]-o[0][0]*s*l+o[0][1]*s*a;for(t=[],i=0;n=o[i];i++)t[i]=[c+n[0]*s*a+n[1]*s*l,h+n[0]*s*l-n[1]*s*a,n[2]]}var u=this.getArrowSize()[0]*e.pixelRatio;r.save(),this.getOffset(0)&&this._splitAsize(t,this.getOffset(0)*e.pixelRatio),this.getOffset(1)&&this._splitAsize(t,this.getOffset(1)*e.pixelRatio,!0),t.length>1&&(-1===this.getArrow()||2===this.getArrow())&&(n=this._splitAsize(t,u),r.fillStyle=this._acolor?this._acolor:this.getColor(e.feature,0),this.drawArrow(r,n[0],n[1],this.getWidth(e.feature,0),e.pixelRatio)),t.length>1&&this.getArrow()>0&&(n=this._splitAsize(t,u,!0),r.fillStyle=this._acolor?this._acolor:this.getColor(e.feature,1),this.drawArrow(r,n[0],n[1],this.getWidth(e.feature,1),e.pixelRatio));var d=this._splitInto(t,255,2),p=0,g=d.length;if(r.lineJoin="round",r.lineCap=this._lineCap||"butt",d.length>1)for(p=0;p<d.length;p++){var f=p/g;for(o=d[p],r.lineWidth=this.getWidth(e.feature,f)*e.pixelRatio,r.strokeStyle=this.getColor(e.feature,f),r.beginPath(),r.moveTo(o[0][0],o[0][1]),i=1;n=o[i];i++)r.lineTo(n[0],n[1]);r.stroke()}r.restore()}},ol.style.FlowLine.prototype._splitAsize=function(t,e,i){var o,n,r,s,a=0;for(o=r=i?t.pop():t.shift();t.length;){if(n=i?t.pop():t.shift(),a+(s=ol.coordinate.dist2d(o,n))>e){o=[o[0]+(n[0]-o[0])*(e-a)/s,o[1]+(n[1]-o[1])*(e-a)/s],s=ol.coordinate.dist2d(o,r),i?(t.push(n),t.push(o),t.push([o[0]+(r[0]-o[0])/s,o[1]+(r[1]-o[1])/s])):(t.unshift(n),t.unshift(o),t.unshift([o[0]+(r[0]-o[0])/s,o[1]+(r[1]-o[1])/s]));break}a+=s,o=n}return[r,o]},ol.style.FlowLine.prototype._splitInto=function(t,e,i){var o,n,r,s=this._noOverlap?1:.9,a=[],l=0;for(o=1;n=t[o];o++)l+=ol.coordinate.dist2d(t[o-1],n);var c=Math.max(i||2,l/(e||255)),h=t[0];l=0;var u=[h];for(o=1,n=t[1];o<t.length;){var d=n[0]-h[0],p=n[1]-h[1];if(l+(r=Math.sqrt(d*d+p*p))>c){var g=(c-l)/r;u.push([h[0]+d*g,h[1]+p*g]),a.push(u),u=[h=[h[0]+d*g*s,h[1]+p*g*s]],l=0}else l+=r,u.push(h=n),n=t[++o]}return a.push(u),a},ol.style.FontSymbol=function(t){var e=0;(t=t||{}).stroke&&(e=t.stroke.getWidth()),ol.style.RegularShape.call(this,{radius:t.radius,fill:t.fill,rotation:t.rotation,rotateWithView:t.rotateWithView}),"number"==typeof t.opacity&&this.setOpacity(t.opacity),this.color_=t.color,this.fontSize_=t.fontSize||1,this.fontStyle_=t.fontStyle||"",this.stroke_=t.stroke,this.fill_=t.fill,this.radius_=t.radius-e,this.form_=t.form||"none",this.gradient_=t.gradient,this.offset_=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],this.glyph_=t.glyph?this.getGlyph(t.glyph):this.getTextGlyph(t.text||"",t.font),this.renderMarker_()},ol.ext.inherits(ol.style.FontSymbol,ol.style.RegularShape),ol.style.Image.prototype.getImagePNG=function(){var t=this.getImage();if(!t)return!1;try{return t.toDataURL("image/png")}catch(e){return!1}},ol.style.FontSymbol.prototype.defs={fonts:{},glyphs:{}},ol.style.FontSymbol.addDefs=function(t,e){var i=t;if("string"==typeof t&&(i={font:t,name:t,copyright:""}),i.font&&"string"==typeof i.font){var o=i.font;for(var n in ol.style.FontSymbol.prototype.defs.fonts[o]=i,e){var r=e[n];"string"==typeof r&&1==r.length&&(r={char:r}),ol.style.FontSymbol.prototype.defs.glyphs[n]={font:i.font,char:r.char||""+String.fromCharCode(r.code)||"",theme:r.theme||i.name,name:r.name||n,search:r.search||""}}}else console.log("bad font def")},ol.style.FontSymbol.prototype.clone=function(){var t=new ol.style.FontSymbol({glyph:"",color:this.color_,fontSize:this.fontSize_,fontStyle:this.fontStyle_,stroke:this.stroke_,fill:this.fill_,radius:this.radius_+(this.stroke_?this.stroke_.getWidth():0),form:this.form_,gradient:this.gradient_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setScale(this.getScale()),t.glyph_=this.glyph_,t.renderMarker_(),t},ol.style.FontSymbol.prototype.getFill=function(){return this.fill_},ol.style.FontSymbol.prototype.getStroke=function(){return this.stroke_},ol.style.FontSymbol.prototype.getGlyph=function(t){return t?ol.style.FontSymbol.prototype.defs.glyphs[t]||{font:"sans-serif",char:t.charAt(0),theme:"none",name:"none",search:""}:this.glyph_},ol.style.FontSymbol.prototype.getTextGlyph=function(t,e){return{font:e||"sans-serif",char:String(t),theme:"none",name:"none",search:""}},ol.style.FontSymbol.prototype.getGlyphName=function(){for(var t in ol.style.FontSymbol.prototype.defs.glyphs)if(ol.style.FontSymbol.prototype.defs.glyphs[t]===this.glyph_)return t;return""},ol.style.FontSymbol.prototype.getFontInfo=function(t){return ol.style.FontSymbol.prototype.defs.fonts[t.font]},ol.style.FontSymbol.prototype.renderMarker_=function(t){if(t){var e,i=0;this.stroke_&&(e=ol.color.asString(this.stroke_.getColor()),i=this.stroke_.getWidth());var o=this.getImage(t),n={strokeStyle:e,strokeWidth:i,size:o.width/t},r=o.getContext("2d");if(r.clearRect(0,0,o.width,o.height),this.drawMarker_(n,r,0,0,t),this.setDisplacement)this.setDisplacement([this.offset_[0],-this.offset_[1]]);else{var s=this.getAnchor();s[0]=o.width/2-this.offset_[0],s[1]=o.width/2-this.offset_[1]}}else this.getPixelRatio?(t=window.devicePixelRatio,this.renderMarker_(t),this.getPixelRatio&&1!==t&&this.renderMarker_(1)):this.renderMarker_(1)},ol.style.FontSymbol.prototype.drawPath_=function(t,e){var i=2*this.radius_+t.strokeWidth+1,o=t.strokeWidth/2,n=t.size/2,r={fac:1,posX:t.size/2,posY:t.size/2};switch(e.lineJoin="round",e.beginPath(),this.form_){case"none":r.fac=1;break;case"circle":case"ban":e.arc(n,n,i/2,0,2*Math.PI,!0);break;case"poi":e.arc(n,n-.4*this.radius_,.6*this.radius_,.15*Math.PI,.85*Math.PI,!0),e.lineTo(n-.89*.05*i,(.95+.45*.05)*i+o),e.arc(n,.95*i+o,.05*i,.85*Math.PI,.15*Math.PI,!0),r={fac:.45,posX:n,posY:n-.35*this.radius_};break;case"bubble":e.arc(n,n-.2*this.radius_,.8*this.radius_,.4*Math.PI,.6*Math.PI,!0),e.lineTo(.5*i+o,i+o),r={fac:.7,posX:n,posY:n-.2*this.radius_};break;case"marker":e.arc(n,n-.2*this.radius_,.8*this.radius_,.25*Math.PI,.75*Math.PI,!0),e.lineTo(.5*i+o,i+o),r={fac:.7,posX:n,posY:n-.2*this.radius_};break;case"coma":e.moveTo(n+.8*this.radius_,n-.2*this.radius_),e.quadraticCurveTo(.95*i+o,.75*i+o,.5*i+o,i+o),e.arc(n,n-.2*this.radius_,.8*this.radius_,.45*Math.PI,0,!1),r={fac:.7,posX:n,posY:n-.2*this.radius_};break;default:var s;switch(this.form_){case"shield":s=[.05,0,.95,0,.95,.8,.5,1,.05,.8,.05,0],r.posY=.45*i+o;break;case"blazon":s=[.1,0,.9,0,.9,.8,.6,.8,.5,1,.4,.8,.1,.8,.1,0],r.fac=.8,r.posY=.4*i+o;break;case"bookmark":s=[.05,0,.95,0,.95,1,.5,.8,.05,1,.05,0],r.fac=.9,r.posY=.4*i+o;break;case"hexagon":s=[.05,.2,.5,0,.95,.2,.95,.8,.5,1,.05,.8,.05,.2],r.fac=.9,r.posY=.5*i+o;break;case"diamond":s=[.25,0,.75,0,1,.2,1,.4,.5,1,0,.4,0,.2,.25,0],r.fac=.75,r.posY=.35*i+o;break;case"triangle":s=[0,0,1,0,.5,1,0,0],r.fac=.6,r.posY=.3*i+o;break;case"sign":s=[.5,.05,1,.95,0,.95,.5,.05],r.fac=.7,r.posY=.65*i+o;break;case"lozenge":s=[.5,0,1,.5,.5,1,0,.5,.5,0],r.fac=.7;break;case"square":default:s=[0,0,1,0,1,1,0,1,0,0]}for(var a=0;a<s.length;a+=2)e.lineTo(s[a]*i+o,s[a+1]*i+o)}return e.closePath(),r},ol.style.FontSymbol.prototype.drawMarker_=function(t,e,i,o,n){var r=this.fill_?this.fill_.getColor():"#000",s=this.stroke_?this.stroke_.getColor():"#000";"none"==this.form_&&this.stroke_&&this.fill_&&(s=this.fill_.getColor(),r=this.stroke_.getColor()),e.setTransform(n,0,0,n,0,0),e.translate(i,o);var a=this.drawPath_(t,e,n);if(this.fill_){if(this.gradient_&&"none"!=this.form_){var l=e.createLinearGradient(0,0,t.size/2,t.size);l.addColorStop(1,ol.color.asString(r)),l.addColorStop(0,ol.color.asString(s)),e.fillStyle=l}else e.fillStyle=ol.color.asString(r);e.fill()}if(this.stroke_&&t.strokeWidth&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.stroke()),this.glyph_.char){e.font=this.fontStyle_+" "+2*a.fac*this.radius_*this.fontSize_+"px "+this.glyph_.font,e.strokeStyle=e.fillStyle,e.lineWidth=t.strokeWidth*("none"==this.form_?2:1),e.fillStyle=ol.color.asString(this.color_||s),e.textAlign="center",e.textBaseline="middle";var c=this.glyph_.char;t.strokeWidth&&"transparent"!=s&&e.strokeText(c,a.posX,a.posY),e.fillText(c,a.posX,a.posY)}if("ban"==this.form_&&this.stroke_&&t.strokeWidth){e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth;var h=this.radius_+t.strokeWidth,u=this.radius_*Math.cos(Math.PI/4);e.moveTo(h+u,h-u),e.lineTo(h-u,h+u),e.stroke()}},ol.style.FontSymbol.prototype.getChecksum=function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.form_+"-"+this.glyphs_!=this.checksums_[4]){var i="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[i,t,e,this.radius_,this.form_+"-"+this.glyphs_]}return this.checksums_[0]},ol.style.Photo=function(t){this.sanchor_="anchored"==(t=t||{}).kind?8:0,this._shadow=Number(t.shadow)||0,t.stroke||(t.stroke=new ol.style.Stroke({width:0,color:"#000"}));var e=t.stroke.getWidth();if(e<0&&(e=0),"folio"==t.kind&&(e+=6),t.stroke.setWidth(e),ol.style.RegularShape.call(this,{radius:t.radius+e+this.sanchor_/2+this._shadow/2,points:0,fill:ol.style.RegularShape.prototype.render?new ol.style.Fill({color:[0,0,0,0]}):null}),!this.getHitDetectionImage){var i=this.getImage();if(!this.hitDetectionCanvas_)for(var o in this)if(this[o]&&this[o].getContext&&this[o]!==i){this.hitDetectionCanvas_=this[o];break}this.hitDetectionCanvas_=document.createElement("canvas"),this.hitDetectionCanvas_.width=i.width,this.hitDetectionCanvas_.height=i.height;var n=this.hitDetectionCanvas_;this.getHitDetectionImage=function(){return n}}this._stroke=t.stroke,this._fill=t.fill,this._crop=t.crop,this._crossOrigin=t.crossOrigin,this._kind=t.kind||"default",this._radius=t.radius,this._src=t.src,this._offset=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],this._onload=t.onload,"number"==typeof t.opacity&&this.setOpacity(t.opacity),"number"==typeof t.rotation&&this.setRotation(t.rotation),this.renderPhoto_()},ol.ext.inherits(ol.style.Photo,ol.style.RegularShape),ol.style.Photo.prototype.setOffset=function(t){this._offset=[t[0]||0,t[1]||0],this.renderPhoto_()},ol.style.Photo.prototype.clone=function(){var t=new ol.style.Photo({stroke:this._stroke,fill:this._fill,shadow:this._shadow,crop:this._crop,crossOrigin:this._crossOrigin,kind:this._kind,radius:this._radius,src:this._src,offsetX:this._offset[0],offsetY:this._offset[1],opacity:this.getOpacity(),rotation:this.getRotation()});return t.renderPhoto_(),t},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,o,n){return n?(i<2*n&&(n=i/2),o<2*n&&(n=o/2),this.beginPath(),this.moveTo(t+n,e),this.arcTo(t+i,e,t+i,e+o,n),this.arcTo(t+i,e+o,t,e+o,n),this.arcTo(t,e+o,t,e,n),this.arcTo(t,e,t+i,e,n),this.closePath()):this.rect(t,e,i,o),this},ol.style.Photo.prototype.drawBack_=function(t,e,i,o){var n=this._shadow,r=t.canvas;t.beginPath(),t.fillStyle=e,t.clearRect(0,0,r.width,r.height);var s=r.width/o,a=r.height/o;switch(this._kind){case"square":t.rect(0,0,s-n,a-n);break;case"circle":t.arc(this._radius+i,this._radius+i,this._radius+i,0,2*Math.PI,!1);break;case"folio":i-=6,t.strokeStyle="rgba(0,0,0,0.5)",t.lineWidth=1;var l=s-n-12,c=Math.atan(6/l);t.save(),t.rotate(-c),t.translate(-6,2),t.beginPath(),t.rect(6,6,l,l),t.stroke(),t.fill(),t.restore(),t.save(),t.translate(6,-1),t.rotate(c),t.beginPath(),t.rect(6,6,l,l),t.stroke(),t.fill(),t.restore(),t.beginPath(),t.rect(6,6,l,l),t.stroke();break;case"anchored":t.roundRect(this.sanchor_/2,0,s-this.sanchor_-n,a-this.sanchor_-n,i),t.moveTo(s/2-this.sanchor_-n/2,a-this.sanchor_-n),t.lineTo(s/2+this.sanchor_-n/2,a-this.sanchor_-n),t.lineTo(s/2-n/2,a-n);break;default:t.roundRect(0,0,s-n,a-n,i)}t.closePath()},ol.style.Photo.prototype.renderPhoto_=function(t){if(t){var e,i=0;this._stroke&&(e=ol.color.asString(this._stroke.getColor()),i=this._stroke.getWidth());var o=this.getImage(t),n=this.getHitDetectionImage().getContext("2d");n.save(),n.setTransform(1,0,0,1,0,0),this.drawBack_(n,"#000",i,1),n.fill(),n.restore(),(n=o.getContext("2d")).save(),n.setTransform(t,0,0,t,0,0),this.drawBack_(n,e,i,t),this._shadow&&(n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=t*this._shadow/2,n.shadowOffsetX=t*this._shadow/2,n.shadowOffsetY=t*this._shadow/2),n.fill(),n.restore();var r=this,s=this.img_=new Image;this._crossOrigin&&(s.crossOrigin=this._crossOrigin),s.src=this._src,s.width?r.drawImage_(s):s.onload=function(){r.drawImage_(s),r._onload&&r._onload()};var a=this.getAnchor();a[0]=(o.width/t-this._shadow)/2-this._offset[0],a[1]=this.sanchor_?o.height/t-this._shadow-this._offset[1]:(o.height/t-this._shadow)/2-this._offset[1]}else this.getPixelRatio?(t=window.devicePixelRatio,this.renderPhoto_(t)):this.renderPhoto_(1)},ol.style.Photo.prototype.drawImage_=function(t){var e=window.devicePixelRatio,i=this.getImage(e).getContext("2d"),o=0;this._stroke&&(o=this._stroke.getWidth());var n,r,s,a,l,c,h,u,d,p=2*this._radius;i.save(),ol.style.RegularShape.prototype.render&&i.setTransform(e,0,0,e,0,0),"circle"==this._kind&&(i.beginPath(),i.arc(this._radius+o,this._radius+o,this._radius,0,2*Math.PI,!1),i.clip()),this._crop?(u=d=(n=Math.min(t.width/p,t.height/p))*p,c=(t.width-u)/2,h=(t.height-d)/2,r=s=0,a=l=p+1):(c=h=0,r=(p-(a=(n=Math.min(p/t.width,p/t.height))*(u=t.width)))/2,s=(p-(l=n*(d=t.height)))/2),i.drawImage(t,c,h,u,d,r+=o+this.sanchor_/2,s+=o,a,l),"circle"==this._kind&&o&&(i.beginPath(),i.strokeStyle=ol.color.asString(this._stroke.getColor()),i.lineWidth=o/4,i.arc(this._radius+o,this._radius+o,this._radius,0,2*Math.PI,!1),i.stroke()),i.restore()},ol.style.Profile=function(t){t||(t={}),ol.style.Style.call(this,{renderer:this._render.bind(this),zIndex:t.zIndex,geometry:t.geometry}),this.setStroke(t.stroke),this.setFill(t.fill),this.setScale(t.scale)},ol.ext.inherits(ol.style.Profile,ol.style.Style),ol.style.Profile.prototype.setStroke=function(t){this._stroke=t||new ol.style.Stroke({color:"#fff",width:1})},ol.style.Profile.prototype.getStroke=function(){return this._stroke},ol.style.Profile.prototype.setFill=function(t){this._fill=t||new ol.style.Fill({color:"rgba(255,255,255,.3"})},ol.style.Profile.prototype.getFill=function(){return this._fill},ol.style.Profile.prototype.setScale=function(t){this._scale=t||.2},ol.style.Profile.prototype.getScale=function(){return this._scale},ol.style.Profile.prototype._render=function(t,e){if(/Z/.test(e.feature.getGeometry().getLayout())){var i=e.geometry.getCoordinates();switch(e.geometry.getType()){case"LineString":this._renderLine(t,i,e.feature.getGeometry(),e);break;case"MultiLineString":e.feature.getGeometry().getLineStrings().forEach((function(o,n){this._renderLine(t[n],i[n],o,e)}).bind(this))}}},ol.style.Profile.prototype._renderLine=function(t,e,i,o){var n,r,s=o.context,a=Math.cos(o.rotation),l=Math.sin(o.rotation),c=ol.coordinate.dist2d(t[0],t[1])/ol.coordinate.dist2d(e[0],e[1]),h=t[0][0]-e[0][0]*c*a-e[0][1]*c*l,u=t[0][1]-e[0][0]*c*l+e[0][1]*c*a;t=i.getCoordinates();var d=1/0;for(n=0;r=t[n];n++){var p=h+r[0]*c*a+r[1]*c*l,g=u+r[0]*c*l-r[1]*c*a;d=Math.min(d,r[2]),t[n]=[p,g,r[2]]}s.save(),s.fillStyle=ol.color.asString(this.getFill().getColor()),s.strokeStyle=ol.color.asString(this.getStroke().getColor()),s.strokeWidth=this.getStroke().getWidth();var f=t[0],m=this.getScale()*o.pixelRatio;for(n=1;r=t[n];n++)s.beginPath(),s.moveTo(f[0],f[1]),s.lineTo(r[0],r[1]),s.lineTo(r[0],r[1]-(r[2]-d)*m),s.lineTo(f[0],f[1]-(f[2]-d)*m),s.lineTo(f[0],f[1]),s.fill(),f=r;for(f=t[0],s.beginPath(),s.moveTo(f[0],f[1]-(f[2]-d)*m),n=1;r=t[n];n++)s.lineTo(r[0],r[1]-(r[2]-d)*m);s.stroke(),s.restore()},function(){function t(t){if(!(t.frameState.viewState.resolution>this.textPathMaxResolution_)){var e,i=t.frameState.extent,o=t.frameState.coordinateToPixelTransform,n=t.context;n.save(),n.scale(t.frameState.pixelRatio,t.frameState.pixelRatio);for(var r,s=this.getSource().getFeaturesInExtent(i),a=0;r=s[a];a++)for(var l,c=this.textPathStyle_(r,t.frameState.viewState.resolution),h=0;l=c[h];h++){var u,d=l.getGeometry()||r.getGeometry();switch(d.getType()){case"LineString":u=d.getCoordinates();break;case"MultiLineString":u=d.getLineString(0).getCoordinates();break;default:continue}var p=l.getText(),g=f(u,p.getRotateWithView());n.font=p.getFont(),n.textBaseline=p.getTextBaseline(),n.textAlign=p.getTextAlign(),n.lineWidth=p.getStroke()&&p.getStroke().getWidth()||0,n.strokeStyle=p.getStroke()&&p.getStroke().getColor()||"#fff",n.fillStyle=p.getFill()&&p.getFill().getColor()||"#000",n.textJustify="justify"==p.getTextAlign(),n.textOverflow=p.getTextOverflow?p.getTextOverflow():"",n.minWidth=p.getMinWidth?p.getMinWidth():0,n.textPath(p.getText()||r.get("name"),g)}n.restore()}function f(t,i){var n=[];for(e=0;e<t.length;e++)n.push(o[0]*t[e][0]+o[1]*t[e][1]+o[4]),n.push(o[2]*t[e][0]+o[3]*t[e][1]+o[5]);if(i&&n[0]>n[n.length-2]){var r=[];for(e=n.length-2;e>=0;e-=2)r.push(n[e]),r.push(n[e+1]);return r}return n}}ol.layer.Vector.prototype.setTextPathStyle=function(e,i){if(null===e)return this.textPath_&&this.unByKey(this.textPath_),this.textPath_=null,void this.changed();this.textPath_||(this.textPath_=this.on(["postcompose","postrender"],t.bind(this))),void 0===e&&(e=[new ol.style.Style({text:new ol.style.Text})]),this.textPathStyle_="function"==typeof e?e:function(){return e},this.textPathMaxResolution_=Number(i)||Number.MAX_VALUE,this.changed()},ol.style.TextPath=function(t){t||(t={}),ol.style.Text.call(this,t),this.textOverflow_=void 0!==t.textOverflow?t.textOverflow:"visible",this.minWidth_=t.minWidth||0},ol.ext.inherits(ol.style.TextPath,ol.style.Text),ol.style.TextPath.prototype.getTextOverflow=function(){return this.textOverflow_},ol.style.TextPath.prototype.getMinWidth=function(){return this.minWidth_}}(),CanvasRenderingContext2D.prototype.textPath=function(t,e){var i=this;function o(t,e,i,o){var n=i-t,r=o-e;return Math.sqrt(n*n+r*r)}var n,r=0,s=2;function a(t,e){if(!n||r+n<e)for(;s<t.length&&(n=o(t[s-2],t[s-1],t[s],t[s+1]),!(r+n>e))&&!((s+=2)>=t.length);)r+=n;var i,a,l,c=e-r;return s>=t.length&&(s=t.length-2),c?(i=t[s-2]+(t[s]-t[s-2])*c/n,a=t[s-1]+(t[s+1]-t[s-1])*c/n,l=Math.atan2(t[s+1]-t[s-1],t[s]-t[s-2])):(i=t[s-2],a=t[s-1],l=Math.atan2(t[s+1]-t[s-1],t[s]-t[s-2])),[i,a,l]}for(var l=.25*i.measureText(" ").width,c=0,h=0,u=2;u<e.length;u+=2)h+=o(e[u-2],e[u-1],e[u],e[u+1]);if(!(h<i.minWidth)){var d=t.split(" ").length-1;if("visible"!=i.textOverflow&&h<i.measureText(t).width+(t.length-1+d)*l){var p="ellipsis"==i.textOverflow?"\u2026":i.textOverflow;do{d=t.split(" ").length-1,t=t.slice(0,t.length-1)}while(t&&h<i.measureText(t+p).width+(t.length+p.length-1+d)*l);t+=p}switch(i.textJustify||i.textAlign){case!0:case"center":case"end":case"right":i.textJustify?(c=0,l=(h-i.measureText(t).width)/(t.length-1+d)):(c=h-i.measureText(t).width-(t.length+d)*l,"center"==i.textAlign&&(c/=2))}for(var g=0;g<t.length;g++){var f=t[g],m=i.measureText(f).width,y=a(e,c+m/2);i.save(),i.textAlign="center",i.translate(y[0],y[1]),i.rotate(y[2]),i.lineWidth&&i.strokeText(f,0,0),i.fillText(f,0,0),i.restore(),c+=m+l*(" "==f?2:1)}}},ol.style.Shadow=function(t){(t=t||{}).fill||(t.fill=new ol.style.Fill({color:"rgba(0,0,0,0.5)"})),ol.style.RegularShape.call(this,{radius:t.radius,fill:t.fill}),this._fill=t.fill,this._radius=t.radius,this._blur=0===t.blur?0:t.blur||t.radius/3,this._offset=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],this.renderShadow_()},ol.ext.inherits(ol.style.Shadow,ol.style.RegularShape),ol.style.Shadow.prototype.clone=function(){var t=new ol.style.Shadow({fill:this._fill,radius:this._radius,blur:this._blur,offsetX:this._offset[0],offsetY:this._offset[1]});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t},ol.style.Shadow.prototype.renderShadow_=function(t){if(t){var e=this._radius,i=this.getImage(t),o=i.getContext("2d");o.clearRect(0,0,i.width,i.height),o.save(),o.beginPath(),o.setTransform(t,0,0,t,0,0),o.scale(1,.5),o.arc(e,-e,e-this._blur,0,2*Math.PI,!1),o.fillStyle="#000",o.shadowColor=this._fill.getColor(),o.shadowBlur=.7*this._blur*t,o.shadowOffsetX=0,o.shadowOffsetY=1.5*e*t,o.closePath(),o.fill(),o.shadowColor="transparent",o.restore();var n=this.getAnchor();n[0]=i.width/2-this._offset[0],n[1]=i.height/2-this._offset[1]}else this.getPixelRatio?(t=window.devicePixelRatio,this.renderShadow_(t),this.getPixelRatio&&1!==t&&this.renderShadow_(1)):this.renderShadow_(1)},ol.style.StrokePattern=function(t){var e,i;t||(t={});var o=this.canvas_=document.createElement("canvas"),n=(Number(t.scale)>0?Number(t.scale):1)*ol.has.DEVICE_PIXEL_RATIO||ol.has.DEVICE_PIXEL_RATIO,r=o.getContext("2d");if(t.image){t.image.load();var s=t.image.getImage();if(s.width)o.width=Math.round(s.width*n),o.height=Math.round(s.height*n),r.globalAlpha="number"==typeof t.opacity?t.opacity:1,r.drawImage(s,0,0,s.width,s.height,0,0,o.width,o.height),e=r.createPattern(o,"repeat");else{var a=this;e=[0,0,0,0],s.onload=function(){o.width=Math.round(s.width*n),o.height=Math.round(s.height*n),r.globalAlpha="number"==typeof t.opacity?t.opacity:1,r.drawImage(s,0,0,s.width,s.height,0,0,o.width,o.height),e=r.createPattern(o,"repeat"),a.setColor(e)}}}else{var l=this.getPattern_(t);if(o.width=Math.round(l.width*n),o.height=Math.round(l.height*n),r.beginPath(),t.fill&&(r.fillStyle=ol.color.asString(t.fill.getColor()),r.fillRect(0,0,o.width,o.height)),r.scale(n,n),r.lineCap="round",r.lineWidth=l.stroke||1,r.fillStyle=ol.color.asString(t.color||"#000"),r.strokeStyle=ol.color.asString(t.color||"#000"),l.circles)for(i=0;i<l.circles.length;i++){var c=l.circles[i];r.beginPath(),r.arc(c[0],c[1],c[2],0,2*Math.PI),l.fill&&r.fill(),l.stroke&&r.stroke()}if(l.repeat||(l.repeat=[[0,0]]),l.char&&(r.font=l.font||l.width+"px Arial",r.textAlign="center",r.textBaseline="middle",l.angle?(r.fillText(l.char,l.width/4,l.height/4),r.fillText(l.char,5*l.width/4,5*l.height/4),r.fillText(l.char,l.width/4,5*l.height/4),r.fillText(l.char,5*l.width/4,l.height/4),r.fillText(l.char,3*l.width/4,3*l.height/4),r.fillText(l.char,-l.width/4,-l.height/4),r.fillText(l.char,3*l.width/4,-l.height/4),r.fillText(l.char,-l.width/4,3*l.height/4)):r.fillText(l.char,l.width/2,l.height/2)),l.lines)for(i=0;i<l.lines.length;i++)for(var h=0;h<l.repeat.length;h++){var u=l.lines[i];r.beginPath(),r.moveTo(u[0]+l.repeat[h][0],u[1]+l.repeat[h][1]);for(var d=2;d<u.length;d+=2)r.lineTo(u[d]+l.repeat[h][0],u[d+1]+l.repeat[h][1]);l.fill&&r.fill(),l.stroke&&r.stroke(),r.save(),r.strokeStyle="red",r.strokeWidth=.1,r.restore()}if(e=r.createPattern(o,"repeat"),t.offset){var p=t.offset;if("number"==typeof p&&(p=[p,p]),p instanceof Array){var g=Math.round(p[0]*n),f=Math.round(p[1]*n);r.scale(1/n,1/n),r.clearRect(0,0,o.width,o.height),r.translate(g,f),r.fillStyle=e,r.fillRect(-g,-f,o.width,o.height),e=r.createPattern(o,"repeat")}}}t.color=e,ol.style.Stroke.call(this,t)},ol.ext.inherits(ol.style.StrokePattern,ol.style.Stroke),ol.style.StrokePattern.prototype.clone=function(){var t=ol.style.Fill.prototype.clone.call(this);return t.canvas_=this.canvas_,t},ol.style.StrokePattern.prototype.getImage=function(){return this.canvas_},ol.style.StrokePattern.prototype.getPattern_=function(t){var e,i=ol.style.FillPattern.prototype.patterns[t.pattern]||ol.style.FillPattern.prototype.patterns.dot,o=Math.round(t.spacing)||10;switch(t.pattern){case"dot":case"circle":e=0===t.size?0:t.size/2||2,t.angle?(o=i.width=i.height=Math.round(1.4*o),i.circles=[[o/4,o/4,e],[3*o/4,3*o/4,e]],"circle"==t.pattern&&(i.circles=i.circles.concat([[o/4+o,o/4,e],[o/4,o/4+o,e],[3*o/4-o,3*o/4,e],[3*o/4,3*o/4-o,e],[o/4+o,o/4+o,e],[3*o/4-o,3*o/4-o,e]]))):(i.width=i.height=o,i.circles=[[o/2,o/2,e]],"circle"==t.pattern&&(i.circles=i.circles.concat([[o/2+o,o/2,e],[o/2-o,o/2,e],[o/2,o/2+o,e],[o/2,o/2-o,e],[o/2+o,o/2+o,e],[o/2+o,o/2-o,e],[o/2-o,o/2+o,e],[o/2-o,o/2-o,e]])));break;case"tile":case"square":e=0===t.size?0:t.size/2||2,t.angle?(i.width=i.height=o,i.lines=[[o/2-e,o/2,o/2,o/2-e,o/2+e,o/2,o/2,o/2+e,o/2-e,o/2]]):(i.width=i.height=o,i.lines=[[o/2-e,o/2-e,o/2+e,o/2-e,o/2+e,o/2+e,o/2-e,o/2+e,o/2-e,o/2-e]]),"square"==t.pattern&&(i.repeat=[[0,0],[0,o],[o,0],[0,-o],[-o,0],[-o,-o],[o,o],[-o,o],[o,-o]]);break;case"cross":t.angle&&(t.angle=45);case"hatch":var n=Math.round(((t.angle||0)-90)%360);n>180&&(n-=360),n*=Math.PI/180;var r=Math.cos(n),s=Math.sin(n);if(Math.abs(s)<1e-4)i.width=i.height=o,i.lines=[[0,.5,o,.5]],i.repeat=[[0,0],[0,o]];else if(Math.abs(r)<1e-4)i.width=i.height=o,i.lines=[[.5,0,.5,o]],i.repeat=[[0,0],[o,0]],"cross"==t.pattern&&(i.lines.push([0,.5,o,.5]),i.repeat.push([0,o]));else{var a=i.width=Math.round(Math.abs(o/s))||1,l=i.height=Math.round(Math.abs(o/r))||1;"cross"==t.pattern?(i.lines=[[-a,-l,2*a,2*l],[2*a,-l,-a,2*l]],i.repeat=[[0,0]]):r*s>0?(i.lines=[[-a,-l,2*a,2*l]],i.repeat=[[0,0],[a,0],[0,l]]):(i.lines=[[2*a,-l,-a,2*l]],i.repeat=[[0,0],[-a,0],[0,l]])}i.stroke=0===t.size?0:t.size||4}return i},ol,function(){var t=[255,255,255,1],e=[0,153,255,1],i=[new ol.style.Style({stroke:new ol.style.Stroke({color:t,width:5})}),new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:e}),stroke:new ol.style.Stroke({color:t,width:1.5})}),stroke:new ol.style.Stroke({color:e,width:3}),fill:new ol.style.Fill({color:[255,255,255,.5]})})];ol.style.Style.defaultStyle=function(t){if(!0===t)return i;t=t||{};var e=new ol.style.Fill({color:t.fillColor||"rgba(255,255,255,0.4)"}),o=new ol.style.Stroke({color:t.color||"#3399CC",width:1.25});return[new ol.style.Style({image:new ol.style.Circle({fill:e,stroke:o,radius:5}),fill:e,stroke:o})]}}(),ol,function(){var t={},e=0,i={111:{color:[230,0,77,255],title:"Continuous urban fabric"},112:{color:[255,0,0,255],title:"Discontinuous urban fabric"},121:{color:[204,77,242,255],title:"Industrial or commercial units"},122:{color:[204,0,0,255],title:"Road and rail networks and associated land"},123:{color:[230,204,204,255],title:"Port areas"},124:{color:[230,204,230,255],title:"Airports"},131:{color:[166,0,204,255],title:"Mineral extraction sites"},132:{color:[166,77,0,255],title:"Dump sites"},133:{color:[255,77,255,255],title:"Construction sites"},141:{color:[255,166,255,255],title:"Green urban areas"},142:{color:[255,230,255,255],title:"Sport and leisure facilities"},211:{color:[255,255,168,255],title:"Non-irrigated arable land"},212:{color:[255,255,0,255],title:"Permanently irrigated land"},213:{color:[230,230,0,255],title:"Rice fields"},221:{color:[230,128,0,255],title:"Vineyards"},222:{color:[242,166,77,255],title:"Fruit trees and berry plantations"},223:{color:[230,166,0,255],title:"Olive groves"},231:{color:[230,230,77,255],title:"Pastures"},241:{color:[255,230,166,255],title:"Annual crops associated with permanent crops"},242:{color:[255,230,77,255],title:"Complex cultivation patterns"},243:{color:[230,204,77,255],title:"Land principally occupied by agriculture with significant areas of natural vegetation"},244:{color:[242,204,166,255],title:"Agro-forestry areas"},311:{color:[128,255,0,255],title:"Broad-leaved forest"},312:{color:[0,166,0,255],title:"Coniferous forest"},313:{color:[77,255,0,255],title:"Mixed forest"},321:{color:[204,242,77,255],title:"Natural grasslands"},322:{color:[166,255,128,255],title:"Moors and heathland"},323:{color:[166,230,77,255],title:"Sclerophyllous vegetation"},324:{color:[166,242,0,255],title:"Transitional woodland-shrub"},331:{color:[230,230,230,255],title:"Beaches dunes sands"},332:{color:[204,204,204,255],title:"Bare rocks"},333:{color:[204,255,204,255],title:"Sparsely vegetated areas"},334:{color:[0,0,0,255],title:"Burnt areas"},335:{color:[166,230,204,255],title:"Glaciers and perpetual snow"},411:{color:[166,166,255,255],title:"Inland marshes"},412:{color:[77,77,255,255],title:"Peat bogs"},421:{color:[204,204,255,255],title:"Salt marshes"},422:{color:[230,230,255,255],title:"Salines"},423:{color:[166,166,230,255],title:"Intertidal flats"},511:{color:[0,204,242,255],title:"Water courses"},512:{color:[128,242,230,255],title:"Water bodies"},521:{color:[0,255,166,255],title:"Coastal lagoons"},522:{color:[166,255,230,255],title:"Estuaries"},523:{color:[230,242,255,255],title:"Sea and ocean"}};ol.style.geoportailStyle=function(o,n){switch(n=n||{},o){case"BDTOPO_V3:troncon_de_route":return function(i){var o=function(t){if(i.vert&&t.get("itineraire_vert"))return t.get("position_par_rapport_au_sol")<0?[0,128,0,.7]:t.get("position_par_rapport_au_sol")>0?[0,100,0,1]:[0,128,0,1];if(!t.get("importance"))return"magenta";if("Piste cyclable"===t.get("nature"))return[27,177,27,.5];if("0"!=t.get("position_par_rapport_au_sol")){var e;switch(t.get("importance")){case"1":e=[177,27,177,1];break;case"2":e=[177,27,27,1];break;case"3":e=[217,119,0,1];break;case"4":e=[255,225,0,1];break;case"5":e=[204,204,204,1];break;default:e=[211,211,211,1]}return t.get("position_par_rapport_au_sol")<0&&(e[3]=.7),e}switch(t.get("importance")){case"1":return[255,0,255,1];case"2":return[255,0,0,1];case"3":return[255,165,0,1];case"4":return[255,255,0,1];case"5":return[255,255,255,1];default:return[211,211,211,1]}},n=function(t){return Math.max(t.get("largeur_de_chaussee")||2,2)},r=function(t){if(!t.get("position_par_rapport_au_sol"))return 100;var e=Number(t.get("position_par_rapport_au_sol"));return e>0?10+10*e-(Number(t.get("importance"))||10):e<0?Math.max(4+e,0):10-(Number(t.get("importance"))||10)},s=function(t){return i.sens&&!/double|sans/i.test(t.get("sens_de_circulation"))?new ol.style.Text({text:"Sens direct"==t.get("sens_de_circulation")?"\u2192":"\u2190",font:"bold 12px sans-serif",placement:"point",textAlign:"center",fill:new ol.style.Fill({color:[0,0,0,.3]}),stroke:new ol.style.Stroke({color:[0,0,0,.3],width:1.5}),rotateWithView:!0}):null},a=function(t){switch(t.get("nature")){case"Escalier":return[1,4];case"Sentier":return[8,10]}},l="ROUT-"+e+++"-";return function(e,c){var h=!0===i.sens||c<i.sens,u=l+e.get("nature")+"-"+e.get("position_par_rapport_au_sol")+"-"+(h?e.get("sens_de_circulation"):"Sans objet")+"-"+e.get("position_par_rapport_au_sol")+"-"+e.get("importance")+"-"+e.get("largeur_de_chaussee")+"-"+e.get("itineraire_vert"),d=t[u];return d||(d=t[u]=[new ol.style.Style({text:h?s(e):null,stroke:new ol.style.Stroke({color:o(e),width:n(e),lineDash:a(e)}),zIndex:r(e)-100})]),d[0].getText()&&d[0].getText().setRotation(function(t){for(var e,i,o=t.getCoordinates(),n=0,r=t.getLength(),s=0;s<o.length-1&&(e=o[s+1][0]-o[s][0],i=o[s+1][1]-o[s][1],!((n+=Math.sqrt(e*e+i*i))>=r/2));s++);return-Math.atan2(i,e)}(e.getGeometry())),d}}(n);case"BDTOPO_V3:batiment":return function(i){var o="BATI-"+e+++"-";return function(e){if(e.get("detruit"))return[];var n=o+e.get("usage_1")+"-"+e.get("nature")+"-"+e.get("etat_de_l_objet"),r=t[n];if(!r){var s=function(t){switch(t.get("nature")){case"Industriel, agricole ou commercial":return[51,102,153,1];case"Remarquable":return[0,192,0,1];default:switch(t.get("usage_1")){case"R\xe9sidentiel":case"Indiff\xe9renci\xe9":return[128,128,128,1];case"Industriel":case"Commercial et services":return[51,102,153,1];case"Sportif":return[51,153,102,1];case"Religieux":return[153,102,51,1];default:return[153,51,51,1]}}}(e),a=[s[0],s[1],s[1],.5],l=!/en service/i.test(e.get("etat_de_l_objet"));l&&(a[3]=.1);var c=i.symbol?function(t){switch(t.get("usage_1")){case"Commercial et services":return"\uf217";case"Sportif":return"\uf1e3";default:return null}}(e):null;return[new ol.style.Style({text:c?new ol.style.Text({text:c,font:"12px FontAwesome",fill:new ol.style.Fill({color:[0,0,0,.6]})}):null,fill:new ol.style.Fill({color:a}),stroke:new ol.style.Stroke({color:s,width:1.5,lineDash:l?[5,5]:null})})]}return r}}(n);case"CADASTRALPARCELS.PARCELLAIRE_EXPRESS:parcelle":return function(t){var e=new ol.style.Style({text:new ol.style.Text({text:"0000",font:"bold 12px sans-serif",fill:new ol.style.Fill({color:[100,0,255,1]}),stroke:new ol.style.Stroke({color:[255,255,255,.8],width:3})}),stroke:new ol.style.Stroke({color:[255,165,0,1],width:1.5}),fill:new ol.style.Fill({color:[100,0,255,.1]})});return function(i,o){return o<.8?e.getText().setFont("bold 12px sans-serif"):e.getText().setFont("bold 10px sans-serif"),t.section?e.getText().setText(i.get("section")+"-"+(i.get("numero")||"").replace(/^0*/,"")):e.getText().setText((i.get("numero")||"").replace(/^0*/,"")),e}}(n);default:return/LANDCOVER/.test(o)?(n.date=o.replace(/[^\d]*(\d*).*/,"$1"),function(e){return function(o){var n=o.get("code_"+e.date),r=t["CLC-"+n];if(!r){var s=i[n].color.slice();s[3]=e.opacity||1,r=t["CLC-"+n]=new ol.style.Style({fill:new ol.style.Fill({color:s||[255,255,255,.5]})})}return r}}(n)):(console.warn("[ol/style/geoportailStyle] no style defined for type: "+o),ol.style.Style.defaultStyle())}},ol.style.geoportailStyle.clcColors=JSON.parse(JSON.stringify(i))}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("ol/control/Control"),require("ol/Observable"),require("ol/layer/Group")):"function"==typeof define&&define.amd?define(["ol/control/Control","ol/Observable","ol/layer/Group"],e):t.LayerSwitcher=e(t.ol.control.Control,t.ol.Observable,t.ol.layer.Group)}(this,function(t,e,i){"use strict";t="default"in t?t.default:t,i="default"in i?i.default:i;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),n=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,o)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(o):void 0},r="layer-switcher-",s=function(t){function s(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var e=Object.assign({},t),i=e.tipLabel?e.tipLabel:"Legend",o=e.collapseTipLabel?e.collapseTipLabel:"Collapse legend",n=document.createElement("div"),a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,{element:n,target:e.target}));a.activationMode=e.activationMode||"mouseover",a.startActive=!0===e.startActive;var l=void 0!==e.label?e.label:"",c=void 0!==e.collapseLabel?e.collapseLabel:"\xbb";a.groupSelectStyle=s.getGroupSelectStyle(e.groupSelectStyle),a.reverse=!1!==e.reverse,a.mapListeners=[],a.hiddenClassName="ol-unselectable ol-control layer-switcher",s.isTouchDevice_()&&(a.hiddenClassName+=" touch"),a.shownClassName="shown",n.className=a.hiddenClassName;var h=document.createElement("button");return h.setAttribute("title",i),h.setAttribute("aria-label",i),n.appendChild(h),a.panel=document.createElement("div"),a.panel.className="panel",n.appendChild(a.panel),s.enableTouchScroll_(a.panel),h.textContent=l,n.classList.add(r+"group-select-style-"+a.groupSelectStyle),n.classList.add(r+"activation-mode-"+a.activationMode),"click"===a.activationMode?(n.classList.add("activationModeClick"),a.startActive&&(h.textContent=c,h.setAttribute("title",o),h.setAttribute("aria-label",o)),h.onclick=function(t){var e=t||window.event;a.element.classList.contains(a.shownClassName)?(a.hidePanel(),h.textContent=l,h.setAttribute("title",i),h.setAttribute("aria-label",i)):(a.showPanel(),h.textContent=c,h.setAttribute("title",o),h.setAttribute("aria-label",o)),e.preventDefault()}):(h.onmouseover=function(){a.showPanel()},h.onclick=function(t){var e=t||window.event;a.showPanel(),e.preventDefault()},a.panel.onmouseout=function(t){a.panel.contains(t.relatedTarget)||a.hidePanel()}),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,t),o(s,[{key:"setMap",value:function(t){for(var i=this,o=0;o<this.mapListeners.length;o++)e.unByKey(this.mapListeners[o]);this.mapListeners.length=0,n(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setMap",this).call(this,t),t&&(this.startActive?this.showPanel():this.renderPanel(),"click"!==this.activationMode&&this.mapListeners.push(t.on("pointerdown",function(){i.hidePanel()})))}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function(){this.dispatchEvent("render"),s.renderPanel(this.getMap(),this.panel,{groupSelectStyle:this.groupSelectStyle,reverse:this.reverse}),this.dispatchEvent("rendercomplete")}}],[{key:"renderPanel",value:function(t,e,i){var o=new Event("render");for(e.dispatchEvent(o),(i=i||{}).groupSelectStyle=s.getGroupSelectStyle(i.groupSelectStyle),s.ensureTopVisibleBaseLayerShown(t,i.groupSelectStyle);e.firstChild;)e.removeChild(e.firstChild);s.forEachRecursive(t,function(t,e,i){t.set("indeterminate",!1)}),"children"===i.groupSelectStyle||"none"===i.groupSelectStyle?s.setGroupVisibility(t):"group"===i.groupSelectStyle&&s.setChildVisibility(t);var n=document.createElement("ul");e.appendChild(n),s.renderLayers_(t,t,n,i,function(o){s.renderPanel(t,e,i)});var r=new Event("rendercomplete");e.dispatchEvent(r)}},{key:"isBaseGroup",value:function(t){if(t instanceof i){var e=t.getLayers().getArray();return e.length&&"base"===e[0].get("type")}return!1}},{key:"setGroupVisibility",value:function(t){s.getGroupsAndLayers(t,function(t){return t instanceof i&&!t.get("combine")&&!s.isBaseGroup(t)}).reverse().forEach(function(t){var e=t.getLayersArray().map(function(t){return t.getVisible()});e.every(function(t){return!0===t})?(t.setVisible(!0),t.set("indeterminate",!1)):e.every(function(t){return!1===t})?(t.setVisible(!1),t.set("indeterminate",!1)):(t.setVisible(!0),t.set("indeterminate",!0))})}},{key:"setChildVisibility",value:function(t){s.getGroupsAndLayers(t,function(t){return t instanceof i&&!t.get("combine")&&!s.isBaseGroup(t)}).forEach(function(t){var e=t,i=e.getVisible(),o=e.get("indeterminate");e.getLayers().getArray().forEach(function(t){t.set("indeterminate",!1),i&&!o||!t.getVisible()||t.set("indeterminate",!0)})})}},{key:"ensureTopVisibleBaseLayerShown",value:function(t,e){var i=void 0;s.forEachRecursive(t,function(t,e,o){"base"===t.get("type")&&t.getVisible()&&(i=t)}),i&&s.setVisible_(t,i,!0,e)}},{key:"getGroupsAndLayers",value:function(t,e){var i=[];return e=e||function(t,e,i){return!0},s.forEachRecursive(t,function(t,o,n){t.get("title")&&e(t,o,n)&&i.push(t)}),i}},{key:"setVisible_",value:function(t,e,o,n){e.setVisible(o),o&&"base"===e.get("type")&&s.forEachRecursive(t,function(t,i,o){t!=e&&"base"===t.get("type")&&t.setVisible(!1)}),e instanceof i&&!e.get("combine")&&"children"===n&&e.getLayers().forEach(function(i){s.setVisible_(t,i,e.getVisible(),n)})}},{key:"renderLayer_",value:function(t,e,o,n,a){var l=document.createElement("li"),c=e.get("title"),h=s.uuid(),u=document.createElement("label");if(e instanceof i&&!e.get("combine")){var d=s.isBaseGroup(e);if(l.classList.add("group"),d&&l.classList.add(r+"base-group"),e.get("fold")){l.classList.add(r+"fold"),l.classList.add(r+e.get("fold"));var p=document.createElement("button");p.onclick=function(t){var i=t||window.event;s.toggleFold_(e,l),i.preventDefault()},l.appendChild(p)}if(!d&&"none"!=n.groupSelectStyle){var g=document.createElement("input");g.type="checkbox",g.id=h,g.checked=e.getVisible(),g.indeterminate=e.get("indeterminate"),g.onchange=function(i){s.setVisible_(t,e,i.target.checked,n.groupSelectStyle),a(e)},l.appendChild(g),u.htmlFor=h}u.innerHTML=c,l.appendChild(u);var f=document.createElement("ul");l.appendChild(f),s.renderLayers_(t,e,f,n,a)}else{l.className="layer";var m=document.createElement("input");"base"===e.get("type")?(m.type="radio",m.name="base"):m.type="checkbox",m.id=h,m.checked=e.get("visible"),m.indeterminate=e.get("indeterminate"),m.onchange=function(i){s.setVisible_(t,e,i.target.checked,n.groupSelectStyle),a(e)},l.appendChild(m),u.htmlFor=h,u.innerHTML=c;var y=t.getView().getResolution();(y>e.getMaxResolution()||y<e.getMinResolution())&&(u.className+=" disabled"),l.appendChild(u)}return l}},{key:"renderLayers_",value:function(t,e,i,o,n){var r=e.getLayers().getArray().slice();o.reverse&&(r=r.reverse());for(var a,l=0;l<r.length;l++)(a=r[l]).get("title")&&i.appendChild(s.renderLayer_(t,a,l,o,n))}},{key:"forEachRecursive",value:function(t,e){t.getLayers().forEach(function(t,o,n){e(t,o,n),t instanceof i&&s.forEachRecursive(t,e)})}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}},{key:"enableTouchScroll_",value:function(t){if(s.isTouchDevice_()){var e=0;t.addEventListener("touchstart",function(t){e=this.scrollTop+t.touches[0].pageY},!1),t.addEventListener("touchmove",function(t){this.scrollTop=e-t.touches[0].pageY},!1)}}},{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}},{key:"toggleFold_",value:function(t,e){e.classList.remove(r+t.get("fold")),t.set("fold","open"===t.get("fold")?"close":"open"),e.classList.add(r+t.get("fold"))}},{key:"getGroupSelectStyle",value:function(t){return["none","children","group"].indexOf(t)>=0?t:"children"}}]),s}(t);return window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=s),s}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ApexCharts=e()}(this,function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,o)}return i}function e(e){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?t(Object(o),!0).forEach(function(t){s(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,o=l(t);if(e){var n=l(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return h(this,i)}}function d(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return g(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var f=function(){function t(){o(this,t)}return r(t,[{key:"shadeRGBColor",value:function(t,e){var i=e.split(","),o=t<0?0:255,n=t<0?-1*t:t,r=parseInt(i[0].slice(4),10),s=parseInt(i[1],10),a=parseInt(i[2],10);return"rgb("+(Math.round((o-r)*n)+r)+","+(Math.round((o-s)*n)+s)+","+(Math.round((o-a)*n)+a)+")"}},{key:"shadeHexColor",value:function(t,e){var i=parseInt(e.slice(1),16),o=t<0?0:255,n=t<0?-1*t:t,r=i>>16,s=i>>8&255,a=255&i;return"#"+(16777216+65536*(Math.round((o-r)*n)+r)+256*(Math.round((o-s)*n)+s)+(Math.round((o-a)*n)+a)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,i){return t.isColorHex(i)?this.shadeHexColor(e,i):this.shadeRGBColor(e,i)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(t){return t&&"object"===i(t)&&!Array.isArray(t)&&null!=t}},{key:"is",value:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}},{key:"listToArray",value:function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i}},{key:"extend",value:function(t,e){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e});var o=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach(function(n){i.isObject(e[n])&&n in t?o[n]=i.extend(t[n],e[n]):Object.assign(o,s({},n,e[n]))}),o}},{key:"extendArray",value:function(e,i){var o=[];return e.map(function(e){o.push(t.extend(i,e))}),o}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(e){if(t.is("Array",e)){for(var o=[],n=0;n<e.length;n++)o[n]=this.clone(e[n]);return o}if(t.is("Null",e))return null;if(t.is("Date",e))return e;if("object"===i(e)){var r={};for(var s in e)e.hasOwnProperty(s)&&(r[s]=this.clone(e[s]));return r}return e}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){var e=String(t).split(/[eE]/);if(1===e.length)return e[0];var i="",o=t<0?"-":"",n=e[0].replace(".",""),r=Number(e[1])+1;if(r<0){for(i=o+"0.";r++;)i+="0";return i+n.replace(/^-/,"")}for(r-=n.length;r--;)i+="0";return n+i}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t,null),i=t.clientHeight,o=t.clientWidth;return i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[o-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i]}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce(function(t,e){return Array.isArray(e)&&(e=e.reduce(function(t,e){return t.length>e.length?t:e})),t.length>e.length?t:e},0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var i=t.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var o=0;o<i.length;o++)i[o]=parseInt(1===i[o].length?i[o]+i[o]:i[o],16);return void 0!==e&&i.push(e),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,e){for(var i=[],o=2*Math.PI/e,n=0;n<e;n++){var r={};r.x=t*Math.sin(n*o),r.y=-t*Math.cos(n*o),i.push(r)}return i}},{key:"polarToCartesian",value:function(t,e,i,o){var n=(o-90)*Math.PI/180;return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=t.toString().slice();return i.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,i){if(i>=t.length)for(var o=i-t.length+1;o--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style.key=e[i])}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var o=t.indexOf("Edge/");return o>0&&parseInt(t.substring(o+5,t.indexOf(".",o)),10)}}]),t}(),m=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.setEasingFunctions()}return r(t,[{key:"setEasingFunctions",value:function(){var t;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":t="-";break;case"easein":t="<";break;case"easeout":t=">";break;case"easeinout":t="<>";break;case"swing":t=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1};break;case"bounce":t=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":t=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1};break;default:t="<>"}this.w.globals.easing=t}}},{key:"animateLine",value:function(t,e,i,o){t.attr(e).animate(o).attr(i)}},{key:"animateMarker",value:function(t,e,i,o,n,r){e||(e=0),t.attr({r:e,width:e,height:e}).animate(o,n).attr({r:i,width:i.width,height:i.height}).afterAll(function(){r()})}},{key:"animateCircle",value:function(t,e,i,o,n){t.attr({r:e.r,cx:e.cx,cy:e.cy}).animate(o,n).attr({r:i.r,cx:i.cx,cy:i.cy})}},{key:"animateRect",value:function(t,e,i,o,n){t.attr(e).animate(o).attr(i).afterAll(function(){return n()})}},{key:"animatePathsGradually",value:function(t){var e=this.w,i=0;e.config.chart.animations.animateGradually.enabled&&(i=e.config.chart.animations.animateGradually.delay),e.config.chart.animations.dynamicAnimation.enabled&&e.globals.dataChanged&&"bar"!==e.config.chart.type&&(i=0),this.morphSVG(t.el,t.realIndex,t.j,"line"!==e.config.chart.type||e.globals.comboCharts?t.fill:"stroke",t.pathFrom,t.pathTo,t.speed,t.delay*i)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(t){t.el.classList.remove("apexcharts-element-hidden")})}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,i,o,n,r,s,a){var l=this,c=this.w;n||(n=t.attr("pathFrom")),r||(r=t.attr("pathTo"));var h=function(t){return"radar"===c.config.chart.type&&(s=1),"M 0 ".concat(c.globals.gridHeight)};(!n||n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n=h()),(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=h()),c.globals.shouldAnimate||(s=1),t.plot(n).animate(1,c.globals.easing,a).plot(n).animate(s,c.globals.easing,a).plot(r).afterAll(function(){f.isNumber(i)?i===c.globals.series[c.globals.maxValsInArrayIndex].length-2&&c.globals.shouldAnimate&&l.animationCompleted(t):"none"!==o&&c.globals.shouldAnimate&&(!c.globals.comboCharts&&e===c.globals.series.length-1||c.globals.comboCharts)&&l.animationCompleted(t),l.showDelayedElements()})}}]),t}(),y=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"getDefaultFilter",value:function(t,e){var i=this.w;t.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==i.config.states.normal.filter?this.applyFilter(t,e,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addNormalFilter",value:function(t,e){var i=this.w;i.config.chart.dropShadow.enabled&&!t.node.classList.contains("apexcharts-marker")&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addLightenFilter",value:function(t,e,i){var o=this,n=this.w,r=i.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter(function(t){var i=n.config.chart.dropShadow;(i.enabled?o.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:r}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"addDarkenFilter",value:function(t,e,i){var o=this,n=this.w,r=i.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter(function(t){var i=n.config.chart.dropShadow;(i.enabled?o.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:r}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"applyFilter",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(t,e);break;case"lighten":this.addLightenFilter(t,e,{intensity:o});break;case"darken":this.addDarkenFilter(t,e,{intensity:o})}}},{key:"addShadow",value:function(t,e,i){var o=i.blur,n=i.top,r=i.left,s=i.color,a=i.opacity,l=t.flood(Array.isArray(s)?s[e]:s,a).composite(t.sourceAlpha,"in").offset(r,n).gaussianBlur(o).merge(t.source);return t.blend(t.source,l)}},{key:"dropShadow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e.top,n=e.left,r=e.blur,s=e.color,a=e.opacity,l=e.noUserSpaceOnUse,c=this.w;return t.unfilter(!0),f.isIE()&&"radialBar"===c.config.chart.type||(s=Array.isArray(s)?s[i]:s,t.filter(function(t){var e;e=f.isSafari()||f.isFirefox()||f.isIE()?t.flood(s,a).composite(t.sourceAlpha,"in").offset(n,o).gaussianBlur(r):t.flood(s,a).composite(t.sourceAlpha,"in").offset(n,o).gaussianBlur(r).merge(t.source),t.blend(t.source,e)}),l||t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)),t}},{key:"setSelectionFilter",value:function(t,e,i){var o=this.w;if(void 0!==o.globals.selectedDataPoints[e]&&o.globals.selectedDataPoints[e].indexOf(i)>-1){t.node.setAttribute("selected",!0);var n=o.config.states.active.filter;"none"!==n&&this.applyFilter(t,e,n.type,n.value)}}},{key:"_scaleFilterSize",value:function(t){!function(e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),t}(),v=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"drawLine",value:function(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt",l=this.w,c=l.globals.dom.Paper.line().attr({x1:t,y1:e,x2:i,y2:o,stroke:n,"stroke-dasharray":r,"stroke-width":s,"stroke-linecap":a});return c}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=this.w,u=h.globals.dom.Paper.rect();return u.attr({x:t,y:e,width:i>0?i:0,height:o>0?o:0,rx:n,ry:n,opacity:s,"stroke-width":null!==a?a:0,stroke:null!==l?l:"none","stroke-dasharray":c}),u.node.setAttribute("fill",r),u}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",n=this.w,r=n.globals.dom.Paper.polygon(t).attr({fill:o,stroke:e,"stroke-width":i});return r}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;t<0&&(t=0);var o=i.globals.dom.Paper.circle(2*t);return null!==e&&o.attr(e),o}},{key:"drawPath",value:function(t){var e=t.d,i=void 0===e?"":e,o=t.stroke,n=void 0===o?"#a8a8a8":o,r=t.strokeWidth,s=void 0===r?1:r,a=t.fill,l=t.fillOpacity,c=void 0===l?1:l,h=t.strokeOpacity,u=void 0===h?1:h,d=t.classes,p=t.strokeLinecap,g=void 0===p?null:p,f=t.strokeDashArray,m=void 0===f?0:f,y=this.w;return null===g&&(g=y.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(y.globals.gridHeight)),y.globals.dom.Paper.path(i).attr({fill:a,"fill-opacity":c,stroke:n,"stroke-opacity":u,"stroke-linecap":g,"stroke-width":s,"stroke-dasharray":m,class:d})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=e.globals.dom.Paper.group();return null!==t&&i.attr(t),i}},{key:"move",value:function(t,e){return["M",t,e].join(" ")}},{key:"line",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=null;return null===i?o=["L",t,e].join(" "):"H"===i?o=["H",t].join(" "):"V"===i&&(o=["V",e].join(" ")),o}},{key:"curve",value:function(t,e,i,o,n,r){return["C",t,e,i,o,n,r].join(" ")}},{key:"quadraticCurve",value:function(t,e,i,o){return["Q",t,e,i,o].join(" ")}},{key:"arc",value:function(t,e,i,o,n,r,s){var a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="A";a&&(l="a");var c=[l,t,e,i,o,n,r,s].join(" ");return c}},{key:"renderPaths",value:function(t){var i,o=t.j,n=t.realIndex,r=t.pathFrom,s=t.pathTo,a=t.stroke,l=t.strokeWidth,c=t.strokeLinecap,h=t.fill,u=t.animationDelay,d=t.initialSpeed,p=t.dataChangeSpeed,g=t.className,f=t.shouldClipToGrid,v=void 0===f||f,x=t.bindEventsOnPaths,b=void 0===x||x,w=t.drawShadow,_=void 0===w||w,S=this.w,C=new y(this.ctx),k=new m(this.ctx),A=this.w.config.chart.animations.enabled,E=A&&this.w.config.chart.animations.dynamicAnimation.enabled,T=!!(A&&!S.globals.resized||E&&S.globals.dataChanged&&S.globals.shouldAnimate);T?i=r:(i=s,S.globals.animationEnded=!0);var M,L=S.config.stroke.dashArray;M=Array.isArray(L)?L[n]:S.config.stroke.dashArray;var P=this.drawPath({d:i,stroke:a,strokeWidth:l,fill:h,fillOpacity:1,classes:g,strokeLinecap:c,strokeDashArray:M});P.attr("index",n),v&&P.attr({"clip-path":"url(#gridRectMask".concat(S.globals.cuid,")")}),"none"!==S.config.states.normal.filter.type?C.getDefaultFilter(P,n):S.config.chart.dropShadow.enabled&&_&&(!S.config.chart.dropShadow.enabledOnSeries||S.config.chart.dropShadow.enabledOnSeries&&-1!==S.config.chart.dropShadow.enabledOnSeries.indexOf(n))&&C.dropShadow(P,S.config.chart.dropShadow,n),b&&(P.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,P)),P.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,P)),P.node.addEventListener("mousedown",this.pathMouseDown.bind(this,P))),P.attr({pathTo:s,pathFrom:r});var I={el:P,j:o,realIndex:n,pathFrom:r,pathTo:s,fill:h,strokeWidth:l,delay:u};return!A||S.globals.resized||S.globals.dataChanged?!S.globals.resized&&S.globals.dataChanged||k.showDelayedElements():k.animatePathsGradually(e(e({},I),{},{speed:d})),S.globals.dataChanged&&E&&T&&k.animatePathsGradually(e(e({},I),{},{speed:p})),P}},{key:"drawPattern",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=this.w,s=r.globals.dom.Paper.pattern(e,i,function(r){"horizontalLines"===t?r.line(0,0,i,0).stroke({color:o,width:n+1}):"verticalLines"===t?r.line(0,0,0,e).stroke({color:o,width:n+1}):"slantedLines"===t?r.line(0,0,e,i).stroke({color:o,width:n}):"squares"===t?r.rect(e,i).fill("none").stroke({color:o,width:n}):"circles"===t&&r.circle(e).fill("none").stroke({color:o,width:n})});return s}},{key:"drawGradient",value:function(t,e,i,o,n){var r,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=this.w;e.length<9&&0===e.indexOf("#")&&(e=f.hexToRgba(e,o)),i.length<9&&0===i.indexOf("#")&&(i=f.hexToRgba(i,n));var u=0,d=1,p=1,g=null;null!==a&&(u=void 0!==a[0]?a[0]/100:0,d=void 0!==a[1]?a[1]/100:1,p=void 0!==a[2]?a[2]/100:1,g=void 0!==a[3]?a[3]/100:null);var m=!("donut"!==h.config.chart.type&&"pie"!==h.config.chart.type&&"polarArea"!==h.config.chart.type&&"bubble"!==h.config.chart.type);if(r=h.globals.dom.Paper.gradient(m?"radial":"linear",null===l||0===l.length?function(t){t.at(u,e,o),t.at(d,i,n),t.at(p,i,n),null!==g&&t.at(g,e,o)}:function(t){(Array.isArray(l[c])?l[c]:l).forEach(function(e){t.at(e.offset/100,e.color,e.opacity)})}),m){var y=h.globals.gridWidth/2,v=h.globals.gridHeight/2;r.attr("bubble"!==h.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:y,cy:v,r:s}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===t?r.from(0,0).to(0,1):"diagonal"===t?r.from(0,0).to(1,1):"horizontal"===t?r.from(0,1).to(1,1):"diagonal2"===t&&r.from(1,0).to(0,1);return r}},{key:"getTextBasedOnMaxWidth",value:function(t){var e=t.text,i=t.maxWidth,o=this.getTextRects(e,t.fontSize,t.fontFamily),n=Math.floor(i/(o.width/e.length));return i<o.width?e.slice(0,n-3)+"...":e}},{key:"drawText",value:function(t){var i=this,o=t.x,n=t.y,r=t.text,s=t.textAnchor,a=t.fontSize,l=t.fontFamily,c=t.fontWeight,h=t.foreColor,u=t.opacity,d=t.maxWidth,p=t.cssClass,g=void 0===p?"":p,f=t.isPlainText,m=void 0===f||f,y=this.w;void 0===r&&(r="");var v=r;s||(s="start"),h&&h.length||(h=y.config.chart.foreColor),c=c||"regular";var x,b={maxWidth:d,fontSize:a=a||"11px",fontFamily:l=l||y.config.chart.fontFamily};return Array.isArray(r)?x=y.globals.dom.Paper.text(function(t){for(var o=0;o<r.length;o++)v=r[o],d&&(v=i.getTextBasedOnMaxWidth(e({text:r[o]},b))),0===o?t.tspan(v):t.tspan(v).newLine()}):(d&&(v=this.getTextBasedOnMaxWidth(e({text:r},b))),x=m?y.globals.dom.Paper.plain(r):y.globals.dom.Paper.text(function(t){return t.tspan(v)})),x.attr({x:o,y:n,"text-anchor":s,"dominant-baseline":"auto","font-size":a,"font-family":l,"font-weight":c,fill:h,class:"apexcharts-text "+g}),x.node.style.fontFamily=l,x.node.style.opacity=u,x}},{key:"drawMarker",value:function(t,e,i){t=t||0;var o=i.pSize||0,n=null;if("square"===i.shape||"rect"===i.shape){var r=void 0===i.pRadius?o/2:i.pRadius;null!==e&&o||(o=0,r=0);var s=1.2*o+r,a=this.drawRect(s,s,s,s,r);a.attr({x:t-s/2,y:e-s/2,cx:t,cy:e,class:i.class?i.class:"",fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,stroke:i.pointStrokeColor,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}),n=a}else"circle"!==i.shape&&i.shape||(f.isNumber(e)||(o=0,e=0),n=this.drawCircle(o,{cx:t,cy:e,class:i.class?i.class:"",stroke:i.pointStrokeColor,fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}));return n}},{key:"pathMouseEnter",value:function(t,e){var i=this.w,o=new y(this.ctx),n=parseInt(t.node.getAttribute("index"),10),r=parseInt(t.node.getAttribute("j"),10);if("function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}]),("none"===i.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==i.config.states.hover.filter.type&&!i.globals.isTouchDevice){var s=i.config.states.hover.filter;o.applyFilter(t,n,s.type,s.value)}}},{key:"pathMouseLeave",value:function(t,e){var i=this.w,o=new y(this.ctx),n=parseInt(t.node.getAttribute("index"),10),r=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&o.getDefaultFilter(t,n)}},{key:"pathMouseDown",value:function(t,e){var i=this.w,o=new y(this.ctx),n=parseInt(t.node.getAttribute("index"),10),r=parseInt(t.node.getAttribute("j"),10),s="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),i.globals.selectedDataPoints[n].indexOf(r)>-1){var a=i.globals.selectedDataPoints[n].indexOf(r);i.globals.selectedDataPoints[n].splice(a,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var l=i.globals.dom.Paper.select(".apexcharts-series path").members,c=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,h=function(t){Array.prototype.forEach.call(t,function(t){t.node.setAttribute("selected","false"),o.getDefaultFilter(t,n)})};h(l),h(c)}t.node.setAttribute("selected","true"),s="true",void 0===i.globals.selectedDataPoints[n]&&(i.globals.selectedDataPoints[n]=[]),i.globals.selectedDataPoints[n].push(r)}if("true"===s){var u=i.config.states.active.filter;if("none"!==u)o.applyFilter(t,n,u.type,u.value);else if("none"!==i.config.states.hover.filter&&!i.globals.isTouchDevice){var d=i.config.states.hover.filter;o.applyFilter(t,n,d.type,d.value)}}else"none"!==i.config.states.active.filter.type&&("none"===i.config.states.hover.filter.type||i.globals.isTouchDevice?o.getDefaultFilter(t,n):o.applyFilter(t,n,(d=i.config.states.hover.filter).type,d.value));"function"==typeof i.config.chart.events.dataPointSelection&&i.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:r,w:i}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:r,w:i}])}},{key:"rotateAroundCenter",value:function(t){var e={};return t&&"function"==typeof t.getBBox&&(e=t.getBBox()),{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,i,o){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=this.w,s=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:i,foreColor:"#fff",opacity:0});o&&s.attr("transform",o),r.globals.dom.Paper.add(s);var a=s.bbox();return n||(a=s.node.getBoundingClientRect()),s.remove(),{width:a.width,height:a.height}}},{key:"placeTextWithEllipsis",value:function(t,e,i){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=i/1.1)){for(var o=e.length-3;o>0;o-=3)if(t.getSubStringLength(0,o)<=i/1.1)return void(t.textContent=e.substring(0,o)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}}]),t}(),x=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"getStackedSeriesTotals",value:function(){var t=this.w,e=[];if(0===t.globals.series.length)return e;for(var i=0;i<t.globals.series[t.globals.maxValsInArrayIndex].length;i++){for(var o=0,n=0;n<t.globals.series.length;n++)void 0!==t.globals.series[n][i]&&(o+=t.globals.series[n][i]);e.push(o)}return t.globals.stackedSeriesTotals=e,e}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce(function(t,e){return t+e},0):this.w.globals.series[t].reduce(function(t,e){return t+e},0)}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter(function(t){return null!==t}):this.w.config.series[t].data.filter(function(t){return null!==t})).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every(function(t,e,i){return t===i[0]})}},{key:"getCategoryLabels",value:function(t){var e=this.w,i=t.slice();return e.config.xaxis.convertedCatToNumeric&&(i=t.map(function(t,i){return e.config.xaxis.labels.formatter(t-e.globals.minX+1)})),i}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map(function(t){return t.length}).indexOf(Math.max.apply(Math,t.globals.series.map(function(t){return t.length})))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach(function(t){e=Math.max(e,t)}),t.config.markers.discrete&&t.config.markers.discrete.length&&t.config.markers.discrete.forEach(function(t){e=Math.max(e,t.size)}),e>0&&(e+=t.config.markers.hover.sizeOffset+1),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map(function(t,e){var i=0;if(Array.isArray(t))for(var o=0;o<t.length;o++)i+=t[o];else i+=t;return i})}},{key:"getSeriesTotalsXRange",value:function(t,e){var i=this.w;return i.globals.series.map(function(o,n){for(var r=0,s=0;s<o.length;s++)i.globals.seriesX[n][s]>t&&i.globals.seriesX[n][s]<e&&(r+=o[s]);return r})}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map(function(e,i){var o=[];if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=t.globals.stackedSeriesTotals[n],s=0;r&&(s=100*e[n]/r),o.push(s)}else{var a=100*e/t.globals.seriesTotals.reduce(function(t,e){return t+e},0);o.push(a)}return o})}},{key:"getCalculatedRatios",value:function(){var t,e,i,o,n=this.w.globals,r=[],s=0,a=[],l=.1,c=0;if(n.yRange=[],n.isMultipleYAxis)for(var h=0;h<n.minYArr.length;h++)n.yRange.push(Math.abs(n.minYArr[h]-n.maxYArr[h])),a.push(0);else n.yRange.push(Math.abs(n.minY-n.maxY));n.xRange=Math.abs(n.maxX-n.minX),n.zRange=Math.abs(n.maxZ-n.minZ);for(var u=0;u<n.yRange.length;u++)r.push(n.yRange[u]/n.gridHeight);if(e=n.xRange/n.gridWidth,i=Math.abs(n.initialMaxX-n.initialMinX)/n.gridWidth,t=n.yRange/n.gridWidth,o=n.xRange/n.gridHeight,(s=n.zRange/n.gridHeight*16)||(s=1),n.minY!==Number.MIN_VALUE&&0!==Math.abs(n.minY)&&(n.hasNegs=!0),n.isMultipleYAxis){a=[];for(var d=0;d<r.length;d++)a.push(-n.minYArr[d]/r[d])}else a.push(-n.minY/r[0]),n.minY!==Number.MIN_VALUE&&0!==Math.abs(n.minY)&&(l=-n.minY/t,c=n.minX/e);return{yRatio:r,invertedYRatio:t,zRatio:s,xRatio:e,initialXRatio:i,invertedXRatio:o,baseLineInvertedY:l,baseLineY:a,baseLineX:c}}},{key:"getLogSeries",value:function(t){var e=this,i=this.w;return i.globals.seriesLog=t.map(function(t,o){return i.config.yaxis[o]&&i.config.yaxis[o].logarithmic?t.map(function(t){return null===t?null:e.getLogVal(i.config.yaxis[o].logBase,t,o)}):t}),i.globals.invalidLogScale?t:i.globals.seriesLog}},{key:"getBaseLog",value:function(t,e){return Math.log(e)/Math.log(t)}},{key:"getLogVal",value:function(t,e,i){if(0===e)return 0;var o=this.w,n=0===o.globals.minYArr[i]?-1:this.getBaseLog(t,o.globals.minYArr[i]),r=(0===o.globals.maxYArr[i]?0:this.getBaseLog(t,o.globals.maxYArr[i]))-n;return e<1?e/r:(this.getBaseLog(t,e)-n)/r}},{key:"getLogYRatios",value:function(t){var e=this,i=this.w,o=this.w.globals;return o.yLogRatio=t.slice(),o.logYRange=o.yRange.map(function(t,n){if(i.config.yaxis[n]&&e.w.config.yaxis[n].logarithmic){var r,s=-Number.MAX_VALUE,a=Number.MIN_VALUE;return o.seriesLog.forEach(function(t,e){t.forEach(function(t){i.config.yaxis[e]&&i.config.yaxis[e].logarithmic&&(s=Math.max(t,s),a=Math.min(t,a))})}),r=Math.pow(o.yRange[n],Math.abs(a-s)/o.yRange[n]),o.yLogRatio[n]=r/o.gridHeight,r}}),o.invalidLogScale?t.slice():o.yLogRatio}}],[{key:"checkComboSeries",value:function(t){var e=!1,i=0,o=0;return t.length&&void 0!==t[0].type&&t.forEach(function(t){"bar"!==t.type&&"column"!==t.type&&"candlestick"!==t.type&&"boxPlot"!==t.type||i++,void 0!==t.type&&o++}),o>0&&(e=!0),{comboBarCount:i,comboCharts:e}}},{key:"extendArrayProps",value:function(t,e,i){return e.yaxis&&(e=t.extendYAxis(e,i)),e.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),e.annotations.xaxis&&(e=t.extendXAxisAnnotations(e)),e.annotations.points&&(e=t.extendPointAnnotations(e))),e}}]),t}(),b=function(){function t(e){o(this,t),this.w=e.w,this.annoCtx=e}return r(t,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;if("vertical"===t.label.orientation){var o=null!==e?e:0,n=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(o,"']"));if(null!==n){var r=n.getBoundingClientRect();n.setAttribute("x",parseFloat(n.getAttribute("x"))-r.height+4),n.setAttribute("y","top"===t.label.position?parseFloat(n.getAttribute("y"))+r.width:parseFloat(n.getAttribute("y"))-r.width);var s=this.annoCtx.graphics.rotateAroundCenter(n),a=s.x,l=s.y;n.setAttribute("transform","rotate(-90 ".concat(a," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var i=this.w;if(!t||void 0===e.label.text||void 0!==e.label.text&&!String(e.label.text).trim())return null;var o=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),n=t.getBoundingClientRect(),r=e.label.style.padding.left,s=e.label.style.padding.right,a=e.label.style.padding.top,l=e.label.style.padding.bottom;"vertical"===e.label.orientation&&(a=e.label.style.padding.left,l=e.label.style.padding.right,r=e.label.style.padding.top,s=e.label.style.padding.bottom);var c=this.annoCtx.graphics.drawRect(n.left-o.left-r-i.globals.barPadForNumericAxis,n.top-o.top-a,n.width+r+s,n.height+a+l,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&c.node.classList.add(e.id),c}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,i=function(i,o,n){var r=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(o,"']"));if(r){var s=r.parentNode,a=t.addBackgroundToAnno(r,i);a&&(s.insertBefore(a.node,r),i.label.mouseEnter&&a.node.addEventListener("mouseenter",i.label.mouseEnter.bind(t,i)),i.label.mouseLeave&&a.node.addEventListener("mouseleave",i.label.mouseLeave.bind(t,i)))}};e.config.annotations.xaxis.map(function(t,e){i(t,e,"xaxis")}),e.config.annotations.yaxis.map(function(t,e){i(t,e,"yaxis")}),e.config.annotations.points.map(function(t,e){i(t,e,"point")})}},{key:"getY1Y2",value:function(t,e){var i,o="y1"===t?e.y:e.y2,n=this.w;if(this.annoCtx.invertAxis){var r=n.globals.labels.indexOf(o);n.config.xaxis.convertedCatToNumeric&&(r=n.globals.categoryLabels.indexOf(o));var s=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(r+1)+")");s&&(i=parseFloat(s.getAttribute("y")))}else{var a;a=n.config.yaxis[e.yAxisIndex].logarithmic?(o=new x(this.annoCtx.ctx).getLogVal(o,e.yAxisIndex))/n.globals.yLogRatio[e.yAxisIndex]:(o-n.globals.minYArr[e.yAxisIndex])/(n.globals.yRange[e.yAxisIndex]/n.globals.gridHeight),i=n.globals.gridHeight-a,n.config.yaxis[e.yAxisIndex]&&n.config.yaxis[e.yAxisIndex].reversed&&(i=a)}return i}},{key:"getX1X2",value:function(t,e){var i=this.w,o=this.annoCtx.invertAxis?i.globals.minY:i.globals.minX,n=this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX,r=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,s=(e.x-o)/(r/i.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(s=(n-e.x)/(r/i.globals.gridWidth)),"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||(s=this.getStringX(e.x));var a=(e.x2-o)/(r/i.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(a=(n-e.x2)/(r/i.globals.gridWidth)),"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||(a=this.getStringX(e.x2)),"x1"===t?s:a}},{key:"getStringX",value:function(t){var e=this.w,i=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var o=e.globals.labels.indexOf(t),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(o+1)+")");return n&&(i=parseFloat(n.getAttribute("x"))),i}}]),t}(),w=function(){function t(e){o(this,t),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new b(this.annoCtx)}return r(t,[{key:"addXaxisAnnotation",value:function(t,e,i){var o,n=this.w,r=this.helpers.getX1X2("x1",t),s=t.label.text,a=t.strokeDashArray;if(f.isNumber(r)){if(null==t.x2){var l=this.annoCtx.graphics.drawLine(r+t.offsetX,0+t.offsetY,r+t.offsetX,n.globals.gridHeight+t.offsetY,t.borderColor,a,t.borderWidth);e.appendChild(l.node),t.id&&l.node.classList.add(t.id)}else{if((o=this.helpers.getX1X2("x2",t))<r){var c=r;r=o,o=c}var h=this.annoCtx.graphics.drawRect(r+t.offsetX,0+t.offsetY,o-r,n.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,a);h.node.classList.add("apexcharts-annotation-rect"),h.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),e.appendChild(h.node),t.id&&h.node.classList.add(t.id)}var u="top"===t.label.position?4:n.globals.gridHeight,d=this.annoCtx.graphics.getTextRects(s,parseFloat(t.label.style.fontSize)),p=this.annoCtx.graphics.drawText({x:r+t.label.offsetX,y:u+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?d.width/2-12:-d.width/2:0),text:s,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});p.attr({rel:i}),e.appendChild(p.node),this.annoCtx.helpers.setOrientations(t,i)}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map(function(e,o){t.addXaxisAnnotation(e,i.node,o)}),i}}]),t}(),_=function(){function t(e){o(this,t),this.w=e.w,this.annoCtx=e,this.helpers=new b(this.annoCtx)}return r(t,[{key:"addYaxisAnnotation",value:function(t,e,i){var o,n=this.w,r=t.strokeDashArray,s=this.helpers.getY1Y2("y1",t),a=t.label.text;if(null==t.y2){var l=this.annoCtx.graphics.drawLine(0+t.offsetX,s+t.offsetY,this._getYAxisAnnotationWidth(t),s+t.offsetY,t.borderColor,r,t.borderWidth);e.appendChild(l.node),t.id&&l.node.classList.add(t.id)}else{if((o=this.helpers.getY1Y2("y2",t))>s){var c=s;s=o,o=c}var h=this.annoCtx.graphics.drawRect(0+t.offsetX,o+t.offsetY,this._getYAxisAnnotationWidth(t),s-o,0,t.fillColor,t.opacity,1,t.borderColor,r);h.node.classList.add("apexcharts-annotation-rect"),h.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),e.appendChild(h.node),t.id&&h.node.classList.add(t.id)}var u=this.annoCtx.graphics.drawText({x:("right"===t.label.position?n.globals.gridWidth:0)+t.label.offsetX,y:(null!=o?o:s)+t.label.offsetY-3,text:a,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});u.attr({rel:i}),e.appendChild(u.node)}},{key:"_getYAxisAnnotationWidth",value:function(t){var e=this.w;return(t.width.indexOf("%")>-1?e.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.map(function(e,o){t.addYaxisAnnotation(e,i.node,o)}),i}}]),t}(),S=function(){function t(e){o(this,t),this.w=e.w,this.annoCtx=e,this.helpers=new b(this.annoCtx)}return r(t,[{key:"addPointAnnotation",value:function(t,e,i){var o=this.helpers.getX1X2("x1",t),n=this.helpers.getY1Y2("y1",t);if(f.isNumber(o)){var r={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},s=this.annoCtx.graphics.drawMarker(o+t.marker.offsetX,n+t.marker.offsetY,r);e.appendChild(s.node);var a=t.label.text?t.label.text:"",l=this.annoCtx.graphics.drawText({x:o+t.label.offsetX,y:n+t.label.offsetY-t.marker.size-parseFloat(t.label.style.fontSize)/1.6,text:a,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(l.attr({rel:i}),e.appendChild(l.node),t.customSVG.SVG){var c=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});c.attr({transform:"translate(".concat(o+t.customSVG.offsetX,", ").concat(n+t.customSVG.offsetY,")")}),c.node.innerHTML=t.customSVG.SVG,e.appendChild(c.node)}if(t.image.path){var h=t.image.width?t.image.width:20,u=t.image.height?t.image.height:20;s=this.annoCtx.addImage({x:o+t.image.offsetX-h/2,y:n+t.image.offsetY-u/2,width:h,height:u,path:t.image.path,appendTo:".apexcharts-point-annotations"})}t.mouseEnter&&s.node.addEventListener("mouseenter",t.mouseEnter.bind(this,t)),t.mouseLeave&&s.node.addEventListener("mouseleave",t.mouseLeave.bind(this,t))}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map(function(e,o){t.addPointAnnotation(e,i.node,o)}),i}}]),t}(),C={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},k=function(){function t(){o(this,t),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return r(t,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[C],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(t){return new Date(t).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(t,e){return t+e},0)/t.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(t,e){return t+e},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),t}(),A=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.graphics=new v(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new b(this),this.xAxisAnnotations=new w(this),this.yAxisAnnotations=new _(this),this.pointsAnnotations=new S(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return r(t,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),o=this.pointsAnnotations.drawPointAnnotations(),n=t.config.chart.animations.enabled,r=[e,i,o],s=[i.node,e.node,o.node],a=0;a<3;a++)t.globals.dom.elGraphical.add(r[a]),!n||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&s[a].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:s[a],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map(function(e,i){t.addImage(e,i)})}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map(function(e,i){t.addText(e,i)})}},{key:"addXaxisAnnotation",value:function(t,e,i){this.xAxisAnnotations.addXaxisAnnotation(t,e,i)}},{key:"addYaxisAnnotation",value:function(t,e,i){this.yAxisAnnotations.addYaxisAnnotation(t,e,i)}},{key:"addPointAnnotation",value:function(t,e,i){this.pointsAnnotations.addPointAnnotation(t,e,i)}},{key:"addText",value:function(t,e){var i=t.text,o=t.backgroundColor,n=t.borderWidth,r=t.strokeDashArray,s=t.borderRadius,a=t.borderColor,l=t.appendTo,c=void 0===l?".apexcharts-annotations":l,h=t.paddingLeft,u=void 0===h?4:h,d=t.paddingRight,p=void 0===d?4:d,g=t.paddingBottom,f=void 0===g?2:g,m=t.paddingTop,y=void 0===m?2:m,v=this.w,x=this.graphics.drawText({x:t.x,y:t.y,text:i,textAnchor:t.textAnchor||"start",fontSize:t.fontSize||"12px",fontWeight:t.fontWeight||"regular",fontFamily:t.fontFamily||v.config.chart.fontFamily,foreColor:t.foreColor||v.config.chart.foreColor,cssClass:t.cssClass}),b=v.globals.dom.baseEl.querySelector(c);b&&b.appendChild(x.node);var w=x.bbox();if(i){var _=this.graphics.drawRect(w.x-u,w.y-y,w.width+u+p,w.height+f+y,s,o||"transparent",1,n,a,r);b.insertBefore(_.node,x.node)}}},{key:"addImage",value:function(t,e){var i=this.w,o=t.x,n=void 0===o?0:o,r=t.y,s=void 0===r?0:r,a=t.width,l=void 0===a?20:a,c=t.height,h=void 0===c?20:c,u=t.appendTo,d=void 0===u?".apexcharts-annotations":u,p=i.globals.dom.Paper.image(t.path);p.size(l,h).move(n,s);var g=i.globals.dom.baseEl.querySelector(d);return g&&g.appendChild(p.node),p}},{key:"addXaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(t,e,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(t){var e=t.params,i=t.pushToMemory,o=t.context,n=t.type,r=t.contextMethod,s=o,a=s.w,l=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations")),c=l.childNodes.length+1,h=new k,u=Object.assign({},"xaxis"===n?h.xAxisAnnotation:"yaxis"===n?h.yAxisAnnotation:h.pointAnnotation),d=f.extend(u,e);switch(n){case"xaxis":this.addXaxisAnnotation(d,l,c);break;case"yaxis":this.addYaxisAnnotation(d,l,c);break;case"point":this.addPointAnnotation(d,l,c)}var p=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(c,"']")),g=this.helpers.addBackgroundToAnno(p,d);return g&&l.insertBefore(g.node,p),i&&a.globals.memory.methodsToExec.push({context:s,id:d.id?d.id:f.randomId(),method:r,label:"addAnnotation",params:e}),o}},{key:"clearAnnotations",value:function(t){var e=t.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");e.globals.memory.methodsToExec.map(function(t,i){"addText"!==t.label&&"addAnnotation"!==t.label||e.globals.memory.methodsToExec.splice(i,1)}),i=f.listToArray(i),Array.prototype.forEach.call(i,function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})}},{key:"removeAnnotation",value:function(t,e){var i=t.w,o=i.globals.dom.baseEl.querySelectorAll(".".concat(e));o&&(i.globals.memory.methodsToExec.map(function(t,o){t.id===e&&i.globals.memory.methodsToExec.splice(o,1)}),Array.prototype.forEach.call(o,function(t){t.parentElement.removeChild(t)}))}}]),t}(),E=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0}return r(t,[{key:"clippedImgArea",value:function(t){var e=this.w,i=e.config,o=parseInt(e.globals.gridWidth,10),n=parseInt(e.globals.gridHeight,10),r=o>n?o:n,s=t.image,a=0,l=0;void 0===t.width&&void 0===t.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(a=i.fill.image.width+1,l=i.fill.image.height):(a=r+1,l=r):(a=t.width,l=t.height);var c=document.createElementNS(e.globals.SVGNS,"pattern");v.setAttrs(c,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:a+"px",height:l+"px"});var h=document.createElementNS(e.globals.SVGNS,"image");c.appendChild(h),h.setAttributeNS(window.SVG.xlink,"href",s),v.setAttrs(h,{x:0,y:0,preserveAspectRatio:"none",width:a+"px",height:l+"px"}),h.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(c)}},{key:"getSeriesIndex",value:function(t){var e=this.w;return this.seriesIndex=("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||"heatmap"===e.config.chart.type||"treemap"===e.config.chart.type?t.seriesNumber:t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(t){var e=this.w;this.opts=t;var i,o,n,r=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var s=this.getFillColors()[this.seriesIndex];void 0!==e.globals.seriesColors[this.seriesIndex]&&(s=e.globals.seriesColors[this.seriesIndex]),"function"==typeof s&&(s=s({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:e}));var a=this.getFillType(this.seriesIndex),l=Array.isArray(r.fill.opacity)?r.fill.opacity[this.seriesIndex]:r.fill.opacity;t.color&&(s=t.color);var c=s;if(-1===s.indexOf("rgb")?s.length<9&&(c=f.hexToRgba(s,l)):s.indexOf("rgba")>-1&&(l=f.getOpacityFromRGBA(s)),t.opacity&&(l=t.opacity),"pattern"===a&&(o=this.handlePatternFill(o,s,l,c)),"gradient"===a&&(n=this.handleGradientFill(s,l,this.seriesIndex)),"image"===a){var h=r.fill.image.src,u=t.patternID?t.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(h)?t.seriesNumber<h.length?h[t.seriesNumber]:h[0]:h,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:"pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(u)}),i="url(#pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(u,")")}else i="gradient"===a?n:"pattern"===a?o:c;return t.solid&&(i=c),i}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,i=this.opts,o=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?o=t.globals.stroke.colors:o.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?o=t.globals.fill.colors:o.push(t.globals.fill.colors):"line"===e.chart.type?Array.isArray(t.globals.stroke.colors)?o=t.globals.stroke.colors:o.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?o=t.globals.fill.colors:o.push(t.globals.fill.colors),void 0!==i.fillColors&&(o=[],Array.isArray(i.fillColors)?o=i.fillColors.slice():o.push(i.fillColors)),o}},{key:"handlePatternFill",value:function(t,e,i,o){var n=this.w.config,r=this.opts,s=new v(this.ctx),a=void 0===n.fill.pattern.strokeWidth?Array.isArray(n.stroke.width)?n.stroke.width[this.seriesIndex]:n.stroke.width:Array.isArray(n.fill.pattern.strokeWidth)?n.fill.pattern.strokeWidth[this.seriesIndex]:n.fill.pattern.strokeWidth,l=e;return Array.isArray(n.fill.pattern.style)?void 0!==n.fill.pattern.style[r.seriesNumber]?s.drawPattern(n.fill.pattern.style[r.seriesNumber],n.fill.pattern.width,n.fill.pattern.height,l,a,i):o:s.drawPattern(n.fill.pattern.style,n.fill.pattern.width,n.fill.pattern.height,l,a,i)}},{key:"handleGradientFill",value:function(t,e,i){var o,n=this.w.config,r=this.opts,s=new v(this.ctx),a=new f,l=n.fill.gradient.type,c=t,h=void 0===n.fill.gradient.opacityFrom?e:Array.isArray(n.fill.gradient.opacityFrom)?n.fill.gradient.opacityFrom[i]:n.fill.gradient.opacityFrom;c.indexOf("rgba")>-1&&(h=f.getOpacityFromRGBA(c));var u=void 0===n.fill.gradient.opacityTo?e:Array.isArray(n.fill.gradient.opacityTo)?n.fill.gradient.opacityTo[i]:n.fill.gradient.opacityTo;if(void 0===n.fill.gradient.gradientToColors||0===n.fill.gradient.gradientToColors.length)o=a.shadeColor("dark"===n.fill.gradient.shade?-1*parseFloat(n.fill.gradient.shadeIntensity):parseFloat(n.fill.gradient.shadeIntensity),t.indexOf("rgb")>-1?f.rgb2hex(t):t);else if(n.fill.gradient.gradientToColors[r.seriesNumber]){var d=n.fill.gradient.gradientToColors[r.seriesNumber];o=d,d.indexOf("rgba")>-1&&(u=f.getOpacityFromRGBA(d))}else o=t;if(n.fill.gradient.inverseColors){var p=c;c=o,o=p}return c.indexOf("rgb")>-1&&(c=f.rgb2hex(c)),o.indexOf("rgb")>-1&&(o=f.rgb2hex(o)),s.drawGradient(l,c,o,h,u,r.size,n.fill.gradient.stops,n.fill.gradient.colorStops,i)}}]),t}(),T=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)void 0===t.globals.markers.size[e]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map(function(e){return t.config.markers.size})}},{key:"plotChartMarkers",value:function(t,e,i,o){var n,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this.w,a=e,l=t,c=null,h=new v(this.ctx),u=s.config.markers.discrete&&s.config.markers.discrete.length;if((s.globals.markers.size[e]>0||r||u)&&(c=h.group({class:r||u?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(s.globals.cuid,")")),Array.isArray(l.x))for(var d=0;d<l.x.length;d++){var p=i;1===i&&0===d&&(p=0),1===i&&1===d&&(p=1);var g="apexcharts-marker";"line"!==s.config.chart.type&&"area"!==s.config.chart.type||s.globals.comboCharts||s.config.tooltip.intersect||(g+=" no-pointer-events");var m=Array.isArray(s.config.markers.size)?s.globals.markers.size[e]>0:s.config.markers.size>0;if(m||r||u){f.isNumber(l.y[d])?g+=" w".concat(f.randomId()):g="apexcharts-nullpoint";var x=this.getMarkerConfig({cssClass:g,seriesIndex:e,dataPointIndex:p});s.config.series[a].data[p]&&(s.config.series[a].data[p].fillColor&&(x.pointFillColor=s.config.series[a].data[p].fillColor),s.config.series[a].data[p].strokeColor&&(x.pointStrokeColor=s.config.series[a].data[p].strokeColor)),o&&(x.pSize=o),(n=h.drawMarker(l.x[d],l.y[d],x)).attr("rel",p),n.attr("j",p),n.attr("index",e),n.node.setAttribute("default-marker-size",x.pSize);var b=new y(this.ctx);b.setSelectionFilter(n,e,p),this.addEvents(n),c&&c.add(n)}else void 0===s.globals.pointsArray[e]&&(s.globals.pointsArray[e]=[]),s.globals.pointsArray[e].push([l.x[d],l.y[d]])}return c}},{key:"getMarkerConfig",value:function(t){var e=t.cssClass,i=t.seriesIndex,o=t.dataPointIndex,n=void 0===o?null:o,r=t.finishRadius,s=void 0===r?null:r,a=this.w,l=this.getMarkerStyle(i),c=a.globals.markers.size[i],h=a.config.markers;return null!==n&&h.discrete.length&&h.discrete.map(function(t){t.seriesIndex===i&&t.dataPointIndex===n&&(l.pointStrokeColor=t.strokeColor,l.pointFillColor=t.fillColor,c=t.size,l.pointShape=t.shape)}),{pSize:null===s?c:s,pRadius:h.radius,width:Array.isArray(h.width)?h.width[i]:h.width,height:Array.isArray(h.height)?h.height[i]:h.height,pointStrokeWidth:Array.isArray(h.strokeWidth)?h.strokeWidth[i]:h.strokeWidth,pointStrokeColor:l.pointStrokeColor,pointFillColor:l.pointFillColor,shape:l.pointShape||(Array.isArray(h.shape)?h.shape[i]:h.shape),class:e,pointStrokeOpacity:Array.isArray(h.strokeOpacity)?h.strokeOpacity[i]:h.strokeOpacity,pointStrokeDashArray:Array.isArray(h.strokeDashArray)?h.strokeDashArray[i]:h.strokeDashArray,pointFillOpacity:Array.isArray(h.fillOpacity)?h.fillOpacity[i]:h.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(t){var e=this.w,i=new v(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,i=e.globals.markers.colors,o=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(o)?o[t]:o,pointFillColor:Array.isArray(i)?i[t]:i}}}]),t}(),M=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return r(t,[{key:"draw",value:function(t,e,i){var o=this.w,n=new v(this.ctx),r=i.realIndex,s=i.pointsPos,a=i.zRatio,l=i.elParent,c=n.group({class:"apexcharts-series-markers apexcharts-series-".concat(o.config.chart.type)});if(c.attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(s.x))for(var h=0;h<s.x.length;h++){var u=e+1,d=!0;0===e&&0===h&&(u=0),0===e&&1===h&&(u=1);var p=0,g=o.globals.markers.size[r];if(a!==1/0){g=o.globals.seriesZ[r][u]/a;var f=o.config.plotOptions.bubble;f.minBubbleRadius&&g<f.minBubbleRadius&&(g=f.minBubbleRadius),f.maxBubbleRadius&&g>f.maxBubbleRadius&&(g=f.maxBubbleRadius)}o.config.chart.animations.enabled||(p=g);var m=s.y[h];if(p=p||0,null!==m&&void 0!==o.globals.series[r][u]||(d=!1),d){var y=this.drawPoint(s.x[h],m,p,g,r,u,e);c.add(y)}l.add(c)}}},{key:"drawPoint",value:function(t,e,i,o,n,r,s){var a=this.w,l=n,c=new m(this.ctx),h=new y(this.ctx),u=new E(this.ctx),d=new T(this.ctx),p=new v(this.ctx),g=d.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:r,finishRadius:"bubble"===a.config.chart.type||a.globals.comboCharts&&a.config.series[n]&&"bubble"===a.config.series[n].type?o:null});o=g.pSize;var f,x=u.fillPath({seriesNumber:n,dataPointIndex:r,color:g.pointFillColor,patternUnits:"objectBoundingBox",value:a.globals.series[n][s]});if("circle"===g.shape?f=p.drawCircle(i):"square"!==g.shape&&"rect"!==g.shape||(f=p.drawRect(0,0,g.width-g.pointStrokeWidth/2,g.height-g.pointStrokeWidth/2,g.pRadius)),a.config.series[l].data[r]&&a.config.series[l].data[r].fillColor&&(x=a.config.series[l].data[r].fillColor),f.attr({x:t-g.width/2-g.pointStrokeWidth/2,y:e-g.height/2-g.pointStrokeWidth/2,cx:t,cy:e,fill:x,"fill-opacity":g.pointFillOpacity,stroke:g.pointStrokeColor,r:o,"stroke-width":g.pointStrokeWidth,"stroke-dasharray":g.pointStrokeDashArray,"stroke-opacity":g.pointStrokeOpacity}),a.config.chart.dropShadow.enabled&&h.dropShadow(f,a.config.chart.dropShadow,n),!this.initialAnim||a.globals.dataChanged||a.globals.resized?a.globals.animationEnded=!0:c.animateMarker(f,0,"circle"===g.shape?o:{width:g.width,height:g.height},a.config.chart.animations.speed,a.globals.easing,function(){window.setTimeout(function(){c.animationCompleted(f)},100)}),a.globals.dataChanged&&"circle"===g.shape)if(this.dynamicAnim){var b,w,_,S,C=a.config.chart.animations.dynamicAnimation.speed;null!=(S=a.globals.previousPaths[n]&&a.globals.previousPaths[n][s])&&(b=S.x,w=S.y,_=void 0!==S.r?S.r:o);for(var k=0;k<a.globals.collapsedSeries.length;k++)a.globals.collapsedSeries[k].index===n&&(C=1,o=0);0===t&&0===e&&(o=0),c.animateCircle(f,{cx:b,cy:w,r:_},{cx:t,cy:e,r:o},C,a.globals.easing)}else f.attr({r:o});return f.attr({rel:r,j:r,index:n,"default-marker-size":o}),h.setSelectionFilter(f,n,r),d.addEvents(f),f.node.classList.add("apexcharts-marker"),f}},{key:"centerTextInBubble",value:function(t){return{y:t+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),t}(),L=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"dataLabelsCorrection",value:function(t,e,i,o,n,r,s){var a=this.w,l=!1,c=new v(this.ctx).getTextRects(i,s),h=c.width,u=c.height;if(e<0&&(e=0),e>a.globals.gridHeight+u&&(e=a.globals.gridHeight+u/2),void 0===a.globals.dataLabelsRects[o]&&(a.globals.dataLabelsRects[o]=[]),a.globals.dataLabelsRects[o].push({x:t,y:e,width:h,height:u}),void 0!==a.globals.dataLabelsRects[o][a.globals.dataLabelsRects[o].length-2]){var d=a.globals.dataLabelsRects[o][void 0!==a.globals.lastDrawnDataLabelsIndexes[o]?a.globals.lastDrawnDataLabelsIndexes[o][a.globals.lastDrawnDataLabelsIndexes[o].length-1]:0];(t>d.x+d.width+2||e>d.y+d.height+2||t+h<d.x)&&(l=!0)}return(0===n||r)&&(l=!0),{x:t,y:e,textRects:c,drawnextLabel:l}}},{key:"drawDataLabel",value:function(t,e,i){var o=this,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,r=this.w,s=new v(this.ctx),a=r.config.dataLabels,l=0,c=0,h=i,u=null;if(!a.enabled||!Array.isArray(t.x))return u;u=s.group({class:"apexcharts-data-labels"});for(var d=0;d<t.x.length;d++)if(l=t.x[d]+a.offsetX,c=t.y[d]+a.offsetY+n,!isNaN(l)){1===i&&0===d&&(h=0),1===i&&1===d&&(h=1);var p=r.globals.series[e][h],g="",f=function(t){return r.config.dataLabels.formatter(t,{ctx:o.ctx,seriesIndex:e,dataPointIndex:h,w:r})};if("bubble"===r.config.chart.type){g=f(p=r.globals.seriesZ[e][h]),c=t.y[d];var m=new M(this.ctx),y=m.centerTextInBubble(c,e,h);c=y.y}else void 0!==p&&(g=f(p));this.plotDataLabelsText({x:l,y:c,text:g,i:e,j:h,parent:u,offsetCorrection:!0,dataLabelsConfig:r.config.dataLabels})}return u}},{key:"plotDataLabelsText",value:function(t){var e=this.w,i=new v(this.ctx),o=t.x,n=t.y,r=t.i,s=t.j,a=t.text,l=t.textAnchor,c=t.fontSize,h=t.parent,u=t.dataLabelsConfig,d=t.color,p=t.alwaysDrawDataLabel,g=t.offsetCorrection;if(!(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(r)<0)){var f={x:o,y:n,drawnextLabel:!0,textRects:null};g&&(f=this.dataLabelsCorrection(o,n,a,r,s,p,parseInt(u.style.fontSize,10))),e.globals.zoomed||(o=f.x,n=f.y),f.textRects&&(o<-10-f.textRects.width||o>e.globals.gridWidth+f.textRects.width+10)&&(a="");var m=e.globals.dataLabels.style.colors[r];(("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(m=e.globals.dataLabels.style.colors[s]),"function"==typeof m&&(m=m({series:e.globals.series,seriesIndex:r,dataPointIndex:s,w:e})),d&&(m=d);var x=u.offsetX,b=u.offsetY;if("bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(x=0,b=0),f.drawnextLabel){var w=i.drawText({width:100,height:parseInt(u.style.fontSize,10),x:o+x,y:n+b,foreColor:m,textAnchor:l||u.textAnchor,text:a,fontSize:c||u.style.fontSize,fontFamily:u.style.fontFamily,fontWeight:u.style.fontWeight||"normal"});if(w.attr({class:"apexcharts-datalabel",cx:o,cy:n}),u.dropShadow.enabled){var _=u.dropShadow;new y(this.ctx).dropShadow(w,_)}h.add(w),void 0===e.globals.lastDrawnDataLabelsIndexes[r]&&(e.globals.lastDrawnDataLabelsIndexes[r]=[]),e.globals.lastDrawnDataLabelsIndexes[r].push(s)}}}},{key:"addBackgroundToDataLabel",value:function(t,e){var i=this.w,o=i.config.dataLabels.background,n=o.padding,r=o.padding/2,s=e.width,a=e.height,l=new v(this.ctx).drawRect(e.x-n,e.y-r/2,s+2*n,a+r,o.borderRadius,"transparent"===i.config.chart.background?"#fff":i.config.chart.background,o.opacity,o.borderWidth,o.borderColor);return o.dropShadow.enabled&&new y(this.ctx).dropShadow(l,o.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<e.length;i++){var o=e[i],n=o.getBBox(),r=null;if(n.width&&n.height&&(r=this.addBackgroundToDataLabel(o,n)),r){o.parentNode.insertBefore(r.node,o);var s=o.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?r.attr({fill:s}):r.animate().attr({fill:s}),o.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),o=0;o<e.length;o++)i&&i.insertBefore(e[o],i.nextSibling)}}]),t}(),P=function(){function t(e){o(this,t),this.w=e.w,this.barCtx=e}return r(t,[{key:"handleBarDataLabels",value:function(t){var e=t.x,i=t.y,o=t.y1,n=t.y2,r=t.i,s=t.j,a=t.realIndex,l=t.series,c=t.barHeight,h=t.barWidth,u=t.barYPosition,d=t.visibleSeries,p=t.renderedPath,g=this.w,f=new v(this.barCtx.ctx),m=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[a]:this.barCtx.strokeWidth,y=e+parseFloat(h*d),x=i+parseFloat(c*d);g.globals.isXNumeric&&!g.globals.isBarHorizontal&&(y=e+parseFloat(h*(d+1)),x=i+parseFloat(c*(d+1))-m);var b,w=e,_=i,S=g.config.dataLabels,C=this.barCtx.barOptions.dataLabels;void 0!==u&&this.barCtx.isRangeBar&&(x=u,_=u);var k=S.offsetX,A=S.offsetY,E={width:0,height:0};g.config.dataLabels.enabled&&(E=f.getTextRects(g.globals.yLabelFormatters[0](this.barCtx.series[r][s]),parseFloat(S.style.fontSize)));var T={x:e,y:i,i:r,j:s,renderedPath:p,bcx:y,bcy:x,barHeight:c,barWidth:h,textRects:E,strokeWidth:m,dataLabelsX:w,dataLabelsY:_,barDataLabelsConfig:C,offX:k,offY:A};return b=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(T):this.calculateColumnsDataLabelsPosition(T),p.attr({cy:b.bcy,cx:b.bcx,j:s,val:l[r][s],barHeight:c,barWidth:h}),this.drawCalculatedDataLabels({x:b.dataLabelsX,y:b.dataLabelsY,val:this.barCtx.isRangeBar?[o,n]:l[r][s],i:a,j:s,barWidth:h,barHeight:c,textRects:E,dataLabelsConfig:S})}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e,i=this.w,o=t.i,n=t.j,r=t.y,s=t.bcx,a=t.barWidth,l=t.barHeight,c=t.textRects,h=t.dataLabelsY,u=t.barDataLabelsConfig,d=t.strokeWidth,p=t.offX,g=t.offY;l=Math.abs(l);var f="vertical"===i.config.plotOptions.bar.dataLabels.orientation;s-=d/2,e=i.globals.isXNumeric?s-a/2+p:s-i.globals.gridWidth/i.globals.dataPoints+a/2+p,f&&(e=e+c.height/2-d/2-2);var m=this.barCtx.series[o][n]<0,y=r;switch(this.barCtx.isReversed&&(y=r-l+(m?2*l:0),r-=l),u.position){case"center":h=f?m?y+l/2+g:y+l/2-g:m?y-l/2+c.height/2+g:y+l/2+c.height/2-g;break;case"bottom":h=f?m?y+l+g:y+l-g:m?y-l+c.height+d+g:y+l-c.height/2+d-g;break;case"top":h=f?m?y+g:y-g:m?y-c.height/2-g:y+c.height+g}return i.config.chart.stacked||(h<0?h=0+d:h+c.height/3>i.globals.gridHeight&&(h=i.globals.gridHeight-d)),{bcx:s,bcy:r,dataLabelsX:e,dataLabelsY:h}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this.w,i=t.x,o=t.i,n=t.j,r=t.bcy,s=t.barHeight,a=t.barWidth,l=t.textRects,c=t.dataLabelsX,h=t.strokeWidth,u=t.barDataLabelsConfig,d=t.offX,p=t.offY,g=e.globals.gridHeight/e.globals.dataPoints;a=Math.abs(a);var f=r-(this.barCtx.isRangeBar?0:g)+s/2+l.height/2+p-3,m=this.barCtx.series[o][n]<0,y=i;switch(this.barCtx.isReversed&&(y=i+a-(m?2*a:0),i=e.globals.gridWidth-a),u.position){case"center":c=m?y+a/2-d:Math.max(l.width/2,y-a/2)+d;break;case"bottom":c=m?y+a-h-Math.round(l.width/2)-d:y-a+h+Math.round(l.width/2)+d;break;case"top":c=m?y-h+Math.round(l.width/2)-d:y-h-Math.round(l.width/2)+d}return e.config.chart.stacked||(c<0?c=c+l.width+h:c+l.width/2>e.globals.gridWidth&&(c=e.globals.gridWidth-l.width-h)),{bcx:i,bcy:r,dataLabelsX:c,dataLabelsY:f}}},{key:"drawCalculatedDataLabels",value:function(t){var i=t.x,o=t.y,n=t.val,r=t.i,s=t.j,a=t.textRects,l=t.barHeight,c=t.barWidth,h=t.dataLabelsConfig,u=this.w,d="rotate(0)";"vertical"===u.config.plotOptions.bar.dataLabels.orientation&&(d="rotate(-90, ".concat(i,", ").concat(o,")"));var p=new L(this.barCtx.ctx),g=new v(this.barCtx.ctx),f=h.formatter,m=null,y=u.globals.collapsedSeriesIndices.indexOf(r)>-1;if(h.enabled&&!y){m=g.group({class:"apexcharts-data-labels",transform:d});var x="";void 0!==n&&(x=f(n,{seriesIndex:r,dataPointIndex:s,w:u}));var b=u.globals.series[r][s]<0,w=u.config.plotOptions.bar.dataLabels.position;"vertical"===u.config.plotOptions.bar.dataLabels.orientation&&("top"===w&&(h.textAnchor=b?"end":"start"),"center"===w&&(h.textAnchor="middle"),"bottom"===w&&(h.textAnchor=b?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<g.getTextRects(x,parseFloat(h.style.fontSize)).width&&(x=""),u.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?a.width/1.6>Math.abs(c)&&(x=""):a.height/1.6>Math.abs(l)&&(x=""));var _=e({},h);this.barCtx.isHorizontal&&n<0&&("start"===h.textAnchor?_.textAnchor="end":"end"===h.textAnchor&&(_.textAnchor="start")),p.plotDataLabelsText({x:i,y:o,text:x,i:r,j:s,parent:m,dataLabelsConfig:_,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return m}}]),t}(),I=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return r(t,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(f.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),i=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(t,e){var i=this.w;function o(i){for(var o=0;o<i.length;o++)i[o].index===e&&t.node.classList.add("apexcharts-series-collapsed")}o(i.globals.collapsedSeries),o(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.w,n=f.clone(o.globals.initialSeries);o.globals.previousPaths=[],i?(o.globals.collapsedSeries=[],o.globals.ancillaryCollapsedSeries=[],o.globals.collapsedSeriesIndices=[],o.globals.ancillaryCollapsedSeriesIndices=[]):n=this.emptyCollapsedSeries(n),o.config.series=n,t&&(e&&(o.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(n,o.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,i=0;i<t.length;i++)e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i].data=[]);return t}},{key:"toggleSeriesOnHover",value:function(t,e){var i=this.w;e||(e=t.target);var o=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===t.type){var n=parseInt(e.getAttribute("rel"),10)-1,r=null,s=null;i.globals.axisCharts||"radialBar"===i.config.chart.type?i.globals.axisCharts?(r=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),s=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']"))):r=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']")):r=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var a=0;a<o.length;a++)o[a].classList.add(this.legendInactiveClass);null!==r&&(i.globals.axisCharts||r.parentNode.classList.remove(this.legendInactiveClass),r.classList.remove(this.legendInactiveClass),null!==s&&s.classList.remove(this.legendInactiveClass))}else if("mouseout"===t.type)for(var l=0;l<o.length;l++)o[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var i=this,o=this.w,n=o.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),r=function(t){for(var e=0;e<n.length;e++)n[e].classList[t](i.legendInactiveClass)};if("mousemove"===t.type){var s=parseInt(e.getAttribute("rel"),10)-1;r("add"),function(t){for(var e=0;e<n.length;e++){var o=parseInt(n[e].getAttribute("val"),10);o>=t.from&&o<=t.to&&n[e].classList.remove(i.legendInactiveClass)}}(o.config.plotOptions.heatmap.colorScale.ranges[s])}else"mouseout"===t.type&&r("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",i=this.w,o=0;if(i.config.series.length>1)for(var n=i.config.series.map(function(e,o){var n=!1;return t&&(n="bar"===i.config.series[o].type||"column"===i.config.series[o].type),e.data&&e.data.length>0&&!n?o:-1}),r="asc"===e?0:n.length-1;"asc"===e?r<n.length:r>=0;"asc"===e?r++:r--)if(-1!==n[r]){o=n[r];break}return o}},{key:"getPreviousPaths",value:function(){var t=this.w;function e(e,i,o){for(var n=e[i].childNodes,r={type:o,paths:[],realIndex:e[i].getAttribute("data:realIndex")},s=0;s<n.length;s++)if(n[s].hasAttribute("pathTo")){var a=n[s].getAttribute("pathTo");r.paths.push({d:a})}t.globals.previousPaths.push(r)}t.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach(function(i){for(var o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i,"-series .apexcharts-series")),n=0;n<o.length;n++)e(o,n,i)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series"));if(i.length>0)for(var o=function(e){for(var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(e,"'] rect")),o=[],n=function(t){var e=function(e){return i[t].getAttribute(e)},n={x:parseFloat(e("x")),y:parseFloat(e("y")),width:parseFloat(e("width")),height:parseFloat(e("height"))};o.push({rect:n,color:i[t].getAttribute("color")})},r=0;r<i.length;r++)n(r);t.globals.previousPaths.push(o)},n=0;n<i.length;n++)o(n);t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(t){var e=this.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series"));if(i.length>0)for(var o=0;o<i.length;o++){for(var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series[data\\:realIndex='").concat(o,"'] circle")),r=[],s=0;s<n.length;s++)r.push({x:n[s].getAttribute("cx"),y:n[s].getAttribute("cy"),r:n[s].getAttribute("r")});e.globals.previousPaths.push(r)}}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,i=new v(this.ctx),o=t.globals.svgWidth/2,n=t.globals.svgHeight/2,r="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(o=10,r="start"):"right"===e.align&&(o=t.globals.svgWidth-10,r="end"),"top"===e.verticalAlign?n=50:"bottom"===e.verticalAlign&&(n=t.globals.svgHeight-50),o+=e.offsetX,n=n+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text){var s=i.drawText({x:o,y:n,text:e.text,textAnchor:r,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(s)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,i=0;i<t.length;i++)if(0===t[i].length)for(var o=0;o<t[e.globals.maxValsInArrayIndex].length;o++)t[i].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,i=this.filteredSeriesX(),o=0;o<i.length-1;o++)if(i[o][0]!==i[o+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(t){return t.length>0?t:[]})}}]),t}(),D=function(){function t(e){o(this,t),this.w=e.w,this.barCtx=e}return r(t,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<t.length;i++)if(t[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[i].length),e.globals.isXNumeric)for(var o=0;o<t[i].length;o++)e.globals.seriesX[i][o]>e.globals.minX&&e.globals.seriesX[i][o]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=t.length-1,e.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(){var t,e,i,o,n,r,s,a,l=this.w,c=l.globals.dataPoints;this.barCtx.isRangeBar&&(c=l.globals.labels.length);var h=this.barCtx.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(h=1),this.barCtx.isHorizontal)n=(i=l.globals.gridHeight/c)/h,l.globals.isXNumeric&&(n=(i=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),n=n*parseInt(this.barCtx.barOptions.barHeight,10)/100,a=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),e=(i-n*this.barCtx.seriesLen)/2;else{if(o=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(o=l.globals.gridWidth/l.globals.dataPoints),r=o/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var u=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(u=this.barCtx.initialXRatio),l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/u>0&&(o=l.globals.minXDiff/u),(r=o/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(r=1)}s=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),t=l.globals.padHorizontal+(o-r*this.barCtx.seriesLen)/2}return{x:t,y:e,yDivision:i,xDivision:o,barHeight:n,barWidth:r,zeroH:s,zeroW:a}}},{key:"getPathFillColor",value:function(t,e,i,o){var n=this.w,r=new E(this.barCtx.ctx),s=null,a=this.barCtx.barOptions.distributed?i:e;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(o){t[e][i]>=o.from&&t[e][i]<=o.to&&(s=o.color)}),n.config.series[e].data[i]&&n.config.series[e].data[i].fillColor&&(s=n.config.series[e].data[i].fillColor),r.fillPath({seriesNumber:this.barCtx.barOptions.distributed?a:o,dataPointIndex:i,color:s,value:t[e][i]})}},{key:"getStrokeWidth",value:function(t,e,i){var o=0,n=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[t][e],n.config.stroke.show&&(this.barCtx.isNullValue||(o=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),o}},{key:"barBackground",value:function(t){var e=t.j,i=t.i,o=t.x1,n=t.x2,r=t.y1,s=t.y2,a=t.elSeries,l=this.w,c=new v(this.barCtx.ctx),h=new I(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&h===i){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e%=this.barCtx.barOptions.colors.backgroundBarColors.length);var u=c.drawRect(void 0!==o?o:0,void 0!==r?r:0,void 0!==n?n:l.globals.gridWidth,void 0!==s?s:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[e],this.barCtx.barOptions.colors.backgroundBarOpacity);a.add(u),u.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e=t.barWidth,i=t.barXPosition,o=t.yRatio,n=t.y1,r=t.y2,s=t.strokeWidth,a=t.series,l=t.realIndex,c=t.i,h=t.j,u=t.w,d=new v(this.barCtx.ctx);(s=Array.isArray(s)?s[l]:s)||(s=0);var p=this.getRoundedBars(u,{barWidth:e,strokeWidth:s,yRatio:o,barXPosition:i,y1:n,y2:r},a,c,h),g=i,f=i+e,m=d.move(g,n),y=d.move(g,n),x=d.line(f-s,n);return u.globals.previousPaths.length>0&&(y=this.barCtx.getPreviousPath(l,h,!1)),m=m+d.line(g,p.y2)+p.pathWithRadius+d.line(f-s,p.y2)+x+x+"z",y=y+d.line(g,n)+x+x+x+x+x+d.line(g,n),u.config.chart.stacked&&(this.barCtx.yArrj.push(p.y2),this.barCtx.yArrjF.push(Math.abs(n-p.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[c][h])),{pathTo:m,pathFrom:y}}},{key:"getBarpaths",value:function(t){var e=t.barYPosition,i=t.barHeight,o=t.x1,n=t.x2,r=t.strokeWidth,s=t.series,a=t.realIndex,l=t.i,c=t.j,h=t.w,u=new v(this.barCtx.ctx);(r=Array.isArray(r)?r[a]:r)||(r=0);var d=this.getRoundedBars(h,{barHeight:i,strokeWidth:r,barYPosition:e,x2:n,x1:o},s,l,c),p=u.move(o,e),g=u.move(o,e);h.globals.previousPaths.length>0&&(g=this.barCtx.getPreviousPath(a,c,!1));var f=e,m=e+i,y=u.line(o,m-r);return p=p+u.line(d.x2,f)+d.pathWithRadius+u.line(d.x2,m-r)+y+y+"z",g=g+u.line(o,f)+y+y+y+y+y+u.line(o,f),h.config.chart.stacked&&(this.barCtx.xArrj.push(d.x2),this.barCtx.xArrjF.push(Math.abs(o-d.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[l][c])),{pathTo:p,pathFrom:g}}},{key:"getRoundedBars",value:function(t,e,i,o,n){var r=new v(this.barCtx.ctx),s=0,a=t.config.plotOptions.bar.borderRadius,l=Array.isArray(a);if(s=l?a[o>a.length-1?a.length-1:o]:a,t.config.chart.stacked&&i.length>1&&o!==this.barCtx.radiusOnSeriesNumber&&!l&&(s=0),this.barCtx.isHorizontal){var c="",h=e.x2;if(Math.abs(e.x1-e.x2)<s&&(s=Math.abs(e.x1-e.x2)),void 0!==i[o][n]||null!==i[o][n]){var u=this.barCtx.isReversed?i[o][n]>0:i[o][n]<0;u&&(s*=-1),c=r.quadraticCurve((h-=s)+s,e.barYPosition,h+s,e.barYPosition+(u?-1*s:s))+r.line(h+s,e.barYPosition+e.barHeight-e.strokeWidth-(u?-1*s:s))+r.quadraticCurve(h+s,e.barYPosition+e.barHeight-e.strokeWidth,h,e.barYPosition+e.barHeight-e.strokeWidth)}return{pathWithRadius:c,x2:h}}var d="",p=e.y2;if(Math.abs(e.y1-e.y2)<s&&(s=Math.abs(e.y1-e.y2)),void 0!==i[o][n]||null!==i[o][n]){var g=i[o][n]<0;g&&(s*=-1),d=r.quadraticCurve(e.barXPosition,(p+=s)-s,e.barXPosition+(g?-1*s:s),p-s)+r.line(e.barXPosition+e.barWidth-e.strokeWidth-(g?-1*s:s),p-s)+r.quadraticCurve(e.barXPosition+e.barWidth-e.strokeWidth,p-s,e.barXPosition+e.barWidth-e.strokeWidth,p)}return{pathWithRadius:d,y2:p}}},{key:"checkZeroSeries",value:function(t){for(var e=t.series,i=this.w,o=0;o<e.length;o++){for(var n=0,r=0;r<e[i.globals.maxValsInArrayIndex].length;r++)n+=e[o][r];0===n&&this.barCtx.zeroSerieses.push(o)}for(var s=e.length-1;s>=0;s--)this.barCtx.zeroSerieses.indexOf(s)>-1&&s===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var a=e.length-1;a>=0;a--)i.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=i?e:null;return null!=t&&(o=e+t/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?t/this.barCtx.invertedYRatio:0)),o}},{key:"getYForValue",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=i?e:null;return null!=t&&(o=e-t/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?t/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),o}},{key:"getGoalValues",value:function(t,e,i,o,n){var r=this,a=this.w,l=[];return a.globals.seriesGoals[o]&&a.globals.seriesGoals[o][n]&&Array.isArray(a.globals.seriesGoals[o][n])&&a.globals.seriesGoals[o][n].forEach(function(o){var n;l.push((s(n={},t,"x"===t?r.getXForValue(o.value,e,!1):r.getYForValue(o.value,i,!1)),s(n,"attrs",o),n))}),l}},{key:"drawGoalLine",value:function(t){var e=t.barXPosition,i=t.barYPosition,o=t.goalX,n=t.goalY,r=t.barWidth,s=t.barHeight,a=new v(this.barCtx.ctx),l=a.group({className:"apexcharts-bar-goals-groups"}),c=null;return this.barCtx.isHorizontal?Array.isArray(o)&&o.forEach(function(t){var e=void 0!==t.attrs.strokeHeight?t.attrs.strokeHeight:s/2,o=i+e+s/2;c=a.drawLine(t.x,o-2*e,t.x,o,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeWidth?t.attrs.strokeWidth:2,t.attrs.strokeLineCap),l.add(c)}):Array.isArray(n)&&n.forEach(function(t){var i=void 0!==t.attrs.strokeWidth?t.attrs.strokeWidth:r/2,o=e+i+r/2;c=a.drawLine(o-2*i,t.y,o,t.y,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeHeight?t.attrs.strokeHeight:2,t.attrs.strokeLineCap),l.add(c)}),l}}]),t}(),N=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w;var n=this.w;this.barOptions=n.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=n.config.stroke.width,this.isNullValue=!1,this.isRangeBar=n.globals.seriesRangeBar.length&&this.isHorizontal,this.xyRatios=i,null!==this.xyRatios&&(this.xRatio=i.xRatio,this.initialXRatio=i.initialXRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new D(this)}return r(t,[{key:"draw",value:function(t,i){var o=this.w,n=new v(this.ctx),r=new x(this.ctx,o);t=r.getLogSeries(t),this.series=t,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var s=n.group({class:"apexcharts-bar-series apexcharts-plot-series"});o.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var a=0,l=0;a<t.length;a++,l++){var c,h,u,d,p=void 0,g=void 0,m=[],y=[],b=o.globals.comboCharts?i[a]:a,w=n.group({class:"apexcharts-series",rel:a+1,seriesName:f.escapeString(o.globals.seriesNames[b]),"data:realIndex":b});this.ctx.series.addCollapsedClassToSeries(w,b),t[a].length>0&&(this.visibleI=this.visibleI+1);var _=0,S=0;this.yRatio.length>1&&(this.yaxisIndex=b),this.isReversed=o.config.yaxis[this.yaxisIndex]&&o.config.yaxis[this.yaxisIndex].reversed;var C=this.barHelpers.initialPositions();g=C.y,_=C.barHeight,h=C.yDivision,d=C.zeroW,p=C.x,S=C.barWidth,c=C.xDivision,u=C.zeroH,this.horizontal||y.push(p+S/2);for(var k=n.group({class:"apexcharts-datalabels","data:realIndex":b}),A=n.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),E=0;E<o.globals.dataPoints;E++){var T=this.barHelpers.getStrokeWidth(a,E,b),M=null,L={indexes:{i:a,j:E,realIndex:b,bc:l},x:p,y:g,strokeWidth:T,elSeries:w};this.isHorizontal?(M=this.drawBarPaths(e(e({},L),{},{barHeight:_,zeroW:d,yDivision:h})),S=this.series[a][E]/this.invertedYRatio):(M=this.drawColumnPaths(e(e({},L),{},{xDivision:c,barWidth:S,zeroH:u})),_=this.series[a][E]/this.yRatio[this.yaxisIndex]);var P=this.barHelpers.drawGoalLine({barXPosition:M.barXPosition,barYPosition:M.barYPosition,goalX:M.goalX,goalY:M.goalY,barHeight:_,barWidth:S});P&&A.add(P),g=M.y,p=M.x,E>0&&y.push(p+S/2),m.push(g);var I=this.barHelpers.getPathFillColor(t,a,E,b);this.renderSeries({realIndex:b,pathFill:I,j:E,i:a,pathFrom:M.pathFrom,pathTo:M.pathTo,strokeWidth:T,elSeries:w,x:p,y:g,series:t,barHeight:_,barWidth:S,elDataLabelsWrap:k,elGoalsMarkers:A,visibleSeries:this.visibleI,type:"bar"})}o.globals.seriesXvalues[b]=y,o.globals.seriesYvalues[b]=m,s.add(w)}return s}},{key:"renderSeries",value:function(t){var e=t.realIndex,i=t.pathFill,o=t.lineFill,n=t.j,r=t.i,s=t.pathFrom,a=t.pathTo,l=t.strokeWidth,c=t.elSeries,h=t.x,u=t.y,d=t.y1,p=t.y2,g=t.series,f=t.barHeight,m=t.barWidth,x=t.barYPosition,b=t.elDataLabelsWrap,w=t.elGoalsMarkers,_=t.visibleSeries,S=t.type,C=this.w,k=new v(this.ctx);o||(o=this.barOptions.distributed?C.globals.stroke.colors[n]:C.globals.stroke.colors[e]),C.config.series[r].data[n]&&C.config.series[r].data[n].strokeColor&&(o=C.config.series[r].data[n].strokeColor),this.isNullValue&&(i="none");var A=k.renderPaths({i:r,j:n,realIndex:e,pathFrom:s,pathTo:a,stroke:o,strokeWidth:l,strokeLineCap:C.config.stroke.lineCap,fill:i,animationDelay:n/C.config.chart.animations.animateGradually.delay*(C.config.chart.animations.speed/C.globals.dataPoints)/2.4,initialSpeed:C.config.chart.animations.speed,dataChangeSpeed:C.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(S,"-area")});A.attr("clip-path","url(#gridRectMask".concat(C.globals.cuid,")"));var E=C.config.forecastDataPoints;E.count>0&&n>=C.globals.dataPoints-E.count&&(A.node.setAttribute("stroke-dasharray",E.dashArray),A.node.setAttribute("stroke-width",E.strokeWidth),A.node.setAttribute("fill-opacity",E.fillOpacity)),void 0!==d&&void 0!==p&&(A.attr("data-range-y1",d),A.attr("data-range-y2",p)),new y(this.ctx).setSelectionFilter(A,e,n),c.add(A);var T=new P(this).handleBarDataLabels({x:h,y:u,y1:d,y2:p,i:r,j:n,series:g,realIndex:e,barHeight:f,barWidth:m,barYPosition:x,renderedPath:A,visibleSeries:_});return null!==T&&b.add(T),c.add(b),w&&c.add(w),c}},{key:"drawBarPaths",value:function(t){var e,i=t.indexes,o=t.barHeight,n=t.strokeWidth,r=t.zeroW,s=t.y,a=t.yDivision,l=t.elSeries,c=this.w,h=i.i,u=i.j;c.globals.isXNumeric&&(s=(c.globals.seriesX[h][u]-c.globals.minX)/this.invertedXRatio-o);var d=s+o*this.visibleI;e=this.barHelpers.getXForValue(this.series[h][u],r);var p=this.barHelpers.getBarpaths({barYPosition:d,barHeight:o,x1:r,x2:e,strokeWidth:n,series:this.series,realIndex:i.realIndex,i:h,j:u,w:c});return c.globals.isXNumeric||(s+=a),this.barHelpers.barBackground({j:u,i:h,y1:d-o*this.visibleI,y2:o*this.seriesLen,elSeries:l}),{pathTo:p.pathTo,pathFrom:p.pathFrom,x:e,y:s,goalX:this.barHelpers.getGoalValues("x",r,null,h,u),barYPosition:d}}},{key:"drawColumnPaths",value:function(t){var e,i=t.indexes,o=t.x,n=t.xDivision,r=t.barWidth,s=t.zeroH,a=t.strokeWidth,l=t.elSeries,c=this.w,h=i.realIndex,u=i.i,d=i.j,p=i.bc;if(c.globals.isXNumeric){var g=h;c.globals.seriesX[h].length||(g=c.globals.maxValsInArrayIndex),o=(c.globals.seriesX[g][d]-c.globals.minX)/this.xRatio-r*this.seriesLen/2}var f=o+r*this.visibleI;e=this.barHelpers.getYForValue(this.series[u][d],s);var m=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:r,y1:s,y2:e,strokeWidth:a,series:this.series,realIndex:i.realIndex,i:u,j:d,w:c});return c.globals.isXNumeric||(o+=n),this.barHelpers.barBackground({bc:p,j:d,i:u,x1:f-a/2-r*this.visibleI,x2:r*this.seriesLen+a/2,elSeries:l}),{pathTo:m.pathTo,pathFrom:m.pathFrom,x:o,y:e,goalY:this.barHelpers.getGoalValues("y",null,s,u,d),barXPosition:f}}},{key:"getPreviousPath",value:function(t,e){for(var i,o=this.w,n=0;n<o.globals.previousPaths.length;n++){var r=o.globals.previousPaths[n];r.paths&&r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(t,10)&&void 0!==o.globals.previousPaths[n].paths[e]&&(i=o.globals.previousPaths[n].paths[e].d)}return i}}]),t}(),F=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return r(t,[{key:"isValidDate",value:function(t){return!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var i=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var i=this.w.globals.locale,o=this.w.config.xaxis.labels.datetimeUTC,n=["\0"].concat(d(i.months)),r=["\x01"].concat(d(i.shortMonths)),s=["\x02"].concat(d(i.days)),a=["\x03"].concat(d(i.shortDays));function l(t,e){var i=t+"";for(e=e||2;i.length<e;)i="0"+i;return i}var c=o?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var h=(o?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+n[0])).replace(/(^|[^\\])MMM/g,"$1"+r[0])).replace(/(^|[^\\])MM/g,"$1"+l(h))).replace(/(^|[^\\])M/g,"$1"+h);var u=o?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+s[0])).replace(/(^|[^\\])ddd/g,"$1"+a[0])).replace(/(^|[^\\])dd/g,"$1"+l(u))).replace(/(^|[^\\])d/g,"$1"+u);var p=o?t.getUTCHours():t.getHours(),g=p>12?p-12:0===p?12:p;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+l(p))).replace(/(^|[^\\])H/g,"$1"+p)).replace(/(^|[^\\])hh+/g,"$1"+l(g))).replace(/(^|[^\\])h/g,"$1"+g);var f=o?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+l(f))).replace(/(^|[^\\])m/g,"$1"+f);var m=o?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+l(m))).replace(/(^|[^\\])s/g,"$1"+m);var y=o?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+l(y,3)),y=Math.round(y/10),e=e.replace(/(^|[^\\])ff/g,"$1"+l(y)),y=Math.round(y/10);var v=p<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+y)).replace(/(^|[^\\])TT+/g,"$1"+v)).replace(/(^|[^\\])T/g,"$1"+v.charAt(0));var x=v.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+x)).replace(/(^|[^\\])t/g,"$1"+x.charAt(0));var b=-t.getTimezoneOffset(),w=o||!b?"Z":b>0?"+":"-";if(!o){var _=(b=Math.abs(b))%60;w+=l(Math.floor(b/60))+":"+l(_)}e=e.replace(/(^|[^\\])K/g,"$1"+w);var S=(o?t.getUTCDay():t.getDay())+1;return(e=(e=(e=(e=e.replace(new RegExp(s[0],"g"),s[S])).replace(new RegExp(a[0],"g"),a[S])).replace(new RegExp(n[0],"g"),n[h])).replace(new RegExp(r[0],"g"),r[h])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,i){var o=this.w;void 0!==o.config.xaxis.min&&(t=o.config.xaxis.min),void 0!==o.config.xaxis.max&&(e=o.config.xaxis.max);var n=this.getDate(t),r=this.getDate(e),s=this.formatDate(n,"yyyy MM dd HH mm ss fff").split(" "),a=this.formatDate(r,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(s[6],10),maxMillisecond:parseInt(a[6],10),minSecond:parseInt(s[5],10),maxSecond:parseInt(a[5],10),minMinute:parseInt(s[4],10),maxMinute:parseInt(a[4],10),minHour:parseInt(s[3],10),maxHour:parseInt(a[3],10),minDate:parseInt(s[2],10),maxDate:parseInt(a[2],10),minMonth:parseInt(s[1],10)-1,maxMonth:parseInt(a[1],10)-1,minYear:parseInt(s[0],10),maxYear:parseInt(a[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,i){return this.determineDaysOfMonths(t,e)-i}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,i){var o=this.daysCntOfYear[e]+i;return e>1&&this.isLeapYear()&&o++,o}},{key:"determineDaysOfMonths",value:function(t,e){var i=30;switch(t=f.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(i=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:i=31}return i}}]),t}(),O=function(t){a(n,t);var i=u(n);function n(){return o(this,n),i.apply(this,arguments)}return r(n,[{key:"draw",value:function(t,i){var o=this.w,n=new v(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=t,this.seriesRangeStart=o.globals.seriesRangeStart,this.seriesRangeEnd=o.globals.seriesRangeEnd,this.barHelpers.initVariables(t);for(var r=n.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),s=0;s<t.length;s++){var a,l,c,h=void 0,u=void 0,d=void 0,p=o.globals.comboCharts?i[s]:s,g=n.group({class:"apexcharts-series",seriesName:f.escapeString(o.globals.seriesNames[p]),rel:s+1,"data:realIndex":p});this.ctx.series.addCollapsedClassToSeries(g,p),t[s].length>0&&(this.visibleI=this.visibleI+1);var m=0,y=0;this.yRatio.length>1&&(this.yaxisIndex=p);var x=this.barHelpers.initialPositions();u=x.y,c=x.zeroW,h=x.x,y=x.barWidth,a=x.xDivision,l=x.zeroH;for(var b=n.group({class:"apexcharts-datalabels","data:realIndex":p}),w=n.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),_=0;_<o.globals.dataPoints;_++){var S=this.barHelpers.getStrokeWidth(s,_,p),C=this.seriesRangeStart[s][_],k=this.seriesRangeEnd[s][_],A=null,E=null,T={x:h,y:u,strokeWidth:S,elSeries:g};if(d=x.yDivision,m=x.barHeight,this.isHorizontal){E=u+m*this.visibleI;var M=this.seriesLen;o.config.plotOptions.bar.rangeBarGroupRows&&(M=1);var L=(d-m*M)/2;if(void 0===o.config.series[s].data[_])break;if(o.config.series[s].data[_].x){var P=this.detectOverlappingBars({i:s,j:_,barYPosition:E,srty:L,barHeight:m,yDivision:d,initPositions:x});m=P.barHeight,E=P.barYPosition}y=(A=this.drawRangeBarPaths(e({indexes:{i:s,j:_,realIndex:p},barHeight:m,barYPosition:E,zeroW:c,yDivision:d,y1:C,y2:k},T))).barWidth}else m=(A=this.drawRangeColumnPaths(e({indexes:{i:s,j:_,realIndex:p},zeroH:l,barWidth:y,xDivision:a},T))).barHeight;var I=this.barHelpers.drawGoalLine({barXPosition:A.barXPosition,barYPosition:E,goalX:A.goalX,goalY:A.goalY,barHeight:m,barWidth:y});I&&w.add(I),u=A.y,h=A.x;var D=this.barHelpers.getPathFillColor(t,s,_,p);this.renderSeries({realIndex:p,pathFill:D,lineFill:o.globals.stroke.colors[p],j:_,i:s,x:h,y:u,y1:C,y2:k,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:S,elSeries:g,series:t,barHeight:m,barYPosition:E,barWidth:y,elDataLabelsWrap:b,elGoalsMarkers:w,visibleSeries:this.visibleI,type:"rangebar"})}r.add(g)}return r}},{key:"detectOverlappingBars",value:function(t){var e=t.i,i=t.j,o=t.barYPosition,n=t.srty,r=t.barHeight,s=t.yDivision,a=t.initPositions,l=this.w,c=[],h=l.config.series[e].data[i].rangeName,u=l.config.series[e].data[i].x,d=l.globals.labels.indexOf(u),p=l.globals.seriesRangeBar[e].findIndex(function(t){return t.x===u&&t.overlaps.length>0});return o=l.config.plotOptions.bar.rangeBarGroupRows?n+s*d:n+r*this.visibleI+s*d,p>-1&&!l.config.plotOptions.bar.rangeBarOverlap&&(c=l.globals.seriesRangeBar[e][p].overlaps).indexOf(h)>-1&&(o=(r=a.barHeight/c.length)*this.visibleI+s*(100-parseInt(this.barOptions.barHeight,10))/100/2+r*(this.visibleI+c.indexOf(h))+s*d),{barYPosition:o,barHeight:r}}},{key:"drawRangeColumnPaths",value:function(t){var e=t.indexes,i=t.x,o=t.xDivision,n=t.barWidth,r=t.zeroH,s=this.w,a=e.i,l=e.j,c=this.yRatio[this.yaxisIndex],h=e.realIndex,u=this.getRangeValue(h,l),d=Math.min(u.start,u.end),p=Math.max(u.start,u.end);s.globals.isXNumeric&&(i=(s.globals.seriesX[a][l]-s.globals.minX)/this.xRatio-n/2);var g=i+n*this.visibleI;null==this.series[a][l]?d=r:(d=r-d/c,p=r-p/c);var f=Math.abs(p-d),m=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:n,y1:d,y2:p,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:e.realIndex,i:h,j:l,w:s});return s.globals.isXNumeric||(i+=o),{pathTo:m.pathTo,pathFrom:m.pathFrom,barHeight:f,x:i,y:p,goalY:this.barHelpers.getGoalValues("y",null,r,a,l),barXPosition:g}}},{key:"drawRangeBarPaths",value:function(t){var e=t.indexes,i=t.y,o=t.yDivision,n=t.barHeight,r=t.barYPosition,s=t.zeroW,a=this.w,l=s+t.y1/this.invertedYRatio,c=s+t.y2/this.invertedYRatio,h=Math.abs(c-l),u=this.barHelpers.getBarpaths({barYPosition:r,barHeight:n,x1:l,x2:c,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:e.realIndex,realIndex:e.realIndex,j:e.j,w:a});return a.globals.isXNumeric||(i+=o),{pathTo:u.pathTo,pathFrom:u.pathFrom,barWidth:h,x:c,goalX:this.barHelpers.getGoalValues("x",s,null,e.realIndex,e.j),y:i}}},{key:"getRangeValue",value:function(t,e){var i=this.w;return{start:i.globals.seriesRangeStart[t][e],end:i.globals.seriesRangeEnd[t][e]}}},{key:"getTooltipValues",value:function(t){var e=t.ctx,i=t.seriesIndex,o=t.dataPointIndex,n=t.y1,r=t.y2,s=t.w,a=s.globals.seriesRangeStart[i][o],l=s.globals.seriesRangeEnd[i][o],c=s.globals.labels[o],h=s.config.series[i].name?s.config.series[i].name:"",u=s.config.tooltip.y.formatter,d=s.config.tooltip.y.title.formatter,p={w:s,seriesIndex:i,dataPointIndex:o,start:a,end:l};"function"==typeof d&&(h=d(h,p)),Number.isFinite(n)&&Number.isFinite(r)&&(a=n,l=r,s.config.series[i].data[o].x&&(c=s.config.series[i].data[o].x+":"),"function"==typeof u&&(c=u(c,p)));var g="",f="",m=s.globals.colors[i];if(void 0===s.config.tooltip.x.formatter)if("datetime"===s.config.xaxis.type){var y=new F(e);g=y.formatDate(y.getDate(a),s.config.tooltip.x.format),f=y.formatDate(y.getDate(l),s.config.tooltip.x.format)}else g=a,f=l;else g=s.config.tooltip.x.formatter(a),f=s.config.tooltip.x.formatter(l);return{start:a,end:l,startVal:g,endVal:f,ylabel:c,color:m,seriesName:h}}},{key:"buildCustomTooltipHTML",value:function(t){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t.color+'">'+(t.seriesName||"")+'</span></div><div> <span class="category">'+t.ylabel+' </span> <span class="value start-value">'+t.start+'</span> <span class="separator">-</span> <span class="value end-value">'+t.end+"</span></div></div>"}}]),n}(N),R=function(){function t(e){o(this,t),this.opts=e}return r(t,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,f.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var t=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){return t._getBoxTooltip(e.w,e.seriesIndex,e.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var t=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){return t._getBoxTooltip(e.w,e.seriesIndex,e.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){var i=e.seriesIndex,o=e.dataPointIndex,n=e.w;return n.globals.seriesRangeEnd[i][o]-n.globals.seriesRangeStart[i][o]},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?function(t){var e=new O(t.ctx,null),i=e.getTooltipValues(t);return e.buildCustomTooltipHTML({color:i.color,seriesName:i.seriesName,ylabel:i.ylabel,start:i.startVal,end:i.endVal})}(t):function(t){var e=new O(t.ctx,null),i=e.getTooltipValues(t);return e.buildCustomTooltipHTML({color:i.color,seriesName:i.seriesName,ylabel:i.ylabel,start:i.start,end:i.end})}(t)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(t){return f.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach(function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100}),"bar"===t.chart.type&&(t.dataLabels.formatter=e||function(t){return"number"==typeof t&&t?t.toFixed(0)+"%":t}),t}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,i){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(t){return f.isNumber(t)?Math.floor(t):t};var o=t.xaxis.labels.formatter,n=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return i&&i.length&&(n=i.map(function(t){return Array.isArray(t)?t:String(t)})),n&&n.length&&(t.xaxis.labels.formatter=function(t){return f.isNumber(t)?o(n[Math.floor(t)-1]):o(t)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(t,e,i,o,n){var r=t.globals.seriesCandleO[e][i],s=t.globals.seriesCandleH[e][i],a=t.globals.seriesCandleM[e][i],l=t.globals.seriesCandleL[e][i],c=t.globals.seriesCandleC[e][i];return t.config.series[e].type&&t.config.series[e].type!==n?'<div class="apexcharts-custom-tooltip">\n          '.concat(t.config.series[e].name?t.config.series[e].name:"series-"+(e+1),": <strong>").concat(t.globals.series[e][i],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(o[0],': <span class="value">')+r+"</span></div>"+"<div>".concat(o[1],': <span class="value">')+s+"</span></div>"+(a?"<div>".concat(o[2],': <span class="value">')+a+"</span></div>":"")+"<div>".concat(o[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(o[4],': <span class="value">')+c+"</span></div></div>"}}]),t}(),G=function(){function t(e){o(this,t),this.opts=e}return r(t,[{key:"init",value:function(t){var e=t.responsiveOverride,o=this.opts,n=new k,r=new R(o);this.chartType=o.chart.type,"histogram"===this.chartType&&(o.chart.type="bar",o=f.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},o)),o=this.extendYAxis(o),o=this.extendAnnotations(o);var s=n.init(),a={};if(o&&"object"===i(o)){var l={};l=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(o.chart.type)?r[o.chart.type]():r.line(),o.chart.brush&&o.chart.brush.enabled&&(l=r.brush(l)),o.chart.stacked&&"100%"===o.chart.stackType&&(o=r.stacked100(o)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(o),o.xaxis=o.xaxis||window.Apex.xaxis||{},e||(o.xaxis.convertedCatToNumeric=!1),((o=this.checkForCatToNumericXAxis(this.chartType,l,o)).chart.sparkline&&o.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=r.sparkline(l)),a=f.extend(s,l)}var c=f.extend(a,window.Apex);return s=f.extend(c,o),this.handleUserInputErrors(s)}},{key:"checkForCatToNumericXAxis",value:function(t,e,i){var o=new R(i);return("bar"===t||"boxPlot"===t)&&i.plotOptions&&i.plotOptions.bar&&i.plotOptions.bar.horizontal||"pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t||!("datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type)||"between"===(i.xaxis.tickPlacement?i.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement)||(i=o.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(t,e){var i=new k;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=f.extend(t.yaxis,window.Apex.yaxis)),t.yaxis=t.yaxis.constructor!==Array?[f.extend(i.yAxis,t.yaxis)]:f.extendArray(t.yaxis,i.yAxis);var o=!1;t.yaxis.forEach(function(t){t.logarithmic&&(o=!0)});var n=t.series;return e&&!n&&(n=e.config.series),o&&n.length!==t.yaxis.length&&n.length&&(t.yaxis=n.map(function(e,o){if(e.name||(n[o].name="series-".concat(o+1)),t.yaxis[o])return t.yaxis[o].seriesName=n[o].name,t.yaxis[o];var r=f.extend(i.yAxis,t.yaxis[0]);return r.show=!1,r})),o&&n.length>1&&n.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new k;return t.annotations.yaxis=f.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new k;return t.annotations.xaxis=f.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new k;return t.annotations.points=f.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.chart.background||(t.chart.background="#424242"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===e.chart.type&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return"bar"!==e.chart.type&&"rangeBar"!==e.chart.type||e.tooltip.shared&&"barWidth"===e.xaxis.crosshairs.width&&e.series.length>1&&(e.xaxis.crosshairs.width="tickWidth"),"candlestick"!==e.chart.type&&"boxPlot"!==e.chart.type||e.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(e.chart.type," chart is not supported.")),e.yaxis[0].reversed=!1),e}}]),t}(),B=function(){function t(){o(this,t)}return r(t,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRangeBar=[],t.seriesPercent=[],t.seriesGoals=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.hasGroups=!1,t.groups=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.xaxisLabelsCount=0,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=f.extend({},t),e.initialSeries=f.clone(t.series),e.lastXAxis=f.clone(e.initialConfig.xaxis),e.lastYAxis=f.clone(e.initialConfig.yaxis),e}}]),t}(),z=function(){function t(e){o(this,t),this.opts=e}return r(t,[{key:"init",value:function(){var t=new G(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new B).init(t)}}}]),t}(),H=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new x(this.ctx)}return r(t,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new I(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new I(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!=t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var i=this.w.config,o=this.w.globals,n="boxPlot"===i.chart.type||"boxPlot"===i.series[e].type,r=0;r<t[e].data.length;r++)if(void 0!==t[e].data[r][1]&&(Array.isArray(t[e].data[r][1])&&4===t[e].data[r][1].length&&!n?this.twoDSeries.push(f.parseNumber(t[e].data[r][1][3])):this.twoDSeries.push(f.parseNumber(t[e].data[r].length>=5?t[e].data[r][4]:t[e].data[r][1])),o.dataFormatXNumeric=!0),"datetime"===i.xaxis.type){var s=new Date(t[e].data[r][0]);s=new Date(s).getTime(),this.twoDSeriesX.push(s)}else this.twoDSeriesX.push(t[e].data[r][0]);for(var a=0;a<t[e].data.length;a++)void 0!==t[e].data[a][2]&&(this.threeDSeries.push(t[e].data[a][2]),o.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var i=this.w.config,o=this.w.globals,n=new F(this.ctx),r=e;o.collapsedSeriesIndices.indexOf(e)>-1&&(r=this.activeSeriesIndex);for(var s=0;s<t[e].data.length;s++)void 0!==t[e].data[s].y&&(Array.isArray(t[e].data[s].y)?this.twoDSeries.push(f.parseNumber(t[e].data[s].y[t[e].data[s].y.length-1])):this.twoDSeries.push(f.parseNumber(t[e].data[s].y))),void 0!==t[e].data[s].goals&&Array.isArray(t[e].data[s].goals)?(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(t[e].data[s].goals)):(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(null));for(var a=0;a<t[r].data.length;a++){var l="string"==typeof t[r].data[a].x,c=Array.isArray(t[r].data[a].x),h=!c&&!!n.isValidDate(t[r].data[a].x.toString());l||h?l||i.xaxis.convertedCatToNumeric?"datetime"!==i.xaxis.type||o.isBarHorizontal&&o.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[r].data[a].x)):this.twoDSeriesX.push(n.parseDate(t[r].data[a].x)):"datetime"===i.xaxis.type?this.twoDSeriesX.push(n.parseDate(t[r].data[a].x.toString())):(o.dataFormatXNumeric=!0,o.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[r].data[a].x))):c?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[r].data[a].x)):(o.isXNumeric=!0,o.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[r].data[a].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var u=0;u<t[e].data.length;u++)this.threeDSeries.push(t[e].data[u].z);o.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var i=this.w.globals,o={};return this.isFormat2DArray()?o=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(o=this.handleRangeDataFormat("xy",t,e)),i.seriesRangeStart.push(o.start),i.seriesRangeEnd.push(o.end),i.seriesRangeBar.push(o.rangeUniques),i.seriesRangeBar.forEach(function(t,e){t&&t.forEach(function(t,e){t.y.forEach(function(e,i){for(var o=0;o<t.y.length;o++)i!==o&&e.y1<=t.y[o].y2&&t.y[o].y1<=e.y2&&(t.overlaps.indexOf(e.rangeName)<0&&t.overlaps.push(e.rangeName),t.overlaps.indexOf(t.y[o].rangeName)<0&&t.overlaps.push(t.y[o].rangeName))})})}),o}},{key:"handleCandleStickBoxData",value:function(t,e){var i=this.w.globals,o={};return this.isFormat2DArray()?o=this.handleCandleStickBoxDataFormat("array",t,e):this.isFormatXY()&&(o=this.handleCandleStickBoxDataFormat("xy",t,e)),i.seriesCandleO[e]=o.o,i.seriesCandleH[e]=o.h,i.seriesCandleM[e]=o.m,i.seriesCandleL[e]=o.l,i.seriesCandleC[e]=o.c,o}},{key:"handleRangeDataFormat",value:function(t,e,i){var o=[],n=[],r=e[i].data.filter(function(t,e,i){return e===i.findIndex(function(e){return e.x===t.x})}).map(function(t,e){return{x:t.x,overlaps:[],y:[]}}),s="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",a=new I(this.ctx).getActiveConfigSeriesIndex();if("array"===t){if(2!==e[a].data[0][1].length)throw new Error(s);for(var l=0;l<e[i].data.length;l++)o.push(e[i].data[l][1][0]),n.push(e[i].data[l][1][1])}else if("xy"===t){if(2!==e[a].data[0].y.length)throw new Error(s);for(var c=function(t){var s=f.randomId(),a=e[i].data[t].x,l={y1:e[i].data[t].y[0],y2:e[i].data[t].y[1],rangeName:s};e[i].data[t].rangeName=s;var c=r.findIndex(function(t){return t.x===a});r[c].y.push(l),o.push(l.y1),n.push(l.y2)},h=0;h<e[i].data.length;h++)c(h)}return{start:o,end:n,rangeUniques:r}}},{key:"handleCandleStickBoxDataFormat",value:function(t,e,i){var o=this.w,n="boxPlot"===o.config.chart.type||"boxPlot"===o.config.series[i].type,r=[],s=[],a=[],l=[],c=[];if("array"===t)if(n&&6===e[i].data[0].length||!n&&5===e[i].data[0].length)for(var h=0;h<e[i].data.length;h++)r.push(e[i].data[h][1]),s.push(e[i].data[h][2]),n?(a.push(e[i].data[h][3]),l.push(e[i].data[h][4]),c.push(e[i].data[h][5])):(l.push(e[i].data[h][3]),c.push(e[i].data[h][4]));else for(var u=0;u<e[i].data.length;u++)Array.isArray(e[i].data[u][1])&&(r.push(e[i].data[u][1][0]),s.push(e[i].data[u][1][1]),n?(a.push(e[i].data[u][1][2]),l.push(e[i].data[u][1][3]),c.push(e[i].data[u][1][4])):(l.push(e[i].data[u][1][2]),c.push(e[i].data[u][1][3])));else if("xy"===t)for(var d=0;d<e[i].data.length;d++)Array.isArray(e[i].data[d].y)&&(r.push(e[i].data[d].y[0]),s.push(e[i].data[d].y[1]),n?(a.push(e[i].data[d].y[2]),l.push(e[i].data[d].y[3]),c.push(e[i].data[d].y[4])):(l.push(e[i].data[d].y[2]),c.push(e[i].data[d].y[3])));return{o:r,h:s,m:a,l:l,c:c}}},{key:"parseDataAxisCharts",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,o=this.w.config,n=this.w.globals,r=new F(i),s=o.labels.length>0?o.labels.slice():o.xaxis.categories.slice();n.isRangeBar="rangeBar"===o.chart.type&&n.isBarHorizontal,n.hasGroups="category"===o.xaxis.type&&o.xaxis.group.groups.length>0,n.hasGroups&&(n.groups=o.xaxis.group.groups);for(var a=function(){for(var t=0;t<s.length;t++)if("string"==typeof s[t]){if(!r.isValidDate(s[t]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(r.parseDate(s[t]))}else e.twoDSeriesX.push(s[t])},l=0;l<t.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==o.chart.type&&"rangeArea"!==o.chart.type&&"rangeBar"!==t[l].type&&"rangeArea"!==t[l].type||(n.isRangeData=!0,this.handleRangeData(t,l)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,l):this.isFormatXY()&&this.handleFormatXY(t,l),"candlestick"!==o.chart.type&&"candlestick"!==t[l].type&&"boxPlot"!==o.chart.type&&"boxPlot"!==t[l].type||this.handleCandleStickBoxData(t,l),n.series.push(this.twoDSeries),n.labels.push(this.twoDSeriesX),n.seriesX.push(this.twoDSeriesX),n.seriesGoals=this.seriesGoals,l!==this.activeSeriesIndex||this.fallbackToCategory||(n.isXNumeric=!0);else{"datetime"===o.xaxis.type?(n.isXNumeric=!0,a(),n.seriesX.push(this.twoDSeriesX)):"numeric"===o.xaxis.type&&(n.isXNumeric=!0,s.length>0&&(this.twoDSeriesX=s,n.seriesX.push(this.twoDSeriesX))),n.labels.push(this.twoDSeriesX);var c=t[l].data.map(function(t){return f.parseNumber(t)});n.series.push(c)}n.seriesZ.push(this.threeDSeries),n.seriesNames.push(void 0!==t[l].name?t[l].name:"series-"+parseInt(l+1,10)),n.seriesColors.push(void 0!==t[l].color?t[l].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,i=this.w.config;e.series=t.slice(),e.seriesNames=i.labels.slice();for(var o=0;o<e.series.length;o++)void 0===e.seriesNames[o]&&e.seriesNames.push("series-"+(o+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,i=this.w.globals;e.xaxis.categories.length>0?i.labels=e.xaxis.categories:e.labels.length>0?i.labels=e.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRangeBar.length&&(i.seriesRangeBar.map(function(t){t.forEach(function(t){i.labels.indexOf(t.x)<0&&t.x&&i.labels.push(t.x)})}),i.labels=i.labels.filter(function(t,e,i){return i.indexOf(t)===e})),e.xaxis.convertedCatToNumeric&&(new R(e).convertCatToNumericXaxis(e,this.ctx,i.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,i=this.w.config,o=[];if(e.axisCharts){if(e.series.length>0)if(this.isFormatXY())for(var n=i.series.map(function(t,e){return t.data.filter(function(t,e,i){return i.findIndex(function(e){return e.x===t.x})===e})}),r=n.reduce(function(t,e,i,o){return o[t].length>e.length?t:i},0),s=0;s<n[r].length;s++)o.push(s+1);else for(var a=0;a<e.series[e.maxValsInArrayIndex].length;a++)o.push(a+1);e.seriesX=[];for(var l=0;l<t.length;l++)e.seriesX.push(o);e.isXNumeric=!0}if(0===o.length){o=e.axisCharts?[]:e.series.map(function(t,e){return e+1});for(var c=0;c<t.length;c++)e.seriesX.push(o)}e.labels=o,i.xaxis.convertedCatToNumeric&&(e.categoryLabels=o.map(function(t){return i.xaxis.labels.formatter(t)})),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,i=e.config,o=e.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),o.axisCharts?this.parseDataAxisCharts(t):this.parseDataNonAxisCharts(t),this.coreUtils.getLargestSeries(),"bar"===i.chart.type&&i.chart.stacked){var n=new I(this.ctx);o.series=n.setNullSeriesToZeroValues(o.series)}this.coreUtils.getSeriesTotals(),o.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),o.dataFormatXNumeric||o.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var r=this.coreUtils.getCategoryLabels(o.labels),s=0;s<r.length;s++)if(Array.isArray(r[s])){o.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this,e=this.w;e.globals.ignoreYAxisIndexes=e.globals.collapsedSeries.map(function(i,o){if(t.w.globals.isMultipleYAxis&&!e.config.chart.stacked)return i.index})}}]),t}(),V=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return r(t,[{key:"xLabelFormat",value:function(t,e,i,o){var n=this.w;if("datetime"===n.config.xaxis.type&&void 0===n.config.xaxis.labels.formatter&&void 0===n.config.tooltip.x.formatter){var r=new F(this.ctx);return r.formatDate(r.getDate(e),n.config.tooltip.x.format)}return t(e,i,o)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map(function(t){return t}):t}},{key:"defaultYFormatter",value:function(t,e,i){var o=this.w;return f.isNumber(t)&&(t=t.toFixed(0!==o.globals.yValueDecimal?void 0!==e.decimalsInFloat?e.decimalsInFloat:o.globals.yValueDecimal:o.globals.maxYArr[i]-o.globals.minYArr[i]<5?1:0)),t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xaxisTooltipFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttKeyFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttZFormatter=function(t){return t},e.globals.legendFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.xLabelFormatter=void 0!==e.config.xaxis.labels.formatter?e.config.xaxis.labels.formatter:function(t){if(f.isNumber(t)){if(!e.config.xaxis.convertedCatToNumeric&&"numeric"===e.config.xaxis.type){if(f.isNumber(e.config.xaxis.decimalsInFloat))return t.toFixed(e.config.xaxis.decimalsInFloat);var i=e.globals.maxX-e.globals.minX;return t.toFixed(i>0&&i<100?1:0)}return t.toFixed(e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?1:0)}return t},e.globals.ttKeyFormatter="function"==typeof e.config.tooltip.x.formatter?e.config.tooltip.x.formatter:e.globals.xLabelFormatter,"function"==typeof e.config.xaxis.tooltip.formatter&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||void 0!==e.config.tooltip.y.formatter)&&(e.globals.ttVal=e.config.tooltip.y),void 0!==e.config.tooltip.z.formatter&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),void 0!==e.config.legend.formatter&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach(function(i,o){e.globals.yLabelFormatters[o]=void 0!==i.labels.formatter?i.labels.formatter:function(n){return e.globals.xyCharts?Array.isArray(n)?n.map(function(e){return t.defaultYFormatter(e,i,o)}):t.defaultYFormatter(n,i,o):n}}),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce(function(t,e){return t.length>e.length?t:e},0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),t}(),Y=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"getLabel",value:function(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=this.w,l=void 0===t[o]?"":t[o],c=l,h=a.globals.xLabelFormatter,u=a.config.xaxis.labels.formatter,d=!1,p=new V(this.ctx),g=l;s&&(c=p.xLabelFormat(h,l,g,{i:o,dateFormatter:new F(this.ctx).formatDate,w:a}),void 0!==u&&(c=u(l,t[o],{i:o,dateFormatter:new F(this.ctx).formatDate,w:a})));var f=function(t){var i=null;return e.forEach(function(t){"month"===t.unit?i="year":"day"===t.unit?i="month":"hour"===t.unit?i="day":"minute"===t.unit&&(i="hour")}),i===t};e.length>0?(d=f(e[o].unit),i=e[o].position,c=e[o].value):"datetime"===a.config.xaxis.type&&void 0===u&&(c=""),void 0===c&&(c=""),c=Array.isArray(c)?c:c.toString();var m=new v(this.ctx),y={};y=a.globals.rotateXLabels&&s?m.getTextRects(c,parseInt(r,10),null,"rotate(".concat(a.config.xaxis.labels.rotate," 0 0)"),!1):m.getTextRects(c,parseInt(r,10));var x=!a.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(c)&&(0===c.indexOf("NaN")||0===c.toLowerCase().indexOf("invalid")||c.toLowerCase().indexOf("infinity")>=0||n.indexOf(c)>=0&&x)&&(c=""),{x:i,text:c,textRect:y,isBold:d}}},{key:"checkLabelBasedOnTickamount",value:function(t,e,i){var o=this.w,n=o.config.xaxis.tickAmount;return"dataPoints"===n&&(n=Math.round(o.globals.gridWidth/120)),n>i||t%Math.round(i/(n+1))==0||(e.text=""),e}},{key:"checkForOverflowingLabels",value:function(t,e,i,o,n){var r=this.w;if(0===t&&r.globals.skipFirstTimelinelabel&&(e.text=""),t===i-1&&r.globals.skipLastTimelinelabel&&(e.text=""),r.config.xaxis.labels.hideOverlappingLabels&&o.length>0){var s=n[n.length-1];e.x<s.textRect.width/(r.globals.rotateXLabels?Math.abs(r.config.xaxis.labels.rotate)/12:1.01)+s.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var i=this.w;return i.config.yaxis[t]&&i.config.yaxis[t].reversed&&e.reverse(),e}},{key:"isYAxisHidden",value:function(t){var e=this.w,i=new x(this.ctx);return!e.config.yaxis[t].show||!e.config.yaxis[t].showForNullSeries&&i.isSeriesNull(t)&&-1===e.globals.collapsedSeriesIndices.indexOf(t)}},{key:"getYAxisForeColor",value:function(t,e){var i=this.w;return Array.isArray(t)&&i.globals.yAxisScale[e]&&this.ctx.theme.pushExtraColors(t,i.globals.yAxisScale[e].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,e,i,o,n,r,s){var a=this.w,l=new v(this.ctx),c=a.globals.translateY;if(o.show&&e>0){!0===a.config.yaxis[n].opposite&&(t+=o.width);for(var h=e;h>=0;h--){var u=c+e/10+a.config.yaxis[n].labels.offsetY-1;a.globals.isBarHorizontal&&(u=r*h),"heatmap"===a.config.chart.type&&(u+=r/2);var d=l.drawLine(t+i.offsetX-o.width+o.offsetX,u+o.offsetY,t+i.offsetX+o.offsetX,u+o.offsetY,o.color);s.add(d),c+=r}}}}]),t}(),j=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"scaleSvgNode",value:function(t,e){var i=parseFloat(t.getAttributeNS(null,"width")),o=parseFloat(t.getAttributeNS(null,"height"));t.setAttributeNS(null,"width",i*e),t.setAttributeNS(null,"height",o*e),t.setAttributeNS(null,"viewBox","0 0 "+i+" "+o)}},{key:"fixSvgStringForIe11",value:function(t){if(!f.isIE11())return t.replace(/&nbsp;/g,"&#160;");var e=0,i=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(t){return 2==++e?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':t});return(i=i.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(t){null==t&&(t=1);var e=this.w.globals.dom.Paper.svg();if(1!==t){var i=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(i,t),e=(new XMLSerializer).serializeToString(i)}return this.fixSvgStringForIe11(e)}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(o,function(t){t.setAttribute("width",0)}),e&&e[0]&&(e[0].setAttribute("x",-500),e[0].setAttribute("x1",-500),e[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var t=this.getSvgString(),e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(e)}},{key:"dataURI",value:function(t){var e=this;return new Promise(function(i){var o=e.w,n=t?t.scale||t.width/o.globals.svgWidth:1;e.cleanup();var r=document.createElement("canvas");r.width=o.globals.svgWidth*n,r.height=parseInt(o.globals.dom.elWrap.style.height,10)*n;var s="transparent"===o.config.chart.background?"#fff":o.config.chart.background,a=r.getContext("2d");a.fillStyle=s,a.fillRect(0,0,r.width*n,r.height*n);var l=e.getSvgString(n);if(window.canvg&&f.isIE11()){var c=window.canvg.Canvg.fromString(a,l,{ignoreClear:!0,ignoreDimensions:!0});c.start();var h=r.msToBlob();c.stop(),i({blob:h})}else{var u="data:image/svg+xml,"+encodeURIComponent(l),d=new Image;d.crossOrigin="anonymous",d.onload=function(){if(a.drawImage(d,0,0),r.msToBlob){var t=r.msToBlob();i({blob:t})}else{var e=r.toDataURL("image/png");i({imgURI:e})}},d.src=u}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var t=this;this.dataURI().then(function(e){var i=e.imgURI,o=e.blob;o?navigator.msSaveOrOpenBlob(o,t.w.globals.chartID+".png"):t.triggerDownload(i,t.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(t){var e=this,i=t.series,o=t.columnDelimiter,n=t.lineDelimiter,r=void 0===n?"\n":n,s=this.w,a=[],l=[],c="",h=new H(this.ctx),u=new Y(this.ctx),d=function(t){var i="";if(s.globals.axisCharts){if("category"===s.config.xaxis.type||s.config.xaxis.convertedCatToNumeric)if(s.globals.isBarHorizontal){var n=s.globals.yLabelFormatters[0],r=new I(e.ctx).getActiveConfigSeriesIndex();i=n(s.globals.labels[t],{seriesIndex:r,dataPointIndex:t,w:s})}else i=u.getLabel(s.globals.labels,s.globals.timescaleLabels,0,t).text;"datetime"===s.config.xaxis.type&&(s.config.xaxis.categories.length?i=s.config.xaxis.categories[t]:s.config.labels.length&&(i=s.config.labels[t]))}else i=s.config.labels[t];return Array.isArray(i)&&(i=i.join(" ")),f.isNumber(i)?i:i.split(o).join("")};a.push(s.config.chart.toolbar.export.csv.headerCategory),i.map(function(t,e){var i=t.name?t.name:"series-".concat(e);s.globals.axisCharts&&a.push(i.split(o).join("")?i.split(o).join(""):"series-".concat(e))}),s.globals.axisCharts||(a.push(s.config.chart.toolbar.export.csv.headerValue),l.push(a.join(o))),i.map(function(t,e){s.globals.axisCharts?function(t,e){if(a.length&&0===e&&l.push(a.join(o)),t.data&&t.data.length)for(var n=0;n<t.data.length;n++){a=[];var r=d(n);if(r||(h.isFormatXY()?r=i[e].data[n].x:h.isFormat2DArray()&&(r=i[e].data[n]?i[e].data[n][0]:"")),0===e){a.push("datetime"===s.config.xaxis.type&&String(r).length>=10?s.config.chart.toolbar.export.csv.dateFormatter(r):f.isNumber(r)?r:r.split(o).join(""));for(var c=0;c<s.globals.series.length;c++)a.push(s.globals.series[c][n])}("candlestick"===s.config.chart.type||t.type&&"candlestick"===t.type)&&(a.pop(),a.push(s.globals.seriesCandleO[e][n]),a.push(s.globals.seriesCandleH[e][n]),a.push(s.globals.seriesCandleL[e][n]),a.push(s.globals.seriesCandleC[e][n])),("boxPlot"===s.config.chart.type||t.type&&"boxPlot"===t.type)&&(a.pop(),a.push(s.globals.seriesCandleO[e][n]),a.push(s.globals.seriesCandleH[e][n]),a.push(s.globals.seriesCandleM[e][n]),a.push(s.globals.seriesCandleL[e][n]),a.push(s.globals.seriesCandleC[e][n])),"rangeBar"===s.config.chart.type&&(a.pop(),a.push(s.globals.seriesRangeStart[e][n]),a.push(s.globals.seriesRangeEnd[e][n])),a.length&&l.push(a.join(o))}}(t,e):((a=[]).push(s.globals.labels[e].split(o).join("")),a.push(s.globals.series[e]),l.push(a.join(o)))}),c+=l.join(r),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+c),s.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,i){var o=document.createElement("a");o.href=t,o.download=(e||this.w.globals.chartID)+i,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}]),t}(),X=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.axesUtils=new Y(e),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===i.config.xaxis.position?0:i.globals.gridHeight+1,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return r(t,[{key:"drawXaxis",value:function(){var t=this.w,e=new v(this.ctx),i=e.group({class:"apexcharts-xaxis",transform:"translate(".concat(t.config.xaxis.offsetX,", ").concat(t.config.xaxis.offsetY,")")}),o=e.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});i.add(o);for(var n=[],r=0;r<this.xaxisLabels.length;r++)n.push(this.xaxisLabels[r]);if(this.drawXAxisLabelAndGroup(!0,e,o,n,t.globals.isXNumeric,function(t,e){return e}),t.globals.hasGroups){var s=t.globals.groups;n=[];for(var a=0;a<s.length;a++)n.push(s[a].title);var l={};t.config.xaxis.group.style&&(l.xaxisFontSize=t.config.xaxis.group.style.fontSize,l.xaxisFontFamily=t.config.xaxis.group.style.fontFamily,l.xaxisForeColors=t.config.xaxis.group.style.colors,l.fontWeight=t.config.xaxis.group.style.fontWeight,l.cssClass=t.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,e,o,n,!1,function(t,e){return s[t].cols*e},l)}if(void 0!==t.config.xaxis.title.text){var c=e.group({class:"apexcharts-xaxis-title"}),h=e.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+t.globals.xAxisLabelsHeight+t.config.xaxis.title.offsetY,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});c.add(h),i.add(c)}if(t.config.xaxis.axisBorder.show){var u=t.globals.barPadForNumericAxis,d=e.drawLine(t.globals.padHorizontal+t.config.xaxis.axisBorder.offsetX-u,this.offY,this.xaxisBorderWidth+u,this.offY,t.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);i.add(d)}return i}},{key:"drawXAxisLabelAndGroup",value:function(t,e,i,o,n,r){var s,a=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=[],h=[],u=this.w,d=l.xaxisFontSize||this.xaxisFontSize,p=l.xaxisFontFamily||this.xaxisFontFamily,g=l.xaxisForeColors||this.xaxisForeColors,f=l.fontWeight||u.config.xaxis.labels.style.fontWeight,m=l.cssClass||u.config.xaxis.labels.style.cssClass,y=u.globals.padHorizontal,v=o.length,x="category"===u.config.xaxis.type?u.globals.dataPoints:v;if(n){var b=x>1?x-1:x;y=y+r(0,s=u.globals.gridWidth/b)/2+u.config.xaxis.labels.offsetX}else y=y+r(0,s=u.globals.gridWidth/x)+u.config.xaxis.labels.offsetX;for(var w=function(n){var l=y-r(n,s)/2+u.config.xaxis.labels.offsetX;0===n&&1===v&&s/2===y&&1===x&&(l=u.globals.gridWidth/2);var b=a.axesUtils.getLabel(o,u.globals.timescaleLabels,l,n,c,d,t),w=28;if(u.globals.rotateXLabels&&t&&(w=22),t||(w=w+parseFloat(d)+(u.globals.xAxisLabelsHeight-u.globals.xAxisGroupLabelsHeight)+(u.globals.rotateXLabels?10:0)),b=void 0!==u.config.xaxis.tickAmount&&"dataPoints"!==u.config.xaxis.tickAmount&&"datetime"!==u.config.xaxis.type?a.axesUtils.checkLabelBasedOnTickamount(n,b,v):a.axesUtils.checkForOverflowingLabels(n,b,v,c,h),t&&b.text&&u.globals.xaxisLabelsCount++,u.config.xaxis.labels.show){var _=e.drawText({x:b.x,y:a.offY+u.config.xaxis.labels.offsetY+w-("top"===u.config.xaxis.position?u.globals.xAxisHeight+u.config.xaxis.axisTicks.height-2:0),text:b.text,textAnchor:"middle",fontWeight:b.isBold?600:f,fontSize:d,fontFamily:p,foreColor:Array.isArray(g)?t&&u.config.xaxis.convertedCatToNumeric?g[u.globals.minX+n-1]:g[n]:g,isPlainText:!1,cssClass:(t?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+m});if(i.add(_),t){var S=document.createElementNS(u.globals.SVGNS,"title");S.textContent=Array.isArray(b.text)?b.text.join(" "):b.text,_.node.appendChild(S),""!==b.text&&(c.push(b.text),h.push(b))}}n<v-1&&(y+=r(n+1,s))},_=0;_<=v-1;_++)w(_)}},{key:"drawXaxisInversed",value:function(t){var e,i,o=this,n=this.w,r=new v(this.ctx),s=n.config.yaxis[0].opposite?n.globals.translateYAxisX[t]:0,a=r.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),l=r.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+s+", 0)"});a.add(l);var c=[];if(n.config.yaxis[t].show)for(var h=0;h<this.xaxisLabels.length;h++)c.push(this.xaxisLabels[h]);i=-(e=n.globals.gridHeight/c.length)/2.2;var u=n.globals.yLabelFormatters[0],d=n.config.yaxis[0].labels;if(d.show)for(var p=function(s){var a=void 0===c[s]?"":c[s];a=u(a,{seriesIndex:t,dataPointIndex:s,w:n});var h=o.axesUtils.getYAxisForeColor(d.style.colors,t),p=0;Array.isArray(a)&&(p=a.length/2*parseInt(d.style.fontSize,10));var g=r.drawText({x:d.offsetX-15,y:i+e+d.offsetY-p,text:a,textAnchor:o.yaxis.opposite?"start":"end",foreColor:Array.isArray(h)?h[s]:h,fontSize:d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+d.style.cssClass});l.add(g);var f=document.createElementNS(n.globals.SVGNS,"title");if(f.textContent=Array.isArray(a)?a.join(" "):a,g.node.appendChild(f),0!==n.config.yaxis[t].labels.rotate){var m=r.rotateAroundCenter(g.node);g.node.setAttribute("transform","rotate(".concat(n.config.yaxis[t].labels.rotate," 0 ").concat(m.y,")"))}i+=e},g=0;g<=c.length-1;g++)p(g);if(void 0!==n.config.yaxis[0].title.text){var f=r.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+s+", 0)"}),m=r.drawText({x:0,y:n.globals.gridHeight/2,text:n.config.yaxis[0].title.text,textAnchor:"middle",foreColor:n.config.yaxis[0].title.style.color,fontSize:n.config.yaxis[0].title.style.fontSize,fontWeight:n.config.yaxis[0].title.style.fontWeight,fontFamily:n.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[0].title.style.cssClass});f.add(m),a.add(f)}var y=0;this.isCategoryBarHorizontal&&n.config.yaxis[0].opposite&&(y=n.globals.gridWidth);var x=n.config.xaxis.axisBorder;if(x.show){var b=r.drawLine(n.globals.padHorizontal+x.offsetX+y,1+x.offsetY,n.globals.padHorizontal+x.offsetX+y,n.globals.gridHeight+x.offsetY,x.color,0);a.add(b)}return n.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(y,c.length,n.config.yaxis[0].axisBorder,n.config.yaxis[0].axisTicks,0,e,a),a}},{key:"drawXaxisTicks",value:function(t,e,i){var o=this.w,n=t;if(!(t<0||t-2>o.globals.gridWidth)){var r=this.offY+o.config.xaxis.axisTicks.offsetY;if(e=e+r+o.config.xaxis.axisTicks.height,"top"===o.config.xaxis.position&&(e=r-o.config.xaxis.axisTicks.height),o.config.xaxis.axisTicks.show){var s=new v(this.ctx).drawLine(t+o.config.xaxis.axisTicks.offsetX,r+o.config.xaxis.offsetY,n+o.config.xaxis.axisTicks.offsetX,e+o.config.xaxis.offsetY,o.config.xaxis.axisTicks.color);i.add(s),s.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],i=this.xaxisLabels.length,o=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var n=0;n<i;n++)e.push(o=this.xaxisLabels[n].position);else for(var r=i,s=0;s<r;s++){var a=r;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(a-=1),e.push(o+=t.globals.gridWidth/a)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new v(this.ctx),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var s=0;s<o.length;s++){var a=e.rotateAroundCenter(o[s]);a.y=a.y-1,a.x=a.x+1,o[s].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(a.x," ").concat(a.y,")")),o[s].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")")),t.config.xaxis.labels.trim&&Array.prototype.forEach.call(o[s].childNodes,function(i){e.placeTextWithEllipsis(i,i.textContent,t.globals.xAxisLabelsHeight-("bottom"===t.config.legend.position?20:10))})}else!function(){for(var i=t.globals.gridWidth/(t.globals.labels.length+1),n=0;n<o.length;n++)t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(o[n].childNodes,function(t){e.placeTextWithEllipsis(t,t.textContent,i)})}();if(n.length>0){var l=n[n.length-1].getBBox(),c=n[0].getBBox();l.x<-20&&n[n.length-1].parentNode.removeChild(n[n.length-1]),c.x+c.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&n[0].parentNode.removeChild(n[0]);for(var h=0;h<r.length;h++)e.placeTextWithEllipsis(r[h],r[h].textContent,t.config.yaxis[0].labels.maxWidth-(t.config.yaxis[0].title.text?2*parseFloat(t.config.yaxis[0].title.style.fontSize):0)-15)}}}]),t}(),W=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new Y(e),this.isRangeBar=i.globals.seriesRangeBar.length,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return r(t,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=new v(this.ctx);null===t&&(t=i.group({class:"apexcharts-grid"}));var o=i.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),n=i.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(n),t.add(o),t}},{key:"drawGrid",value:function(){var t=null;return this.w.globals.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,i=new v(this.ctx),o=Array.isArray(t.config.stroke.width)?0:t.config.stroke.width;if(Array.isArray(t.config.stroke.width)){var n=0;t.config.stroke.width.forEach(function(t){n=Math.max(n,t)}),o=n}e.dom.elGridRectMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(e.cuid)),e.dom.elForecastMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elForecastMask.setAttribute("id","forecastMask".concat(e.cuid)),e.dom.elNonForecastMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(e.cuid));var r=t.config.chart.type,s=0,a=0;("bar"===r||"rangeBar"===r||"candlestick"===r||"boxPlot"===r||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(a=t.config.grid.padding.right,e.barPadForNumericAxis>(s=t.config.grid.padding.left)&&(s=e.barPadForNumericAxis,a=e.barPadForNumericAxis)),e.dom.elGridRect=i.drawRect(-o/2-s-2,-o/2,e.gridWidth+o+a+s+4,e.gridHeight+o,0,"#fff");var l=t.globals.markers.largestSize+1;e.dom.elGridRectMarker=i.drawRect(2*-l,2*-l,e.gridWidth+4*l,e.gridHeight+4*l,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var c=e.dom.baseEl.querySelector("defs");c.appendChild(e.dom.elGridRectMask),c.appendChild(e.dom.elForecastMask),c.appendChild(e.dom.elNonForecastMask),c.appendChild(e.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,i=t.x1,o=this.w;if(!(0===e&&o.globals.skipFirstTimelinelabel||e===t.xCount-1&&o.globals.skipLastTimelinelabel&&!o.config.xaxis.labels.formatter||"radar"===o.config.chart.type)){o.config.grid.xaxis.lines.show&&this._drawGridLine({x1:i,y1:t.y1,x2:t.x2,y2:t.y2,parent:t.parent});var n=0;if(o.globals.hasGroups&&"between"===o.config.xaxis.tickPlacement){var r=o.globals.groups;if(r){for(var s=0,a=0;s<e&&a<r.length;a++)s+=r[a].cols;s===e&&(n=.6*o.globals.xAxisLabelsHeight)}}new X(this.ctx).drawXaxisTicks(i,n,this.elg)}}},{key:"_drawGridLine",value:function(t){var e=t.x1,i=t.y1,o=t.x2,n=t.y2,r=t.parent,s=this.w,a=r.node.classList.contains("apexcharts-gridlines-horizontal"),l=s.config.grid.strokeDashArray,c=s.globals.barPadForNumericAxis,h=new v(this).drawLine(e-(a?c:0),i,o+(a?c:0),n,s.config.grid.borderColor,l);h.node.classList.add("apexcharts-gridline"),r.add(h)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,i=t.x1,o=t.y1,n=t.x2,r=t.y2,s=t.type,a=this.w,l=new v(this.ctx),c=a.globals.barPadForNumericAxis;if("column"!==s||"datetime"!==a.config.xaxis.type){var h=l.drawRect(i-("row"===s?c:0),o,n+("row"===s?2*c:0),r,0,a.config.grid[s].colors[e],a.config.grid[s].opacity);this.elg.add(h),h.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),h.node.classList.add("apexcharts-grid-".concat(s))}}},{key:"_drawXYLines",value:function(t){var e=this,i=t.xCount,o=t.tickAmount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show){var r,s=n.globals.padHorizontal,a=n.globals.gridHeight;n.globals.timescaleLabels.length?function(t){for(var o=t.xC,n=t.y1,r=t.y2,s=0;s<o;s++)e._drawGridLines({i:s,x1:e.xaxisLabels[s].position,y1:n,x2:e.xaxisLabels[s].position,y2:r,xCount:i,parent:e.elgridLinesV})}({xC:i,x1:s,y1:0,x2:r,y2:a}):(n.globals.isXNumeric&&(i=n.globals.xAxisScale.result.length),n.config.xaxis.convertedCatToNumeric&&(i=n.globals.xaxisLabelsCount),function(t){var o=t.xC,r=t.x1,s=t.y1,a=t.x2,l=t.y2;if(void 0!==n.config.xaxis.tickAmount&&"dataPoints"!==n.config.xaxis.tickAmount&&"on"===n.config.xaxis.tickPlacement)n.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach(function(t,o){var n=t.getBBox();e._drawGridLines({i:o,x1:n.x+n.width/2,y1:s,x2:n.x+n.width/2,y2:l,xCount:i,parent:e.elgridLinesV})});else for(var c=0;c<o+(n.globals.isXNumeric?0:1);c++)0===c&&1===o&&1===n.globals.dataPoints&&(a=r=n.globals.gridWidth/2),e._drawGridLines({i:c,x1:r,y1:s,x2:a,y2:l,xCount:i,parent:e.elgridLinesV}),a=r+=n.globals.gridWidth/(n.globals.isXNumeric?o-1:o)}({xC:i,x1:s,y1:0,x2:r,y2:a}))}if(n.config.grid.yaxis.lines.show){var l=0,c=0,h=n.globals.gridWidth,u=o+1;this.isRangeBar&&(u=n.globals.labels.length);for(var d=0;d<u+(this.isRangeBar?1:0);d++)this._drawGridLine({x1:0,y1:l,x2:h,y2:c,parent:this.elgridLinesH}),c=l+=n.globals.gridHeight/(this.isRangeBar?u:o)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var o,n=i.globals.padHorizontal,r=i.globals.gridHeight,s=0;s<e+1;s++)i.config.grid.xaxis.lines.show&&this._drawGridLine({x1:n,y1:0,x2:o,y2:r,parent:this.elgridLinesV}),new X(this.ctx).drawXaxisTicks(n,0,this.elg),o=n=n+i.globals.gridWidth/e+.3;if(i.config.grid.yaxis.lines.show)for(var a=0,l=0,c=i.globals.gridWidth,h=0;h<i.globals.dataPoints+1;h++)this._drawGridLine({x1:0,y1:a,x2:c,y2:l,parent:this.elgridLinesH}),l=a+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=new v(this.ctx);this.elg=e.group({class:"apexcharts-grid"}),this.elgridLinesH=e.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=e.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var i,o=t.globals.yAxisScale.length?t.globals.yAxisScale[0].result.length-1:5,n=0;n<t.globals.series.length&&(void 0!==t.globals.yAxisScale[n]&&(o=t.globals.yAxisScale[n].result.length-1),!(o>2));n++);return!t.globals.isBarHorizontal||this.isRangeBar?(i=this.xaxisLabels.length,this.isRangeBar&&(o=t.globals.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(i=t.config.xaxis.tickAmount)),this._drawXYLines({xCount:i,tickAmount:o})):this._drawInvertedXYLines({xCount:i=o,tickAmount:o=t.globals.xTickAmount}),this.drawGridBands(i,o),{el:this.elg,xAxisTickWidth:t.globals.gridWidth/i}}},{key:"drawGridBands",value:function(t,e){var i=this.w;if(void 0!==i.config.grid.row.colors&&i.config.grid.row.colors.length>0)for(var o=0,n=i.globals.gridHeight/e,r=i.globals.gridWidth,s=0,a=0;s<e;s++,a++)a>=i.config.grid.row.colors.length&&(a=0),this._drawGridBandRect({c:a,x1:0,y1:o,x2:r,y2:n,type:"row"}),o+=i.globals.gridHeight/e;if(void 0!==i.config.grid.column.colors&&i.config.grid.column.colors.length>0)for(var l=i.globals.isBarHorizontal||"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric?t:t-1,c=i.globals.padHorizontal,h=i.globals.padHorizontal+i.globals.gridWidth/l,u=i.globals.gridHeight,d=0,p=0;d<t;d++,p++)p>=i.config.grid.column.colors.length&&(p=0),this._drawGridBandRect({c:p,x1:c,y1:0,x2:h,y2:u,type:"column"}),c+=i.globals.gridWidth/l}}]),t}(),U=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"niceScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,r=this.w,s=Math.abs(e-t);if("dataPoints"===(i=this._adjustTicksForSmallRange(i,o,s))&&(i=r.globals.dataPoints-1),t===Number.MIN_VALUE&&0===e||!f.isNumber(t)&&!f.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE){var a=this.linearScale(t=0,e=i,i);return a}t>e?(console.warn("axis.min cannot be greater than axis.max"),e=t+.1):t===e&&(t=0===t?0:t-.5,e=0===e?2:e+.5);var l=[];s<1&&n&&("candlestick"===r.config.chart.type||"candlestick"===r.config.series[o].type||"boxPlot"===r.config.chart.type||"boxPlot"===r.config.series[o].type||r.globals.isRangeData)&&(e*=1.01);var c=i+1;c<2?c=2:c>2&&(c-=2);var h=s/c,u=Math.floor(f.log10(h)),d=Math.pow(10,u),p=Math.round(h/d);p<1&&(p=1);var g=p*d,m=g*Math.floor(t/g),y=g*Math.ceil(e/g),v=m;if(n&&s>2){for(;l.push(v),!((v+=g)>y););return{result:l,niceMin:l[0],niceMax:l[l.length-1]}}var x=t;(l=[]).push(x);for(var b=Math.abs(e-t)/i,w=0;w<=i;w++)l.push(x+=b);return l[l.length-2]>=e&&l.pop(),{result:l,niceMin:l[0],niceMax:l[l.length-1]}}},{key:"linearScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3?arguments[3]:void 0,n=Math.abs(e-t);"dataPoints"===(i=this._adjustTicksForSmallRange(i,o,n))&&(i=this.w.globals.dataPoints-1);var r=n/i;i===Number.MAX_VALUE&&(i=10,r=1);for(var s=[],a=t;i>=0;)s.push(a),a+=r,i-=1;return{result:s,niceMin:s[0],niceMax:s[s.length-1]}}},{key:"logarithmicScaleNice",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var o=[],n=Math.ceil(Math.log(e)/Math.log(i)+1),r=Math.floor(Math.log(t)/Math.log(i));r<n;r++)o.push(Math.pow(i,r));return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScale",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var o=[],n=Math.log(e)/Math.log(i),r=Math.log(t)/Math.log(i),s=n-r,a=Math.round(s),l=s/a,c=0,h=r;c<a;c++,h+=l)o.push(Math.pow(i,h));return o.push(Math.pow(i,n)),{result:o,niceMin:t,niceMax:e}}},{key:"_adjustTicksForSmallRange",value:function(t,e,i){var o=t;if(void 0!==e&&this.w.config.yaxis[e].labels.formatter&&void 0===this.w.config.yaxis[e].tickAmount){var n=this.w.config.yaxis[e].labels.formatter(1);f.isNumber(Number(n))&&!f.isFloat(n)&&(o=Math.ceil(i))}return o<t?o:t}},{key:"setYScaleForIndex",value:function(t,e,i){var o=this.w.globals,n=this.w.config,r=o.isBarHorizontal?n.xaxis:n.yaxis[t];void 0===o.yAxisScale[t]&&(o.yAxisScale[t]=[]);var s=Math.abs(i-e);r.logarithmic&&s<=5&&(o.invalidLogScale=!0),r.logarithmic&&s>5?(o.allSeriesCollapsed=!1,o.yAxisScale[t]=this.logarithmicScale(e,i,r.logBase),o.yAxisScale[t]=r.forceNiceScale?this.logarithmicScaleNice(e,i,r.logBase):this.logarithmicScale(e,i,r.logBase)):i!==-Number.MAX_VALUE&&f.isNumber(i)?(o.allSeriesCollapsed=!1,o.yAxisScale[t]=void 0===r.min&&void 0===r.max||r.forceNiceScale?this.niceScale(e,i,r.tickAmount?r.tickAmount:s<5&&s>1?s+1:5,t,void 0===n.yaxis[t].max&&void 0===n.yaxis[t].min||n.yaxis[t].forceNiceScale):this.linearScale(e,i,r.tickAmount,t)):o.yAxisScale[t]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(t,e){var i=this.w,o=i.globals,n=i.config.xaxis,r=Math.abs(e-t);return o.xAxisScale=e!==-Number.MAX_VALUE&&f.isNumber(e)?this.linearScale(t,e,n.tickAmount?n.tickAmount:r<5&&r>1?r+1:5,0):this.linearScale(0,5,5),o.xAxisScale}},{key:"setMultipleYScales",value:function(){var t=this,e=this.w.globals,i=this.w.config,o=e.minYArr.concat([]),n=e.maxYArr.concat([]),r=[];i.yaxis.forEach(function(e,s){var a=s;i.series.forEach(function(t,i){t.name===e.seriesName&&(a=i,r.push(s!==i?{index:i,similarIndex:s,alreadyExists:!0}:{index:i}))}),t.setYScaleForIndex(s,o[a],n[a])}),this.sameScaleInMultipleAxes(o,n,r)}},{key:"sameScaleInMultipleAxes",value:function(t,e,i){var o=this,n=this.w.config,r=this.w.globals,s=[];i.forEach(function(t){t.alreadyExists&&(void 0===s[t.index]&&(s[t.index]=[]),s[t.index].push(t.index),s[t.index].push(t.similarIndex))}),r.yAxisSameScaleIndices=s,s.forEach(function(t,e){s.forEach(function(i,o){var n,r;e!==o&&(n=t,r=i,n.filter(function(t){return-1!==r.indexOf(t)})).length>0&&(s[e]=s[e].concat(s[o]))})});var a=s.map(function(t){return t.filter(function(e,i){return t.indexOf(e)===i})}).map(function(t){return t.sort()});s=s.filter(function(t){return!!t});var l=a.slice(),c=l.map(function(t){return JSON.stringify(t)});l=l.filter(function(t,e){return c.indexOf(JSON.stringify(t))===e});var h=[],u=[];t.forEach(function(t,i){l.forEach(function(o,n){o.indexOf(i)>-1&&(void 0===h[n]&&(h[n]=[],u[n]=[]),h[n].push({key:i,value:t}),u[n].push({key:i,value:e[i]}))})});var d=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),p=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);h.forEach(function(t,e){t.forEach(function(t,i){d[e]=Math.min(t.value,d[e])})}),u.forEach(function(t,e){t.forEach(function(t,i){p[e]=Math.max(t.value,p[e])})}),t.forEach(function(t,e){u.forEach(function(t,i){var s=d[i],a=p[i];n.chart.stacked&&(a=0,t.forEach(function(t,e){t.value!==-Number.MAX_VALUE&&(a+=t.value),s!==Number.MIN_VALUE&&(s+=h[i][e].value)})),t.forEach(function(i,l){t[l].key===e&&(void 0!==n.yaxis[e].min&&(s="function"==typeof n.yaxis[e].min?n.yaxis[e].min(r.minY):n.yaxis[e].min),void 0!==n.yaxis[e].max&&(a="function"==typeof n.yaxis[e].max?n.yaxis[e].max(r.maxY):n.yaxis[e].max),o.setYScaleForIndex(e,s,a))})})})}},{key:"autoScaleY",value:function(t,e,i){t||(t=this);var o=t.w;if(o.globals.isMultipleYAxis||o.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),e;var n=o.globals.seriesX[0],r=o.config.chart.stacked;return e.forEach(function(t,s){for(var a=0,l=0;l<n.length;l++)if(n[l]>=i.xaxis.min){a=l;break}var c,h,u=o.globals.minYArr[s],d=o.globals.maxYArr[s],p=o.globals.stackedSeriesTotals;o.globals.series.forEach(function(s,l){var g=s[a];r?(c=h=g=p[a],p.forEach(function(t,e){n[e]<=i.xaxis.max&&n[e]>=i.xaxis.min&&(t>h&&null!==t&&(h=t),s[e]<c&&null!==s[e]&&(c=s[e]))})):(c=h=g,s.forEach(function(t,e){if(n[e]<=i.xaxis.max&&n[e]>=i.xaxis.min){var r=t,s=t;o.globals.series.forEach(function(i,o){null!==t&&(r=Math.min(i[e],r),s=Math.max(i[e],s))}),s>h&&null!==s&&(h=s),r<c&&null!==r&&(c=r)}})),void 0===c&&void 0===h&&(c=u,h=d),(h*=h<0?.9:1.1)<0&&h<d&&(h=d),(c*=c<0?1.1:.9)<0&&c>u&&(c=u),e.length>1?(e[l].min=void 0===t.min?c:t.min,e[l].max=void 0===t.max?h:t.max):(e[0].min=void 0===t.min?c:t.min,e[0].max=void 0===t.max?h:t.max)})}),e}}]),t}(),q=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.scales=new U(e)}return r(t,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.w.config,r=this.w.globals,s=-Number.MAX_VALUE,a=Number.MIN_VALUE;null===o&&(o=t+1);var l=r.series,c=l,h=l;"candlestick"===n.chart.type?(c=r.seriesCandleL,h=r.seriesCandleH):"boxPlot"===n.chart.type?(c=r.seriesCandleO,h=r.seriesCandleC):r.isRangeData&&(c=r.seriesRangeStart,h=r.seriesRangeEnd);for(var u=t;u<o;u++){r.dataPoints=Math.max(r.dataPoints,l[u].length),r.categoryLabels.length&&(r.dataPoints=r.categoryLabels.filter(function(t){return void 0!==t}).length);for(var d=0;d<r.series[u].length;d++){var p=l[u][d];null!==p&&f.isNumber(p)?(void 0!==h[u][d]&&(s=Math.max(s,h[u][d]),e=Math.min(e,h[u][d])),void 0!==c[u][d]&&(e=Math.min(e,c[u][d]),i=Math.max(i,c[u][d])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==r.seriesCandleC[u][d]&&(s=Math.max(s,r.seriesCandleO[u][d]),s=Math.max(s,r.seriesCandleH[u][d]),s=Math.max(s,r.seriesCandleL[u][d]),s=Math.max(s,r.seriesCandleC[u][d]),"boxPlot"===this.w.config.chart.type&&(s=Math.max(s,r.seriesCandleM[u][d]))),!n.series[u].type||"candlestick"===n.series[u].type&&"boxPlot"===n.series[u].type||(s=Math.max(s,r.series[u][d]),e=Math.min(e,r.series[u][d])),i=s),r.seriesGoals[u]&&r.seriesGoals[u][d]&&Array.isArray(r.seriesGoals[u][d])&&r.seriesGoals[u][d].forEach(function(t){a!==Number.MIN_VALUE&&(a=Math.min(a,t.value),e=a),s=Math.max(s,t.value),i=s}),f.isFloat(p)&&(p=f.noExponents(p),r.yValueDecimal=Math.max(r.yValueDecimal,p.toString().split(".")[1].length)),a>c[u][d]&&c[u][d]<0&&(a=c[u][d])):r.hasNullValues=!0}}return"rangeBar"===n.chart.type&&r.seriesRangeStart.length&&r.isBarHorizontal&&(a=e),"bar"===n.chart.type&&(a<0&&s<0&&(s=0),a===Number.MIN_VALUE&&(a=0)),{minY:a,maxY:s,lowestY:e,highestY:i}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var i=Number.MAX_VALUE;if(t.isMultipleYAxis)for(var o=0;o<t.series.length;o++){var n=this.getMinYMaxY(o,i,null,o+1);t.minYArr.push(n.minY),t.maxYArr.push(n.maxY),i=n.lowestY}var r=this.getMinYMaxY(0,i,null,t.series.length);if(t.minY=r.minY,t.maxY=r.maxY,i=r.lowestY,e.chart.stacked&&this._setStackedMinMax(),("line"===e.chart.type||"area"===e.chart.type||"candlestick"===e.chart.type||"boxPlot"===e.chart.type||"rangeBar"===e.chart.type&&!t.isBarHorizontal)&&t.minY===Number.MIN_VALUE&&i!==-Number.MAX_VALUE&&i!==t.maxY){var s=t.maxY-i;(i>=0&&i<=10||void 0!==e.yaxis[0].min||void 0!==e.yaxis[0].max)&&(s=0),t.minY=i-5*s/100,i>0&&t.minY<0&&(t.minY=0),t.maxY=t.maxY+5*s/100}return e.yaxis.forEach(function(e,i){void 0!==e.max&&("number"==typeof e.max?t.maxYArr[i]=e.max:"function"==typeof e.max&&(t.maxYArr[i]=e.max(t.isMultipleYAxis?t.maxYArr[i]:t.maxY)),t.maxY=t.maxYArr[i]),void 0!==e.min&&("number"==typeof e.min?t.minYArr[i]=e.min:"function"==typeof e.min&&(t.minYArr[i]=e.min(t.isMultipleYAxis?t.minYArr[i]===Number.MIN_VALUE?0:t.minYArr[i]:t.minY)),t.minY=t.minYArr[i])}),t.isBarHorizontal&&["min","max"].forEach(function(i){void 0!==e.xaxis[i]&&"number"==typeof e.xaxis[i]&&("min"===i?t.minY=e.xaxis[i]:t.maxY=e.xaxis[i])}),t.isMultipleYAxis?(this.scales.setMultipleYScales(),t.minY=i,t.yAxisScale.forEach(function(e,i){t.minYArr[i]=e.niceMin,t.maxYArr[i]=e.niceMax})):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.yAxisScale[0].niceMin,t.maxYArr[0]=t.yAxisScale[0].niceMax),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr,yAxisScale:t.yAxisScale}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,i="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var e=0;e<t.series.length;e++)if(t.labels[e])for(var i=0;i<t.labels[e].length;i++)null!==t.labels[e][i]&&f.isNumber(t.labels[e][i])&&(t.maxX=Math.max(t.maxX,t.labels[e][i]),t.initialMaxX=Math.max(t.maxX,t.labels[e][i]),t.minX=Math.min(t.minX,t.labels[e][i]),t.initialMinX=Math.min(t.minX,t.labels[e][i]))}(),t.noLabelsProvided&&0===e.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var o;if(void 0===e.xaxis.tickAmount?(o=Math.round(t.svgWidth/150),"numeric"===e.xaxis.type&&t.dataPoints<30&&(o=t.dataPoints-1),o>t.dataPoints&&0!==t.dataPoints&&(o=t.dataPoints-1)):"dataPoints"===e.xaxis.tickAmount?(t.series.length>1&&(o=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric&&(o=t.maxX-t.minX-1)):o=e.xaxis.tickAmount,t.xTickAmount=o,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(t.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(t.minX=e.xaxis.min),void 0!==e.xaxis.range&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var n=[],r=t.minX-1;r<t.maxX;r++)n.push(r+1);t.xAxisScale={result:n,niceMin:n[0],niceMax:n[n.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(1,o,o),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,o-1),t.seriesX=t.labels.slice());i&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var i=0;i<t.seriesZ[e].length;i++)null!==t.seriesZ[e][i]&&f.isNumber(t.seriesZ[e][i])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][i]),t.minZ=Math.min(t.minZ,t.seriesZ[e][i]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var i=new F(this.ctx);if("datetime"===e.xaxis.type){var o=i.getDate(t.minX);e.xaxis.labels.datetimeUTC?o.setUTCDate(o.getUTCDate()-2):o.setDate(o.getDate()-2),t.minX=new Date(o).getTime();var n=i.getDate(t.maxX);e.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()+2):n.setDate(n.getDate()+2),t.maxX=new Date(n).getTime()}else("numeric"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach(function(e,i){1===e.length&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var o=e.slice();o.sort(function(t,e){return t-e}),o.forEach(function(e,i){if(i>0){var n=e-o[i-1];n>0&&(t.minXDiff=Math.min(n,t.minXDiff))}}),1!==t.dataPoints&&t.minXDiff!==Number.MAX_VALUE||(t.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var t=this.w.globals,e=[],i=[];if(t.series.length)for(var o=0;o<t.series[t.maxValsInArrayIndex].length;o++)for(var n=0,r=0,s=0;s<t.series.length;s++)null!==t.series[s][o]&&f.isNumber(t.series[s][o])&&(t.series[s][o]>0?n=n+parseFloat(t.series[s][o])+1e-4:r+=parseFloat(t.series[s][o])),s===t.series.length-1&&(e.push(n),i.push(r));for(var a=0;a<e.length;a++)t.maxY=Math.max(t.maxY,e[a]),t.minY=Math.min(t.minY,i[a])}}]),t}(),Z=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===i.config.xaxis.position&&(this.xAxisoffX=i.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Y(e)}return r(t,[{key:"drawYaxis",value:function(t){var e=this,i=this.w,o=new v(this.ctx),n=i.config.yaxis[t].labels.style,r=n.fontSize,s=n.fontFamily,a=n.fontWeight,l=o.group({class:"apexcharts-yaxis",rel:t,transform:"translate("+i.globals.translateYAxisX[t]+", 0)"});if(this.axesUtils.isYAxisHidden(t))return l;var c=o.group({class:"apexcharts-yaxis-texts-g"});l.add(c);var h=i.globals.yAxisScale[t].result.length-1,u=i.globals.gridHeight/h,d=i.globals.translateY,p=i.globals.yLabelFormatters[t],g=i.globals.yAxisScale[t].result.slice();g=this.axesUtils.checkForReversedLabels(t,g);var f="";if(i.config.yaxis[t].labels.show)for(var m=function(l){var m=g[l];m=p(m,l,i);var y=i.config.yaxis[t].labels.padding;i.config.yaxis[t].opposite&&0!==i.config.yaxis.length&&(y*=-1);var v=e.axesUtils.getYAxisForeColor(n.colors,t),x=o.drawText({x:y,y:d+h/10+i.config.yaxis[t].labels.offsetY+1,text:m,textAnchor:i.config.yaxis[t].opposite?"start":"end",fontSize:r,fontFamily:s,fontWeight:a,maxWidth:i.config.yaxis[t].labels.maxWidth,foreColor:Array.isArray(v)?v[l]:v,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+n.cssClass});l===h&&(f=x),c.add(x);var b=document.createElementNS(i.globals.SVGNS,"title");if(b.textContent=Array.isArray(m)?m.join(" "):m,x.node.appendChild(b),0!==i.config.yaxis[t].labels.rotate){var w=o.rotateAroundCenter(f.node),_=o.rotateAroundCenter(x.node);x.node.setAttribute("transform","rotate(".concat(i.config.yaxis[t].labels.rotate," ").concat(w.x," ").concat(_.y,")"))}d+=u},y=h;y>=0;y--)m(y);if(void 0!==i.config.yaxis[t].title.text){var x=o.group({class:"apexcharts-yaxis-title"}),b=0;i.config.yaxis[t].opposite&&(b=i.globals.translateYAxisX[t]);var w=o.drawText({x:b,y:i.globals.gridHeight/2+i.globals.translateY+i.config.yaxis[t].title.offsetY,text:i.config.yaxis[t].title.text,textAnchor:"end",foreColor:i.config.yaxis[t].title.style.color,fontSize:i.config.yaxis[t].title.style.fontSize,fontWeight:i.config.yaxis[t].title.style.fontWeight,fontFamily:i.config.yaxis[t].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[t].title.style.cssClass});x.add(w),l.add(x)}var _=i.config.yaxis[t].axisBorder,S=31+_.offsetX;if(i.config.yaxis[t].opposite&&(S=-31-_.offsetX),_.show){var C=o.drawLine(S,i.globals.translateY+_.offsetY-2,S,i.globals.gridHeight+i.globals.translateY+_.offsetY+2,_.color,0,_.width);l.add(C)}return i.config.yaxis[t].axisTicks.show&&this.axesUtils.drawYAxisTicks(S,h,_,i.config.yaxis[t].axisTicks,t,u,l),l}},{key:"drawYaxisInversed",value:function(t){var e=this.w,i=new v(this.ctx),o=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),n=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});o.add(n);var r=e.globals.yAxisScale[t].result.length-1,s=e.globals.gridWidth/r+.1,a=s+e.config.xaxis.labels.offsetX,l=e.globals.xLabelFormatter,c=e.globals.yAxisScale[t].result.slice(),h=e.globals.timescaleLabels;h.length>0&&(this.xaxisLabels=h.slice(),r=(c=h.slice()).length),c=this.axesUtils.checkForReversedLabels(t,c);var u=h.length;if(e.config.xaxis.labels.show)for(var d=u?0:r;u?d<u:d>=0;u?d++:d--){var p=c[d];p=l(p,d,e);var g=e.globals.gridWidth+e.globals.padHorizontal-(a-s+e.config.xaxis.labels.offsetX);if(h.length){var f=this.axesUtils.getLabel(c,h,g,d,this.drawnLabels,this.xaxisFontSize);g=f.x,p=f.text,this.drawnLabels.push(f.text),0===d&&e.globals.skipFirstTimelinelabel&&(p=""),d===c.length-1&&e.globals.skipLastTimelinelabel&&(p="")}var m=i.drawText({x:g,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:p,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+e.config.xaxis.labels.style.cssClass});n.add(m),m.tspan(p);var y=document.createElementNS(e.globals.SVGNS,"title");y.textContent=p,m.node.appendChild(y),a+=s}return this.inversedYAxisTitleText(o),this.inversedYAxisBorder(o),o}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,i=new v(this.ctx),o=e.config.xaxis.axisBorder;if(o.show){var n=0;"bar"===e.config.chart.type&&e.globals.isXNumeric&&(n-=15);var r=i.drawLine(e.globals.padHorizontal+n+o.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,o.color,0,o.height);t.add(r)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,i=new v(this.ctx);if(void 0!==e.config.xaxis.title.text){var o=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),n=i.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});o.add(n),t.add(o)}}},{key:"yAxisTitleRotate",value:function(t,e){var i=this.w,o=new v(this.ctx),n={width:0,height:0},r={width:0,height:0},s=i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g"));null!==s&&(n=s.getBoundingClientRect());var a=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text"));if(null!==a&&(r=a.getBoundingClientRect()),null!==a){var l=this.xPaddingForYAxisTitle(t,n,r,e);a.setAttribute("x",l.xPos-(e?10:0))}if(null!==a){var c=o.rotateAroundCenter(a);a.setAttribute("transform","rotate(".concat(e?-1*i.config.yaxis[t].title.rotate:i.config.yaxis[t].title.rotate," ").concat(c.x," ").concat(c.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,i,o){var n=this.w,r=0,s=0,a=10;return void 0===n.config.yaxis[t].title.text||t<0?{xPos:s,padd:0}:(o?(s=e.width+n.config.yaxis[t].title.offsetX+i.width/2+a/2,0===(r+=1)&&(s-=a/2)):(s=-1*e.width+n.config.yaxis[t].title.offsetX+a/2+i.width/2,n.globals.isBarHorizontal&&(s=-1*e.width-n.config.yaxis[t].title.offsetX-(a=25))),{xPos:s,padd:a})}},{key:"setYAxisXPosition",value:function(t,e){var i=this.w,o=0,n=0,r=18,s=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.map(function(a,l){var c=i.globals.ignoreYAxisIndexes.indexOf(l)>-1||!a.show||a.floating||0===t[l].width,h=t[l].width+e[l].width;a.opposite?i.globals.isBarHorizontal?i.globals.translateYAxisX[l]=(n=i.globals.gridWidth+i.globals.translateX-1)-a.labels.offsetX:(n=i.globals.gridWidth+i.globals.translateX+s,c||(s=s+h+20),i.globals.translateYAxisX[l]=n-a.labels.offsetX+20):(o=i.globals.translateX-r,c||(r=r+h+20),i.globals.translateYAxisX[l]=o+a.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(e=f.listToArray(e)).forEach(function(e,i){var o=t.config.yaxis[i];if(o&&void 0!==o.labels.align){var n=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"));r=f.listToArray(r);var s=n.getBoundingClientRect();"left"===o.labels.align?(r.forEach(function(t,e){t.setAttribute("text-anchor","start")}),o.opposite||n.setAttribute("transform","translate(-".concat(s.width,", 0)"))):"center"===o.labels.align?(r.forEach(function(t,e){t.setAttribute("text-anchor","middle")}),n.setAttribute("transform","translate(".concat(s.width/2*(o.opposite?1:-1),", 0)"))):"right"===o.labels.align&&(r.forEach(function(t,e){t.setAttribute("text-anchor","end")}),o.opposite&&n.setAttribute("transform","translate(".concat(s.width,", 0)")))}})}}]),t}(),$=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.documentEvent=f.bind(this.documentEvent,this)}return r(t,[{key:"addEventListener",value:function(t,e){var i=this.w;i.globals.events.hasOwnProperty(t)?i.globals.events[t].push(e):i.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){var o=i.globals.events[t].indexOf(e);-1!==o&&i.globals.events[t].splice(o,1)}}},{key:"fireEvent",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var o=i.globals.events[t],n=o.length,r=0;r<n;r++)o[r].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,i=this.ctx,o=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach(function(t){o.addEventListener(t,function(t){var o=Object.assign({},e,{seriesIndex:e.globals.capturedSeriesIndex,dataPointIndex:e.globals.capturedDataPointIndex});"mousemove"===t.type||"touchmove"===t.type?"function"==typeof e.config.chart.events.mouseMove&&e.config.chart.events.mouseMove(t,i,o):"mouseleave"===t.type||"touchleave"===t.type?"function"==typeof e.config.chart.events.mouseLeave&&e.config.chart.events.mouseLeave(t,i,o):("mouseup"===t.type&&1===t.which||"touchend"===t.type)&&("function"==typeof e.config.chart.events.click&&e.config.chart.events.click(t,i,o),i.ctx.events.fireEvent("click",[t,i,o]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(i){e.globals.dom.baseEl.addEventListener(i,t.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,i=t.target.className;if("click"===t.type){var o=e.globals.dom.baseEl.querySelector(".apexcharts-menu");o&&o.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==i&&o.classList.remove("apexcharts-menu-open")}e.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,e.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),t}(),Q=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=e.filter(function(e){return e.name===t})[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var o=f.extend(C,i);this.w.globals.locale=o.options}}]),t}(),K=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"drawAxis",value:function(t,e){var i,o,n=this.w.globals,r=this.w.config,s=new X(this.ctx),a=new Z(this.ctx);n.axisCharts&&"radar"!==t&&(n.isBarHorizontal?(o=a.drawYaxisInversed(0),i=s.drawXaxisInversed(0),n.dom.elGraphical.add(i),n.dom.elGraphical.add(o)):(i=s.drawXaxis(),n.dom.elGraphical.add(i),r.yaxis.map(function(t,e){-1===n.ignoreYAxisIndexes.indexOf(e)&&(o=a.drawYaxis(e),n.dom.Paper.add(o))})))}}]),t}(),J=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new v(this.ctx),i=new y(this.ctx),o=t.config.xaxis.crosshairs.fill.gradient,n=t.config.xaxis.crosshairs.dropShadow,r=n.enabled,s=n.left,a=n.top,l=n.blur,c=n.color,h=n.opacity,u=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===t.config.xaxis.crosshairs.fill.type&&(u=e.drawGradient("vertical",o.colorFrom,o.colorTo,o.opacityFrom,o.opacityTo,null,o.stops,null));var d=e.drawRect();1===t.config.xaxis.crosshairs.width&&(d=e.drawLine());var p=t.globals.gridHeight;(!f.isNumber(p)||p<0)&&(p=0);var g=t.config.xaxis.crosshairs.width;(!f.isNumber(g)||g<0)&&(g=0),d.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:p,width:g,height:p,fill:u,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),r&&(d=i.dropShadow(d,{left:s,top:a,blur:l,color:c,opacity:h})),t.globals.dom.elGraphical.add(d)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new v(this.ctx),i=t.config.yaxis[0].crosshairs,o=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var n=e.drawLine(-o,0,t.globals.gridWidth+o,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);n.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(n)}var r=e.drawLine(-o,0,t.globals.gridWidth+o,0,i.stroke.color,0,0);r.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(r)}}]),t}(),tt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"checkResponsiveConfig",value:function(t){var e=this,i=this.w,o=i.config;if(0!==o.responsive.length){var n=o.responsive.slice();n.sort(function(t,e){return t.breakpoint>e.breakpoint?1:e.breakpoint>t.breakpoint?-1:0}).reverse();var r=new G({}),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n[0].breakpoint,s=window.innerWidth>0?window.innerWidth:screen.width;if(s>o){var a=x.extendArrayProps(r,i.globals.initialConfig,i);t=f.extend(a,t),t=f.extend(i.config,t),e.overrideResponsiveOptions(t)}else for(var l=0;l<n.length;l++)s<n[l].breakpoint&&(t=x.extendArrayProps(r,n[l].options,i),t=f.extend(i.config,t),e.overrideResponsiveOptions(t))};if(t){var a=x.extendArrayProps(r,t,i);a=f.extend(i.config,a),s(a=f.extend(a,t))}else s({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new G(t).init({responsiveOverride:!0});this.w.config=e}}]),t}(),et=function(){function t(e){o(this,t),this.ctx=e,this.colors=[],this.w=e.w;var i=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===i.config.chart.type&&i.config.plotOptions.treemap.distributed||"heatmap"===i.config.chart.type&&i.config.plotOptions.heatmap.distributed,this.isBarDistributed=i.config.plotOptions.bar.distributed&&("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)}return r(t,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this,e=this.w,i=new f;if(e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode)),void 0===e.config.colors?e.globals.colors=this.predefined():(e.globals.colors=e.config.colors,Array.isArray(e.config.colors)&&e.config.colors.length>0&&"function"==typeof e.config.colors[0]&&(e.globals.colors=e.config.series.map(function(i,o){var n=e.config.colors[o];return n||(n=e.config.colors[0]),"function"==typeof n?(t.isColorFn=!0,n({value:e.globals.axisCharts?e.globals.series[o][0]?e.globals.series[o][0]:0:e.globals.series[o],seriesIndex:o,dataPointIndex:o,w:e})):n}))),e.globals.seriesColors.map(function(t,i){t&&(e.globals.colors[i]=t)}),e.config.theme.monochrome.enabled){var o=[],n=e.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(n=e.globals.series[0].length*e.globals.series.length);for(var r=e.config.theme.monochrome.color,s=1/(n/e.config.theme.monochrome.shadeIntensity),a=e.config.theme.monochrome.shadeTo,l=0,c=0;c<n;c++){var h=void 0;"dark"===a?(h=i.shadeColor(-1*l,r),l+=s):(h=i.shadeColor(l,r),l+=s),o.push(h)}e.globals.colors=o.slice()}var u=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),["fill","stroke"].forEach(function(i){e.globals[i].colors=void 0===e.config[i].colors?t.isColorFn?e.config.colors:u:e.config[i].colors.slice(),t.pushExtraColors(e.globals[i].colors)}),e.globals.dataLabels.style.colors=void 0===e.config.dataLabels.style.colors?u:e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50),e.globals.radarPolygons.fill.colors=void 0===e.config.plotOptions.radar.polygons.fill.colors?["dark"===e.config.theme.mode?"#424242":"none"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20),e.globals.markers.colors=void 0===e.config.markers.colors?u:e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.w,n=e||o.globals.series.length;if(null===i&&(i=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===o.config.chart.type&&o.config.plotOptions.heatmap.colorScale.inverse),i&&o.globals.series.length&&(n=o.globals.series[o.globals.maxValsInArrayIndex].length*o.globals.series.length),t.length<n)for(var r=n-t.length,s=0;s<r;s++)t.push(t[s])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode||"light",i=t.theme.palette?t.theme.palette:"dark"===e?"palette4":"palette1",o=t.chart.foreColor?t.chart.foreColor:"dark"===e?"#f6f7f8":"#373d3f";return t.tooltip.theme=e,t.chart.foreColor=o,t.theme.palette=i,t}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"];break;default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]}return this.colors}}]),t}(),it=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,i="title"===t?e.config.title:e.config.subtitle,o=e.globals.svgWidth/2,n=i.offsetY,r="middle";if("left"===i.align?(o=10,r="start"):"right"===i.align&&(o=e.globals.svgWidth-10,r="end"),o+=i.offsetX,n=n+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text){var s=new v(this.ctx).drawText({x:o,y:n,text:i.text,textAnchor:r,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});s.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(s)}}}]),t}(),ot=function(){function t(e){o(this,t),this.w=e.w,this.dCtx=e}return r(t,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,i=0,o=0,n="title"===t?e.config.title.floating:e.config.subtitle.floating,r=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==r&&!n){var s=r.getBoundingClientRect();i=s.width,o=e.globals.axisCharts?s.height+5:s.height}return{width:i,height:o}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.baseEl.querySelector(".apexcharts-legend");t.config.legend.height||"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||(e.style.maxHeight=t.globals.svgHeight/2+"px");var i=Object.assign({},f.getBoundingClientRect(e));return this.dCtx.lgRect=null!==e&&!t.config.legend.floating&&t.config.legend.show?{x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:{x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(t,e){var i=t;if(this.w.globals.isMultiLineX){var o=e.map(function(t,e){return Array.isArray(t)?t.length:1}),n=Math.max.apply(Math,d(o));i=e[o.indexOf(n)]}return i}}]),t}(),nt=function(){function t(e){o(this,t),this.w=e.w,this.dCtx=e}return r(t,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,i=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&0===i.length&&(i=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var o=this.getxAxisTimeScaleLabelsCoords();t={width:o.width,height:o.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==e.config.legend.position&&"right"!==e.config.legend.position||e.config.legend.floating?0:this.dCtx.lgRect.width;var n=e.globals.xLabelFormatter,r=f.getLargestStringFromArr(i),s=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,i);e.globals.isBarHorizontal&&(s=r=e.globals.yAxisScale[0].result.reduce(function(t,e){return t.length>e.length?t:e},0));var a=new V(this.dCtx.ctx),l=r;r=a.xLabelFormat(n,r,l,{i:void 0,dateFormatter:new F(this.dCtx.ctx).formatDate,w:e}),s=a.xLabelFormat(n,s,l,{i:void 0,dateFormatter:new F(this.dCtx.ctx).formatDate,w:e}),(e.config.xaxis.convertedCatToNumeric&&void 0===r||""===String(r).trim())&&(s=r="1");var c=new v(this.dCtx.ctx),h=c.getTextRects(r,e.config.xaxis.labels.style.fontSize),u=h;if(r!==s&&(u=c.getTextRects(s,e.config.xaxis.labels.style.fontSize)),(t={width:h.width>=u.width?h.width:u.width,height:h.height>=u.height?h.height:u.height}).width*i.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==e.config.xaxis.labels.rotate||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var d=function(t){return c.getTextRects(t,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};h=d(r),r!==s&&(u=d(s)),t.height=(h.height>u.height?h.height:u.height)/1.5,t.width=h.width>u.width?h.width:u.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var t,e=this.w;if(!e.globals.hasGroups)return{width:0,height:0};var i,o=(null===(t=e.config.xaxis.group.style)||void 0===t?void 0:t.fontSize)||e.config.xaxis.labels.style.fontSize,n=e.globals.groups.map(function(t){return t.title}),r=f.getLargestStringFromArr(n),s=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,n),a=new v(this.dCtx.ctx),l=a.getTextRects(r,o),c=l;return r!==s&&(c=a.getTextRects(s,o)),i={width:l.width>=c.width?l.width:c.width,height:l.height>=c.height?l.height:c.height},e.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,i=0;if(void 0!==t.config.xaxis.title.text){var o=new v(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=o.width,i=o.height}return{width:e,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map(function(t){return t.value}),o=i.reduce(function(t,e){return void 0===t?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):t.length>e.length?t:e},0);return 1.05*(t=new v(this.dCtx.ctx).getTextRects(o,e.config.xaxis.labels.style.fontSize)).width*i.length>e.globals.gridWidth&&0!==e.config.xaxis.labels.rotate&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,i=this.w,o=i.globals,n=i.config,r=n.xaxis.type,s=t.width;o.skipLastTimelinelabel=!1,o.skipFirstTimelinelabel=!1;var a=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,l=function(t,a){(function(t){return-1!==o.collapsedSeriesIndices.indexOf(t)})(a)||function(t){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var a=e.dCtx.timescaleLabels[0].position-s/1.75+e.dCtx.yAxisWidthLeft;e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+s/1.75-e.dCtx.yAxisWidthRight>o.svgWidth-o.translateX-("right"===i.config.legend.position&&e.dCtx.lgRect.width>0?e.dCtx.lgRect.width:0)&&(o.skipLastTimelinelabel=!0),a<-(t.show&&!t.floating||"bar"!==n.chart.type&&"candlestick"!==n.chart.type&&"rangeBar"!==n.chart.type&&"boxPlot"!==n.chart.type?10:s/1.75)&&(o.skipFirstTimelinelabel=!0)}else"datetime"===r?e.dCtx.gridPad.right<s&&!o.rotateXLabels&&(o.skipLastTimelinelabel=!0):"datetime"!==r&&e.dCtx.gridPad.right<s/2-e.dCtx.yAxisWidthRight&&!o.rotateXLabels&&!i.config.xaxis.labels.trim&&("between"!==i.config.xaxis.tickPlacement||i.globals.isBarHorizontal)&&(e.dCtx.xPadRight=s/2+1)}(t)};n.yaxis.forEach(function(t,i){a?(e.dCtx.gridPad.left<s&&(e.dCtx.xPadLeft=s/2+1),e.dCtx.xPadRight=s/2+1):l(t,i)})}}]),t}(),rt=function(){function t(e){o(this,t),this.w=e.w,this.dCtx=e}return r(t,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,i=[],o=10,n=new Y(this.dCtx.ctx);return e.config.yaxis.map(function(r,s){var a=e.globals.yAxisScale[s],l=0;if(!n.isYAxisHidden(s)&&r.labels.show&&void 0!==r.labels.minWidth&&(l=r.labels.minWidth),!n.isYAxisHidden(s)&&r.labels.show&&a.result.length){var c=e.globals.yLabelFormatters[s],h=a.niceMin===Number.MIN_VALUE?0:a.niceMin,u=String(h).length>String(a.niceMax).length?h:a.niceMax,d=c(u,{seriesIndex:s,dataPointIndex:-1,w:e}),p=d;if(void 0!==d&&0!==d.length||(d=u),e.globals.isBarHorizontal){o=0;var g=e.globals.labels.slice();d=c(d=f.getLargestStringFromArr(g),{seriesIndex:s,dataPointIndex:-1,w:e}),p=t.dCtx.dimHelpers.getLargestStringFromMultiArr(d,g)}var m=new v(t.dCtx.ctx),y="rotate(".concat(r.labels.rotate," 0 0)"),x=m.getTextRects(d,r.labels.style.fontSize,r.labels.style.fontFamily,y,!1),b=x;d!==p&&(b=m.getTextRects(p,r.labels.style.fontSize,r.labels.style.fontFamily,y,!1)),i.push({width:(l>b.width||l>x.width?l:b.width>x.width?b.width:x.width)+o,height:b.height>x.height?b.height:x.height})}else i.push({width:0,height:0})}),i}},{key:"getyAxisTitleCoords",value:function(){var t=this,e=[];return this.w.config.yaxis.map(function(i,o){if(i.show&&void 0!==i.title.text){var n=new v(t.dCtx.ctx),r="rotate(".concat(i.title.rotate," 0 0)"),s=n.getTextRects(i.title.text,i.title.style.fontSize,i.title.style.fontFamily,r,!1);e.push({width:s.width,height:s.height})}else e.push({width:0,height:0})}),e}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,i=0,o=0,n=t.globals.yAxisScale.length>1?10:0,r=new Y(this.dCtx.ctx),s=function(s,a){var l=t.config.yaxis[a].floating,c=0;s.width>0&&!l?(c=s.width+n,function(e){return t.globals.ignoreYAxisIndexes.indexOf(e)>-1}(a)&&(c=c-s.width-n)):c=l||r.isYAxisHidden(a)?0:5,t.config.yaxis[a].opposite?o+=c:i+=c,e+=c};return t.globals.yLabelsCoords.map(function(t,e){s(t,e)}),t.globals.yTitleCoords.map(function(t,e){s(t,e)}),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=o,e}}]),t}(),st=function(){function t(e){o(this,t),this.w=e.w,this.dCtx=e}return r(t,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w;if(e.globals.noData||e.globals.allSeriesCollapsed)return 0;var i=function(t){return"bar"===t||"rangeBar"===t||"candlestick"===t||"boxPlot"===t},o=e.config.chart.type,n=0,r=i(o)?e.config.series.length:1;if(e.globals.comboBarCount>0&&(r=e.globals.comboBarCount),e.globals.collapsedSeries.forEach(function(t){i(t.type)&&(r-=1)}),e.config.chart.stacked&&(r=1),(i(o)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&r>0){var s,a,l=Math.abs(e.globals.initialMaxX-e.globals.initialMinX);l<=3&&(l=e.globals.dataPoints),s=l/t,e.globals.minXDiff&&e.globals.minXDiff/s>0&&(a=e.globals.minXDiff/s),a>t/2&&(a/=2),(n=a/r*parseInt(e.config.plotOptions.bar.columnWidth,10)/100)<1&&(n=1),e.globals.barPadForNumericAxis=n=n/(r>1?1:1.5)+5}return n}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,i=e.globals,o=this.dCtx.isSparkline||!e.globals.axisCharts?0:10;["title","subtitle"].forEach(function(i){o+=void 0!==e.config[i].text?e.config[i].margin:t.dCtx.isSparkline||!e.globals.axisCharts?0:5}),!e.config.legend.show||"bottom"!==e.config.legend.position||e.config.legend.floating||e.globals.axisCharts||(o+=10);var n=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),r=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight=i.gridHeight-n.height-r.height-o,i.translateY=i.translateY+n.height+r.height+o}},{key:"setGridXPosForDualYAxis",value:function(t,e){var i=this.w,o=new Y(this.dCtx.ctx);i.config.yaxis.map(function(n,r){-1!==i.globals.ignoreYAxisIndexes.indexOf(r)||n.floating||o.isYAxisHidden(r)||(n.opposite&&(i.globals.translateX=i.globals.translateX-(e[r].width+t[r].width)-parseInt(i.config.yaxis[r].labels.style.fontSize,10)/1.2-12),i.globals.translateX<2&&(i.globals.translateX=2))})}}]),t}(),at=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new ot(this),this.dimYAxis=new rt(this),this.dimXAxis=new nt(this),this.dimGrid=new st(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return r(t,[{key:"plotCoords",value:function(){var t=this,e=this.w,i=e.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(e.config.markers.discrete.length>0||e.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(e){var i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,n,r=[],s=!0,a=!1;try{for(i=i.call(t);!(s=(o=i.next()).done)&&(r.push(o.value),2!==r.length);s=!0);}catch(t){a=!0,n=t}finally{try{s||null==i.return||i.return()}finally{if(a)throw n}}return r}}(t)||p(t,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e);t.gridPad[i[0]]=Math.max(i[1],t.w.globals.markers.largestSize/1.5)}),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var o=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*o,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(o>0?o+4:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,i=e.globals,o=this.dimYAxis.getyAxisLabelsCoords(),n=this.dimYAxis.getyAxisTitleCoords();e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map(function(t,i){e.globals.yLabelsCoords.push({width:o[i].width,index:i}),e.globals.yTitleCoords.push({width:n[i].width,index:i})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var r=this.dimXAxis.getxAxisLabelsCoords(),s=this.dimXAxis.getxAxisGroupLabelsCoords(),a=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(r,a,s),i.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+e.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+e.config.xaxis.labels.offsetX;var l=this.yAxisWidth,c=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-a.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-r.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var h=10;("radar"===e.config.chart.type||this.isSparkline)&&(l=0,c=i.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===e.config.chart.type)&&(l=0,c=0,h=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(r);var u=function(){i.translateX=l,i.gridHeight=i.svgHeight-t.lgRect.height-c-(t.isSparkline||"treemap"===e.config.chart.type?0:e.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-l};switch("top"===e.config.xaxis.position&&(h=i.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":i.translateY=h,u();break;case"top":i.translateY=this.lgRect.height+h,u();break;case"left":i.translateY=h,i.translateX=this.lgRect.width+l,i.gridHeight=i.svgHeight-c-12,i.gridWidth=i.svgWidth-this.lgRect.width-l;break;case"right":i.translateY=h,i.translateX=l,i.gridHeight=i.svgHeight-c-12,i.gridWidth=i.svgWidth-this.lgRect.width-l-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(n,o),new Z(this.ctx).setYAxisXPosition(o,n)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=t.config,o=0;t.config.legend.show&&!t.config.legend.floating&&(o=20);var n="pie"===i.chart.type||"polarArea"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",r=i.plotOptions[n].offsetY,s=i.plotOptions[n].offsetX;if(!i.legend.show||i.legend.floating)return e.gridHeight=e.svgHeight-i.grid.padding.left+i.grid.padding.right,e.gridWidth=e.gridHeight,e.translateY=r,void(e.translateX=s+(e.svgWidth-e.gridWidth)/2);switch(i.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=r-10,e.translateX=s+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=this.lgRect.height+r+10,e.translateX=s+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-o,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=r,e.translateX=s+this.lgRect.width+o;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-o-5,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=r,e.translateX=s+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e,i){var o=this.w;this.xAxisHeight=(i.height+t.height+e.height)*(o.globals.isMultiLineX?1.2:o.globals.LINE_HEIGHT_RATIO)+(o.globals.hasGroups?2:1)*(o.globals.rotateXLabels?22:10)+(o.globals.rotateXLabels&&"bottom"===o.config.legend.position?10:0),this.xAxisWidth=t.width,this.xAxisHeight-e.height>o.config.xaxis.labels.maxHeight&&(this.xAxisHeight=o.config.xaxis.labels.maxHeight),o.config.xaxis.labels.minHeight&&this.xAxisHeight<o.config.xaxis.labels.minHeight&&(this.xAxisHeight=o.config.xaxis.labels.minHeight),o.config.xaxis.floating&&(this.xAxisHeight=0);var n=0,r=0;o.config.yaxis.forEach(function(t){n+=t.labels.minWidth,r+=t.labels.maxWidth}),this.yAxisWidth<n&&(this.yAxisWidth=n),this.yAxisWidth>r&&(this.yAxisWidth=r)}}]),t}(),lt=function(){function t(e){o(this,t),this.w=e.w,this.lgCtx=e}return r(t,[{key:"getLegendStyles",value:function(){var t=document.createElement("style");t.setAttribute("type","text/css");var e=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return t.appendChild(e),t}},{key:"getLegendBBox",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:t.height,clww:t.width}}},{key:"appendToForeignObject",value:function(){var t=this.w.globals;t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject");var e=t.dom.elLegendForeign;e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",t.svgWidth),e.setAttribute("height",t.svgHeight),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.appendChild(t.dom.elLegendWrap),e.appendChild(this.getLegendStyles()),t.dom.Paper.node.insertBefore(e,t.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(t,e){var i=this,o=this.w;if(o.globals.axisCharts||"radialBar"===o.config.chart.type){o.globals.resized=!0;var n=null,r=null;o.globals.risingSeries=[],o.globals.axisCharts?(n=o.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),r=parseInt(n.getAttribute("data:realIndex"),10)):(n=o.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),r=parseInt(n.getAttribute("rel"),10)-1),e?[{cs:o.globals.collapsedSeries,csi:o.globals.collapsedSeriesIndices},{cs:o.globals.ancillaryCollapsedSeries,csi:o.globals.ancillaryCollapsedSeriesIndices}].forEach(function(t){i.riseCollapsedSeries(t.cs,t.csi,r)}):this.hideSeries({seriesEl:n,realIndex:r})}else{var s=o.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t+1,"'] path")),a=o.config.chart.type;if("pie"===a||"polarArea"===a||"donut"===a){var l=o.config.plotOptions.pie.donut.labels;new v(this.lgCtx.ctx).pathMouseDown(s.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(s.members[0].node,l)}s.fire("click")}}},{key:"hideSeries",value:function(t){var e=t.seriesEl,i=t.realIndex,o=this.w,n=f.clone(o.config.series);if(o.globals.axisCharts){var r=!1;if(o.config.yaxis[i]&&o.config.yaxis[i].show&&o.config.yaxis[i].showAlways&&(r=!0,o.globals.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(o.globals.ancillaryCollapsedSeries.push({index:i,data:n[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),o.globals.ancillaryCollapsedSeriesIndices.push(i))),!r){o.globals.collapsedSeries.push({index:i,data:n[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),o.globals.collapsedSeriesIndices.push(i);var s=o.globals.risingSeries.indexOf(i);o.globals.risingSeries.splice(s,1)}}else o.globals.collapsedSeries.push({index:i,data:n[i]}),o.globals.collapsedSeriesIndices.push(i);for(var a=e.childNodes,l=0;l<a.length;l++)a[l].classList.contains("apexcharts-series-markers-wrap")&&(a[l].classList.contains("apexcharts-hide")?a[l].classList.remove("apexcharts-hide"):a[l].classList.add("apexcharts-hide"));o.globals.allSeriesCollapsed=o.globals.collapsedSeries.length===o.config.series.length,n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,o.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,i){var o=this.w,n=f.clone(o.config.series);if(t.length>0){for(var r=0;r<t.length;r++)t[r].index===i&&(o.globals.axisCharts?(n[i].data=t[r].data.slice(),t.splice(r,1),e.splice(r,1),o.globals.risingSeries.push(i)):(n[i]=t[r].data,t.splice(r,1),e.splice(r,1),o.globals.risingSeries.push(i)));n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,o.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var e=this.w;return t.forEach(e.globals.axisCharts?function(i,o){e.globals.collapsedSeriesIndices.indexOf(o)>-1&&(t[o].data=[])}:function(i,o){e.globals.collapsedSeriesIndices.indexOf(o)>-1&&(t[o]=0)}),t}}]),t}(),ct=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new lt(this)}return r(t,[{key:"init",value:function(){var t=this.w,e=t.globals,i=t.config;if((i.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||e.series.length>1||!e.axisCharts)&&i.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),f.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===i.legend.position||"top"===i.legend.position?this.legendAlignHorizontal():"right"!==i.legend.position&&"left"!==i.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var t=this,e=this.w,i=e.config.legend.fontFamily,o=e.globals.seriesNames,n=e.globals.colors.slice();if("heatmap"===e.config.chart.type){var r=e.config.plotOptions.heatmap.colorScale.ranges;o=r.map(function(t){return t.name?t.name:t.from+" - "+t.to}),n=r.map(function(t){return t.color})}else this.isBarsDistributed&&(o=e.globals.labels.slice());e.config.legend.customLegendItems.length&&(o=e.config.legend.customLegendItems);for(var s=e.globals.legendFormatter,a=e.config.legend.inverseOrder,l=a?o.length-1:0;a?l>=0:l<=o.length-1;a?l--:l++){var c=s(o[l],{seriesIndex:l,w:e}),h=!1,u=!1;if(e.globals.collapsedSeries.length>0)for(var d=0;d<e.globals.collapsedSeries.length;d++)e.globals.collapsedSeries[d].index===l&&(h=!0);if(e.globals.ancillaryCollapsedSeriesIndices.length>0)for(var p=0;p<e.globals.ancillaryCollapsedSeriesIndices.length;p++)e.globals.ancillaryCollapsedSeriesIndices[p]===l&&(u=!0);var g=document.createElement("span");g.classList.add("apexcharts-legend-marker");var m=e.config.legend.markers.offsetX,y=e.config.legend.markers.offsetY,b=e.config.legend.markers.height,w=e.config.legend.markers.width,_=e.config.legend.markers.strokeWidth,S=e.config.legend.markers.strokeColor,C=e.config.legend.markers.radius,k=g.style;k.background=n[l],k.color=n[l],k.setProperty("background",n[l],"important"),e.config.legend.markers.fillColors&&e.config.legend.markers.fillColors[l]&&(k.background=e.config.legend.markers.fillColors[l]),void 0!==e.globals.seriesColors[l]&&(k.background=e.globals.seriesColors[l],k.color=e.globals.seriesColors[l]),k.height=Array.isArray(b)?parseFloat(b[l])+"px":parseFloat(b)+"px",k.width=Array.isArray(w)?parseFloat(w[l])+"px":parseFloat(w)+"px",k.left=(Array.isArray(m)?parseFloat(m[l]):parseFloat(m))+"px",k.top=(Array.isArray(y)?parseFloat(y[l]):parseFloat(y))+"px",k.borderWidth=Array.isArray(_)?_[l]:_,k.borderColor=Array.isArray(S)?S[l]:S,k.borderRadius=Array.isArray(C)?parseFloat(C[l])+"px":parseFloat(C)+"px",e.config.legend.markers.customHTML&&(Array.isArray(e.config.legend.markers.customHTML)?e.config.legend.markers.customHTML[l]&&(g.innerHTML=e.config.legend.markers.customHTML[l]()):g.innerHTML=e.config.legend.markers.customHTML()),v.setAttrs(g,{rel:l+1,"data:collapsed":h||u}),(h||u)&&g.classList.add("apexcharts-inactive-legend");var A=document.createElement("div"),E=document.createElement("span");E.classList.add("apexcharts-legend-text"),E.innerHTML=Array.isArray(c)?c.join(" "):c;var T=e.config.legend.labels.useSeriesColors?e.globals.colors[l]:e.config.legend.labels.colors;T||(T=e.config.chart.foreColor),E.style.color=T,E.style.fontSize=parseFloat(e.config.legend.fontSize)+"px",E.style.fontWeight=e.config.legend.fontWeight,E.style.fontFamily=i||e.config.chart.fontFamily,v.setAttrs(E,{rel:l+1,i:l,"data:default-text":encodeURIComponent(c),"data:collapsed":h||u}),A.appendChild(g),A.appendChild(E);var M=new x(this.ctx);e.config.legend.showForZeroSeries||0===M.getSeriesTotalByIndex(l)&&M.seriesHaveSameValues(l)&&!M.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-zero-series"),e.config.legend.showForNullSeries||M.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-null-series"),e.globals.dom.elLegendWrap.appendChild(A),e.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(e.config.legend.horizontalAlign)),e.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+e.config.legend.position),A.classList.add("apexcharts-legend-series"),A.style.margin="".concat(e.config.legend.itemMargin.vertical,"px ").concat(e.config.legend.itemMargin.horizontal,"px"),e.globals.dom.elLegendWrap.style.width=e.config.legend.width?e.config.legend.width+"px":"",e.globals.dom.elLegendWrap.style.height=e.config.legend.height?e.config.legend.height+"px":"",v.setAttrs(A,{rel:l+1,seriesName:f.escapeString(o[l]),"data:collapsed":h||u}),(h||u)&&A.classList.add("apexcharts-inactive-legend"),e.config.legend.onItemClick.toggleDataSeries||A.classList.add("apexcharts-no-click")}e.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),e.config.legend.onItemHover.highlightDataSeries&&0===e.config.legend.customLegendItems.length&&(e.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),e.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var i=this.w,o=i.globals.dom.baseEl.querySelector(".apexcharts-legend"),n=o.getBoundingClientRect(),r=0,s=0;if("bottom"===i.config.legend.position)s+=i.globals.svgHeight-n.height/2;else if("top"===i.config.legend.position){var a=new at(this.ctx),l=a.dimHelpers.getTitleSubtitleCoords("title").height,c=a.dimHelpers.getTitleSubtitleCoords("subtitle").height;s=s+(l>0?l-10:0)+(c>0?c-10:0)}o.style.position="absolute",s=s+e+i.config.legend.offsetY,o.style.left=(r=r+t+i.config.legend.offsetX)+"px",o.style.top=s+"px","bottom"===i.config.legend.position?(o.style.top="auto",o.style.bottom=5-i.config.legend.offsetY+"px"):"right"===i.config.legend.position&&(o.style.left="auto",o.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach(function(t){o.style[t]&&(o.style[t]=parseInt(i.config.legend[t],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var e=this.legendHelpers.getLegendBBox(),i=new at(this.ctx),o=i.dimHelpers.getTitleSubtitleCoords("title"),n=i.dimHelpers.getTitleSubtitleCoords("subtitle"),r=0;"bottom"===t.config.legend.position?r=-e.clwh/1.8:"top"===t.config.legend.position&&(r=o.height+n.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,r)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendBBox(),i=0;"left"===t.config.legend.position&&(i=20),"right"===t.config.legend.position&&(i=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,i=t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===e.config.chart.type||this.isBarsDistributed){if(i){var o=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,o,this.w]),new I(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&i&&new I(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var e=this.w;if(!e.config.legend.customLegendItems.length&&(t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(t.target.getAttribute("rel"),10)-1,o="true"===t.target.getAttribute("data:collapsed"),n=this.w.config.chart.events.legendClick;"function"==typeof n&&n(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var r=this.w.config.legend.markers.onClick;"function"==typeof r&&t.target.classList.contains("apexcharts-legend-marker")&&(r(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),"treemap"!==e.config.chart.type&&"heatmap"!==e.config.chart.type&&!this.isBarsDistributed&&e.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,o)}}}]),t}(),ht=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=i.globals.minX,this.maxX=i.globals.maxX}return r(t,[{key:"createToolbar",value:function(){var t=this,e=this.w,i=function(){return document.createElement("div")},o=i();if(o.setAttribute("class","apexcharts-toolbar"),o.style.top=e.config.chart.toolbar.offsetY+"px",o.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(o),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var n=0;n<this.t.customIcons.length;n++)this.elCustomIcons.push(i());var r=[],s=function(i,o,n){var s=i.toLowerCase();t.t[s]&&e.config.chart.zoom.enabled&&r.push({el:o,icon:"string"==typeof t.t[s]?t.t[s]:n,title:t.localeValues[i],class:"apexcharts-".concat(s,"-icon")})};s("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),s("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var a=function(i){t.t[i]&&e.config.chart[i].enabled&&r.push({el:"zoom"===i?t.elZoom:t.elSelection,icon:"string"==typeof t.t[i]?t.t[i]:"zoom"===i?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===i?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(i,"-icon")})};a("zoom"),a("selection"),this.t.pan&&e.config.chart.zoom.enabled&&r.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),s("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&r.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)r.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});r.forEach(function(t,e){t.index&&f.moveIndexInArray(r,e,t.index)});for(var c=0;c<r.length;c++)v.setAttrs(r[c].el,{class:r[c].class,title:r[c].title}),r[c].el.innerHTML=r[c].icon,o.appendChild(r[c].el);this._createHamburgerMenu(o),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),v.setAttrs(this.elMenu,{class:"apexcharts-menu"});var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||e.splice(2,1);for(var i=0;i<e.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=e[i].title,v.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(e[i].name),title:e[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(e){e.classList.contains("exportSVG")?e.addEventListener("click",t.handleDownload.bind(t,"svg")):e.classList.contains("exportPNG")?e.addEventListener("click",t.handleDownload.bind(t,"png")):e.classList.contains("exportCSV")&&e.addEventListener("click",t.handleDownload.bind(t,"csv"))});for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls();var i="selection"===t?e.ctx.toolbar.elSelection:e.ctx.toolbar.elZoom,o="selection"===t?"selectionEnabled":"zoomEnabled";e.w.globals[o]=!e.w.globals[o],i.classList.contains(e.ctx.toolbar.selectedClass)?i.classList.remove(e.ctx.toolbar.selectedClass):i.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,i="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(e){e&&e.classList.remove(t.selectedClass)})}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var e=(this.minX+this.maxX)/2,i=this._getNewMinXMaxX((this.minX+e)/2,(this.maxX+e)/2);t.globals.disableZoomIn||this.zoomUpdateOptions(i.minX,i.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY),!("datetime"===t.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var e=(this.minX+this.maxX)/2,i=this._getNewMinXMaxX(this.minX-(e-this.minX),this.maxX-(e-this.maxX));t.globals.disableZoomOut||this.zoomUpdateOptions(i.minX,i.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(t):t,maxX:i?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var i=this.w;if(void 0!==t||void 0!==e){if(!(i.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=i.globals.dataPoints),e-t<2))){var o={min:t,max:e},n=this.getBeforeZoomRange(o);n&&(o=n.xaxis);var r={xaxis:o},s=f.clone(i.globals.initialConfig.yaxis);i.config.chart.zoom.autoScaleYaxis&&(s=new U(this.ctx).autoScaleY(this.ctx,s,{xaxis:o})),i.config.chart.group||(r.yaxis=s),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(r,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(o,s)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var i=null;return"function"==typeof this.ev.beforeZoom&&(i=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),i}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout(function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(t){var e=this.w,i=new j(this.ctx);switch(t){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach(function(t){var e=t.w;if(e.globals.lastXAxis.min=void 0,e.globals.lastXAxis.max=void 0,t.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof e.config.chart.events.beforeResetZoom){var i=e.config.chart.events.beforeResetZoom(t,e);i&&t.updateHelpers.revertDefaultAxisMinMax(i)}"function"==typeof e.config.chart.events.zoomed&&t.ctx.toolbar.zoomCallback({min:e.config.xaxis.min,max:e.config.xaxis.max}),e.globals.zoomed=!1;var o=t.ctx.series.emptyCollapsedSeries(f.clone(e.globals.initialSeries));t.updateHelpers._updateSeries(o,e.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),t}(),ut=function(t){a(i,t);var e=u(i);function i(t){var n;return o(this,i),(n=e.call(this,t)).ctx=t,n.w=t.w,n.dragged=!1,n.graphics=new v(n.ctx),n.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],n.clientX=0,n.clientY=0,n.startX=0,n.endX=0,n.dragX=0,n.startY=0,n.endY=0,n.dragY=0,n.moveDirection="none",n}return r(i,[{key:"init",value:function(t){var e=this,i=t.xyRatios,o=this.w,n=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=o.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),o.globals.dom.elGraphical.add(this.zoomRect),o.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===o.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:o.globals.gridWidth,maxY:o.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===o.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:o.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=o.globals.dom.baseEl.querySelector("".concat(o.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(t){e.hoverArea.addEventListener(t,n.svgMouseEvents.bind(n,i),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(t,e){var i=this.w,o=this,n=this.ctx.toolbar,r=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type,s=i.config.chart.toolbar.autoSelected;if(e.shiftKey?(this.shiftWasPressed=!0,n.enableZoomPanFromToolbar("pan"===s?"zoom":"pan")):this.shiftWasPressed&&(n.enableZoomPanFromToolbar(s),this.shiftWasPressed=!1),e.target){var a,l=e.target.classList;if(e.target.parentNode&&null!==e.target.parentNode&&(a=e.target.parentNode.classList),!(l.contains("apexcharts-selection-rect")||l.contains("apexcharts-legend-marker")||l.contains("apexcharts-legend-text")||a&&a.contains("apexcharts-toolbar"))){if(o.clientX="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientX:"touchend"===e.type?e.changedTouches[0].clientX:e.clientX,o.clientY="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientY:"touchend"===e.type?e.changedTouches[0].clientY:e.clientY,"mousedown"===e.type&&1===e.which){var c=o.gridRect.getBoundingClientRect();o.startX=o.clientX-c.left,o.startY=o.clientY-c.top,o.dragged=!1,o.w.globals.mousedown=!0}if(("mousemove"===e.type&&1===e.which||"touchmove"===e.type)&&(o.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,o.w.globals.mousedown&&o.panDragging({context:o,zoomtype:r,xyRatios:t})):(o.w.globals.mousedown&&i.globals.zoomEnabled||o.w.globals.mousedown&&i.globals.selectionEnabled)&&(o.selection=o.selectionDrawing({context:o,zoomtype:r}))),"mouseup"===e.type||"touchend"===e.type||"mouseleave"===e.type){var h=o.gridRect.getBoundingClientRect();o.w.globals.mousedown&&(o.endX=o.clientX-h.left,o.endY=o.clientY-h.top,o.dragX=Math.abs(o.endX-o.startX),o.dragY=Math.abs(o.endY-o.startY),(i.globals.zoomEnabled||i.globals.selectionEnabled)&&o.selectionDrawn({context:o,zoomtype:r}),i.globals.panEnabled&&i.config.xaxis.convertedCatToNumeric&&o.delayedPanScrolled()),i.globals.zoomEnabled&&o.hideSelectionRect(this.selectionRect),o.dragged=!1,o.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var t=this.w;if(this.selectionRect){var e=this.selectionRect.node.getBoundingClientRect();e.width>0&&e.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:t.globals.gridWidth,maxY:t.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var t=this.w,e=this.xyRatios;if(!t.globals.zoomEnabled)if(null!=t.globals.selection)this.drawSelectionRect(t.globals.selection);else if(void 0!==t.config.chart.selection.xaxis.min&&void 0!==t.config.chart.selection.xaxis.max){var i=(t.config.chart.selection.xaxis.min-t.globals.minX)/e.xRatio;this.drawSelectionRect({x:i,y:0,width:t.globals.gridWidth-(t.globals.maxX-t.config.chart.selection.xaxis.max)/e.xRatio-i,height:t.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof t.config.chart.events.selection&&t.config.chart.events.selection(this.ctx,{xaxis:{min:t.config.chart.selection.xaxis.min,max:t.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(t){var e=t.x,i=t.y,o=t.width,n=t.height,r=t.translateX,s=t.translateY,a=this.w,l=this.zoomRect,c=this.selectionRect;if(this.dragged||null!==a.globals.selection){var h={transform:"translate("+(void 0===r?0:r)+", "+(void 0===s?0:s)+")"};a.globals.zoomEnabled&&this.dragged&&(o<0&&(o=1),l.attr({x:e,y:i,width:o,height:n,fill:a.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":a.config.chart.zoom.zoomedArea.fill.opacity,stroke:a.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":a.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":a.config.chart.zoom.zoomedArea.stroke.opacity}),v.setAttrs(l.node,h)),a.globals.selectionEnabled&&(c.attr({x:e,y:i,width:o>0?o:0,height:n>0?n:0,fill:a.config.chart.selection.fill.color,"fill-opacity":a.config.chart.selection.fill.opacity,stroke:a.config.chart.selection.stroke.color,"stroke-width":a.config.chart.selection.stroke.width,"stroke-dasharray":a.config.chart.selection.stroke.dashArray,"stroke-opacity":a.config.chart.selection.stroke.opacity}),v.setAttrs(c.node,h))}}},{key:"hideSelectionRect",value:function(t){t&&t.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(t){var e,i=t.zoomtype,o=this.w,n=t.context,r=this.gridRect.getBoundingClientRect(),s=n.startX-1,a=n.startY,l=!1,c=!1,h=n.clientX-r.left-s,u=n.clientY-r.top-a;return Math.abs(h+s)>o.globals.gridWidth?h=o.globals.gridWidth-s:n.clientX-r.left<0&&(h=s),s>n.clientX-r.left&&(l=!0,h=Math.abs(h)),a>n.clientY-r.top&&(c=!0,u=Math.abs(u)),n.drawSelectionRect(e="x"===i?{x:l?s-h:s,y:0,width:h,height:o.globals.gridHeight}:"y"===i?{x:0,y:c?a-u:a,width:o.globals.gridWidth,height:u}:{x:l?s-h:s,y:c?a-u:a,width:h,height:u}),n.selectionDragging("resizing"),e}},{key:"selectionDragging",value:function(t,e){var i=this,o=this.w,n=this.xyRatios,r=this.selectionRect,s=0;"resizing"===t&&(s=30);var a=function(t){return parseFloat(r.node.getAttribute(t))},l={x:a("x"),y:a("y"),width:a("width"),height:a("height")};o.globals.selection=l,"function"==typeof o.config.chart.events.selection&&o.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var t=i.gridRect.getBoundingClientRect(),e=r.node.getBoundingClientRect(),s={xaxis:{min:o.globals.xAxisScale.niceMin+(e.left-t.left)*n.xRatio,max:o.globals.xAxisScale.niceMin+(e.right-t.left)*n.xRatio},yaxis:{min:o.globals.yAxisScale[0].niceMin+(t.bottom-e.bottom)*n.yRatio[0],max:o.globals.yAxisScale[0].niceMax-(e.top-t.top)*n.yRatio[0]}};o.config.chart.events.selection(i.ctx,s),o.config.chart.brush.enabled&&void 0!==o.config.chart.events.brushScrolled&&o.config.chart.events.brushScrolled(i.ctx,s)},s))}},{key:"selectionDrawn",value:function(t){var e=t.zoomtype,i=this.w,o=t.context,n=this.xyRatios,r=this.ctx.toolbar;if(o.startX>o.endX){var s=o.startX;o.startX=o.endX,o.endX=s}if(o.startY>o.endY){var a=o.startY;o.startY=o.endY,o.endY=a}var l=void 0,c=void 0;i.globals.isRangeBar?(l=i.globals.yAxisScale[0].niceMin+o.startX*n.invertedYRatio,c=i.globals.yAxisScale[0].niceMin+o.endX*n.invertedYRatio):(l=i.globals.xAxisScale.niceMin+o.startX*n.xRatio,c=i.globals.xAxisScale.niceMin+o.endX*n.xRatio);var h=[],u=[];if(i.config.yaxis.forEach(function(t,e){h.push(i.globals.yAxisScale[e].niceMax-n.yRatio[e]*o.startY),u.push(i.globals.yAxisScale[e].niceMax-n.yRatio[e]*o.endY)}),o.dragged&&(o.dragX>10||o.dragY>10)&&l!==c)if(i.globals.zoomEnabled){var d=f.clone(i.globals.initialConfig.yaxis),p=f.clone(i.globals.initialConfig.xaxis);if(i.globals.zoomed=!0,i.config.xaxis.convertedCatToNumeric&&(l=Math.floor(l),c=Math.floor(c),l<1&&(l=1,c=i.globals.dataPoints),c-l<2&&(c=l+1)),"xy"!==e&&"x"!==e||(p={min:l,max:c}),"xy"!==e&&"y"!==e||d.forEach(function(t,e){d[e].min=u[e],d[e].max=h[e]}),i.config.chart.zoom.autoScaleYaxis){var g=new U(o.ctx);d=g.autoScaleY(o.ctx,d,{xaxis:p})}if(r){var m=r.getBeforeZoomRange(p,d);m&&(p=m.xaxis?m.xaxis:p,d=m.yaxis?m.yaxis:d)}var y={xaxis:p};i.config.chart.group||(y.yaxis=d),o.ctx.updateHelpers._updateOptions(y,!1,o.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof i.config.chart.events.zoomed&&r.zoomCallback(p,d)}else if(i.globals.selectionEnabled){var v,x=null;v={min:l,max:c},"xy"!==e&&"y"!==e||(x=f.clone(i.config.yaxis)).forEach(function(t,e){x[e].min=u[e],x[e].max=h[e]}),i.globals.selection=o.selection,"function"==typeof i.config.chart.events.selection&&i.config.chart.events.selection(o.ctx,{xaxis:v,yaxis:x})}}},{key:"panDragging",value:function(t){var e=this.w,i=t.context;if(void 0!==e.globals.lastClientPosition.x){var o=e.globals.lastClientPosition.x-i.clientX,n=e.globals.lastClientPosition.y-i.clientY;Math.abs(o)>Math.abs(n)&&o>0?this.moveDirection="left":Math.abs(o)>Math.abs(n)&&o<0?this.moveDirection="right":Math.abs(n)>Math.abs(o)&&n>0?this.moveDirection="up":Math.abs(n)>Math.abs(o)&&n<0&&(this.moveDirection="down")}e.globals.lastClientPosition={x:i.clientX,y:i.clientY},e.config.xaxis.convertedCatToNumeric||i.panScrolled(e.globals.isRangeBar?e.globals.minY:e.globals.minX,e.globals.isRangeBar?e.globals.maxY:e.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var t=this.w,e=t.globals.minX,i=t.globals.maxX,o=(t.globals.maxX-t.globals.minX)/2;"left"===this.moveDirection?(e=t.globals.minX+o,i=t.globals.maxX+o):"right"===this.moveDirection&&(e=t.globals.minX-o,i=t.globals.maxX-o),e=Math.floor(e),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:e,max:i}},e,i)}},{key:"panScrolled",value:function(t,e){var i=this.w,o=this.xyRatios,n=f.clone(i.globals.initialConfig.yaxis),r=o.xRatio,s=i.globals.minX,a=i.globals.maxX;i.globals.isRangeBar&&(r=o.invertedYRatio,s=i.globals.minY,a=i.globals.maxY),"left"===this.moveDirection?(t=s+i.globals.gridWidth/15*r,e=a+i.globals.gridWidth/15*r):"right"===this.moveDirection&&(t=s-i.globals.gridWidth/15*r,e=a-i.globals.gridWidth/15*r),i.globals.isRangeBar||(t<i.globals.initialMinX||e>i.globals.initialMaxX)&&(t=s,e=a);var l={min:t,max:e};i.config.chart.zoom.autoScaleYaxis&&(n=new U(this.ctx).autoScaleY(this.ctx,n,{xaxis:l}));var c={xaxis:{min:t,max:e}};i.config.chart.group||(c.yaxis=n),this.updateScrolledChart(c,t,e)}},{key:"updateScrolledChart",value:function(t,e,i){var o=this.w;this.ctx.updateHelpers._updateOptions(t,!1,!1),"function"==typeof o.config.chart.events.scrolled&&o.config.chart.events.scrolled(this.ctx,{xaxis:{min:e,max:i}})}}]),i}(ht),dt=function(){function t(e){o(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return r(t,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,i=t.clientX,o=t.clientY,n=this.w,r=t.elGrid.getBoundingClientRect(),s=r.width,a=r.height,l=s/(n.globals.dataPoints-1),c=a/n.globals.dataPoints,h=this.hasBars();!n.globals.comboCharts&&!h||n.config.xaxis.convertedCatToNumeric||(l=s/n.globals.dataPoints);var u=i-r.left-n.globals.barPadForNumericAxis,d=o-r.top;u<0||d<0||u>s||d>a?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):n.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):n.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var p=Math.round(u/l),g=Math.floor(d/c);h&&!n.config.xaxis.convertedCatToNumeric&&(p=Math.ceil(u/l),p-=1);var m=null,y=null,v=[],x=[];if(n.globals.seriesXvalues.forEach(function(t){v.push([t[0]+1e-6].concat(t))}),n.globals.seriesYvalues.forEach(function(t){x.push([t[0]+1e-6].concat(t))}),v=v.map(function(t){return t.filter(function(t){return f.isNumber(t)})}),x=x.map(function(t){return t.filter(function(t){return f.isNumber(t)})}),n.globals.isXNumeric){var b=this.ttCtx.getElGrid().getBoundingClientRect(),w=u*(b.width/s);m=(y=this.closestInMultiArray(w,d*(b.height/a),v,x)).index,p=y.j,null!==m&&(p=(y=this.closestInArray(w,v=n.globals.seriesXvalues[m])).index)}return n.globals.capturedSeriesIndex=null===m?-1:m,(!p||p<1)&&(p=0),n.globals.capturedDataPointIndex=n.globals.isBarHorizontal?g:p,{capturedSeries:m,j:n.globals.isBarHorizontal?g:p,hoverX:u,hoverY:d}}},{key:"closestInMultiArray",value:function(t,e,i,o){var n=0,r=null,s=-1;this.w.globals.series.length>1?n=this.getFirstActiveXArray(i):r=0;var a=Math.abs(t-i[n][0]);if(i.forEach(function(e){e.forEach(function(e,i){var o=Math.abs(t-e);o<a&&(a=o,s=i)})}),-1!==s){var l=Math.abs(e-o[n][s]);r=n,o.forEach(function(t,i){var o=Math.abs(e-t[s]);o<l&&(l=o,r=i)})}return{index:r,j:s}}},{key:"getFirstActiveXArray",value:function(t){for(var e=this.w,i=0,o=t.map(function(t,e){return t.length>0?e:-1}),n=0;n<o.length;n++)if(-1!==o[n]&&-1===e.globals.collapsedSeriesIndices.indexOf(n)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(n)){i=o[n];break}return i}},{key:"closestInArray",value:function(t,e){for(var i=null,o=Math.abs(t-e[0]),n=0;n<e.length;n++){var r=Math.abs(t-e[n]);r<o&&(o=r,i=n)}return{index:i}}},{key:"isXoverlap",value:function(t){var e=[],i=this.w.globals.seriesX.filter(function(t){return void 0!==t[0]});if(i.length>0)for(var o=0;o<i.length-1;o++)void 0!==i[o][t]&&void 0!==i[o+1][t]&&i[o][t]!==i[o+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,i=0;i<e.length-1;i++)if(e[i].data.length!==e[i+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return d(t).reduce(function(t,e){return t+e.getBBox().height},0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(t=d(t)).sort(function(t,e){var i=Number(t.getAttribute("data:realIndex")),o=Number(e.getAttribute("data:realIndex"));return o<i?1:o>i?-1:0});var e=[];return t.forEach(function(t){e.push(t.querySelector(".apexcharts-marker"))}),e}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,i=e.config.markers.hover.size;return void 0===i&&(i=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var o=i.allTooltipSeriesGroups,n=0;n<o.length;n++)"enable"===t?(o[n].classList.add("apexcharts-active"),o[n].style.display=e.config.tooltip.items.display):(o[n].classList.remove("apexcharts-active"),o[n].style.display="none")}}]),t}(),pt=function(){function t(e){o(this,t),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new dt(e)}return r(t,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,i=void 0===e||e,o=t.ttItems,n=t.i,r=void 0===n?0:n,s=t.j,a=void 0===s?null:s,l=t.e,c=this.w;void 0!==c.config.tooltip.custom?this.handleCustomTooltip({i:r,j:a,y1:t.y1,y2:t.y2,w:c}):this.toggleActiveInactiveSeries(i);var h=this.getValuesToPrint({i:r,j:a});this.printLabels({i:r,j:a,values:h,ttItems:o,shared:i,e:l});var u=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=u.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=u.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var i,o=this,n=t.i,r=t.j,s=t.values,a=t.ttItems,l=t.shared,c=t.e,h=this.w,u=[],d=function(t){return h.globals.seriesGoals[t]&&h.globals.seriesGoals[t][r]&&Array.isArray(h.globals.seriesGoals[t][r])},p=s.xVal,g=s.zVal,f=s.xAxisTTVal,m="",y=h.globals.colors[n];null!==r&&h.config.plotOptions.bar.distributed&&(y=h.globals.colors[r]);for(var v=function(t,s){var v=o.getFormatters(n);m=o.getSeriesName({fn:v.yLbTitleFormatter,index:n,seriesIndex:n,j:r}),"treemap"===h.config.chart.type&&(m=v.yLbTitleFormatter(String(h.config.series[n].data[r].x),{series:h.globals.series,seriesIndex:n,dataPointIndex:r,w:h}));var x=h.config.tooltip.inverseOrder?s:t;if(h.globals.axisCharts){var b=function(t){return v.yLbFormatter(h.globals.series[t][r],{series:h.globals.series,seriesIndex:t,dataPointIndex:r,w:h})};if(l)v=o.getFormatters(x),m=o.getSeriesName({fn:v.yLbTitleFormatter,index:x,seriesIndex:n,j:r}),y=h.globals.colors[x],i=b(x),d(x)&&(u=h.globals.seriesGoals[x][r].map(function(t){return{attrs:t,val:v.yLbFormatter(t.value,{seriesIndex:x,dataPointIndex:r,w:h})}}));else{var w,_=null==c||null===(w=c.target)||void 0===w?void 0:w.getAttribute("fill");_&&(y=-1!==_.indexOf("url")?document.querySelector(_.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):_),i=b(n),d(n)&&Array.isArray(h.globals.seriesGoals[n][r])&&(u=h.globals.seriesGoals[n][r].map(function(t){return{attrs:t,val:v.yLbFormatter(t.value,{seriesIndex:n,dataPointIndex:r,w:h})}}))}}null===r&&(i=v.yLbFormatter(h.globals.series[n],e(e({},h),{},{seriesIndex:n,dataPointIndex:n}))),o.DOMHandling({i:n,t:x,j:r,ttItems:a,values:{val:i,goalVals:u,xVal:p,xAxisTTVal:f,zVal:g},seriesName:m,shared:l,pColor:y})},x=0,b=h.globals.series.length-1;x<h.globals.series.length;x++,b--)v(x,b)}},{key:"getFormatters",value:function(t){var e,i=this.w,o=i.globals.yLabelFormatters[t];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(o=i.globals.ttVal[t]&&i.globals.ttVal[t].formatter,e=i.globals.ttVal[t]&&i.globals.ttVal[t].title&&i.globals.ttVal[t].title.formatter):(o=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(e=i.globals.ttVal.title.formatter)):e=i.config.tooltip.y.title.formatter,"function"!=typeof o&&(o=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(t){return t}),"function"!=typeof e&&(e=function(t){return t}),{yLbFormatter:o,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var e=t.seriesIndex,i=t.j,o=this.w;return(0,t.fn)(String(o.globals.seriesNames[t.index]),{series:o.globals.series,seriesIndex:e,dataPointIndex:i,w:o})}},{key:"DOMHandling",value:function(t){var e=t.t,i=t.j,o=t.ttItems,n=t.values,r=t.seriesName,s=t.shared,a=t.pColor,l=this.w,c=this.ttCtx,h=n.val,u=n.goalVals,d=n.xVal,p=n.xAxisTTVal,g=n.zVal,f=null;f=o[e].children,l.config.tooltip.fillSeriesColor&&(o[e].style.backgroundColor=a,f[0].style.display="none"),c.showTooltipTitle&&(null===c.tooltipTitle&&(c.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),c.tooltipTitle.innerHTML=d),c.isXAxisTooltipEnabled&&(c.xaxisTooltipText.innerHTML=""!==p?p:d);var m=o[e].querySelector(".apexcharts-tooltip-text-y-label");m&&(m.innerHTML=r||"");var y=o[e].querySelector(".apexcharts-tooltip-text-y-value");y&&(y.innerHTML=void 0!==h?h:""),f[0]&&f[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(a=l.config.tooltip.marker.fillColors[e]),f[0].style.backgroundColor=a),l.config.tooltip.marker.show||(f[0].style.display="none");var v=o[e].querySelector(".apexcharts-tooltip-text-goals-label"),x=o[e].querySelector(".apexcharts-tooltip-text-goals-value");if(u.length&&l.globals.seriesGoals[e]){var b=function(){var t="<div >",e="<div>";u.forEach(function(i,o){t+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(i.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(i.attrs.name,"</div>"),e+="<div>".concat(i.val,"</div>")}),v.innerHTML=t+"</div>",x.innerHTML=e+"</div>"};s?l.globals.seriesGoals[e][i]&&Array.isArray(l.globals.seriesGoals[e][i])?b():(v.innerHTML="",x.innerHTML=""):b()}else v.innerHTML="",x.innerHTML="";null!==g&&(o[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,o[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==g?g:""),s&&f[0]&&(f[0].parentNode.style.display=null==h||l.globals.ancillaryCollapsedSeriesIndices.indexOf(e)>-1||l.globals.collapsedSeriesIndices.indexOf(e)>-1?"none":l.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(t){var e=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var i=e.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");i&&(i.classList.add("apexcharts-active"),i.style.display=e.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,i=t.j,o=this.w,n=this.ctx.series.filteredSeriesX(),r="",s="",a=null,l=null,c={series:o.globals.series,seriesIndex:e,dataPointIndex:i,w:o},h=o.globals.ttZFormatter;null===i?l=o.globals.series[e]:o.globals.isXNumeric&&"treemap"!==o.config.chart.type?(r=n[e][i],0===n[e].length&&(r=n[this.tooltipUtil.getFirstActiveXArray(n)][i])):r=void 0!==o.globals.labels[i]?o.globals.labels[i]:"";var u=r;return r=o.globals.isXNumeric&&"datetime"===o.config.xaxis.type?new V(this.ctx).xLabelFormat(o.globals.ttKeyFormatter,u,u,{i:void 0,dateFormatter:new F(this.ctx).formatDate,w:this.w}):o.globals.isBarHorizontal?o.globals.yLabelFormatters[0](u,c):o.globals.xLabelFormatter(u,c),void 0!==o.config.tooltip.x.formatter&&(r=o.globals.ttKeyFormatter(u,c)),o.globals.seriesZ.length>0&&o.globals.seriesZ[e].length>0&&(a=h(o.globals.seriesZ[e][i],o)),s="function"==typeof o.config.xaxis.tooltip.formatter?o.globals.xaxisTooltipFormatter(u,c):r,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(r)?r.join(" "):r,xAxisTTVal:Array.isArray(s)?s.join(" "):s,zVal:a}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,i=t.j,o=t.y1,n=t.y2,r=t.w,s=this.ttCtx.getElTooltip(),a=r.config.tooltip.custom;Array.isArray(a)&&a[e]&&(a=a[e]),s.innerHTML=a({ctx:this.ctx,series:r.globals.series,seriesIndex:e,dataPointIndex:i,y1:o,y2:n,w:r})}}]),t}(),gt=function(){function t(e){o(this,t),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return r(t,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,o=this.w,n=i.getElXCrosshairs(),r=t-i.xcrosshairsWidth/2,s=o.globals.labels.slice().length;if(null!==e&&(r=o.globals.gridWidth/s*e),null===n||o.globals.isBarHorizontal||(n.setAttribute("x",r),n.setAttribute("x1",r),n.setAttribute("x2",r),n.setAttribute("y2",o.globals.gridHeight),n.classList.add("apexcharts-active")),r<0&&(r=0),r>o.globals.gridWidth&&(r=o.globals.gridWidth),i.isXAxisTooltipEnabled){var a=r;"tickWidth"!==o.config.xaxis.crosshairs.width&&"barWidth"!==o.config.xaxis.crosshairs.width||(a=r+i.xcrosshairsWidth/2),this.moveXAxisTooltip(a)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&v.setAttrs(e.ycrosshairs,{y1:t,y2:t}),null!==e.ycrosshairsHidden&&v.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;if(null!==i.xaxisTooltip&&0!==i.xcrosshairsWidth){i.xaxisTooltip.classList.add("apexcharts-active");var o,n=i.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;t-=i.xaxisTooltip.getBoundingClientRect().width/2,isNaN(t)||(t+=e.globals.translateX,o=new v(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=o.width+"px",i.xaxisTooltip.style.left=t+"px",i.xaxisTooltip.style.top=n+"px")}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var o=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),n=e.globals.translateY+o,r=i.yaxisTTEls[t].getBoundingClientRect().height,s=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(s-=26),n-=r/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)?(i.yaxisTTEls[t].classList.add("apexcharts-active"),i.yaxisTTEls[t].style.top=n+"px",i.yaxisTTEls[t].style.left=s+e.config.yaxis[t].tooltip.offsetX+"px"):i.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.w,n=this.ttCtx,r=n.getElTooltip(),s=n.tooltipRect,a=null!==i?parseFloat(i):1,l=parseFloat(t)+a+5,c=parseFloat(e)+a/2;if(l>o.globals.gridWidth/2&&(l=l-s.ttWidth-a-10),l>o.globals.gridWidth-s.ttWidth-10&&(l=o.globals.gridWidth-s.ttWidth),l<-20&&(l=-20),o.config.tooltip.followCursor){var h=n.getElGrid(),u=h.getBoundingClientRect();c=n.e.clientY+o.globals.translateY-u.top-s.ttHeight/2}else o.globals.isBarHorizontal||(s.ttHeight/2+c>o.globals.gridHeight&&(c=o.globals.gridHeight-s.ttHeight+o.globals.translateY),c<0&&(c=0));isNaN(l)||(r.style.left=(l+=o.globals.translateX)+"px",r.style.top=c+"px")}},{key:"moveMarkers",value:function(t,e){var i=this.w,o=this.ttCtx;if(i.globals.markers.size[t]>0)for(var n=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),r=0;r<n.length;r++)parseInt(n[r].getAttribute("rel"),10)===e&&(o.marker.resetPointsSize(),o.marker.enlargeCurrentPoint(e,n[r]));else o.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var i,o,n=this.w,r=this.ttCtx,s=n.globals.pointsArray,a=r.tooltipUtil.getHoverMarkerSize(e),l=n.config.series[e].type;if(!l||"column"!==l&&"candlestick"!==l&&"boxPlot"!==l){i=s[e][t][0],o=s[e][t][1]?s[e][t][1]:0;var c=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers circle"));c&&o<n.globals.gridHeight&&o>0&&(c.setAttribute("r",a),c.setAttribute("cx",i),c.setAttribute("cy",o)),this.moveXCrosshairs(i),r.fixedTooltip||this.moveTooltip(i,o,a)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,i=this.ttCtx,o=i.w,n=0,r=0,s=o.globals.pointsArray;e=new I(this.ctx).getActiveConfigSeriesIndex(!0);var a=i.tooltipUtil.getHoverMarkerSize(e);s[e]&&(n=s[e][t][0],r=s[e][t][1]);var l=i.tooltipUtil.getAllMarkers();if(null!==l)for(var c=0;c<o.globals.series.length;c++){var h=s[c];if(o.globals.comboCharts&&void 0===h&&l.splice(c,0,null),h&&h.length){var u=s[c][t][1];l[c].setAttribute("cx",n),null!==u&&!isNaN(u)&&u<o.globals.gridHeight+a&&u+a>0?(l[c]&&l[c].setAttribute("r",a),l[c]&&l[c].setAttribute("cy",u)):l[c]&&l[c].setAttribute("r",0)}}this.moveXCrosshairs(n),i.fixedTooltip||this.moveTooltip(n,r||o.globals.gridHeight,a)}},{key:"moveStickyTooltipOverBars",value:function(t){var e=this.w,i=this.ttCtx,o=e.globals.columnSeries?e.globals.columnSeries.length:e.globals.series.length,n=o>=2&&o%2==0?Math.floor(o/2):Math.floor(o/2)+1;e.globals.isBarHorizontal&&(n=new I(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var r=e.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(n,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(t,"']")),s=r?parseFloat(r.getAttribute("cx")):0,a=r?parseFloat(r.getAttribute("cy")):0,l=r?parseFloat(r.getAttribute("barWidth")):0,c=r?parseFloat(r.getAttribute("barHeight")):0,h=i.getElGrid().getBoundingClientRect(),u=r.classList.contains("apexcharts-candlestick-area")||r.classList.contains("apexcharts-boxPlot-area");e.globals.isXNumeric?(r&&!u&&(s-=o%2!=0?l/2:0),r&&u&&e.globals.comboCharts&&(s-=l/2)):e.globals.isBarHorizontal||(s=i.xAxisTicksPositions[t-1]+i.dataPointsDividedWidth/2,isNaN(s)&&(s=i.xAxisTicksPositions[t]-i.dataPointsDividedWidth/2)),e.globals.isBarHorizontal?(a>e.globals.gridHeight/2&&(a-=i.tooltipRect.ttHeight),(a=a+e.config.grid.padding.top+c/3)+c>e.globals.gridHeight&&(a=e.globals.gridHeight-c)):e.config.tooltip.followCursor?a=i.e.clientY-h.top-i.tooltipRect.ttHeight/2:a+i.tooltipRect.ttHeight+15>e.globals.gridHeight&&(a=e.globals.gridHeight),a<-10&&(a=-10),e.globals.isBarHorizontal||this.moveXCrosshairs(s),i.fixedTooltip||this.moveTooltip(s,a||e.globals.gridHeight)}}]),t}(),ft=function(){function t(e){o(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new gt(e)}return r(t,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new v(this.ctx),i=new T(this.ctx),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");o=d(o),t.config.chart.stacked&&o.sort(function(t,e){return parseFloat(t.getAttribute("data:realIndex"))-parseFloat(e.getAttribute("data:realIndex"))});for(var n=0;n<o.length;n++){var r=o[n].querySelector(".apexcharts-series-markers-wrap");if(null!==r){var s=void 0,a="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(a+=" no-pointer-events");var l=i.getMarkerConfig({cssClass:a,seriesIndex:Number(r.getAttribute("data:realIndex"))});(s=e.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var c=document.createElementNS(t.globals.SVGNS,"g");c.classList.add("apexcharts-series-markers"),c.appendChild(s.node),r.appendChild(c)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.w;"bubble"!==n.config.chart.type&&this.newPointSize(t,e);var r=e.getAttribute("cx"),s=e.getAttribute("cy");if(null!==i&&null!==o&&(r=i,s=o),this.tooltipPosition.moveXCrosshairs(r),!this.fixedTooltip){if("radar"===n.config.chart.type){var a=this.ttCtx.getElGrid(),l=a.getBoundingClientRect();r=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(r,s,n.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,i=this,o=this.ttCtx,n=t,r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),s=e.config.markers.hover.size,a=0;a<r.length;a++){var l=r[a].getAttribute("rel"),c=r[a].getAttribute("index");if(void 0===s&&(s=e.globals.markers.size[c]+e.config.markers.hover.sizeOffset),n===parseInt(l,10)){i.newPointSize(n,r[a]);var h=r[a].getAttribute("cx"),u=r[a].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(h),o.fixedTooltip||i.tooltipPosition.moveTooltip(h,u,s)}else i.oldPointSize(r[a])}}},{key:"newPointSize",value:function(t,e){var i=this.w,o=i.config.markers.hover.size,n=0===t?e.parentNode.firstChild:e.parentNode.lastChild;if("0"!==n.getAttribute("default-marker-size")){var r=parseInt(n.getAttribute("index"),10);void 0===o&&(o=i.globals.markers.size[r]+i.config.markers.hover.sizeOffset),o<0&&(o=0),n.setAttribute("r",o)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size"));t.setAttribute("r",e)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var i=parseFloat(t[e].getAttribute("default-marker-size"));f.isNumber(i)&&i>=0?t[e].setAttribute("r",i):t[e].setAttribute("r",0)}}}]),t}(),mt=function(){function t(e){o(this,t),this.w=e.w,this.ttCtx=e}return r(t,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTreeTooltip",value:function(t){var e=t.e,i=t.opt,o=t.x,n=t.y,r=this.ttCtx,s=this.w;if(e.target.classList.contains("apexcharts-".concat(t.type,"-rect"))){var a=this.getAttr(e,"i"),l=this.getAttr(e,"j"),c=this.getAttr(e,"cx"),h=this.getAttr(e,"cy"),u=this.getAttr(e,"width"),d=this.getAttr(e,"height");if(r.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:a,j:l,shared:!1,e:e}),s.globals.capturedSeriesIndex=a,s.globals.capturedDataPointIndex=l,o=c+r.tooltipRect.ttWidth/2+u,n=h+r.tooltipRect.ttHeight/2-d/2,r.tooltipPosition.moveXCrosshairs(c+u/2),o>s.globals.gridWidth/2&&(o=c-r.tooltipRect.ttWidth/2+u),r.w.config.tooltip.followCursor){var p=s.globals.dom.elWrap.getBoundingClientRect();o=s.globals.clientX-p.left-(o>s.globals.gridWidth/2?r.tooltipRect.ttWidth:0),n=s.globals.clientY-p.top-(n>s.globals.gridHeight/2?r.tooltipRect.ttHeight:0)}}return{x:o,y:n}}},{key:"handleMarkerTooltip",value:function(t){var e,i,o=t.e,n=t.opt,r=t.x,s=t.y,a=this.w,l=this.ttCtx;if(o.target.classList.contains("apexcharts-marker")){var c=parseInt(n.paths.getAttribute("cx"),10),h=parseInt(n.paths.getAttribute("cy"),10),u=parseFloat(n.paths.getAttribute("val"));if(i=parseInt(n.paths.getAttribute("rel"),10),e=parseInt(n.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var d=f.findAncestor(n.paths,"apexcharts-series");d&&(e=parseInt(d.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:e,j:i,shared:!l.showOnIntersect&&a.config.tooltip.shared,e:o}),"mouseup"===o.type&&l.markerClick(o,e,i),a.globals.capturedSeriesIndex=e,a.globals.capturedDataPointIndex=i,r=c,s=h+a.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var p=l.getElGrid().getBoundingClientRect();s=l.e.clientY+a.globals.translateY-p.top}u<0&&(s=h),l.marker.enlargeCurrentPoint(i,n.paths,r,s)}return{x:r,y:s}}},{key:"handleBarTooltip",value:function(t){var e,i,o=t.e,n=t.opt,r=this.w,s=this.ttCtx,a=s.getElTooltip(),l=0,c=0,h=0,u=this.getBarTooltipXY({e:o,opt:n}),d=u.barHeight,p=u.j;r.globals.capturedSeriesIndex=e=u.i,r.globals.capturedDataPointIndex=p,r.globals.isBarHorizontal&&s.tooltipUtil.hasBars()||!r.config.tooltip.shared?(c=u.x,h=u.y,i=Array.isArray(r.config.stroke.width)?r.config.stroke.width[e]:r.config.stroke.width,l=c):r.globals.comboCharts||r.config.tooltip.shared||(l/=2),isNaN(h)?h=r.globals.svgHeight-s.tooltipRect.ttHeight:h<0&&(h=0);var g=parseInt(n.paths.parentNode.getAttribute("data:realIndex"),10),f=r.globals.isMultipleYAxis?r.config.yaxis[g]&&r.config.yaxis[g].reversed:r.config.yaxis[0].reversed;if(c+s.tooltipRect.ttWidth>r.globals.gridWidth&&!f?c-=s.tooltipRect.ttWidth:c<0&&(c=0),s.w.config.tooltip.followCursor){var m=s.getElGrid().getBoundingClientRect();h=s.e.clientY-m.top}null===s.tooltip&&(s.tooltip=r.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),r.config.tooltip.shared||s.tooltipPosition.moveXCrosshairs(r.globals.comboBarCount>0?l+i/2:l),!s.fixedTooltip&&(!r.config.tooltip.shared||r.globals.isBarHorizontal&&s.tooltipUtil.hasBars())&&(f&&(c-=s.tooltipRect.ttWidth)<0&&(c=0),!f||r.globals.isBarHorizontal&&s.tooltipUtil.hasBars()||(h=h+d-2*(r.globals.series[e][p]<0?d:0)),s.tooltipRect.ttHeight+h>r.globals.gridHeight?h=r.globals.gridHeight-s.tooltipRect.ttHeight+r.globals.translateY:(h=h+r.globals.translateY-s.tooltipRect.ttHeight/2)<0&&(h=0),a.style.left=c+r.globals.translateX+"px",a.style.top=h+"px")}},{key:"getBarTooltipXY",value:function(t){var e=t.e,i=t.opt,o=this.w,n=null,r=this.ttCtx,s=0,a=0,l=0,c=0,h=0,u=e.target.classList;if(u.contains("apexcharts-bar-area")||u.contains("apexcharts-candlestick-area")||u.contains("apexcharts-boxPlot-area")||u.contains("apexcharts-rangebar-area")){var d=e.target,p=d.getBoundingClientRect(),g=i.elGrid.getBoundingClientRect(),f=p.height;h=p.height;var m=p.width,y=parseInt(d.getAttribute("cx"),10),v=parseInt(d.getAttribute("cy"),10);c=parseFloat(d.getAttribute("barWidth"));var x="touchmove"===e.type?e.touches[0].clientX:e.clientX;n=parseInt(d.getAttribute("j"),10),s=parseInt(d.parentNode.getAttribute("rel"),10)-1;var b=d.getAttribute("data-range-y1"),w=d.getAttribute("data-range-y2");o.globals.comboCharts&&(s=parseInt(d.parentNode.getAttribute("data:realIndex"),10)),r.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:s,j:n,y1:b?parseInt(b,10):null,y2:w?parseInt(w,10):null,shared:!r.showOnIntersect&&o.config.tooltip.shared,e:e}),o.config.tooltip.followCursor?o.globals.isBarHorizontal?(a=x-g.left+15,l=v-r.dataPointsDividedHeight+f/2-r.tooltipRect.ttHeight/2):(a=o.globals.isXNumeric?y-m/2:y-r.dataPointsDividedWidth+m/2,l=e.clientY-g.top-r.tooltipRect.ttHeight/2-15):o.globals.isBarHorizontal?((a=y)<r.xyRatios.baseLineInvertedY&&(a=y-r.tooltipRect.ttWidth),l=v-r.dataPointsDividedHeight+f/2-r.tooltipRect.ttHeight/2):(a=o.globals.isXNumeric?y-m/2:y-r.dataPointsDividedWidth+m/2,l=v)}return{x:a,y:l,barHeight:h,barWidth:c,i:s,j:n}}}]),t}(),yt=function(){function t(e){o(this,t),this.w=e.w,this.ttCtx=e}return r(t,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,i="bottom"===t.config.xaxis.position;e.xaxisOffY=i?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var o=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",n=t.globals.dom.elWrap;e.isXAxisTooltipEnabled&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",o+" apexcharts-theme-"+t.config.tooltip.theme),n.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,i=function(i){var o=t.config.yaxis[i].opposite||t.config.yaxis[i].crosshairs.opposite;e.yaxisOffX=o?t.globals.gridWidth+1:1;var n="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,o?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");t.globals.yAxisSameScaleIndices.map(function(e,o){e.map(function(e,o){o===i&&(n+=t.config.yaxis[o].show?" ":" apexcharts-yaxistooltip-hidden")})});var r=t.globals.dom.elWrap;null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+t.config.tooltip.theme),r.appendChild(e.yaxisTooltip),0===i&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[i]=document.createElement("div"),e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[i]))},o=0;o<t.config.yaxis.length;o++)i(o)}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,i=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var o=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==o&&"barWidth"===t.config.xaxis.crosshairs.width){var n=parseFloat(o.getAttribute("barWidth"));e.xcrosshairsWidth=n}else"tickWidth"===t.config.xaxis.crosshairs.width&&(e.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length)}else if("tickWidth"===t.config.xaxis.crosshairs.width)e.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length;else if("barWidth"===t.config.xaxis.crosshairs.width){var r=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==r){var s=parseFloat(r.getAttribute("barWidth"));e.xcrosshairsWidth=s}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),null!==i&&e.xcrosshairsWidth>0&&i.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,i){var o=this.ttCtx,n=this.w,r=n.globals.yLabelFormatters[t];if(o.yaxisTooltips[t]){var s=o.getElGrid().getBoundingClientRect(),a=n.globals.minYArr[t]+(n.globals.maxYArr[t]-n.globals.minYArr[t]-(e-s.top)*i.yRatio[t]);o.tooltipPosition.moveYCrosshairs(e-s.top),o.yaxisTooltipText[t].innerHTML=r(a),o.tooltipPosition.moveYAxisTooltip(t)}}}]),t}(),vt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new dt(this),this.tooltipLabels=new pt(this),this.tooltipPosition=new gt(this),this.marker=new ft(this),this.intersect=new mt(this),this.axesTooltip=new yt(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return r(t,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl?t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.isXAxisTooltipEnabled=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.yaxisTooltips=e.config.yaxis.map(function(t,i){return!!(t.show&&t.tooltip.enabled&&e.globals.axisCharts)}),this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),e.config.tooltip.cssClass&&i.classList.add(e.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),e.globals.dom.elWrap.appendChild(i),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var o=new X(this.ctx);this.xAxisTicksPositions=o.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==e.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==e.config.markers.size&&0!==e.globals.markers.largestSize||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var n=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(n=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(n),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this,i=this.w,o=[],n=this.getElTooltip(),r=function(r){var s=document.createElement("div");s.classList.add("apexcharts-tooltip-series-group"),s.style.order=i.config.tooltip.inverseOrder?t-r:r+1,e.tConfig.shared&&e.tConfig.enabledOnSeries&&Array.isArray(e.tConfig.enabledOnSeries)&&e.tConfig.enabledOnSeries.indexOf(r)<0&&s.classList.add("apexcharts-tooltip-series-group-hidden");var a=document.createElement("span");a.classList.add("apexcharts-tooltip-marker"),a.style.backgroundColor=i.globals.colors[r],s.appendChild(a);var l=document.createElement("div");l.classList.add("apexcharts-tooltip-text"),l.style.fontFamily=e.tConfig.style.fontFamily||i.config.chart.fontFamily,l.style.fontSize=e.tConfig.style.fontSize,["y","goals","z"].forEach(function(t){var e=document.createElement("div");e.classList.add("apexcharts-tooltip-".concat(t,"-group"));var i=document.createElement("span");i.classList.add("apexcharts-tooltip-text-".concat(t,"-label")),e.appendChild(i);var o=document.createElement("span");o.classList.add("apexcharts-tooltip-text-".concat(t,"-value")),e.appendChild(o),l.appendChild(e)}),s.appendChild(l),n.appendChild(s),o.push(s)},s=0;s<t;s++)r(s);return o}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,i=this.getElTooltip(),o=!("bar"!==e&&"candlestick"!==e&&"boxPlot"!==e&&"rangeBar"!==e),n="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,r=t.globals.dom.Paper.node,s=this.getElGrid();s&&(this.seriesBound=s.getBoundingClientRect());var a,l=[],c=[],h={hoverArea:r,elGrid:s,tooltipEl:i,tooltipY:l,tooltipX:c,ttItems:this.ttItems};if(t.globals.axisCharts&&(n?a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):o?a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==e&&"treemap"!==e||(a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),a&&a.length))for(var u=0;u<a.length;u++)l.push(a[u].getAttribute("cy")),c.push(a[u].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||o&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([r],h);else if(o&&!t.globals.comboCharts||n&&this.showOnIntersect)this.addDatapointEventsListeners(h);else if(!t.globals.axisCharts||"heatmap"===e||"treemap"===e){var d=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(d,h)}if(this.showOnIntersect){var p=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");p.length>0&&this.addPathsEventListeners(p,h),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(h)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),i=e.getBoundingClientRect(),o=i.width+10,n=i.height+10,r=this.tConfig.fixed.offsetX,s=this.tConfig.fixed.offsetY,a=this.tConfig.fixed.position.toLowerCase();return a.indexOf("right")>-1&&(r=r+t.globals.svgWidth-o+10),a.indexOf("bottom")>-1&&(s=s+t.globals.svgHeight-n-10),e.style.left=r+"px",e.style.top=s+"px",{x:r,y:s,ttWidth:o,ttHeight:n}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var i=this,o=function(o){var n={paths:t[o],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(e){return t[o].addEventListener(e,i.onSeriesHover.bind(i,n),{capture:!1,passive:!0})})},n=0;n<t.length;n++)o(n)}},{key:"onSeriesHover",value:function(t,e){var i=this,o=Date.now()-this.lastHoverTime;o>=100?this.seriesHover(t,e):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){i.seriesHover(t,e)},100-o))}},{key:"seriesHover",value:function(t,e){var i=this;this.lastHoverTime=Date.now();var o=[],n=this.w;n.config.chart.group&&(o=this.ctx.getGroupedCharts()),n.globals.axisCharts&&(n.globals.minX===-1/0&&n.globals.maxX===1/0||0===n.globals.dataPoints)||(o.length?o.forEach(function(o){var n=i.getElTooltip(o);o.w.globals.minX===i.w.globals.minX&&o.w.globals.maxX===i.w.globals.maxX&&o.w.globals.tooltip.seriesHoverByContext({chartCtx:o,ttCtx:o.w.globals.tooltip,opt:{paths:t.paths,tooltipEl:n,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:o.w.globals.tooltip.ttItems},e:e})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e:e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,i=t.ttCtx,o=t.opt,n=t.e,r=e.w,s=this.getElTooltip();s&&(i.tooltipRect={x:0,y:0,ttWidth:s.getBoundingClientRect().width,ttHeight:s.getBoundingClientRect().height},i.e=n,!i.tooltipUtil.hasBars()||r.globals.comboCharts||i.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new I(e).toggleSeriesOnHover(n,n.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),r.globals.axisCharts?i.axisChartsTooltips({e:n,opt:o,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:n,opt:o,tooltipRect:i.tooltipRect}))}},{key:"axisChartsTooltips",value:function(t){var e,i,o=t.e,n=t.opt,r=this.w,s=n.elGrid.getBoundingClientRect(),a="touchmove"===o.type?o.touches[0].clientX:o.clientX,l="touchmove"===o.type?o.touches[0].clientY:o.clientY;if(this.clientY=l,this.clientX=a,r.globals.capturedSeriesIndex=-1,r.globals.capturedDataPointIndex=-1,l<s.top||l>s.top+s.height)this.handleMouseOut(n);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!r.config.tooltip.shared){var c=parseInt(n.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(c)<0)return void this.handleMouseOut(n)}var h=this.getElTooltip(),u=this.getElXCrosshairs(),d=r.globals.xyCharts||"bar"===r.config.chart.type&&!r.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||r.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===o.type||"touchmove"===o.type||"mouseup"===o.type){if(r.globals.collapsedSeries.length+r.globals.ancillaryCollapsedSeries.length===r.globals.series.length)return;null!==u&&u.classList.add("apexcharts-active");var p=this.yaxisTooltips.filter(function(t){return!0===t});if(null!==this.ycrosshairs&&p.length&&this.ycrosshairs.classList.add("apexcharts-active"),d&&!this.showOnIntersect)this.handleStickyTooltip(o,a,l,n);else if("heatmap"===r.config.chart.type||"treemap"===r.config.chart.type){var g=this.intersect.handleHeatTreeTooltip({e:o,opt:n,x:e,y:i,type:r.config.chart.type});i=g.y,h.style.left=(e=g.x)+"px",h.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:o,opt:n}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:o,opt:n,x:e,y:i});if(this.yaxisTooltips.length)for(var f=0;f<r.config.yaxis.length;f++)this.axesTooltip.drawYaxisTooltipText(f,l,this.xyRatios);n.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==o.type&&"touchend"!==o.type||this.handleMouseOut(n)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,i=t.opt,o=t.tooltipRect,n=this.w,r=i.paths.getAttribute("rel"),s=this.getElTooltip(),a=n.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===e.type||"touchmove"===e.type){s.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(r,10)-1,shared:!1});var l=n.globals.clientY-a.top-o.ttHeight-10;if(s.style.left=n.globals.clientX-a.left-o.ttWidth/2+"px",s.style.top=l+"px",n.config.legend.tooltipHoverFormatter){var c=r-1,h=(0,n.config.legend.tooltipHoverFormatter)(this.legendLabels[c].getAttribute("data:default-text"),{seriesIndex:c,dataPointIndex:c,w:n});this.legendLabels[c].innerHTML=h}}else"mouseout"!==e.type&&"touchend"!==e.type||(s.classList.remove("apexcharts-active"),n.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}))}},{key:"handleStickyTooltip",value:function(t,e,i,o){var n=this.w,r=this.tooltipUtil.getNearestValues({context:this,hoverArea:o.hoverArea,elGrid:o.elGrid,clientX:e,clientY:i}),s=r.j,a=r.capturedSeries,l=o.elGrid.getBoundingClientRect();r.hoverX<0||r.hoverX>l.width?this.handleMouseOut(o):null!==a?this.handleStickyCapturedSeries(t,a,o,s):(this.tooltipUtil.isXoverlap(s)||n.globals.isBarHorizontal)&&this.create(t,this,0,s,o.ttItems)}},{key:"handleStickyCapturedSeries",value:function(t,e,i,o){var n=this.w;this.tConfig.shared||null!==n.globals.series[e][o]?void 0!==n.globals.series[e][o]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(o)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,o,i.ttItems):this.create(t,this,e,o,i.ttItems,!1):this.tooltipUtil.isXoverlap(o)&&this.create(t,this,0,o,i.ttItems):this.handleMouseOut(i)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new v(this.ctx),i=t.globals.dom.Paper.select(".apexcharts-bar-area"),o=0;o<i.length;o++)e.pathMouseLeave(i[o])}},{key:"handleMouseOut",value:function(t){var e=this.w,i=this.getElXCrosshairs();if(t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var o=0;o<this.yaxisTTEls.length;o++)this.yaxisTTEls[o].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)})}},{key:"markerClick",value:function(t,e,i){var o=this.w;"function"==typeof o.config.chart.events.markerClick&&o.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:o}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:o}])}},{key:"create",value:function(t,e,i,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=this.w,a=e;"mouseup"===t.type&&this.markerClick(t,i,o),null===r&&(r=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),c=this.tooltipUtil.getElBars();if(s.config.legend.tooltipHoverFormatter){var h=s.config.legend.tooltipHoverFormatter,u=Array.from(this.legendLabels);u.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)});for(var d=0;d<u.length;d++){var p=u[d],g=parseInt(p.getAttribute("i"),10),f=decodeURIComponent(p.getAttribute("data:default-text")),m=h(f,{seriesIndex:r?g:i,dataPointIndex:o,w:s});if(r)p.innerHTML=s.globals.collapsedSeriesIndices.indexOf(g)<0?m:f;else if(p.innerHTML=g===i?m:f,i===g)break}}if(r){if(a.tooltipLabels.drawSeriesTexts({ttItems:n,i:i,j:o,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(s.globals.markers.largestSize>0?a.marker.enlargePoints(o):a.tooltipPosition.moveDynamicPointsOnHover(o)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(c),this.barSeriesHeight>0)){var y=new v(this.ctx),x=s.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(o,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(o);for(var b=0;b<x.length;b++)y.pathMouseEnter(x[b])}}else a.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:n,i:i,j:o}),this.tooltipUtil.hasBars()&&a.tooltipPosition.moveStickyTooltipOverBars(o),l&&a.tooltipPosition.moveMarkers(i,o)}}]),t}(),xt=function(t){a(n,t);var i=u(n);function n(){return o(this,n),i.apply(this,arguments)}return r(n,[{key:"draw",value:function(t,i){var o=this,n=this.w;this.graphics=new v(this.ctx),this.bar=new N(this.ctx,this.xyRatios);var r=new x(this.ctx,n);t=r.getLogSeries(t),this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t),"100%"===n.config.chart.stackType&&(t=n.globals.seriesPercent.slice()),this.series=t,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var s=0;s<t.length;s++)t[s].length>0&&(this.totalItems+=t[s].length);for(var a=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),l=0,c=0,h=function(r,s){var h=void 0,u=void 0,d=void 0,p=void 0,g=[],m=[],y=n.globals.comboCharts?i[r]:r;o.yRatio.length>1&&(o.yaxisIndex=y),o.isReversed=n.config.yaxis[o.yaxisIndex]&&n.config.yaxis[o.yaxisIndex].reversed;var v=o.graphics.group({class:"apexcharts-series",seriesName:f.escapeString(n.globals.seriesNames[y]),rel:r+1,"data:realIndex":y});o.ctx.series.addCollapsedClassToSeries(v,y);var x=o.graphics.group({class:"apexcharts-datalabels","data:realIndex":y}),b=0,w=0,_=o.initialPositions(l,c,h,u,d,p);c=_.y,b=_.barHeight,u=_.yDivision,p=_.zeroW,l=_.x,w=_.barWidth,h=_.xDivision,d=_.zeroH,o.yArrj=[],o.yArrjF=[],o.yArrjVal=[],o.xArrj=[],o.xArrjF=[],o.xArrjVal=[],1===o.prevY.length&&o.prevY[0].every(function(t){return isNaN(t)})&&(o.prevY[0]=o.prevY[0].map(function(t){return d}),o.prevYF[0]=o.prevYF[0].map(function(t){return 0}));for(var S=0;S<n.globals.dataPoints;S++){var C=o.barHelpers.getStrokeWidth(r,S,y),k={indexes:{i:r,j:S,realIndex:y,bc:s},strokeWidth:C,x:l,y:c,elSeries:v},A=null;o.isHorizontal?(A=o.drawStackedBarPaths(e(e({},k),{},{zeroW:p,barHeight:b,yDivision:u})),w=o.series[r][S]/o.invertedYRatio):(A=o.drawStackedColumnPaths(e(e({},k),{},{xDivision:h,barWidth:w,zeroH:d})),b=o.series[r][S]/o.yRatio[o.yaxisIndex]),c=A.y,g.push(l=A.x),m.push(c);var E=o.barHelpers.getPathFillColor(t,r,S,y);v=o.renderSeries({realIndex:y,pathFill:E,j:S,i:r,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:C,elSeries:v,x:l,y:c,series:t,barHeight:b,barWidth:w,elDataLabelsWrap:x,type:"bar",visibleSeries:0})}n.globals.seriesXvalues[y]=g,n.globals.seriesYvalues[y]=m,o.prevY.push(o.yArrj),o.prevYF.push(o.yArrjF),o.prevYVal.push(o.yArrjVal),o.prevX.push(o.xArrj),o.prevXF.push(o.xArrjF),o.prevXVal.push(o.xArrjVal),a.add(v)},u=0,d=0;u<t.length;u++,d++)h(u,d);return a}},{key:"initialPositions",value:function(t,e,i,o,n,r){var s,a,l=this.w;return this.isHorizontal?(s=(s=o=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,r=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),e=(o-s)/2):(a=i=l.globals.gridWidth/l.globals.dataPoints,a=l.globals.isXNumeric&&l.globals.dataPoints>1?(i=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:a*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,n=this.baseLineY[this.yaxisIndex]+(this.isReversed?l.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),t=l.globals.padHorizontal+(i-a)/2),{x:t,y:e,yDivision:o,xDivision:i,barHeight:s,barWidth:a,zeroH:n,zeroW:r}}},{key:"drawStackedBarPaths",value:function(t){for(var e,i,o=t.indexes,n=t.barHeight,r=t.strokeWidth,s=t.zeroW,a=t.y,l=t.yDivision,c=t.elSeries,h=this.w,u=a,d=o.i,p=o.j,g=0,f=0;f<this.prevXF.length;f++)g+=this.prevXF[f][p];if(d>0){var m=s;this.prevXVal[d-1][p]<0?m=this.series[d][p]>=0?this.prevX[d-1][p]+g-2*(this.isReversed?g:0):this.prevX[d-1][p]:this.prevXVal[d-1][p]>=0&&(m=this.series[d][p]>=0?this.prevX[d-1][p]:this.prevX[d-1][p]-g+2*(this.isReversed?g:0)),e=m}else e=s;var y=this.barHelpers.getBarpaths({barYPosition:u,barHeight:n,x1:e,x2:i=null===this.series[d][p]?e:e+this.series[d][p]/this.invertedYRatio-2*(this.isReversed?this.series[d][p]/this.invertedYRatio:0),strokeWidth:r,series:this.series,realIndex:o.realIndex,i:d,j:p,w:h});return this.barHelpers.barBackground({j:p,i:d,y1:u,y2:n,elSeries:c}),{pathTo:y.pathTo,pathFrom:y.pathFrom,x:i,y:a+=l}}},{key:"drawStackedColumnPaths",value:function(t){var e,i=t.indexes,o=t.x,n=t.xDivision,r=t.barWidth,s=t.zeroH,a=t.elSeries,l=this.w,c=i.i,h=i.j,u=i.bc;if(l.globals.isXNumeric){var d=l.globals.seriesX[c][h];d||(d=0),o=(d-l.globals.minX)/this.xRatio-r/2}for(var p,g=o,f=0,m=0;m<this.prevYF.length;m++)f+=isNaN(this.prevYF[m][h])?0:this.prevYF[m][h];if(c>0&&!l.globals.isXNumeric||c>0&&l.globals.isXNumeric&&l.globals.seriesX[c-1][h]===l.globals.seriesX[c][h]){var y,v,x=Math.min(this.yRatio.length+1,c+1);if(void 0!==this.prevY[c-1])for(var b=1;b<x;b++)if(!isNaN(this.prevY[c-b][h])){v=this.prevY[c-b][h];break}for(var w=1;w<x;w++){if(this.prevYVal[c-w][h]<0){y=this.series[c][h]>=0?v-f+2*(this.isReversed?f:0):v;break}if(this.prevYVal[c-w][h]>=0){y=this.series[c][h]>=0?v:v+f-2*(this.isReversed?f:0);break}}void 0===y&&(y=l.globals.gridHeight),p=this.prevYF[0].every(function(t){return 0===t})&&this.prevYF.slice(1,c).every(function(t){return t.every(function(t){return isNaN(t)})})?l.globals.gridHeight-s:y}else p=l.globals.gridHeight-s;var _=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:r,y1:p,y2:e=p-this.series[c][h]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[c][h]/this.yRatio[this.yaxisIndex]:0),yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:i.realIndex,i:c,j:h,w:l});return this.barHelpers.barBackground({bc:u,j:h,i:c,x1:g,x2:r,elSeries:a}),o+=n,{pathTo:_.pathTo,pathFrom:_.pathFrom,x:l.globals.isXNumeric?o-n:o,y:e}}}]),n}(N),bt=function(t){a(n,t);var i=u(n);function n(){return o(this,n),i.apply(this,arguments)}return r(n,[{key:"draw",value:function(t,i){var o=this,n=this.w,r=new v(this.ctx),s=new E(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=n.config.plotOptions.bar.horizontal;var a=new x(this.ctx,n);t=a.getLogSeries(t),this.series=t,this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);for(var l=r.group({class:"apexcharts-".concat(n.config.chart.type,"-series apexcharts-plot-series")}),c=function(a){o.isBoxPlot="boxPlot"===n.config.chart.type||"boxPlot"===n.config.series[a].type;var c,h,u,d,p,g,m=void 0,y=void 0,v=[],x=[],b=n.globals.comboCharts?i[a]:a,w=r.group({class:"apexcharts-series",seriesName:f.escapeString(n.globals.seriesNames[b]),rel:a+1,"data:realIndex":b});o.ctx.series.addCollapsedClassToSeries(w,b),t[a].length>0&&(o.visibleI=o.visibleI+1),o.yRatio.length>1&&(o.yaxisIndex=b);var _=o.barHelpers.initialPositions();y=_.y,p=_.barHeight,h=_.yDivision,d=_.zeroW,c=_.xDivision,u=_.zeroH,x.push((m=_.x)+(g=_.barWidth)/2);for(var S=r.group({class:"apexcharts-datalabels","data:realIndex":b}),C=function(i){var r=o.barHelpers.getStrokeWidth(a,i,b),l=null,f={indexes:{i:a,j:i,realIndex:b},x:m,y:y,strokeWidth:r,elSeries:w};l=o.isHorizontal?o.drawHorizontalBoxPaths(e(e({},f),{},{yDivision:h,barHeight:p,zeroW:d})):o.drawVerticalBoxPaths(e(e({},f),{},{xDivision:c,barWidth:g,zeroH:u})),y=l.y,m=l.x,i>0&&x.push(m+g/2),v.push(y),l.pathTo.forEach(function(e,c){var h=!o.isBoxPlot&&o.candlestickOptions.wick.useFillColor?l.color[c]:n.globals.stroke.colors[a],u=s.fillPath({seriesNumber:b,dataPointIndex:i,color:l.color[c],value:t[a][i]});o.renderSeries({realIndex:b,pathFill:u,lineFill:h,j:i,i:a,pathFrom:l.pathFrom,pathTo:e,strokeWidth:r,elSeries:w,x:m,y:y,series:t,barHeight:p,barWidth:g,elDataLabelsWrap:S,visibleSeries:o.visibleI,type:n.config.chart.type})})},k=0;k<n.globals.dataPoints;k++)C(k);n.globals.seriesXvalues[b]=x,n.globals.seriesYvalues[b]=v,l.add(w)},h=0;h<t.length;h++)c(h);return l}},{key:"drawVerticalBoxPaths",value:function(t){var e=t.indexes,i=t.x,o=t.xDivision,n=t.barWidth,r=t.zeroH,s=t.strokeWidth,a=this.w,l=new v(this.ctx),c=e.i,h=e.j,u=!0,d=a.config.plotOptions.candlestick.colors.upward,p=a.config.plotOptions.candlestick.colors.downward,g="";this.isBoxPlot&&(g=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var f=this.yRatio[this.yaxisIndex],m=e.realIndex,y=this.getOHLCValue(m,h),x=r,b=r;y.o>y.c&&(u=!1);var w=Math.min(y.o,y.c),_=Math.max(y.o,y.c),S=y.m;a.globals.isXNumeric&&(i=(a.globals.seriesX[m][h]-a.globals.minX)/this.xRatio-n/2);var C=i+n*this.visibleI;null==this.series[c][h]?(w=r,_=r):(w=r-w/f,_=r-_/f,x=r-y.h/f,b=r-y.l/f,S=r-y.m/f);var k=l.move(C,r),A=l.move(C+n/2,w);return a.globals.previousPaths.length>0&&(A=this.getPreviousPath(m,h,!0)),k=this.isBoxPlot?[l.move(C,w)+l.line(C+n/2,w)+l.line(C+n/2,x)+l.line(C+n/4,x)+l.line(C+n-n/4,x)+l.line(C+n/2,x)+l.line(C+n/2,w)+l.line(C+n,w)+l.line(C+n,S)+l.line(C,S)+l.line(C,w+s/2),l.move(C,S)+l.line(C+n,S)+l.line(C+n,_)+l.line(C+n/2,_)+l.line(C+n/2,b)+l.line(C+n-n/4,b)+l.line(C+n/4,b)+l.line(C+n/2,b)+l.line(C+n/2,_)+l.line(C,_)+l.line(C,S)+"z"]:[l.move(C,_)+l.line(C+n/2,_)+l.line(C+n/2,x)+l.line(C+n/2,_)+l.line(C+n,_)+l.line(C+n,w)+l.line(C+n/2,w)+l.line(C+n/2,b)+l.line(C+n/2,w)+l.line(C,w)+l.line(C,_-s/2)],A+=l.move(C,w),a.globals.isXNumeric||(i+=o),{pathTo:k,pathFrom:A,x:i,y:_,barXPosition:C,color:this.isBoxPlot?g:u?[d]:[p]}}},{key:"drawHorizontalBoxPaths",value:function(t){var e=t.indexes,i=t.y,o=t.yDivision,n=t.barHeight,r=t.zeroW,s=t.strokeWidth,a=this.w,l=new v(this.ctx),c=e.i,h=e.j,u=this.boxOptions.colors.lower;this.isBoxPlot&&(u=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var d=this.invertedYRatio,p=e.realIndex,g=this.getOHLCValue(p,h),f=r,m=r,y=Math.min(g.o,g.c),x=Math.max(g.o,g.c),b=g.m;a.globals.isXNumeric&&(i=(a.globals.seriesX[p][h]-a.globals.minX)/this.invertedXRatio-n/2);var w=i+n*this.visibleI;null==this.series[c][h]?(y=r,x=r):(y=r+y/d,x=r+x/d,f=r+g.h/d,m=r+g.l/d,b=r+g.m/d);var _=l.move(r,w),S=l.move(y,w+n/2);return a.globals.previousPaths.length>0&&(S=this.getPreviousPath(p,h,!0)),_=[l.move(y,w)+l.line(y,w+n/2)+l.line(f,w+n/2)+l.line(f,w+n/2-n/4)+l.line(f,w+n/2+n/4)+l.line(f,w+n/2)+l.line(y,w+n/2)+l.line(y,w+n)+l.line(b,w+n)+l.line(b,w)+l.line(y+s/2,w),l.move(b,w)+l.line(b,w+n)+l.line(x,w+n)+l.line(x,w+n/2)+l.line(m,w+n/2)+l.line(m,w+n-n/4)+l.line(m,w+n/4)+l.line(m,w+n/2)+l.line(x,w+n/2)+l.line(x,w)+l.line(b,w)+"z"],S+=l.move(y,w),a.globals.isXNumeric||(i+=o),{pathTo:_,pathFrom:S,x:x,y:i,barYPosition:w,color:u}}},{key:"getOHLCValue",value:function(t,e){var i=this.w;return{o:this.isBoxPlot?i.globals.seriesCandleH[t][e]:i.globals.seriesCandleO[t][e],h:this.isBoxPlot?i.globals.seriesCandleO[t][e]:i.globals.seriesCandleH[t][e],m:i.globals.seriesCandleM[t][e],l:this.isBoxPlot?i.globals.seriesCandleC[t][e]:i.globals.seriesCandleL[t][e],c:this.isBoxPlot?i.globals.seriesCandleL[t][e]:i.globals.seriesCandleC[t][e]}}}]),n}(N),wt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"checkColorRange",value:function(){var t=this.w,e=!1,i=t.config.plotOptions[t.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map(function(t,i){t.from<=0&&(e=!0)}),e}},{key:"getShadeColor",value:function(t,e,i,o){var n=this.w,r=1,s=n.config.plotOptions[t].shadeIntensity,a=this.determineColor(t,e,i);n.globals.hasNegs||o?r=n.config.plotOptions[t].reverseNegativeShade?a.percent<0?a.percent/100*(1.25*s):1.25*s*(1-a.percent/100):a.percent<=0?1-(1+a.percent/100)*s:(1-a.percent/100)*s:(r=1-a.percent/100,"treemap"===t&&(r=1.25*s*(1-a.percent/100)));var l=a.color,c=new f;return n.config.plotOptions[t].enableShades&&(l=f.hexToRgba(c.shadeColor("dark"===this.w.config.theme.mode?-1*r:r,a.color),n.config.fill.opacity)),{color:l,colorProps:a}}},{key:"determineColor",value:function(t,e,i){var o=this.w,n=o.globals.series[e][i],r=o.config.plotOptions[t],s=r.colorScale.inverse?i:e;r.distributed&&"treemap"===o.config.chart.type&&(s=i);var a=o.globals.colors[s],l=null,c=Math.min.apply(Math,d(o.globals.series[e])),h=Math.max.apply(Math,d(o.globals.series[e]));r.distributed||"heatmap"!==t||(c=o.globals.minY,h=o.globals.maxY),void 0!==r.colorScale.min&&(c=r.colorScale.min<o.globals.minY?r.colorScale.min:o.globals.minY,h=r.colorScale.max>o.globals.maxY?r.colorScale.max:o.globals.maxY);var u=Math.abs(h)+Math.abs(c),p=100*n/(0===u?u-1e-6:u);return r.colorScale.ranges.length>0&&r.colorScale.ranges.map(function(t,e){if(n>=t.from&&n<=t.to){a=t.color,l=t.foreColor?t.foreColor:null,c=t.from,h=t.to;var i=Math.abs(h)+Math.abs(c);p=100*n/(0===i?i-1e-6:i)}}),{color:a,foreColor:l,percent:p}}},{key:"calculateDataLabels",value:function(t){var e=t.text,i=t.x,o=t.y,n=t.i,r=t.j,s=t.colorProps,a=t.fontSize,l=this.w.config.dataLabels,c=new v(this.ctx),h=new L(this.ctx),u=null;if(l.enabled){u=c.group({class:"apexcharts-data-labels"});var d=l.offsetY,p=i+l.offsetX,g=o+parseFloat(l.style.fontSize)/3+d;h.plotDataLabelsText({x:p,y:g,text:e,i:n,j:r,color:s.foreColor,parent:u,fontSize:a,dataLabelsConfig:l})}return u}},{key:"addListeners",value:function(t){var e=new v(this.ctx);t.node.addEventListener("mouseenter",e.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",e.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",e.pathMouseDown.bind(this,t))}}]),t}(),_t=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new wt(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return r(t,[{key:"draw",value:function(t){var e=this.w,i=new v(this.ctx),o=i.group({class:"apexcharts-heatmap"});o.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var n=e.globals.gridWidth/e.globals.dataPoints,r=e.globals.gridHeight/e.globals.series.length,s=0,a=!1;this.negRange=this.helpers.checkColorRange();var l=t.slice();e.config.yaxis[0].reversed&&(a=!0,l.reverse());for(var c=a?0:l.length-1;a?c<l.length:c>=0;a?c++:c--){var h=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:f.escapeString(e.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(this.ctx.series.addCollapsedClassToSeries(h,c),e.config.chart.dropShadow.enabled){var u=e.config.chart.dropShadow;new y(this.ctx).dropShadow(h,u,c)}for(var d=0,p=e.config.plotOptions.heatmap.shadeIntensity,g=0;g<l[c].length;g++){var m=this.helpers.getShadeColor(e.config.chart.type,c,g,this.negRange),x=m.color,b=m.colorProps;"image"===e.config.fill.type&&(x=new E(this.ctx).fillPath({seriesNumber:c,dataPointIndex:g,opacity:e.globals.hasNegs?b.percent<0?1-(1+b.percent/100):p+b.percent/100:b.percent/100,patternID:f.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:n,height:e.config.fill.image.height?e.config.fill.image.height:r}));var w=i.drawRect(d,s,n,r,this.rectRadius);if(w.attr({cx:d,cy:s}),w.node.classList.add("apexcharts-heatmap-rect"),h.add(w),w.attr({fill:x,i:c,index:c,j:g,val:l[c][g],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?x:e.globals.stroke.colors[0],color:x}),this.helpers.addListeners(w),e.config.chart.animations.enabled&&!e.globals.dataChanged){var _=1;e.globals.resized||(_=e.config.chart.animations.speed),this.animateHeatMap(w,d,s,n,r,_)}if(e.globals.dataChanged){var S=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){S=this.dynamicAnim.speed;var C=e.globals.previousPaths[c]&&e.globals.previousPaths[c][g]&&e.globals.previousPaths[c][g].color;C||(C="rgba(255, 255, 255, 0)"),this.animateHeatColor(w,f.isColorHex(C)?C:f.rgb2hex(C),f.isColorHex(x)?x:f.rgb2hex(x),S)}}var k=(0,e.config.dataLabels.formatter)(e.globals.series[c][g],{value:e.globals.series[c][g],seriesIndex:c,dataPointIndex:g,w:e}),A=this.helpers.calculateDataLabels({text:k,x:d+n/2,y:s+r/2,i:c,j:g,colorProps:b,series:l});null!==A&&h.add(A),d+=n}s+=r,o.add(h)}var T=e.globals.yAxisScale[0].result.slice();return e.config.yaxis[0].reversed?T.unshift(""):T.push(""),e.globals.yAxisScale[0].result=T,e.config.yaxis[0].labels.offsetY=-e.globals.gridHeight/e.globals.series.length/2,o}},{key:"animateHeatMap",value:function(t,e,i,o,n,r){var s=new m(this.ctx);s.animateRect(t,{x:e+o/2,y:i+n/2,width:0,height:0},{x:e,y:i,width:o,height:n},r,function(){s.animationCompleted(t)})}},{key:"animateHeatColor",value:function(t,e,i,o){t.attr({fill:e}).animate(o).attr({fill:i})}}]),t}(),St=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"drawYAxisTexts",value:function(t,e,i,o){var n=this.w,r=n.config.yaxis[0],s=n.globals.yLabelFormatters[0];return new v(this.ctx).drawText({x:t+r.labels.offsetX,y:e+r.labels.offsetY,text:s(o,i),textAnchor:"middle",fontSize:r.labels.style.fontSize,fontFamily:r.labels.style.fontFamily,foreColor:Array.isArray(r.labels.style.colors)?r.labels.style.colors[i]:r.labels.style.colors})}}]),t}(),Ct=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=Math.min(i.globals.gridWidth,i.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,this.fullAngle="radialBar"===i.config.chart.type?360:Math.abs(i.config.plotOptions.pie.endAngle-i.config.plotOptions.pie.startAngle),this.initialAngle=i.config.plotOptions.pie.startAngle%this.fullAngle,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return r(t,[{key:"draw",value:function(t){var e=this,i=this.w,o=new v(this.ctx);if(this.ret=o.group({class:"apexcharts-pie"}),i.globals.noData)return this.ret;for(var n=0,r=0;r<t.length;r++)n+=f.negToZero(t[r]);var s=[],a=o.group();0===n&&(n=1e-5),t.forEach(function(t){e.maxY=Math.max(e.maxY,t)}),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),"back"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<t.length;l++){var c=this.fullAngle*f.negToZero(t[l])/n;s.push(c),"polarArea"===this.chartType?(s[l]=this.fullAngle/t.length,this.sliceSizes.push(i.globals.radialSize*t[l]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var h,u=0,d=0;d<i.globals.previousPaths.length;d++)u+=f.negToZero(i.globals.previousPaths[d]);for(var p=0;p<i.globals.previousPaths.length;p++)h=this.fullAngle*f.negToZero(i.globals.previousPaths[p])/u,this.prevSectorAngleArr.push(h)}this.donutSize<0&&(this.donutSize=0);var g=i.config.plotOptions.pie.customScale,m=i.globals.gridWidth/2-i.globals.gridWidth/2*g,y=i.globals.gridHeight/2-i.globals.gridHeight/2*g;if("donut"===this.chartType){var x=o.drawCircle(this.donutSize);x.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),a.add(x)}var b=this.drawArcs(s,t);if(this.sliceLabels.forEach(function(t){b.add(t)}),a.attr({transform:"translate(".concat(m,", ").concat(y,") scale(").concat(g,")")}),a.add(b),this.ret.add(a),this.donutDataLabels.show){var w=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:m,translateY:y});this.ret.add(w)}return"front"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(t,e){var i=this.w,o=new y(this.ctx),n=new v(this.ctx),r=new E(this.ctx),s=n.group({class:"apexcharts-slices"}),a=this.initialAngle,l=this.initialAngle,c=this.initialAngle,h=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var u=0;u<t.length;u++){var d=n.group({class:"apexcharts-series apexcharts-pie-series",seriesName:f.escapeString(i.globals.seriesNames[u]),rel:u+1,"data:realIndex":u});s.add(d),c=(a=c)+t[u],h=(l=h)+this.prevSectorAngleArr[u];var p=c<a?this.fullAngle+c-a:c-a,g=r.fillPath({seriesNumber:u,size:this.sliceSizes[u],value:e[u]}),m=this.getChangedPath(l,h),x=n.drawPath({d:m,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[u]:this.lineColorArr,strokeWidth:0,fill:g,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(u)});x.attr({index:0,j:u}),o.setSelectionFilter(x,0,u),i.config.chart.dropShadow.enabled&&o.dropShadow(x,i.config.chart.dropShadow,u),this.addListeners(x,this.donutDataLabels),v.setAttrs(x.node,{"data:angle":p,"data:startAngle":a,"data:strokeWidth":this.strokeWidth,"data:value":e[u]});var b={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?b=f.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(a+p/2)%this.fullAngle):"donut"===this.chartType&&(b=f.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(a+p/2)%this.fullAngle)),d.add(x);var w=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):(0==(w=p/this.fullAngle*i.config.chart.animations.speed)&&(w=1),this.animDur=w+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(x,this.dynamicAnim&&i.globals.dataChanged?{size:this.sliceSizes[u],endAngle:c,startAngle:a,prevStartAngle:l,prevEndAngle:h,animateStartingPos:!0,i:u,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[u],endAngle:c,startAngle:a,i:u,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:w}),i.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&x.click(this.pieClicked.bind(this,u)),void 0!==i.globals.selectedDataPoints[0]&&i.globals.selectedDataPoints[0].indexOf(u)>-1&&this.pieClicked(u),i.config.dataLabels.enabled){var _=b.x,S=b.y,C=100*p/this.fullAngle+"%";if(0!==p&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[u]){var k=i.config.dataLabels.formatter;void 0!==k&&(C=k(i.globals.seriesPercent[u][0],{seriesIndex:u,w:i}));var A=i.globals.dataLabels.style.colors[u],T=n.group({class:"apexcharts-datalabels"}),M=n.drawText({x:_,y:S,text:C,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:A});T.add(M),i.config.dataLabels.dropShadow.enabled&&o.dropShadow(M,i.config.dataLabels.dropShadow),M.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&!1===i.globals.resized&&(M.node.classList.add("apexcharts-pie-label-delay"),M.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(T)}}}return s}},{key:"addListeners",value:function(t,e){var i=new v(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var i=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,o=i,n=e.startAngle,r=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(n=e.prevEndAngle,o=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===this.w.config.series.length-1&&(i+r>this.fullAngle?e.endAngle=e.endAngle-(i+r):i+r<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(i+r)))),i===this.fullAngle&&(i=this.fullAngle-.01),this.animateArc(t,n,r,i,o,e)}},{key:"animateArc",value:function(t,e,i,o,n,r){var s,a=this,l=this.w,c=new m(this.ctx),h=r.size;(isNaN(e)||isNaN(n))&&(e=i,n=o,r.dur=0);var u=o,d=i,p=e<i?this.fullAngle+e-i:e-i;l.globals.dataChanged&&r.shouldSetPrevPaths&&r.prevEndAngle&&(s=a.getPiePath({me:a,startAngle:r.prevStartAngle,angle:r.prevEndAngle<r.prevStartAngle?this.fullAngle+r.prevEndAngle-r.prevStartAngle:r.prevEndAngle-r.prevStartAngle,size:h}),t.attr({d:s})),0!==r.dur?t.animate(r.dur,l.globals.easing,r.animBeginArr[r.i]).afterAll(function(){"pie"!==a.chartType&&"donut"!==a.chartType&&"polarArea"!==a.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":a.strokeWidth}),r.i===l.config.series.length-1&&c.animationCompleted(t)}).during(function(l){u=p+(o-p)*l,r.animateStartingPos&&(u=n+(o-n)*l,d=e-n+(i-(e-n))*l),s=a.getPiePath({me:a,startAngle:d,angle:u,size:h}),t.node.setAttribute("data:pathOrig",s),t.attr({d:s})}):(s=a.getPiePath({me:a,startAngle:d,angle:o,size:h}),r.isTrack||(l.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",s),t.attr({d:s,"stroke-width":a.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,i=this.w,o=this,n=o.sliceSizes[t]+(i.config.plotOptions.pie.expandOnClick?4:0),r=i.globals.dom.Paper.select(".apexcharts-".concat(o.chartType.toLowerCase(),"-slice-").concat(t)).members[0];if("true"!==r.attr("data:pieClicked")){var s=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(s,function(t){t.setAttribute("data:pieClicked","false");var e=t.getAttribute("data:pathOrig");t.setAttribute("d",e)}),r.attr("data:pieClicked","true");var a=parseInt(r.attr("data:startAngle"),10),l=parseInt(r.attr("data:angle"),10);e=o.getPiePath({me:o,startAngle:a,angle:l,size:n}),360!==l&&r.plot(e)}else{r.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(r.node,this.donutDataLabels);var c=r.attr("data:pathOrig");r.attr({d:c})}}},{key:"getChangedPath",value:function(t,e){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),i}},{key:"getPiePath",value:function(t){var e=t.me,i=t.startAngle,o=t.angle,n=t.size,r=i,s=Math.PI*(r-90)/180,a=o+i;Math.ceil(a)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(a=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(a)>this.fullAngle&&(a-=this.fullAngle);var l=Math.PI*(a-90)/180,c=e.centerX+n*Math.cos(s),h=e.centerY+n*Math.sin(s),u=e.centerX+n*Math.cos(l),d=e.centerY+n*Math.sin(l),p=f.polarToCartesian(e.centerX,e.centerY,e.donutSize,a),g=f.polarToCartesian(e.centerX,e.centerY,e.donutSize,r),m=o>180?1:0,y=["M",c,h,"A",n,n,0,m,1,u,d];return"donut"===e.chartType?[].concat(y,["L",p.x,p.y,"A",e.donutSize,e.donutSize,0,m,0,g.x,g.y,"L",c,h,"z"]).join(" "):"pie"===e.chartType||"polarArea"===e.chartType?[].concat(y,["L",e.centerX,e.centerY,"L",c,h]).join(" "):[].concat(y).join(" ")}},{key:"drawPolarElements",value:function(t){var e=this.w,i=new U(this.ctx),o=new v(this.ctx),n=new St(this.ctx),r=o.group(),s=o.group(),a=i.niceScale(0,Math.ceil(this.maxY),e.config.yaxis[0].tickAmount,0,!0),l=a.result.reverse(),c=a.result.length;this.maxY=a.niceMax;for(var h=e.globals.radialSize,u=h/(c-1),d=0;d<c-1;d++){var p=o.drawCircle(h);if(p.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":e.config.plotOptions.polarArea.rings.strokeWidth,stroke:e.config.plotOptions.polarArea.rings.strokeColor}),e.config.yaxis[0].show){var g=n.drawYAxisTexts(this.centerX,this.centerY-h+parseInt(e.config.yaxis[0].labels.style.fontSize,10)/2,d,l[d]);s.add(g)}r.add(p),h-=u}this.drawSpokes(t),t.add(r),t.add(s)}},{key:"renderInnerDataLabels",value:function(t,e){var i=this.w,o=new v(this.ctx),n=o.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(e.translateX?e.translateX:0,", ").concat(e.translateY?e.translateY:0,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),r=t.total.show;n.node.style.opacity=e.opacity;var s,a,l=e.centerX,c=e.centerY;s=void 0===t.name.color?i.globals.colors[0]:t.name.color;var h=t.name.fontSize,u=t.name.fontFamily,d=t.name.fontWeight;a=void 0===t.value.color?i.config.chart.foreColor:t.value.color;var p=t.value.formatter,g="",f="";if(r?(s=t.total.color,h=t.total.fontSize,u=t.total.fontFamily,d=t.total.fontWeight,f=t.total.label,g=t.total.formatter(i)):1===i.globals.series.length&&(g=p(i.globals.series[0],i),f=i.globals.seriesNames[0]),f&&(f=t.name.formatter(f,t.total.show,i)),t.name.show){var m=o.drawText({x:l,y:c+parseFloat(t.name.offsetY),text:f,textAnchor:"middle",foreColor:s,fontSize:h,fontWeight:d,fontFamily:u});m.node.classList.add("apexcharts-datalabel-label"),n.add(m)}if(t.value.show){var y=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,x=o.drawText({x:l,y:c+y,text:g,textAnchor:"middle",foreColor:a,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});x.node.classList.add("apexcharts-datalabel-value"),n.add(x)}return n}},{key:"printInnerLabels",value:function(t,e,i,o){var n,r=this.w;o?n=void 0===t.name.color?r.globals.colors[parseInt(o.parentNode.getAttribute("rel"),10)-1]:t.name.color:r.globals.series.length>1&&t.total.show&&(n=t.total.color);var s=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),a=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,t.value.formatter)(i,r),o||"function"!=typeof t.total.formatter||(i=t.total.formatter(r)),e=t.name.formatter(e,e===t.total.label,r),null!==s&&(s.textContent=e),null!==a&&(a.textContent=i),null!==s&&(s.style.fill=n)}},{key:"printDataLabelsInner",value:function(t,e){var i=this.w,o=t.getAttribute("data:value"),n=i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(e,n,o,t);var r=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==r&&(r.style.opacity=1)}},{key:"drawSpokes",value:function(t){var e=this,i=this.w,o=new v(this.ctx),n=i.config.plotOptions.polarArea.spokes;if(0!==n.strokeWidth){for(var r=[],s=360/i.globals.series.length,a=0;a<i.globals.series.length;a++)r.push(f.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+s*a));r.forEach(function(i,r){var s=o.drawLine(i.x,i.y,e.centerX,e.centerY,Array.isArray(n.connectorColors)?n.connectorColors[r]:n.connectorColors);t.add(s)})}}},{key:"revertDataLabelsInner",value:function(t,e,i){var o=this,n=this.w,r=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),s=!1,a=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(t){var i=t.makeSliceOut,n=t.printLabel;Array.prototype.forEach.call(a,function(t){"true"===t.getAttribute("data:pieClicked")&&(i&&(s=!0),n&&o.printDataLabelsInner(t,e))})};if(l({makeSliceOut:!0,printLabel:!1}),e.total.show&&n.globals.series.length>1)s&&!e.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(e,e.total.label,e.total.formatter(n));else if(l({makeSliceOut:!1,printLabel:!0}),!s)if(n.globals.selectedDataPoints.length&&n.globals.series.length>1)if(n.globals.selectedDataPoints[0].length>0){var c=n.globals.selectedDataPoints[0],h=n.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(c));this.printDataLabelsInner(h,e)}else r&&n.globals.selectedDataPoints.length&&0===n.globals.selectedDataPoints[0].length&&(r.style.opacity=0);else r&&n.globals.series.length>1&&(r.style.opacity=0)}}]),t}(),kt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new v(this.ctx),this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight+1.5*i.globals.goldenPadding:i.globals.gridWidth,this.isLog=i.config.yaxis[0].logarithmic,this.coreUtils=new x(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(i.globals.maxY,0):i.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):i.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),void 0!==i.config.plotOptions.radar.size&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return r(t,[{key:"draw",value:function(t){var i=this,o=this.w,n=new E(this.ctx),r=[],s=new L(this.ctx);t.length&&(this.dataPointsLen=t[o.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var a=o.globals.gridHeight/2+o.config.plotOptions.radar.offsetY,l=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(o.globals.gridWidth/2+o.config.plotOptions.radar.offsetX||0,", ").concat(a||0,")")}),c=[],h=null,u=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach(function(t,a){var l=t.length===o.globals.dataPoints,d=i.graphics.group().attr({class:"apexcharts-series","data:longestSeries":l,seriesName:f.escapeString(o.globals.seriesNames[a]),rel:a+1,"data:realIndex":a});i.dataRadiusOfPercent[a]=[],i.dataRadius[a]=[],i.angleArr[a]=[],t.forEach(function(t,e){var o=Math.abs(i.maxValue-i.minValue);t+=Math.abs(i.minValue),i.isLog&&(t=i.coreUtils.getLogVal(t,0)),i.dataRadiusOfPercent[a][e]=t/o,i.dataRadius[a][e]=i.dataRadiusOfPercent[a][e]*i.size,i.angleArr[a][e]=e*i.disAngle}),c=i.getDataPointsPos(i.dataRadius[a],i.angleArr[a]);var p=i.createPaths(c,{x:0,y:0});h=i.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),u=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":a}),o.globals.delayedElements.push({el:h.node,index:a});var g={i:a,realIndex:a,animationDelay:a,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:o.globals.stroke.colors[a],strokeLineCap:o.config.stroke.lineCap},m=null;o.globals.previousPaths.length>0&&(m=i.getPreviousPath(a));for(var v=0;v<p.linePathsTo.length;v++){var x=i.graphics.renderPaths(e(e({},g),{},{pathFrom:null===m?p.linePathsFrom[v]:m,pathTo:p.linePathsTo[v],strokeWidth:Array.isArray(i.strokeWidth)?i.strokeWidth[a]:i.strokeWidth,fill:"none",drawShadow:!1}));d.add(x);var b=n.fillPath({seriesNumber:a}),w=i.graphics.renderPaths(e(e({},g),{},{pathFrom:null===m?p.areaPathsFrom[v]:m,pathTo:p.areaPathsTo[v],strokeWidth:0,fill:b,drawShadow:!1}));o.config.chart.dropShadow.enabled&&new y(i.ctx).dropShadow(w,Object.assign({},o.config.chart.dropShadow,{noUserSpaceOnUse:!0}),a),d.add(w)}t.forEach(function(t,n){var r=new T(i.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:a,dataPointIndex:n}),l=i.graphics.drawMarker(c[n].x,c[n].y,r);l.attr("rel",n),l.attr("j",n),l.attr("index",a),l.node.setAttribute("default-marker-size",r.pSize);var p=i.graphics.group({class:"apexcharts-series-markers"});p&&p.add(l),h.add(p),d.add(h);var g=o.config.dataLabels;if(g.enabled){var f=g.formatter(o.globals.series[a][n],{seriesIndex:a,dataPointIndex:n,w:o});s.plotDataLabelsText({x:c[n].x,y:c[n].y,text:f,textAnchor:"middle",i:a,j:a,parent:u,offsetCorrection:!1,dataLabelsConfig:e({},g)})}d.add(u)}),r.push(d)}),this.drawPolygons({parent:l}),o.config.xaxis.labels.show){var d=this.drawXAxisTexts();l.add(d)}return r.forEach(function(t){l.add(t)}),l.add(this.yaxisLabels),l}},{key:"drawPolygons",value:function(t){for(var e=this,i=this.w,o=t.parent,n=new St(this.ctx),r=i.globals.yAxisScale[0].result.reverse(),s=r.length,a=[],l=this.size/(s-1),c=0;c<s;c++)a[c]=l*c;a.reverse();var h=[],u=[];a.forEach(function(t,i){var o=f.getPolygonPos(t,e.dataPointsLen),n="";o.forEach(function(t,o){if(0===i){var r=e.graphics.drawLine(t.x,t.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[o]:e.polygons.connectorColors);u.push(r)}0===o&&e.yaxisLabelsTextsPos.push({x:t.x,y:t.y}),n+=t.x+","+t.y+" "}),h.push(n)}),h.forEach(function(t,n){var r=e.polygons.strokeColors,s=e.polygons.strokeWidth,a=e.graphics.drawPolygon(t,Array.isArray(r)?r[n]:r,Array.isArray(s)?s[n]:s,i.globals.radarPolygons.fill.colors[n]);o.add(a)}),u.forEach(function(t){o.add(t)}),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(t,i){var o=n.drawYAxisTexts(t.x,t.y,i,r[i]);e.yaxisLabels.add(o)})}},{key:"drawXAxisTexts",value:function(){var t=this,i=this.w,o=i.config.xaxis.labels,n=this.graphics.group({class:"apexcharts-xaxis"}),r=f.getPolygonPos(this.size,this.dataPointsLen);return i.globals.labels.forEach(function(s,a){var l=i.config.xaxis.labels.formatter,c=new L(t.ctx);if(r[a]){var h=t.getTextPos(r[a],t.size),u=l(s,{seriesIndex:-1,dataPointIndex:a,w:i});c.plotDataLabelsText({x:h.newX,y:h.newY,text:u,textAnchor:h.textAnchor,i:a,j:a,parent:n,color:Array.isArray(o.style.colors)&&o.style.colors[a]?o.style.colors[a]:"#a8a8a8",dataLabelsConfig:e({textAnchor:h.textAnchor,dropShadow:{enabled:!1}},o),offsetCorrection:!1})}}),n}},{key:"createPaths",value:function(t,e){var i=this,o=[],n=[],r=[],s=[];if(t.length){n=[this.graphics.move(e.x,e.y)],s=[this.graphics.move(e.x,e.y)];var a=this.graphics.move(t[0].x,t[0].y),l=this.graphics.move(t[0].x,t[0].y);t.forEach(function(e,o){a+=i.graphics.line(e.x,e.y),l+=i.graphics.line(e.x,e.y),o===t.length-1&&(a+="Z",l+="Z")}),o.push(a),r.push(l)}return{linePathsFrom:n,linePathsTo:o,areaPathsFrom:s,areaPathsTo:r}}},{key:"getTextPos",value:function(t,e){var i="middle",o=t.x,n=t.y;return Math.abs(t.x)>=10?t.x>0?(i="start",o+=10):t.x<0&&(i="end",o-=10):i="middle",Math.abs(t.y)>=e-10&&(t.y<0?n-=10:t.y>0&&(n+=10)),{textAnchor:i,newX:o,newY:n}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,i=null,o=0;o<e.globals.previousPaths.length;o++){var n=e.globals.previousPaths[o];n.paths.length>0&&parseInt(n.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[o].paths[0]&&(i=e.globals.previousPaths[o].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var o=[],n=0;n<i;n++){var r={};r.x=t[n]*Math.sin(e[n]),r.y=-t[n]*Math.cos(e[n]),o.push(r)}return o}}]),t}(),At=function(t){a(i,t);var e=u(i);function i(t){var n;o(this,i),(n=e.call(this,t)).ctx=t,n.w=t.w,n.animBeginArr=[0],n.animDur=0;var r=n.w;return n.startAngle=r.config.plotOptions.radialBar.startAngle,n.endAngle=r.config.plotOptions.radialBar.endAngle,n.totalAngle=Math.abs(r.config.plotOptions.radialBar.endAngle-r.config.plotOptions.radialBar.startAngle),n.trackStartAngle=r.config.plotOptions.radialBar.track.startAngle,n.trackEndAngle=r.config.plotOptions.radialBar.track.endAngle,n.donutDataLabels=n.w.config.plotOptions.radialBar.dataLabels,n.radialDataLabels=n.donutDataLabels,n.trackStartAngle||(n.trackStartAngle=n.startAngle),n.trackEndAngle||(n.trackEndAngle=n.endAngle),360===n.endAngle&&(n.endAngle=359.99),n.margin=parseInt(r.config.plotOptions.radialBar.track.margin,10),n}return r(i,[{key:"draw",value:function(t){var e=this.w,i=new v(this.ctx),o=i.group({class:"apexcharts-radialbar"});if(e.globals.noData)return o;var n=i.group(),r=this.defaultSize/2,s=e.globals.gridWidth/2,a=this.defaultSize/2.05;e.config.chart.sparkline.enabled||(a=a-e.config.stroke.width-e.config.chart.dropShadow.blur);var l=e.globals.fill.colors;if(e.config.plotOptions.radialBar.track.show){var c=this.drawTracks({size:a,centerX:s,centerY:r,colorArr:l,series:t});n.add(c)}var h=this.drawArcs({size:a,centerX:s,centerY:r,colorArr:l,series:t}),u=360;e.config.plotOptions.radialBar.startAngle<0&&(u=this.totalAngle);var d=(360-u)/360;if(e.globals.radialSize=a-a*d,this.radialDataLabels.value.show){var p=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);e.globals.radialSize+=p*d}return n.add(h.g),"front"===e.config.plotOptions.radialBar.hollow.position&&(h.g.add(h.elHollow),h.dataLabels&&h.g.add(h.dataLabels)),o.add(n),o}},{key:"drawTracks",value:function(t){var e=this.w,i=new v(this.ctx),o=i.group({class:"apexcharts-tracks"}),n=new y(this.ctx),r=new E(this.ctx),s=this.getStrokeWidth(t);t.size=t.size-s/2;for(var a=0;a<t.series.length;a++){var l=i.group({class:"apexcharts-radialbar-track apexcharts-track"});o.add(l),l.attr({rel:a+1}),t.size=t.size-s-this.margin;var c=e.config.plotOptions.radialBar.track,h=r.fillPath({seriesNumber:0,size:t.size,fillColors:Array.isArray(c.background)?c.background[a]:c.background,solid:!0}),u=this.trackStartAngle,d=this.trackEndAngle;Math.abs(d)+Math.abs(u)>=360&&(d=360-Math.abs(this.startAngle)-.1);var p=i.drawPath({d:"",stroke:h,strokeWidth:s*parseInt(c.strokeWidth,10)/100,fill:"none",strokeOpacity:c.opacity,classes:"apexcharts-radialbar-area"});c.dropShadow.enabled&&n.dropShadow(p,c.dropShadow),l.add(p),p.attr("id","apexcharts-radialbarTrack-"+a),this.animatePaths(p,{centerX:t.centerX,centerY:t.centerY,endAngle:d,startAngle:u,size:t.size,i:a,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:e.globals.easing})}return o}},{key:"drawArcs",value:function(t){var e=this.w,i=new v(this.ctx),o=new E(this.ctx),n=new y(this.ctx),r=i.group(),s=this.getStrokeWidth(t);t.size=t.size-s/2;var a=e.config.plotOptions.radialBar.hollow.background,l=t.size-s*t.series.length-this.margin*t.series.length-s*parseInt(e.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,c=l-e.config.plotOptions.radialBar.hollow.margin;void 0!==e.config.plotOptions.radialBar.hollow.image&&(a=this.drawHollowImage(t,r,l,a));var h=this.drawHollow({size:c,centerX:t.centerX,centerY:t.centerY,fill:a||"transparent"});e.config.plotOptions.radialBar.hollow.dropShadow.enabled&&n.dropShadow(h,e.config.plotOptions.radialBar.hollow.dropShadow);var u=1;!this.radialDataLabels.total.show&&e.globals.series.length>1&&(u=0);var d=null;this.radialDataLabels.show&&(d=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:t.centerX,centerY:t.centerY,opacity:u})),"back"===e.config.plotOptions.radialBar.hollow.position&&(r.add(h),d&&r.add(d));var p=!1;e.config.plotOptions.radialBar.inverseOrder&&(p=!0);for(var g=p?t.series.length-1:0;p?g>=0:g<t.series.length;p?g--:g++){var m=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:f.escapeString(e.globals.seriesNames[g])});r.add(m),m.attr({rel:g+1,"data:realIndex":g}),this.ctx.series.addCollapsedClassToSeries(m,g),t.size=t.size-s-this.margin;var x=o.fillPath({seriesNumber:g,size:t.size,value:t.series[g]}),b=this.startAngle,w=void 0,_=f.negToZero(t.series[g]>100?100:t.series[g])/100,S=Math.round(this.totalAngle*_)+this.startAngle,C=void 0;e.globals.dataChanged&&(w=this.startAngle,C=Math.round(this.totalAngle*f.negToZero(e.globals.previousPaths[g])/100)+w),Math.abs(S)+Math.abs(b)>=360&&(S-=.01),Math.abs(C)+Math.abs(w)>=360&&(C-=.01);var k=S-b,A=Array.isArray(e.config.stroke.dashArray)?e.config.stroke.dashArray[g]:e.config.stroke.dashArray,T=i.drawPath({d:"",stroke:x,strokeWidth:s,fill:"none",fillOpacity:e.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+g,strokeDashArray:A});v.setAttrs(T.node,{"data:angle":k,"data:value":t.series[g]}),e.config.chart.dropShadow.enabled&&n.dropShadow(T,e.config.chart.dropShadow,g),n.setSelectionFilter(T,0,g),this.addListeners(T,this.radialDataLabels),m.add(T),T.attr({index:0,j:g});var M=0;!this.initialAnim||e.globals.resized||e.globals.dataChanged||(M=e.config.chart.animations.speed),e.globals.dataChanged&&(M=e.config.chart.animations.dynamicAnimation.speed),this.animDur=M/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(T,{centerX:t.centerX,centerY:t.centerY,endAngle:S,startAngle:b,prevEndAngle:C,prevStartAngle:w,size:t.size,i:g,totalItems:2,animBeginArr:this.animBeginArr,dur:M,shouldSetPrevPaths:!0,easing:e.globals.easing})}return{g:r,elHollow:h,dataLabels:d}}},{key:"drawHollow",value:function(t){var e=new v(this.ctx).drawCircle(2*t.size);return e.attr({class:"apexcharts-radialbar-hollow",cx:t.centerX,cy:t.centerY,r:t.size,fill:t.fill}),e}},{key:"drawHollowImage",value:function(t,e,i,o){var n=this.w,r=new E(this.ctx),s=f.randomId(),a=n.config.plotOptions.radialBar.hollow.image;if(n.config.plotOptions.radialBar.hollow.imageClipped)r.clippedImgArea({width:i,height:i,image:a,patternID:"pattern".concat(n.globals.cuid).concat(s)}),o="url(#pattern".concat(n.globals.cuid).concat(s,")");else{var l=n.config.plotOptions.radialBar.hollow.imageWidth,c=n.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===c){var h=n.globals.dom.Paper.image(a).loaded(function(e){this.move(t.centerX-e.width/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-e.height/2+n.config.plotOptions.radialBar.hollow.imageOffsetY)});e.add(h)}else{var u=n.globals.dom.Paper.image(a).loaded(function(e){this.move(t.centerX-l/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-c/2+n.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,c)});e.add(u)}}return o}},{key:"getStrokeWidth",value:function(t){return t.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(t.series.length+1)-this.margin}}]),i}(Ct),Et=function(){function t(e){o(this,t),this.w=e.w,this.lineCtx=e}return r(t,[{key:"sameValueSeriesFix",value:function(t,e){var i=this.w;if("line"===i.config.chart.type&&("gradient"===i.config.fill.type||"gradient"===i.config.fill.type[t])&&new x(this.lineCtx.ctx,i).seriesHaveSameValues(t)){var o=e[t].slice();o[o.length-1]=o[o.length-1]+1e-6,e[t]=o}return e}},{key:"calculatePoints",value:function(t){var e=t.series,i=t.x,o=t.y,n=t.i,r=t.j,s=t.prevY,a=this.w,l=[],c=[];if(0===r){var h=this.lineCtx.categoryAxisCorrection+a.config.markers.offsetX;a.globals.isXNumeric&&(h=(a.globals.seriesX[t.realIndex][0]-a.globals.minX)/this.lineCtx.xRatio+a.config.markers.offsetX),l.push(h),c.push(f.isNumber(e[n][0])?s+a.config.markers.offsetY:null),l.push(i+a.config.markers.offsetX),c.push(f.isNumber(e[n][r+1])?o+a.config.markers.offsetY:null)}else l.push(i+a.config.markers.offsetX),c.push(f.isNumber(e[n][r+1])?o+a.config.markers.offsetY:null);return{x:l,y:c}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,i=t.pathFromArea,o=t.realIndex,n=this.w,r=0;r<n.globals.previousPaths.length;r++){var s=n.globals.previousPaths[r];("line"===s.type||"area"===s.type)&&s.paths.length>0&&parseInt(s.realIndex,10)===parseInt(o,10)&&("line"===s.type?(this.lineCtx.appendPathFrom=!1,e=n.globals.previousPaths[r].paths[0].d):"area"===s.type&&(this.lineCtx.appendPathFrom=!1,i=n.globals.previousPaths[r].paths[0].d,n.config.stroke.show&&n.globals.previousPaths[r].paths[1]&&(e=n.globals.previousPaths[r].paths[1].d)))}return{pathFromLine:e,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(t){var e=t.i,i=t.series,o=t.prevY,n=t.lineYPosition,r=this.w;if(void 0!==i[e][0])o=(n=r.config.chart.stacked&&e>0?this.lineCtx.prevSeriesY[e-1][0]:this.lineCtx.zeroY)-i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(r.config.chart.stacked&&e>0&&void 0===i[e][0])for(var s=e-1;s>=0;s--)if(null!=i[s][0]){o=n=this.lineCtx.prevSeriesY[s][0];break}return{prevY:o,lineYPosition:n}}}]),t}(),Tt=function(){function t(e,i,n){o(this,t),this.ctx=e,this.w=e.w,this.xyRatios=i,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||n,this.scatter=new M(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Et(this),this.markers=new T(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return r(t,[{key:"draw",value:function(t,e,i){var o=this.w,n=new v(this.ctx),r=o.globals.comboCharts?e:o.config.chart.type,s=n.group({class:"apexcharts-".concat(r,"-series apexcharts-plot-series")}),a=new x(this.ctx,o);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=a.getLogSeries(t),this.yRatio=a.getLogYRatios(this.yRatio);for(var l=[],c=0;c<t.length;c++){t=this.lineHelpers.sameValueSeriesFix(c,t);var h=o.globals.comboCharts?i[c]:c;this._initSerieVariables(t,c,h);var u=[],d=[],p=o.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,h),o.globals.isXNumeric&&o.globals.seriesX.length>0&&(p=(o.globals.seriesX[h][0]-o.globals.minX)/this.xRatio),d.push(p);var g,f=p,m=f,y=this.zeroY;y=this.lineHelpers.determineFirstPrevY({i:c,series:t,prevY:y,lineYPosition:0}).prevY,u.push(y),g=y;var b=this._calculatePathsFrom({series:t,i:c,realIndex:h,prevX:m,prevY:y}),w=this._iterateOverDataPoints({series:t,realIndex:h,i:c,x:p,y:1,pX:f,pY:g,pathsFrom:b,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:d,yArrj:u});this._handlePaths({type:r,realIndex:h,i:c,paths:w}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),l.push(this.elSeries)}if(o.config.chart.stacked)for(var _=l.length;_>0;_--)s.add(l[_-1]);else for(var S=0;S<l.length;S++)s.add(l[S]);return s}},{key:"_initSerieVariables",value:function(t,e,i){var o=this.w,n=new v(this.ctx);this.xDivision=o.globals.gridWidth/(o.globals.dataPoints-("on"===o.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(o.config.stroke.width)?o.config.stroke.width[i]:o.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=i),this.isReversed=o.config.yaxis[this.yaxisIndex]&&o.config.yaxis[this.yaxisIndex].reversed,this.zeroY=o.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?o.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>o.globals.gridHeight||"end"===o.config.plotOptions.area.fillTo)&&(this.areaBottomY=o.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=n.group({class:"apexcharts-series",seriesName:f.escapeString(o.globals.seriesNames[i])}),this.elPointsMain=n.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=n.group({class:"apexcharts-datalabels","data:realIndex":i}),this.elSeries.attr({"data:longestSeries":t[e].length===o.globals.dataPoints,rel:e+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,i,o,n,r=t.series,s=t.i,a=t.realIndex,l=t.prevX,c=t.prevY,h=this.w,u=new v(this.ctx);if(null===r[s][0]){for(var d=0;d<r[s].length;d++)if(null!==r[s][d]){e=u.move(l=this.xDivision*d,c=this.zeroY-r[s][d]/this.yRatio[this.yaxisIndex]),i=u.move(l,this.areaBottomY);break}}else e=u.move(l,c),i=u.move(l,this.areaBottomY)+u.line(l,c);if(o=u.move(-1,this.zeroY)+u.line(-1,this.zeroY),n=u.move(-1,this.zeroY)+u.line(-1,this.zeroY),h.globals.previousPaths.length>0){var p=this.lineHelpers.checkPreviousPaths({pathFromLine:o,pathFromArea:n,realIndex:a});o=p.pathFromLine,n=p.pathFromArea}return{prevX:l,prevY:c,linePath:e,areaPath:i,pathFromLine:o,pathFromArea:n}}},{key:"_handlePaths",value:function(t){var i=t.type,o=t.realIndex,n=t.i,r=t.paths,s=this.w,a=new v(this.ctx),l=new E(this.ctx);this.prevSeriesY.push(r.yArrj),s.globals.seriesXvalues[o]=r.xArrj,s.globals.seriesYvalues[o]=r.yArrj;var c=s.config.forecastDataPoints;if(c.count>0){var h=s.globals.seriesXvalues[o][s.globals.seriesXvalues[o].length-c.count-1],u=a.drawRect(h,0,s.globals.gridWidth,s.globals.gridHeight,0);s.globals.dom.elForecastMask.appendChild(u.node);var d=a.drawRect(0,0,h,s.globals.gridHeight,0);s.globals.dom.elNonForecastMask.appendChild(d.node)}this.pointsChart||s.globals.delayedElements.push({el:this.elPointsMain.node,index:o});var p={i:n,realIndex:o,animationDelay:n,initialSpeed:s.config.chart.animations.speed,dataChangeSpeed:s.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(i)};if("area"===i)for(var g=l.fillPath({seriesNumber:o}),f=0;f<r.areaPaths.length;f++){var m=a.renderPaths(e(e({},p),{},{pathFrom:r.pathFromArea,pathTo:r.areaPaths[f],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:g}));this.elSeries.add(m)}if(s.config.stroke.show&&!this.pointsChart){var y=null;if("line"===i)y=l.fillPath({seriesNumber:o,i:n});else if("solid"===s.config.stroke.fill.type)y=s.globals.stroke.colors[o];else{var x=s.config.fill;s.config.fill=s.config.stroke.fill,y=l.fillPath({seriesNumber:o,i:n}),s.config.fill=x}for(var b=0;b<r.linePaths.length;b++){var w=e(e({},p),{},{pathFrom:r.pathFromLine,pathTo:r.linePaths[b],stroke:y,strokeWidth:this.strokeWidth,strokeLineCap:s.config.stroke.lineCap,fill:"none"}),_=a.renderPaths(w);if(this.elSeries.add(_),c.count>0){var S=a.renderPaths(w);S.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&S.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(S),S.attr("clip-path","url(#forecastMask".concat(s.globals.cuid,")")),_.attr("clip-path","url(#nonForecastMask".concat(s.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(t){for(var e=t.series,i=t.realIndex,o=t.i,n=t.x,r=t.y,s=t.pX,a=t.pY,l=t.pathsFrom,c=t.linePaths,h=t.areaPaths,u=t.seriesIndex,d=t.lineYPosition,p=t.xArrj,g=t.yArrj,m=this.w,y=new v(this.ctx),x=this.yRatio,b=l.prevY,w=l.linePath,_=l.areaPath,S=l.pathFromLine,C=l.pathFromArea,k=f.isNumber(m.globals.minYArr[i])?m.globals.minYArr[i]:m.globals.minY,A=m.globals.dataPoints>1?m.globals.dataPoints-1:m.globals.dataPoints,E=0;E<A;E++){var T=null==e[o][E+1];if(m.globals.isXNumeric){var M=m.globals.seriesX[i][E+1];void 0===m.globals.seriesX[i][E+1]&&(M=m.globals.seriesX[i][A-1]),n=(M-m.globals.minX)/this.xRatio}else n+=this.xDivision;d=m.config.chart.stacked&&o>0&&m.globals.collapsedSeries.length<m.config.series.length-1?this.prevSeriesY[function(t){for(var e=t,i=0;i<m.globals.series.length;i++)if(m.globals.collapsedSeriesIndices.indexOf(t)>-1){e--;break}return e>=0?e:0}(o-1)][E+1]:this.zeroY,r=T?d-k/x[this.yaxisIndex]+2*(this.isReversed?k/x[this.yaxisIndex]:0):d-e[o][E+1]/x[this.yaxisIndex]+2*(this.isReversed?e[o][E+1]/x[this.yaxisIndex]:0),p.push(n),g.push(r);var L=this.lineHelpers.calculatePoints({series:e,x:n,y:r,realIndex:i,i:o,j:E,prevY:b}),P=this._createPaths({series:e,i:o,realIndex:i,j:E,x:n,y:r,pX:s,pY:a,linePath:w,areaPath:_,linePaths:c,areaPaths:h,seriesIndex:u});h=P.areaPaths,c=P.linePaths,s=P.pX,a=P.pY,_=P.areaPath,w=P.linePath,this.appendPathFrom&&(S+=y.line(n,this.zeroY),C+=y.line(n,this.zeroY)),this.handleNullDataPoints(e,L,o,E,i),this._handleMarkersAndLabels({pointsPos:L,series:e,x:n,y:r,prevY:b,i:o,j:E,realIndex:i})}return{yArrj:g,xArrj:p,pathFromArea:C,areaPaths:h,pathFromLine:S,linePaths:c}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.pointsPos,i=t.i,o=t.j,n=t.realIndex,r=this.w,s=new L(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,o,{realIndex:n,pointsPos:e,zRatio:this.zRatio,elParent:this.elPointsMain});else{r.globals.series[i].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var a=this.markers.plotChartMarkers(e,n,o+1);null!==a&&this.elPointsMain.add(a)}var l=s.drawDataLabel(e,n,o+1,null);null!==l&&this.elDataLabelsWrap.add(l)}},{key:"_createPaths",value:function(t){var e=t.series,i=t.i,o=t.realIndex,n=t.j,r=t.x,s=t.y,a=t.pX,l=t.pY,c=t.linePath,h=t.areaPath,u=t.linePaths,d=t.areaPaths,p=t.seriesIndex,g=this.w,f=new v(this.ctx),m=g.config.stroke.curve,y=this.areaBottomY;if(Array.isArray(g.config.stroke.curve)&&(m=Array.isArray(p)?g.config.stroke.curve[p[i]]:g.config.stroke.curve[i]),"smooth"===m){var x=.35*(r-a);g.globals.hasNullValues?(null!==e[i][n]&&(null!==e[i][n+1]?(c=f.move(a,l)+f.curve(a+x,l,r-x,s,r+1,s),h=f.move(a+1,l)+f.curve(a+x,l,r-x,s,r+1,s)+f.line(r,y)+f.line(a,y)+"z"):(c=f.move(a,l),h=f.move(a,l)+"z")),u.push(c),d.push(h)):(c+=f.curve(a+x,l,r-x,s,r,s),h+=f.curve(a+x,l,r-x,s,r,s)),a=r,l=s,n===e[i].length-2&&(h=h+f.curve(a,l,r,s,r,y)+f.move(r,s)+"z",g.globals.hasNullValues||(u.push(c),d.push(h)))}else null===e[i][n+1]&&(c+=f.move(r,s),h=h+f.line(g.globals.isXNumeric?(g.globals.seriesX[o][n]-g.globals.minX)/this.xRatio:r-this.xDivision,y)+f.move(r,s)+"z"),null===e[i][n]&&(c+=f.move(r,s),h+=f.move(r,y)),"stepline"===m?(c=c+f.line(r,null,"H")+f.line(null,s,"V"),h=h+f.line(r,null,"H")+f.line(null,s,"V")):"straight"===m&&(c+=f.line(r,s),h+=f.line(r,s)),n===e[i].length-2&&(h=h+f.line(r,y)+f.move(r,s)+"z",u.push(c),d.push(h));return{linePaths:u,areaPaths:d,pX:a,pY:l,linePath:c,areaPath:h}}},{key:"handleNullDataPoints",value:function(t,e,i,o,n){var r=this.w;if(null===t[i][o]&&r.config.markers.showNullDataPoints||1===t[i].length){var s=this.markers.plotChartMarkers(e,n,o+1,this.strokeWidth-r.config.markers.strokeWidth/2,!0);null!==s&&this.elPointsMain.add(s)}}}]),t}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function t(e,i,o,n){this.xoffset=e,this.yoffset=i,this.height=n,this.width=o,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(t){var e,i=[],o=this.xoffset,n=this.yoffset,s=r(t)/this.height,a=r(t)/this.width;if(this.width>=this.height)for(e=0;e<t.length;e++)i.push([o,n,o+s,n+t[e]/s]),n+=t[e]/s;else for(e=0;e<t.length;e++)i.push([o,n,o+t[e]/a,n+a]),o+=t[e]/a;return i},this.cutArea=function(e){var i;if(this.width>=this.height){var o=e/this.height;i=new t(this.xoffset+o,this.yoffset,this.width-o,this.height)}else{var n=e/this.width;i=new t(this.xoffset,this.yoffset+n,this.width,this.height-n)}return i}}function e(e,o,n,s,a){return s=void 0===s?0:s,a=void 0===a?0:a,function(t){var e,i,o=[];for(e=0;e<t.length;e++)for(i=0;i<t[e].length;i++)o.push(t[e][i]);return o}(i(function(t,e){var i,o=[],n=e/r(t);for(i=0;i<t.length;i++)o[i]=t[i]*n;return o}(e,o*n),[],new t(s,a,o,n),[]))}function i(t,e,n,s){var a,l,c;if(0!==t.length)return a=n.shortestEdge(),function(t,e,i){var n;return 0===t.length||((n=t.slice()).push(e),o(t,i)>=o(n,i))}(e,l=t[0],a)?(e.push(l),i(t.slice(1),e,n,s)):(c=n.cutArea(r(e),s),s.push(n.getCoordinates(e)),i(t,[],c,s)),s;s.push(n.getCoordinates(e))}function o(t,e){var i=Math.min.apply(Math,t),o=Math.max.apply(Math,t),n=r(t);return Math.max(Math.pow(e,2)*o/Math.pow(n,2),Math.pow(n,2)/(Math.pow(e,2)*i))}function n(t){return t&&t.constructor===Array}function r(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e];return i}function s(t){var e,i=0;if(n(t[0]))for(e=0;e<t.length;e++)i+=s(t[e]);else i=r(t);return i}return function t(i,o,r,a,l){a=void 0===a?0:a,l=void 0===l?0:l;var c,h,u=[],d=[];if(n(i[0])){for(h=0;h<i.length;h++)u[h]=s(i[h]);for(c=e(u,o,r,a,l),h=0;h<i.length;h++)d.push(t(i[h],c[h][2]-c[h][0],c[h][3]-c[h][1],c[h][0],c[h][1]))}else d=e(i,o,r,a,l);return d}}();var Mt,Lt,Pt=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new wt(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return r(t,[{key:"draw",value:function(t){var e=this,i=this.w,o=new v(this.ctx),n=new E(this.ctx),r=o.group({class:"apexcharts-treemap"});if(i.globals.noData)return r;var s=[];return t.forEach(function(t){var e=t.map(function(t){return Math.abs(t)});s.push(e)}),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach(function(t,i){t.data.forEach(function(t){Array.isArray(e.labels[i])||(e.labels[i]=[]),e.labels[i].push(t.x)})}),window.TreemapSquared.generate(s,i.globals.gridWidth,i.globals.gridHeight).forEach(function(s,a){var l=o.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:f.escapeString(i.globals.seriesNames[a]),rel:a+1,"data:realIndex":a});if(i.config.chart.dropShadow.enabled){var c=i.config.chart.dropShadow;new y(e.ctx).dropShadow(r,c,a)}var h=o.group({class:"apexcharts-data-labels"});s.forEach(function(r,s){var c=r[0],h=r[1],u=r[2],d=r[3],p=o.drawRect(c,h,u-c,d-h,0,"#fff",1,e.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?f:i.globals.stroke.colors[a]);p.attr({cx:c,cy:h,index:a,i:a,j:s,width:u-c,height:d-h});var g=e.helpers.getShadeColor(i.config.chart.type,a,s,e.negRange),f=g.color;void 0!==i.config.series[a].data[s]&&i.config.series[a].data[s].fillColor&&(f=i.config.series[a].data[s].fillColor);var m=n.fillPath({color:f,seriesNumber:a,dataPointIndex:s});p.node.classList.add("apexcharts-treemap-rect"),p.attr({fill:m}),e.helpers.addListeners(p);var y={x:c+(u-c)/2,y:h+(d-h)/2,width:0,height:0},v={x:c,y:h,width:u-c,height:d-h};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var x=1;i.globals.resized||(x=i.config.chart.animations.speed),e.animateTreemap(p,y,v,x)}i.globals.dataChanged&&e.dynamicAnim.enabled&&i.globals.shouldAnimate&&(i.globals.previousPaths[a]&&i.globals.previousPaths[a][s]&&i.globals.previousPaths[a][s].rect&&(y=i.globals.previousPaths[a][s].rect),e.animateTreemap(p,y,v,e.dynamicAnim.speed));var b=e.getFontSize(r),w=i.config.dataLabels.formatter(e.labels[a][s],{value:i.globals.series[a][s],seriesIndex:a,dataPointIndex:s,w:i}),_=e.helpers.calculateDataLabels({text:w,x:(c+u)/2,y:(h+d)/2+e.strokeWidth/2+b/3,i:a,j:s,colorProps:g,fontSize:b,series:t});i.config.dataLabels.enabled&&_&&e.rotateToFitLabel(_,w,c,h,u,d),l.add(p),null!==_&&l.add(_)}),l.add(h),r.add(l)}),r}},{key:"getFontSize",value:function(t){var e,i=this.w,o=function t(e){var i,o=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)o+=t(e[i]);else for(i=0;i<e.length;i++)o+=e[i].length;return o}(this.labels)/function t(e){var i,o=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)o+=t(e[i]);else for(i=0;i<e.length;i++)o+=1;return o}(this.labels);return e=Math.pow((t[2]-t[0])*(t[3]-t[1]),.5),Math.min(e/o,parseInt(i.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(t,e,i,o,n,r){var s=new v(this.ctx),a=s.getTextRects(e);if(a.width+5>n-i&&a.width<=r-o){var l=s.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(-90 ".concat(l.x," ").concat(l.y,")"))}}},{key:"animateTreemap",value:function(t,e,i,o){var n=new m(this.ctx);n.animateRect(t,{x:e.x,y:e.y,width:e.width,height:e.height},{x:i.x,y:i.y,width:i.width,height:i.height},o,function(){n.animationCompleted(t)})}}]),t}(),It=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return r(t,[{key:"calculateTimeScaleTicks",value:function(t,i){var o=this,n=this.w;if(n.globals.allSeriesCollapsed)return n.globals.labels=[],n.globals.timescaleLabels=[],[];var r=new F(this.ctx),s=(i-t)/864e5;this.determineInterval(s),n.globals.disableZoomIn=!1,n.globals.disableZoomOut=!1,s<.00011574074074074075?n.globals.disableZoomIn=!0:s>5e4&&(n.globals.disableZoomOut=!0);var a=r.getTimeUnitsfromTimestamp(t,i,this.utc),l=n.globals.gridWidth/s,c=l/24,h=c/60,u=h/60,d=Math.floor(24*s),p=Math.floor(1440*s),g=Math.floor(86400*s),f=Math.floor(s),m=Math.floor(s/30),y=Math.floor(s/365),v={minMillisecond:a.minMillisecond,minSecond:a.minSecond,minMinute:a.minMinute,minHour:a.minHour,minDate:a.minDate,minMonth:a.minMonth,minYear:a.minYear},x={firstVal:v,currentMillisecond:v.minMillisecond,currentSecond:v.minSecond,currentMinute:v.minMinute,currentHour:v.minHour,currentMonthDate:v.minDate,currentDate:v.minDate,currentMonth:v.minMonth,currentYear:v.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:h,secondsWidthOnXAxis:u,numberOfSeconds:g,numberOfMinutes:p,numberOfHours:d,numberOfDays:f,numberOfMonths:m,numberOfYears:y};switch(this.tickInterval){case"years":this.generateYearScale(x);break;case"months":case"half_year":this.generateMonthScale(x);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(x);break;case"hours":this.generateHourScale(x);break;case"minutes_fives":case"minutes":this.generateMinuteScale(x);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(x)}var b=this.timeScaleArray.map(function(t){var i={position:t.position,unit:t.unit,year:t.year,day:t.day?t.day:1,hour:t.hour?t.hour:0,month:t.month+1};return"month"===t.unit?e(e({},i),{},{day:1,value:t.value+1}):"day"===t.unit||"hour"===t.unit?e(e({},i),{},{value:t.value}):"minute"===t.unit?e(e({},i),{},{value:t.value,minute:t.value}):"second"===t.unit?e(e({},i),{},{value:t.value,minute:t.minute,second:t.second}):t});return b.filter(function(t){var e=1,i=Math.ceil(n.globals.gridWidth/120),r=t.value;void 0!==n.config.xaxis.tickAmount&&(i=n.config.xaxis.tickAmount),b.length>i&&(e=Math.floor(b.length/i));var s=!1,a=!1;switch(o.tickInterval){case"years":"year"===t.unit&&(s=!0);break;case"half_year":e=7,"year"===t.unit&&(s=!0);break;case"months":e=1,"year"===t.unit&&(s=!0);break;case"months_fortnight":e=15,"year"!==t.unit&&"month"!==t.unit||(s=!0),30===r&&(a=!0);break;case"months_days":e=10,"month"===t.unit&&(s=!0),30===r&&(a=!0);break;case"week_days":e=8,"month"===t.unit&&(s=!0);break;case"days":e=1,"month"===t.unit&&(s=!0);break;case"hours":"day"===t.unit&&(s=!0);break;case"minutes_fives":r%5!=0&&(a=!0);break;case"seconds_tens":r%10!=0&&(a=!0);break;case"seconds_fives":r%5!=0&&(a=!0)}if("hours"===o.tickInterval||"minutes_fives"===o.tickInterval||"seconds_tens"===o.tickInterval||"seconds_fives"===o.tickInterval){if(!a)return!0}else if((r%e==0||s)&&!a)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var i=this.w,o=this.formatDates(t),n=this.removeOverlappingTS(o);i.globals.timescaleLabels=n.slice(),new at(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var e=24*t,i=60*e;switch(!0){case t/365>5:this.tickInterval="years";break;case t>800:this.tickInterval="half_year";break;case t>180:this.tickInterval="months";break;case t>90:this.tickInterval="months_fortnight";break;case t>60:this.tickInterval="months_days";break;case t>30:this.tickInterval="week_days";break;case t>2:this.tickInterval="days";break;case e>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,i=t.currentMonth,o=t.currentYear,n=t.daysWidthOnXAxis,r=t.numberOfYears,s=e.minYear,a=0,l=new F(this.ctx),c="year";if(e.minDate>1||e.minMonth>0){var h=l.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);a=(l.determineDaysOfYear(e.minYear)-h+1)*n,this.timeScaleArray.push({position:a,value:s=e.minYear+1,unit:c,year:s,month:f.monthMod(i+1)})}else 1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:a,value:s,unit:c,year:o,month:f.monthMod(i+1)});for(var u=s,d=a,p=0;p<r;p++)u++,d=l.determineDaysOfYear(u-1)*n+d,this.timeScaleArray.push({position:d,value:u,unit:c,year:u,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,i=t.currentMonthDate,o=t.currentMonth,n=t.currentYear,r=t.daysWidthOnXAxis,s=t.numberOfMonths,a=o,l=0,c=new F(this.ctx),h="month",u=0;if(e.minDate>1){l=(c.determineDaysOfMonths(o+1,e.minYear)-i+1)*r,a=f.monthMod(o+1);var d=n+u,p=f.monthMod(a),g=a;0===a&&(h="year",g=d,p=1,d+=u+=1),this.timeScaleArray.push({position:l,value:g,unit:h,year:d,month:p})}else this.timeScaleArray.push({position:l,value:a,unit:h,year:n,month:f.monthMod(o)});for(var m=a+1,y=l,v=0,x=1;v<s;v++,x++){0===(m=f.monthMod(m))?(h="year",u+=1):h="month";var b=this._getYear(n,m,u);y=c.determineDaysOfMonths(m,b)*r+y,this.timeScaleArray.push({position:y,value:0===m?b:m,unit:h,year:b,month:0===m?1:m}),m++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,i=t.currentMonth,o=t.currentYear,n=t.hoursWidthOnXAxis,r=t.numberOfDays,s=new F(this.ctx),a="day",l=e.minDate+1,c=l,h=function(t,e,i){return t>s.determineDaysOfMonths(e+1,i)?(c=1,a="month",d=e+=1,e):e},u=(24-e.minHour)*n,d=l,p=h(c,i,o);0===e.minHour&&1===e.minDate?(u=0,d=f.monthMod(e.minMonth),a="month",c=e.minDate,r++):1!==e.minDate&&0===e.minHour&&0===e.minMinute&&(u=0,d=l=e.minDate,p=h(c=l,i,o)),this.timeScaleArray.push({position:u,value:d,unit:a,year:this._getYear(o,p,0),month:f.monthMod(p),day:c});for(var g=u,m=0;m<r;m++){a="day",p=h(c+=1,p,this._getYear(o,p,0));var y=this._getYear(o,p,0);g=24*n+g;var v=1===c?f.monthMod(p):c;this.timeScaleArray.push({position:g,value:v,unit:a,year:y,month:f.monthMod(p),day:v})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,i=t.currentDate,o=t.currentMonth,n=t.currentYear,r=t.minutesWidthOnXAxis,s=t.numberOfHours,a=new F(this.ctx),l="hour",c=function(t,e){return t>a.determineDaysOfMonths(e+1,n)&&(m=1,e+=1),{month:e,date:m}},h=function(t,e){return t>a.determineDaysOfMonths(e+1,n)?e+=1:e},u=60-(e.minMinute+e.minSecond/60),d=u*r,p=e.minHour+1,g=p+1;60===u&&(d=0,g=(p=e.minHour)+1);var m=i,y=h(m,o);this.timeScaleArray.push({position:d,value:p,unit:l,day:m,hour:g,year:n,month:f.monthMod(y)});for(var v=d,x=0;x<s;x++){l="hour",g>=24&&(g=0,l="day",y=c(m+=1,y).month,y=h(m,y));var b=this._getYear(n,y,0);this.timeScaleArray.push({position:v=0===g&&0===x?u*r:60*r+v,value:0===g?m:g,unit:l,hour:g,day:m,year:b,month:f.monthMod(y)}),g++}}},{key:"generateMinuteScale",value:function(t){for(var e=t.minutesWidthOnXAxis,i=t.numberOfMinutes,o=t.currentMinute+1,n=t.currentDate,r=t.currentMonth,s=t.currentYear,a=t.currentHour,l=(60-t.currentSecond-t.currentMillisecond/1e3)*t.secondsWidthOnXAxis,c=0;c<i;c++)o>=60&&(o=0,24===(a+=1)&&(a=0)),this.timeScaleArray.push({position:l,value:o,unit:"minute",hour:a,minute:o,day:n,year:this._getYear(s,r,0),month:f.monthMod(r)}),l+=e,o++}},{key:"generateSecondScale",value:function(t){for(var e=t.secondsWidthOnXAxis,i=t.numberOfSeconds,o=t.currentSecond+1,n=t.currentMinute,r=t.currentDate,s=t.currentMonth,a=t.currentYear,l=t.currentHour,c=(1e3-t.currentMillisecond)/1e3*e,h=0;h<i;h++)o>=60&&(o=0,++n>=60&&(n=0,24==++l&&(l=0))),this.timeScaleArray.push({position:c,value:o,unit:"second",hour:l,minute:n,second:o,day:r,year:this._getYear(a,s,0),month:f.monthMod(s)}),c+=e,o++}},{key:"createRawDateString",value:function(t,e){var i=t.year;return 0===t.month&&(t.month=1),i+="-"+("0"+t.month.toString()).slice(-2),i+="day"===t.unit?"day"===t.unit?"-"+("0"+e).slice(-2):"-01":"-"+("0"+(t.day?t.day:"1")).slice(-2),i+="hour"===t.unit?"hour"===t.unit?"T"+("0"+e).slice(-2):"T00":"T"+("0"+(t.hour?t.hour:"0")).slice(-2),i+="minute"===t.unit?":"+("0"+e).slice(-2):":"+(t.minute?("0"+t.minute).slice(-2):"00"),i+="second"===t.unit?":"+("0"+e).slice(-2):":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(t){var e=this,i=this.w;return t.map(function(t){var o=t.value.toString(),n=new F(e.ctx),r=e.createRawDateString(t,o),s=n.getDate(n.parseDate(r));if(e.utc||(s=n.getDate(n.parseDateWithTimezone(r))),void 0===i.config.xaxis.labels.format){var a="dd MMM",l=i.config.xaxis.labels.datetimeFormatter;"year"===t.unit&&(a=l.year),"month"===t.unit&&(a=l.month),"day"===t.unit&&(a=l.day),"hour"===t.unit&&(a=l.hour),"minute"===t.unit&&(a=l.minute),"second"===t.unit&&(a=l.second),o=n.formatDate(s,a)}else o=n.formatDate(s,i.config.xaxis.labels.format);return{dateString:r,position:t.position,value:o,unit:t.unit,year:t.year,month:t.month}})}},{key:"removeOverlappingTS",value:function(t){var e,i=this,o=new v(this.ctx),n=!1;t.length>0&&t[0].value&&t.every(function(e){return e.value.length===t[0].value.length})&&(n=!0,e=o.getTextRects(t[0].value).width);var r=0;return t.map(function(s,a){if(a>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var l=n?e:o.getTextRects(t[r].value).width;return s.position>t[r].position+l+10?(r=a,s):null}return s}).filter(function(t){return null!==t})}},{key:"_getYear",value:function(t,e,i){return t+Math.floor(e/12)+i}}]),t}(),Dt=function(){function t(e,i){o(this,t),this.ctx=i,this.w=i.w,this.el=e}return r(t,[{key:"setupElements",value:function(){var t=this.w.globals,e=this.w.config,i=e.chart.type;t.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(i)>-1,t.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(i)>-1,t.isBarHorizontal=("bar"===e.chart.type||"rangeBar"===e.chart.type||"boxPlot"===e.chart.type)&&e.plotOptions.bar.horizontal,t.chartClass=".apexcharts"+t.chartID,t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),v.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas "+t.chartClass.substring(1)}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(e.chart.offsetX,", ").concat(e.chart.offsetY,")")}),t.dom.Paper.node.style.background=e.chart.background,this.setSVGDimensions(),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elAnnotations=t.dom.Paper.group().attr({class:"apexcharts-annotations"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var i=this.w,o=i.config,n=i.globals,r={series:[],i:[]},s={series:[],i:[]},a={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},h={series:[],i:[]},u={series:[],i:[]};n.series.map(function(e,d){var p=0;void 0!==t[d].type?("column"===t[d].type||"bar"===t[d].type?(n.series.length>1&&o.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),c.series.push(e),c.i.push(d),p++,i.globals.columnSeries=c.series):"area"===t[d].type?(s.series.push(e),s.i.push(d),p++):"line"===t[d].type?(r.series.push(e),r.i.push(d),p++):"scatter"===t[d].type?(a.series.push(e),a.i.push(d)):"bubble"===t[d].type?(l.series.push(e),l.i.push(d),p++):"candlestick"===t[d].type?(h.series.push(e),h.i.push(d),p++):"boxPlot"===t[d].type?(u.series.push(e),u.i.push(d),p++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),p>1&&(n.comboCharts=!0)):(r.series.push(e),r.i.push(d))});var d=new Tt(this.ctx,e),p=new bt(this.ctx,e);this.ctx.pie=new Ct(this.ctx);var g=new At(this.ctx);this.ctx.rangeBar=new O(this.ctx,e);var f=new kt(this.ctx),m=[];if(n.comboCharts){if(s.series.length>0&&m.push(d.draw(s.series,"area",s.i)),c.series.length>0)if(i.config.chart.stacked){var y=new xt(this.ctx,e);m.push(y.draw(c.series,c.i))}else this.ctx.bar=new N(this.ctx,e),m.push(this.ctx.bar.draw(c.series,c.i));if(r.series.length>0&&m.push(d.draw(r.series,"line",r.i)),h.series.length>0&&m.push(p.draw(h.series,h.i)),u.series.length>0&&m.push(p.draw(u.series,u.i)),a.series.length>0){var v=new Tt(this.ctx,e,!0);m.push(v.draw(a.series,"scatter",a.i))}if(l.series.length>0){var x=new Tt(this.ctx,e,!0);m.push(x.draw(l.series,"bubble",l.i))}}else switch(o.chart.type){case"line":m=d.draw(n.series,"line");break;case"area":m=d.draw(n.series,"area");break;case"bar":o.chart.stacked?m=new xt(this.ctx,e).draw(n.series):(this.ctx.bar=new N(this.ctx,e),m=this.ctx.bar.draw(n.series));break;case"candlestick":case"boxPlot":m=new bt(this.ctx,e).draw(n.series);break;case"rangeBar":m=this.ctx.rangeBar.draw(n.series);break;case"heatmap":m=new _t(this.ctx,e).draw(n.series);break;case"treemap":m=new Pt(this.ctx,e).draw(n.series);break;case"pie":case"donut":case"polarArea":m=this.ctx.pie.draw(n.series);break;case"radialBar":m=g.draw(n.series);break;case"radar":m=f.draw(n.series);break;default:m=d.draw(n.series)}return m}},{key:"setSVGDimensions",value:function(){var t=this.w.globals,e=this.w.config;t.svgWidth=e.chart.width,t.svgHeight=e.chart.height;var i=f.getDimensions(this.el),o=e.chart.width.toString().split(/[0-9]+/g).pop();"%"===o?f.isNumber(i[0])&&(0===i[0].width&&(i=f.getDimensions(this.el.parentNode)),t.svgWidth=i[0]*parseInt(e.chart.width,10)/100):"px"!==o&&""!==o||(t.svgWidth=parseInt(e.chart.width,10));var n=e.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==t.svgHeight&&""!==t.svgHeight)if("%"===n){var r=f.getDimensions(this.el.parentNode);t.svgHeight=r[1]*parseInt(e.chart.height,10)/100}else t.svgHeight=parseInt(e.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;t.svgWidth<0&&(t.svgWidth=0),t.svgHeight<0&&(t.svgHeight=0),v.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),"%"!==n&&(t.dom.Paper.node.parentNode.parentNode.style.minHeight=t.svgHeight+(e.chart.sparkline.enabled?0:t.axisCharts?e.chart.parentHeightOffset:0)+"px"),t.dom.elWrap.style.width=t.svgWidth+"px",t.dom.elWrap.style.height=t.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals;v.setAttrs(t.dom.elGraphical.node,{transform:"translate("+t.translateX+", "+t.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=0,o=t.config.chart.sparkline.enabled?1:15;o+=t.config.grid.padding.bottom,"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||!t.config.legend.show||t.config.legend.floating||(i=new ct(this.ctx).legendHelpers.getLegendBBox().clwh+10);var n=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),r=2.05*t.globals.radialSize;if(n&&!t.config.chart.sparkline.enabled&&0!==t.config.plotOptions.radialBar.startAngle){var s=f.getBoundingClientRect(n);r=s.bottom,r=Math.max(2.05*t.globals.radialSize,s.bottom-s.top)}var a=r+e.translateY+i+o;e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",a),t.config.chart.height&&String(t.config.chart.height).indexOf("%")>0||(e.dom.elWrap.style.height=a+"px",v.setAttrs(e.dom.Paper.node,{height:a}),e.dom.Paper.node.parentNode.parentNode.style.minHeight=a+"px")}},{key:"coreCalculations",value:function(){new q(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map(function(t){return[]})},i=new B,o=this.w.globals;i.initGlobalVars(o),o.seriesXvalues=e(),o.seriesYvalues=e()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var t=null,e=this.w;if(e.globals.axisCharts){if("back"===e.config.xaxis.crosshairs.position&&new J(this.ctx).drawXCrosshairs(),"back"===e.config.yaxis[0].crosshairs.position&&new J(this.ctx).drawYCrosshairs(),"datetime"===e.config.xaxis.type&&void 0===e.config.xaxis.labels.formatter){this.ctx.timeScale=new It(this.ctx);var i=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}t=new x(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,i=this.w;if(i.config.chart.brush.enabled&&"function"!=typeof i.config.chart.events.selection){var o=i.config.chart.brush.targets||[i.config.chart.brush.target];o.forEach(function(e){var i=ApexCharts.getChartByID(e);i.w.globals.brushSource=t.ctx,"function"!=typeof i.w.config.chart.events.zoomed&&(i.w.config.chart.events.zoomed=function(){t.updateSourceChart(i)}),"function"!=typeof i.w.config.chart.events.scrolled&&(i.w.config.chart.events.scrolled=function(){t.updateSourceChart(i)})}),i.config.chart.events.selection=function(t,n){o.forEach(function(t){var o=ApexCharts.getChartByID(t),r=f.clone(i.config.yaxis);if(i.config.chart.brush.autoScaleYaxis&&1===o.w.globals.series.length){var s=new U(o);r=s.autoScaleY(o,r,n)}var a=o.w.config.yaxis.reduce(function(t,i,n){return[].concat(d(t),[e(e({},o.w.config.yaxis[n]),{},{min:r[0].min,max:r[0].max})])},[]);o.ctx.updateHelpers._updateOptions({xaxis:{min:n.xaxis.min,max:n.xaxis.max},yaxis:a},!1,!1,!1,!1)})}}}}]),t}(),Nt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"_updateOptions",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(a){var l=[e.ctx];r&&(l=e.ctx.getSyncedCharts()),e.ctx.w.globals.isExecCalled&&(l=[e.ctx],e.ctx.w.globals.isExecCalled=!1),l.forEach(function(r,c){var h=r.w;if(h.globals.shouldAnimate=n,o||(h.globals.resized=!0,h.globals.dataChanged=!0,n&&r.series.getPreviousPaths()),t&&"object"===i(t)&&(r.config=new G(t),t=x.extendArrayProps(r.config,t,h),r.w.globals.chartID!==e.ctx.w.globals.chartID&&delete t.series,h.config=f.extend(h.config,t),s&&(h.globals.lastXAxis=t.xaxis?f.clone(t.xaxis):[],h.globals.lastYAxis=t.yaxis?f.clone(t.yaxis):[],h.globals.initialConfig=f.extend({},h.config),h.globals.initialSeries=f.clone(h.config.series),t.series))){for(var u=0;u<h.globals.collapsedSeriesIndices.length;u++){var d=h.config.series[h.globals.collapsedSeriesIndices[u]];h.globals.collapsedSeries[u].data=h.globals.axisCharts?d.data.slice():d}for(var p=0;p<h.globals.ancillaryCollapsedSeriesIndices.length;p++){var g=h.config.series[h.globals.ancillaryCollapsedSeriesIndices[p]];h.globals.ancillaryCollapsedSeries[p].data=h.globals.axisCharts?g.data.slice():g}r.series.emptyCollapsedSeries(h.config.series)}return r.update(t).then(function(){c===l.length-1&&a(r)})})})}},{key:"_updateSeries",value:function(t,e){var i=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(n){var r,s=i.w;return s.globals.shouldAnimate=e,s.globals.dataChanged=!0,e&&i.ctx.series.getPreviousPaths(),s.globals.axisCharts?(0===(r=t.map(function(t,e){return i._extendSeries(t,e)})).length&&(r=[{data:[]}]),s.config.series=r):s.config.series=t.slice(),o&&(s.globals.initialSeries=f.clone(s.config.series)),i.ctx.update().then(function(){n(i.ctx)})})}},{key:"_extendSeries",value:function(t,i){var o=this.w,n=o.config.series[i];return e(e({},o.config.series[i]),{},{name:t.name?t.name:n&&n.name,color:t.color?t.color:n&&n.color,type:t.type?t.type:n&&n.type,data:t.data?t.data:n&&n.data})}},{key:"toggleDataPointSelection",value:function(t,e){var i=this.w,o=null,n=".apexcharts-series[data\\:realIndex='".concat(t,"']");return i.globals.axisCharts?o=i.globals.dom.Paper.select("".concat(n," path[j='").concat(e,"'], ").concat(n," circle[j='").concat(e,"'], ").concat(n," rect[j='").concat(e,"']")).members[0]:void 0===e&&(o=i.globals.dom.Paper.select("".concat(n," path[j='").concat(t,"']")).members[0],"pie"!==i.config.chart.type&&"polarArea"!==i.config.chart.type&&"donut"!==i.config.chart.type||this.ctx.pie.pieClicked(t)),o?(new v(this.ctx).pathMouseDown(o,null),o.node?o.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach(function(i){void 0!==t.xaxis[i]&&(e.config.xaxis[i]=t.xaxis[i],e.globals.lastXAxis[i]=t.xaxis[i])}),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var i=new R(t);t=i.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){var e=this.w;return e.config.chart.stacked&&"100%"===e.config.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach(function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100}):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(t){var e=this,i=this.w,o=i.globals.lastXAxis,n=i.globals.lastYAxis;t&&t.xaxis&&(o=t.xaxis),t&&t.yaxis&&(n=t.yaxis),i.config.xaxis.min=o.min,i.config.xaxis.max=o.max,i.config.yaxis.map(function(t,o){i.globals.zoomed||void 0!==n[o]?function(t){void 0!==n[t]&&(i.config.yaxis[t].min=n[t].min,i.config.yaxis[t].max=n[t].max)}(o):void 0!==e.ctx.opts.yaxis[o]&&(t.min=e.ctx.opts.yaxis[o].min,t.max=e.ctx.opts.yaxis[o].max)})}}]),t}();Mt="undefined"!=typeof window?window:void 0,Lt=function(t,e){var o=(void 0!==this?this:t).SVG=function(t){if(o.supported)return t=new o.Doc(t),o.parser.draw||o.prepare(),t};if(o.ns="http://www.w3.org/2000/svg",o.xmlns="http://www.w3.org/2000/xmlns/",o.xlink="http://www.w3.org/1999/xlink",o.svgjs="http://svgjs.dev",o.supported=!0,!o.supported)return!1;o.did=1e3,o.eid=function(t){return"Svgjs"+u(t)+o.did++},o.create=function(t){var i=e.createElementNS(this.ns,t);return i.setAttribute("id",this.eid(t)),i},o.extend=function(){var t,e;e=(t=[].slice.call(arguments)).pop();for(var i=t.length-1;i>=0;i--)if(t[i])for(var n in e)t[i].prototype[n]=e[n];o.Set&&o.Set.inherit&&o.Set.inherit()},o.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,o.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&o.extend(e,t.extend),t.construct&&o.extend(t.parent||o.Container,t.construct),e},o.adopt=function(e){return e?e.instance?e.instance:((i="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new o.Nested:new o.Doc:"linearGradient"==e.nodeName?new o.Gradient("linear"):"radialGradient"==e.nodeName?new o.Gradient("radial"):o[u(e.nodeName)]?new(o[u(e.nodeName)]):new o.Element(e)).type=e.nodeName,i.node=e,e.instance=i,i instanceof o.Doc&&i.namespace().defs(),i.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),i):null;var i},o.prepare=function(){var t=e.getElementsByTagName("body")[0],i=(t?new o.Doc(t):o.adopt(e.documentElement).nested()).size(2,0);o.parser={body:t||e.documentElement,draw:i.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:i.polyline().node,path:i.path().node,native:o.create("svg")}},o.parser={native:o.create("svg")},e.addEventListener("DOMContentLoaded",function(){o.parser.draw||o.prepare()},!1),o.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},o.utils={map:function(t,e){for(var i=t.length,o=[],n=0;n<i;n++)o.push(e(t[n]));return o},filter:function(t,e){for(var i=t.length,o=[],n=0;n<i;n++)e(t[n])&&o.push(t[n]);return o},filterSVGElements:function(e){return this.filter(e,function(e){return e instanceof t.SVGElement})}},o.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},o.Color=function(t){var e,n;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?o.regex.isRgb.test(t)?(e=o.regex.rgb.exec(t.replace(o.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):o.regex.isHex.test(t)&&(e=o.regex.hex.exec(4==(n=t).length?["#",n.substring(1,2),n.substring(1,2),n.substring(2,3),n.substring(2,3),n.substring(3,4),n.substring(3,4)].join(""):n),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"===i(t)&&(this.r=t.r,this.g=t.g,this.b=t.b))},o.extend(o.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+d(this.r)+d(this.g)+d(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new o.Color(t),this},at:function(t){return this.destination?new o.Color({r:~~(this.r+(this.destination.r-this.r)*(t=t<0?0:t>1?1:t)),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)}):this}}),o.Color.test=function(t){return o.regex.isHex.test(t+="")||o.regex.isRgb.test(t)},o.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},o.Color.isColor=function(t){return o.Color.isRgb(t)||o.Color.test(t)},o.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},o.extend(o.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)}}),o.PointArray=function(t,e){o.Array.call(this,t,e||[[0,0]])},o.PointArray.prototype=new o.Array,o.PointArray.prototype.constructor=o.PointArray;for(var n={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]}},r="mlhvqtcsaz".split(""),s=0,a=r.length;s<a;++s)n[r[s]]=function(t){return function(e,i,o){if("H"==t)e[0]=e[0]+i.x;else if("V"==t)e[0]=e[0]+i.y;else if("A"==t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(var r=0,s=e.length;r<s;++r)e[r]=e[r]+(r%2?i.y:i.x);if(n&&"function"==typeof n[t])return n[t](e,i,o)}}(r[s].toUpperCase());o.PathArray=function(t,e){o.Array.call(this,t,e||[["M",0,0]])},o.PathArray.prototype=new o.Array,o.PathArray.prototype.constructor=o.PathArray,o.extend(o.PathArray,{toString:function(){return function(t){for(var e=0,i=t.length,o="";e<i;e++)o+=t[e][0],null!=t[e][1]&&(o+=t[e][1],null!=t[e][2]&&(o+=" ",o+=t[e][2],null!=t[e][3]&&(o+=" ",o+=t[e][3],o+=" ",o+=t[e][4],null!=t[e][5]&&(o+=" ",o+=t[e][5],o+=" ",o+=t[e][6],null!=t[e][7]&&(o+=" ",o+=t[e][7])))));return o+" "}(this.value)},move:function(t,e){return this.bbox(),this},at:function(t){if(!this.destination)return this;for(var e=this.value,i=this.destination.value,n=[],r=new o.PathArray,s=0,a=e.length;s<a;s++){n[s]=[e[s][0]];for(var l=1,c=e[s].length;l<c;l++)n[s][l]=e[s][l]+(i[s][l]-e[s][l])*t;"A"===n[s][0]&&(n[s][4]=+(0!=n[s][4]),n[s][5]=+(0!=n[s][5]))}return r.value=n,r},parse:function(t){if(t instanceof o.PathArray)return t.valueOf();var e,i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(o.regex.numbersWithDots,c).replace(o.regex.pathLetters," $& ").replace(o.regex.hyphen,"$1 -").trim().split(o.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var r=[],s=new o.Point,a=new o.Point,l=0,h=t.length;do{o.regex.isPathLetter.test(t[l])?(e=t[l],++l):"M"==e?e="L":"m"==e&&(e="l"),r.push(n[e].call(null,t.slice(l,l+=i[e.toUpperCase()]).map(parseFloat),s,a))}while(h>l);return r},bbox:function(){return o.parser.draw||o.prepare(),o.parser.path.setAttribute("d",this.toString()),o.parser.path.getBBox()}}),o.Number=o.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(o.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof o.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new o.Number(t),new o.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new o.Number(t),new o.Number(this-t,this.unit||t.unit)},times:function(t){return t=new o.Number(t),new o.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new o.Number(t),new o.Number(this/t,this.unit||t.unit)},to:function(t){var e=new o.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new o.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new o.Number(this.destination).minus(this).times(t).plus(this):this}}}),o.Element=o.invent({create:function(t){this._stroke=o.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var i=p(this,t,e);return this.width(new o.Number(i.width)).height(new o.Number(i.height))},clone:function(t){this.writeDataToDom();var e=m(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(o.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return o.get(this.attr(t))},parent:function(e){var i=this;if(!i.node.parentNode)return null;if(i=o.adopt(i.node.parentNode),!e)return i;for(;i&&i.node instanceof t.SVGElement;){if("string"==typeof e?i.matches(e):i instanceof e)return i;if(!i.node.parentNode||"#document"==i.node.parentNode.nodeName)return null;i=o.adopt(i.node.parentNode)}},doc:function(){return this instanceof o.Doc?this:this.parent(o.Doc)},parents:function(t){var e=[],i=this;do{if(!(i=i.parent(t))||!i.node)break;e.push(i)}while(i.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var i=e.createElement("svg");if(!(t&&this instanceof o.Parent))return i.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),i.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");i.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var n=0,r=i.firstChild.childNodes.length;n<r;n++)this.node.appendChild(i.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),o.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},o.morph=function(t){return function(e,i){return new o.MorphObj(e,i).at(t)}},o.Situation=o.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new o.Number(t.duration).valueOf(),this.delay=new o.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),o.FX=o.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,n){"object"===i(t)&&(e=t.ease,n=t.delay,t=t.duration);var r=new o.Situation({duration:t||1e3,delay:n||0,ease:o.easing[e||"-"]||e});return this.queue(r),this},target:function(t){return t&&t instanceof o.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof o.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof o.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e=this.situation;if(e.init)return this;for(var i in e.animations){t=this.target()[i](),Array.isArray(t)||(t=[t]),Array.isArray(e.animations[i])||(e.animations[i]=[e.animations[i]]);for(var n=t.length;n--;)e.animations[i][n]instanceof o.Number&&(t[n]=new o.Number(t[n])),e.animations[i][n]=t[n].morph(e.animations[i][n])}for(var i in e.attrs)e.attrs[i]=new o.MorphObj(this.target().attr(i),e.attrs[i]);for(var i in e.styles)e.styles[i]=new o.MorphObj(this.target().style(i),e.styles[i]);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var i=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!i&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(t){var e=this.last();return this.target().on("finished.fx",function i(o){o.detail.situation==e&&(t.call(this,e),this.off("finished.fx",i))}),this._callStart()},during:function(t){var e=this.last(),i=function(i){i.detail.situation==e&&t.call(this,i.detail.pos,o.morph(i.detail.pos),i.detail.eased,e)};return this.target().off("during.fx",i).on("during.fx",i),this.after(function(){this.off("during.fx",i)}),this._callStart()},afterAll:function(t){var e=function e(i){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,i){return this.last()[i||"animations"][t]=e,this._callStart()},step:function(t){var e,i,o;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),i=Math.floor(e),!0===this.situation.loops||i<this.situation.loops?(this.pos=e-i,o=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,o=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-o)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var n=this.situation.ease(this.pos);for(var r in this.situation.once)r>this.lastPos&&r<=n&&(this.situation.once[r].call(this.target(),this.pos,n),delete this.situation.once[r]);return this.active&&this.target().fire("during",{pos:this.pos,eased:n,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=n,this):this},eachAt:function(){var t,e=this,i=this.target(),n=this.situation;for(var r in n.animations)t=[].concat(n.animations[r]).map(function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t}),i[r].apply(i,t);for(var r in n.attrs)t=[r].concat(n.attrs[r]).map(function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t}),i.attr.apply(i,t);for(var r in n.styles)t=[r].concat(n.styles[r]).map(function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t}),i.style.apply(i,t);if(n.transforms.length){t=n.initialTransformation,r=0;for(var s=n.transforms.length;r<s;r++){var a=n.transforms[r];a instanceof o.Matrix?t=a.relative?t.multiply((new o.Matrix).morph(a).at(n.ease(this.pos))):t.morph(a).at(n.ease(this.pos)):(a.relative||a.undo(t.extract()),t=t.multiply(a.at(n.ease(this.pos))))}i.matrix(t)}return this},once:function(t,e,i){var o=this.last();return i||(t=o.ease(t)),o.once[t]=e,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:o.Element,construct:{animate:function(t,e,i){return(this.fx||(this.fx=new o.FX(this))).animate(t,e,i)},delay:function(t){return(this.fx||(this.fx=new o.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),o.MorphObj=o.invent({create:function(t,e){return o.Color.isColor(e)?new o.Color(t).morph(e):o.regex.delimiter.test(t)?o.regex.pathLetters.test(t)?new o.PathArray(t).morph(e):new o.Array(t).morph(e):o.regex.numberAndUnit.test(e)?new o.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),o.extend(o.FX,{attr:function(t,e,o){if("object"===i(t))for(var n in t)this.attr(n,t[n]);else this.add(t,e,"attrs");return this},plot:function(t,e,i,o){return 4==arguments.length?this.plot([t,e,i,o]):this.add("plot",new(this.target().morphArray)(t))}}),o.Box=o.invent({create:function(t,e,n,r){if(!("object"!==i(t)||t instanceof o.Element))return o.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=n,this.height=r),y(this)}}),o.BBox=o.invent({create:function(t){if(o.Box.apply(this,[].slice.call(arguments)),t instanceof o.Element){var i;try{if(!e.documentElement.contains){for(var n=t.node;n.parentNode;)n=n.parentNode;if(n!=e)throw new Error("Element not in the dom")}i=t.node.getBBox()}catch(e){if(t instanceof o.Shape){o.parser.draw||o.prepare();var r=t.clone(o.parser.draw.instance).show();r&&r.node&&"function"==typeof r.node.getBBox&&(i=r.node.getBBox()),r&&"function"==typeof r.remove&&r.remove()}else i={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}o.Box.call(this,i)}},inherit:o.Box,parent:o.Element,construct:{bbox:function(){return new o.BBox(this)}}}),o.BBox.prototype.constructor=o.BBox,o.Matrix=o.invent({create:function(t){var e=f([1,0,0,1,0,0]);t=null===t?e:t instanceof o.Element?t.matrixify():"string"==typeof t?f(t.split(o.regex.delimiter).map(parseFloat)):6==arguments.length?f([].slice.call(arguments)):Array.isArray(t)?f(t):t&&"object"===i(t)?t:e;for(var n=x.length-1;n>=0;--n)this[x[n]]=null!=t[x[n]]?t[x[n]]:e[x[n]]},extend:{extract:function(){var t=g(this,0,1);g(this,1,0);var e=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(e*Math.PI/180)+this.f*Math.sin(e*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(e*Math.PI/180)+this.e*Math.sin(-e*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new o.Matrix(this)}},clone:function(){return new o.Matrix(this)},morph:function(t){return this.destination=new o.Matrix(t),this},multiply:function(t){return new o.Matrix(this.native().multiply(function(t){return t instanceof o.Matrix||(t=new o.Matrix(t)),t}(t).native()))},inverse:function(){return new o.Matrix(this.native().inverse())},translate:function(t,e){return new o.Matrix(this.native().translate(t||0,e||0))},native:function(){for(var t=o.parser.native.createSVGMatrix(),e=x.length-1;e>=0;e--)t[x[e]]=this[x[e]];return t},toString:function(){return"matrix("+v(this.a)+","+v(this.b)+","+v(this.c)+","+v(this.d)+","+v(this.e)+","+v(this.f)+")"}},parent:o.Element,construct:{ctm:function(){return new o.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof o.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new o.Matrix(e)}return new o.Matrix(this.node.getScreenCTM())}}}),o.Point=o.invent({create:function(t,e){var o;o=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===i(t)?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=o.x,this.y=o.y},extend:{clone:function(){return new o.Point(this)},morph:function(t,e){return this.destination=new o.Point(t,e),this}}}),o.extend(o.Element,{point:function(t,e){return new o.Point(t,e).transform(this.screenCTM().inverse())}}),o.extend(o.Element,{attr:function(t,e,n){if(null==t){for(t={},n=(e=this.node.attributes).length-1;n>=0;n--)t[e[n].nodeName]=o.regex.isNumber.test(e[n].nodeValue)?parseFloat(e[n].nodeValue):e[n].nodeValue;return t}if("object"===i(t))for(var r in t)this.attr(r,t[r]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?o.defaults.attrs[t]:o.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(o.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof o.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new o.Number(e):o.Color.isColor(e)?e=new o.Color(e):Array.isArray(e)&&(e=new o.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),o.extend(o.Element,{transform:function(t,e){var n;return"object"!==i(t)?(n=new o.Matrix(this).extract(),"string"==typeof t?n[t]:n):(n=new o.Matrix(this),e=!!e||!!t.relative,null!=t.a&&(n=e?n.multiply(new o.Matrix(t)):new o.Matrix(t)),this.attr("transform",n))}}),o.extend(o.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(o.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(o.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(f(e[1])):t[e[0]].apply(t,e[1])},new o.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t).untransform().transform(i.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),o.Transformation=o.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var o=0,n=this.arguments.length;o<n;++o)this[this.arguments[o]]=t[o];else if(t&&"object"===i(t))for(o=0,n=this.arguments.length;o<n;++o)this[this.arguments[o]]=t[this.arguments[o]];this.inversed=!1,!0===e&&(this.inversed=!0)}}),o.Translate=o.invent({parent:o.Matrix,inherit:o.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),o.extend(o.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===i(t))for(var n in t)this.style(n,t[n]);else{if(!o.regex.isCss.test(t))return this.node.style[h(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[h(t)]=null===e||o.regex.isBlank.test(e)?"":e;return this}}),o.Parent=o.invent({create:function(t){this.constructor.call(this,t)},inherit:o.Element,extend:{children:function(){return o.utils.map(o.utils.filterSVGElements(this.node.childNodes),function(t){return o.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return o.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){for(var i=this.children(),n=0,r=i.length;n<r;n++)i[n]instanceof o.Element&&t.apply(i[n],[n,i]),e&&i[n]instanceof o.Container&&i[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),o.extend(o.Parent,{ungroup:function(t,e){return 0===e||this instanceof o.Defs||this.node==o.parser.draw||(t=t||(this instanceof o.Doc?this:this.parent(o.Parent)),e=e||1/0,this.each(function(){return this instanceof o.Defs?this:this instanceof o.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),o.Container=o.invent({create:function(t){this.constructor.call(this,t)},inherit:o.Parent}),o.ViewBox=o.invent({parent:o.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){o.Element.prototype[t]=function(e){return o.on(this.node,t,e),this}}),o.listeners=[],o.handlerMap=[],o.listenerId=0,o.on=function(t,e,i,n,r){var s=i.bind(n||t.instance||t),a=(o.handlerMap.indexOf(t)+1||o.handlerMap.push(t))-1,l=e.split(".")[0],c=e.split(".")[1]||"*";o.listeners[a]=o.listeners[a]||{},o.listeners[a][l]=o.listeners[a][l]||{},o.listeners[a][l][c]=o.listeners[a][l][c]||{},i._svgjsListenerId||(i._svgjsListenerId=++o.listenerId),o.listeners[a][l][c][i._svgjsListenerId]=s,t.addEventListener(l,s,r||{passive:!0})},o.off=function(t,e,i){var n=o.handlerMap.indexOf(t),r=e&&e.split(".")[0],s=e&&e.split(".")[1],a="";if(-1!=n)if(i){if("function"==typeof i&&(i=i._svgjsListenerId),!i)return;o.listeners[n][r]&&o.listeners[n][r][s||"*"]&&(t.removeEventListener(r,o.listeners[n][r][s||"*"][i],!1),delete o.listeners[n][r][s||"*"][i])}else if(s&&r){if(o.listeners[n][r]&&o.listeners[n][r][s]){for(var l in o.listeners[n][r][s])o.off(t,[r,s].join("."),l);delete o.listeners[n][r][s]}}else if(s)for(var c in o.listeners[n])for(var a in o.listeners[n][c])s===a&&o.off(t,[c,s].join("."));else if(r){if(o.listeners[n][r]){for(var a in o.listeners[n][r])o.off(t,[r,a].join("."));delete o.listeners[n][r]}}else{for(var c in o.listeners[n])o.off(t,c);delete o.listeners[n],delete o.handlerMap[n]}},o.extend(o.Element,{on:function(t,e,i,n){return o.on(this.node,t,e,i,n),this},off:function(t,e){return o.off(this.node,t,e),this},fire:function(e,i){return this.node.dispatchEvent(e instanceof t.Event?e:e=new o.CustomEvent(e,{detail:i,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),o.Defs=o.invent({create:"defs",inherit:o.Container}),o.G=o.invent({create:"g",inherit:o.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)}},construct:{group:function(){return this.put(new o.G)}}}),o.Doc=o.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,o.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:o.Container,extend:{namespace:function(){return this.attr({xmlns:o.ns,version:"1.1"}).attr("xmlns:xlink",o.xlink,o.xmlns).attr("xmlns:svgjs",o.svgjs,o.xmlns)},defs:function(){var t;return this._defs||(this._defs=(t=this.node.getElementsByTagName("defs")[0])?o.adopt(t):new o.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,o.parser.draw&&!o.parser.draw.parentNode&&this.node.appendChild(o.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,i=m(e.cloneNode(!0));return t?(t.node||t).appendChild(i.node):e.parentNode.insertBefore(i.node,e.nextSibling),i}}}),o.extend(o.Element,{}),o.Gradient=o.invent({create:function(t){this.constructor.call(this,o.create(t+"Gradient")),this.type=t},inherit:o.Container,extend:{at:function(t,e,i){return this.put(new o.Stop).update(t,e,i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="gradientTransform"),o.Container.prototype.attr.call(this,t,e,i)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),o.extend(o.Gradient,o.FX,{from:function(t,e){return this.attr("radial"==(this._target||this).type?{fx:new o.Number(t),fy:new o.Number(e)}:{x1:new o.Number(t),y1:new o.Number(e)})},to:function(t,e){return this.attr("radial"==(this._target||this).type?{cx:new o.Number(t),cy:new o.Number(e)}:{x2:new o.Number(t),y2:new o.Number(e)})}}),o.extend(o.Defs,{gradient:function(t,e){return this.put(new o.Gradient(t)).update(e)}}),o.Stop=o.invent({create:"stop",inherit:o.Element,extend:{update:function(t){return("number"==typeof t||t instanceof o.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new o.Number(t.offset)),this}}}),o.Pattern=o.invent({create:"pattern",inherit:o.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="patternTransform"),o.Container.prototype.attr.call(this,t,e,i)}},construct:{pattern:function(t,e,i){return this.defs().pattern(t,e,i)}}}),o.extend(o.Defs,{pattern:function(t,e,i){return this.put(new o.Pattern).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),o.Shape=o.invent({create:function(t){this.constructor.call(this,t)},inherit:o.Element}),o.Symbol=o.invent({create:"symbol",inherit:o.Container,construct:{symbol:function(){return this.put(new o.Symbol)}}}),o.Use=o.invent({create:"use",inherit:o.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,o.xlink)}},construct:{use:function(t,e){return this.put(new o.Use).element(t,e)}}}),o.Rect=o.invent({create:"rect",inherit:o.Shape,construct:{rect:function(t,e){return this.put(new o.Rect).size(t,e)}}}),o.Circle=o.invent({create:"circle",inherit:o.Shape,construct:{circle:function(t){return this.put(new o.Circle).rx(new o.Number(t).divide(2)).move(0,0)}}}),o.extend(o.Circle,o.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),o.Ellipse=o.invent({create:"ellipse",inherit:o.Shape,construct:{ellipse:function(t,e){return this.put(new o.Ellipse).size(t,e).move(0,0)}}}),o.extend(o.Ellipse,o.Rect,o.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),o.extend(o.Circle,o.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new o.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new o.Number(t).divide(2))},size:function(t,e){var i=p(this,t,e);return this.rx(new o.Number(i.width).divide(2)).ry(new o.Number(i.height).divide(2))}}),o.Line=o.invent({create:"line",inherit:o.Shape,extend:{array:function(){return new o.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,i,n){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:n}:new o.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var i=p(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(t,e,i,n){return o.Line.prototype.plot.apply(this.put(new o.Line),null!=t?[t,e,i,n]:[0,0,0,0])}}}),o.Polyline=o.invent({create:"polyline",inherit:o.Shape,construct:{polyline:function(t){return this.put(new o.Polyline).plot(t||new o.PointArray)}}}),o.Polygon=o.invent({create:"polygon",inherit:o.Shape,construct:{polygon:function(t){return this.put(new o.Polygon).plot(t||new o.PointArray)}}}),o.extend(o.Polyline,o.Polygon,{array:function(){return this._array||(this._array=new o.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new o.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var i=p(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}}),o.extend(o.Line,o.Polyline,o.Polygon,{morphArray:o.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),o.Path=o.invent({create:"path",inherit:o.Shape,extend:{morphArray:o.PathArray,array:function(){return this._array||(this._array=new o.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new o.PathArray(t))},clear:function(){return delete this._array,this}},construct:{path:function(t){return this.put(new o.Path).plot(t||new o.PathArray)}}}),o.Image=o.invent({create:"image",inherit:o.Shape,extend:{load:function(e){if(!e)return this;var i=this,n=new t.Image;return o.on(n,"load",function(){o.off(n);var t=i.parent(o.Pattern);null!==t&&(0==i.width()&&0==i.height()&&i.size(n.width,n.height),t&&0==t.width()&&0==t.height()&&t.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:n.width,height:n.height,ratio:n.width/n.height,url:e}))}),o.on(n,"error",function(t){o.off(n),"function"==typeof i._error&&i._error.call(i,t)}),this.attr("href",n.src=this.src=e,o.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,i){return this.put(new o.Image).load(t).size(e||0,i||e||0)}}}),o.Text=o.invent({create:function(){this.constructor.call(this,o.create("text")),this.dom.leading=new o.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",o.defaults.attrs["font-family"])},inherit:o.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,i=0,n=e.length;i<n;++i)0!=i&&3!=e[i].nodeType&&1==o.adopt(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{i=0;for(var r=(t=t.split("\n")).length;i<r;i++)this.tspan(t[i]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new o.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=o.utils.map(o.utils.filterSVGElements(t.childNodes),function(t){return o.adopt(t)});return new o.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,i=0,n=this.dom.leading*new o.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?i+=n:(this.attr("dy",n+i),i=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new o.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new o.Text).text(t)},plain:function(t){return this.put(new o.Text).plain(t)}}}),o.Tspan=o.invent({create:"tspan",inherit:o.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(o.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),o.extend(o.Text,o.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,i=new o.Tspan;return!1===this._build&&this.clear(),e.appendChild(i.node),i.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),o.TextPath=o.invent({create:"textPath",inherit:o.Parent,parent:o.Text,construct:{morphArray:o.PathArray,array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),i=null;return e&&(i=e.plot(t)),null==t?i:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return o.adopt(this.node.firstChild)}}}),o.Nested=o.invent({create:function(){this.constructor.call(this,o.create("svg")),this.style("overflow","visible")},inherit:o.Container,construct:{nested:function(){return this.put(new o.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function c(t,e,i,n){return i+n.replace(o.regex.dots," .")}function h(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function u(t){return t.charAt(0).toUpperCase()+t.slice(1)}function d(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function p(t,e,i){if(null==e||null==i){var o=t.bbox();null==e?e=o.width/o.height*i:null==i&&(i=o.height/o.width*e)}return{width:e,height:i}}function g(t,e,i){return{x:e*t.a+i*t.c+0,y:e*t.b+i*t.d+0}}function f(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function m(e){for(var i=e.childNodes.length-1;i>=0;i--)e.childNodes[i]instanceof t.SVGElement&&m(e.childNodes[i]);return o.adopt(e).id(o.eid(e.nodeName))}function y(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function v(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach(function(t){var e={};e[t]=function(e){if(void 0===e)return this;if("string"==typeof e||o.Color.isRgb(e)||e&&"function"==typeof e.fill)this.attr(t,e);else for(var i=l[t].length-1;i>=0;i--)null!=e[l[t][i]]&&this.attr(l.prefix(t,l[t][i]),e[l[t][i]]);return this},o.extend(o.Element,o.FX,e)}),o.extend(o.Element,o.FX,{translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.attr("transform",new o.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new o.Number(t).plus(this instanceof o.FX?0:this.x()),!0)},dy:function(t){return this.y(new o.Number(t).plus(this instanceof o.FX?0:this.y()),!0)}}),o.extend(o.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),o.Set=o.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){for(var t=[].slice.call(arguments),e=0,i=t.length;e<i;e++)this.members.push(t[e]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,i=this.members.length;e<i;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(t){return new o.Set(t)}}}),o.FX.Set=o.invent({create:function(t){this.set=t}}),o.Set.inherit=function(){var t=[];for(var e in o.Shape.prototype)"function"==typeof o.Shape.prototype[e]&&"function"!=typeof o.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(t){o.Set.prototype[t]=function(){for(var e=0,i=this.members.length;e<i;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new o.FX.Set(this)):this}}),t=[],o.FX.prototype)"function"==typeof o.FX.prototype[e]&&"function"!=typeof o.FX.Set.prototype[e]&&t.push(e);t.forEach(function(t){o.FX.Set.prototype[t]=function(){for(var e=0,i=this.set.members.length;e<i;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},o.extend(o.Element,{}),o.extend(o.Element,{remember:function(t,e){if("object"===i(arguments[0]))for(var o in t)this.remember(o,t[o]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),o.get=function(t){var i=e.getElementById(function(t){var e=(t||"").toString().match(o.regex.reference);if(e)return e[1]}(t)||t);return o.adopt(i)},o.select=function(t,i){return new o.Set(o.utils.map((i||e).querySelectorAll(t),function(t){return o.adopt(t)}))},o.extend(o.Parent,{select:function(t){return o.select(t,this.node)}});var x="abcdef".split("");if("function"!=typeof t.CustomEvent){var b=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var o=e.createEvent("CustomEvent");return o.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),o};b.prototype=t.Event.prototype,o.CustomEvent=b}else o.CustomEvent=t.CustomEvent;return o},"function"==typeof define&&define.amd?define(function(){return Lt(Mt,Mt.document)}):"object"===("undefined"==typeof exports?"undefined":i(exports))&&"undefined"!=typeof module?module.exports=Mt.document?Lt(Mt,Mt.document):function(t){return Lt(t,t.document)}:Mt.SVG=Lt(Mt,Mt.document),(function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(t,e){return this.add(t,e),!t.attr("in")&&this.autoSetIn&&t.attr("in",this.source),t.attr("result")||t.attr("result",t),t},blend:function(t,e,i){return this.put(new SVG.BlendEffect(t,e,i))},colorMatrix:function(t,e){return this.put(new SVG.ColorMatrixEffect(t,e))},convolveMatrix:function(t){return this.put(new SVG.ConvolveMatrixEffect(t))},componentTransfer:function(t){return this.put(new SVG.ComponentTransferEffect(t))},composite:function(t,e,i){return this.put(new SVG.CompositeEffect(t,e,i))},flood:function(t,e){return this.put(new SVG.FloodEffect(t,e))},offset:function(t,e){return this.put(new SVG.OffsetEffect(t,e))},image:function(t){return this.put(new SVG.ImageEffect(t))},merge:function(){var t=[void 0];for(var e in arguments)t.push(arguments[e]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,t)))},gaussianBlur:function(t,e){return this.put(new SVG.GaussianBlurEffect(t,e))},morphology:function(t,e){return this.put(new SVG.MorphologyEffect(t,e))},diffuseLighting:function(t,e,i){return this.put(new SVG.DiffuseLightingEffect(t,e,i))},displacementMap:function(t,e,i,o,n){return this.put(new SVG.DisplacementMapEffect(t,e,i,o,n))},specularLighting:function(t,e,i,o){return this.put(new SVG.SpecularLightingEffect(t,e,i,o))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(t,e,i,o,n){return this.put(new SVG.TurbulenceEffect(t,e,i,o,n))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(t){var e=this.put(new SVG.Filter);return"function"==typeof t&&t.call(e,e),e}}),SVG.extend(SVG.Container,{filter:function(t){return this.defs().filter(t)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(t){return this.filterer=t instanceof SVG.Element?t:this.doc().filter(t),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(t){return this.filterer&&!0===t&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}});var t={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},diffuseLighting:function(t,e,i){return this.parent()&&this.parent().diffuseLighting(t,e,i).in(this)},displacementMap:function(t,e,i,o){return this.parent()&&this.parent().displacementMap(this,t,e,i,o)},specularLighting:function(t,e,i,o){return this.parent()&&this.parent().specularLighting(t,e,i,o).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,i,o,n){return this.parent()&&this.parent().turbulence(t,e,i,o,n).in(this)}};SVG.extend(SVG.Effect,t),SVG.extend(SVG.ParentEffect,t),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){this.attr("in",t)}}});var e={blend:function(t,e,i){this.attr({in:t,in2:e,mode:i||"normal"})},colorMatrix:function(t,e){"matrix"==t&&(e=n(e)),this.attr({type:t,values:void 0===e?null:e})},convolveMatrix:function(t){t=n(t),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},composite:function(t,e,i){this.attr({in:t,in2:e,operator:i})},flood:function(t,e){this.attr("flood-color",t),null!=e&&this.attr("flood-opacity",e)},offset:function(t,e){this.attr({dx:t,dy:e})},image:function(t){this.attr("href",t,SVG.xlink)},displacementMap:function(t,e,i,o,n){this.attr({in:t,in2:e,scale:i,xChannelSelector:o,yChannelSelector:n})},gaussianBlur:function(t,e){this.attr("stdDeviation",null!=t||null!=e?r(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(t,e){this.attr({operator:t,radius:e})},tile:function(){},turbulence:function(t,e,i,o,n){this.attr({numOctaves:e,seed:i,stitchTiles:o,baseFrequency:t,type:n})}},i={merge:function(){var t;if(arguments[0]instanceof SVG.Set){var e=this;arguments[0].each(function(t){this instanceof SVG.MergeNode?e.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&e.put(new SVG.MergeNode(this))})}else{t=Array.isArray(arguments[0])?arguments[0]:arguments;for(var i=0;i<t.length;i++)t[i]instanceof SVG.MergeNode?this.put(t[i]):this.put(new SVG.MergeNode(t[i]))}},componentTransfer:function(t){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach((function(t){this[t]=new(SVG["Func"+t.toUpperCase()])("identity"),this.rgb.add(this[t]),this.node.appendChild(this[t].node)}).bind(this)),t)for(var e in t.rgb&&(["r","g","b"].forEach((function(e){this[e].attr(t.rgb)}).bind(this)),delete t.rgb),t)this[e].attr(t[e])},diffuseLighting:function(t,e,i){this.attr({surfaceScale:t,diffuseConstant:e,kernelUnitLength:i})},specularLighting:function(t,e,i,o){this.attr({surfaceScale:t,diffuseConstant:e,specularExponent:i,kernelUnitLength:o})}},o={distantLight:function(t,e){this.attr({azimuth:t,elevation:e})},pointLight:function(t,e,i){this.attr({x:t,y:e,z:i})},spotLight:function(t,e,i,o,n,r){this.attr({x:t,y:e,z:i,pointsAtX:o,pointsAtY:n,pointsAtZ:r})},mergeNode:function(t){this.attr("in",t)}};function n(t){return Array.isArray(t)&&(t=new SVG.Array(t)),t.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function r(t){if(!Array.isArray(t))return t;for(var e=0,i=t.length,o=[];e<i;e++)o.push(t[e]);return o.join(" ")}function s(){var t=function(){};for(var e in"function"==typeof arguments[arguments.length-1]&&(t=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var i in arguments[e])t(arguments[e][i],i,arguments[e])}["r","g","b","a"].forEach(function(t){o["Func"+t.toUpperCase()]=function(t){switch(this.attr("type",t),t){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),s(e,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),s(i,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),s(o,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(t){return t instanceof SVG.MergeNode?this.add(t,0):this.add(new SVG.MergeNode(t),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",t)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}).call(void 0),function(){function t(t,n,r,s,a,l,c){for(var h=t.slice(n,r||c),u=s.slice(a,l||c),d=0,p={pos:[0,0],start:[0,0]},g={pos:[0,0],start:[0,0]};h[d]=e.call(p,h[d]),u[d]=e.call(g,u[d]),h[d][0]!=u[d][0]||"M"==h[d][0]||"A"==h[d][0]&&(h[d][4]!=u[d][4]||h[d][5]!=u[d][5])?(Array.prototype.splice.apply(h,[d,1].concat(o.call(p,h[d]))),Array.prototype.splice.apply(u,[d,1].concat(o.call(g,u[d])))):(h[d]=i.call(p,h[d]),u[d]=i.call(g,u[d])),++d!=h.length||d!=u.length;)d==h.length&&h.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]),d==u.length&&u.push(["C",g.pos[0],g.pos[1],g.pos[0],g.pos[1],g.pos[0],g.pos[1]]);return{start:h,dest:u}}function e(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function i(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function o(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=1*t[4]/3+2*t[2]/3,t[3]=1*t[3]/3+2*t[1]/3,t[2]=1*this.pos[1]/3+2*t[2]/3,t[1]=1*this.pos[0]/3+2*t[1]/3;break;case"A":t=(e=function(t,e){var i,o,n,r,s,a,l,c,h,u,d,p,g,f,m,y,v,x,b,w,_,S,C,k,A,E,T=Math.abs(e[1]),M=Math.abs(e[2]),L=e[3]%360,P=e[4],I=e[5],D=e[6],N=e[7],F=new SVG.Point(t),O=new SVG.Point(D,N),R=[];if(0===T||0===M||F.x===O.x&&F.y===O.y)return[["C",F.x,F.y,O.x,O.y,O.x,O.y]];for((o=(i=new SVG.Point((F.x-O.x)/2,(F.y-O.y)/2).transform((new SVG.Matrix).rotate(L))).x*i.x/(T*T)+i.y*i.y/(M*M))>1&&(T*=o=Math.sqrt(o),M*=o),n=(new SVG.Matrix).rotate(L).scale(1/T,1/M).rotate(-L),F=F.transform(n),a=(r=[(O=O.transform(n)).x-F.x,O.y-F.y])[0]*r[0]+r[1]*r[1],s=Math.sqrt(a),r[0]/=s,r[1]/=s,l=a<4?Math.sqrt(1-a/4):0,P===I&&(l*=-1),c=new SVG.Point((O.x+F.x)/2+l*-r[1],(O.y+F.y)/2+l*r[0]),h=new SVG.Point(F.x-c.x,F.y-c.y),u=new SVG.Point(O.x-c.x,O.y-c.y),d=Math.acos(h.x/Math.sqrt(h.x*h.x+h.y*h.y)),h.y<0&&(d*=-1),p=Math.acos(u.x/Math.sqrt(u.x*u.x+u.y*u.y)),u.y<0&&(p*=-1),I&&d>p&&(p+=2*Math.PI),!I&&d<p&&(p-=2*Math.PI),y=[],v=d,g=(p-d)/(f=Math.ceil(2*Math.abs(d-p)/Math.PI)),m=4*Math.tan(g/4)/3,_=0;_<=f;_++)b=Math.cos(v),x=Math.sin(v),w=new SVG.Point(c.x+b,c.y+x),y[_]=[new SVG.Point(w.x+m*x,w.y-m*b),w,new SVG.Point(w.x-m*x,w.y+m*b)],v+=g;for(y[0][0]=y[0][1].clone(),y[y.length-1][2]=y[y.length-1][1].clone(),n=(new SVG.Matrix).rotate(L).scale(T,M).rotate(-L),_=0,S=y.length;_<S;_++)y[_][0]=y[_][0].transform(n),y[_][1]=y[_][1].transform(n),y[_][2]=y[_][2].transform(n);for(_=1,S=y.length;_<S;_++)C=(w=y[_-1][2]).x,k=w.y,A=(w=y[_][0]).x,E=w.y,D=(w=y[_][1]).x,R.push(["C",C,k,A,E,D,N=w.y]);return R}(this.pos,t))[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function n(t,e){if(!1===e)return!1;for(var i=e,o=t.length;i<o;++i)if("M"==t[i][0])return i;return!1}SVG.extend(SVG.PathArray,{morph:function(e){for(var i=this.value,o=this.parse(e),r=0,s=0,a=!1,l=!1;!1!==r||!1!==s;){var c;a=n(i,!1!==r&&r+1),l=n(o,!1!==s&&s+1),!1===r&&(r=0==(c=new SVG.PathArray(h.start).bbox()).height||0==c.width?i.push(i[0])-1:i.push(["M",c.x+c.width/2,c.y+c.height/2])-1),!1===s&&(s=0==(c=new SVG.PathArray(h.dest).bbox()).height||0==c.width?o.push(o[0])-1:o.push(["M",c.x+c.width/2,c.y+c.height/2])-1);var h=t(i,r,a,o,s,l);i=i.slice(0,r).concat(h.start,!1===a?[]:i.slice(a)),o=o.slice(0,s).concat(h.dest,!1===l?[]:o.slice(l)),r=!1!==a&&r+h.start.length,s=!1!==l&&s+h.dest.length}return this.value=i,this.destination=new SVG.PathArray,this.destination.value=o,this}})}(),(function(){function t(t){t.remember("_draggable",this),this.el=t}t.prototype.init=function(t,e){var i=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",function(t){i.start(t)}),this.el.on("touchstart.drag",function(t){i.start(t)})},t.prototype.transformPoint=function(t,e){var i=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=i.clientX-(e||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},t.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},t.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,o=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(t,i),box:o,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(t){e.drag(t)}),SVG.on(window,"touchmove.drag",function(t){e.drag(t)}),SVG.on(window,"mouseup.drag",function(t){e.end(t)}),SVG.on(window,"touchend.drag",function(t){e.end(t)}),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},t.prototype.drag=function(t){var e=this.getBBox(),i=this.transformPoint(t),o=this.startPoints.box.x+i.x-this.startPoints.point.x,n=this.startPoints.box.y+i.y-this.startPoints.point.y,r=this.constraint,s=i.x-this.startPoints.point.x,a=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:t,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if("function"==typeof r){var l=r.call(this.el,o,n,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(o):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(n):!1!==l.y&&this.el.y(l.y)}else"object"==typeof r&&(null!=r.minX&&o<r.minX?s=(o=r.minX)-this.startPoints.box.x:null!=r.maxX&&o>r.maxX-e.width&&(s=(o=r.maxX-e.width)-this.startPoints.box.x),null!=r.minY&&n<r.minY?a=(n=r.minY)-this.startPoints.box.y:null!=r.maxY&&n>r.maxY-e.height&&(a=(n=r.maxY-e.height)-this.startPoints.box.y),null!=r.snapToGrid&&(o-=o%r.snapToGrid,n-=n%r.snapToGrid,s-=s%r.snapToGrid,a-=a%r.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:s,y:a},!0):this.el.move(o,n));return i},t.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,i){"function"!=typeof e&&"object"!=typeof e||(i=e,e=!0);var o=this.remember("_draggable")||new t(this);return(e=void 0===e||e)?o.init(i||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(void 0),function(){function t(t){this.el=t,t.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,e,i){var o="string"!=typeof t?t:e[t];return i?o/2:o},this.pointCoords=function(t,e){var i=this.pointsList[t];return{x:this.pointCoord(i[0],e,"t"===t||"b"===t),y:this.pointCoord(i[1],e,"r"===t||"l"===t)}}}t.prototype.init=function(t,e){var i=this.el.bbox();this.options={};var o=this.el.selectize.defaults.points;for(var n in this.el.selectize.defaults)this.options[n]=this.el.selectize.defaults[n],void 0!==e[n]&&(this.options[n]=e[n]);var r=["points","pointsExclude"];for(var n in r){var s=this.options[r[n]];"string"==typeof s?s=s.length>0?s.split(/\s*,\s*/i):[]:"boolean"==typeof s&&"points"===r[n]&&(s=s?o:[]),this.options[r[n]]=s}this.options.points=[o,this.options.points].reduce(function(t,e){return t.filter(function(t){return e.indexOf(t)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(t,e){return t.filter(function(t){return e.indexOf(t)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(t):this.selectRect(t),this.observe(),this.cleanup()},t.prototype.selectPoints=function(t){return this.pointSelection.isSelected=t,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},t.prototype.getPointArray=function(){var t=this.el.bbox();return this.el.array().valueOf().map(function(e){return[e[0]-t.x,e[1]-t.y]})},t.prototype.drawPoints=function(){for(var t=this,e=this.getPointArray(),i=0,o=e.length;i<o;++i){var n=function(e){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation(),t.el.fire("point",{x:i.pageX||i.touches[0].pageX,y:i.pageY||i.touches[0].pageY,i:e,event:i})}}(i),r=this.drawPoint(e[i][0],e[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",n).on("mousedown",n);this.pointSelection.set.add(r)}},t.prototype.drawPoint=function(t,e){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(t,e);case"rect":return this.drawRect(t,e);default:if("function"==typeof i)return i.call(this,t,e);throw new Error("Unknown "+i+" point type!")}},t.prototype.drawCircle=function(t,e){return this.nested.circle(this.options.pointSize).center(t,e)},t.prototype.drawRect=function(t,e){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(t,e)},t.prototype.updatePointSelection=function(){var t=this.getPointArray();this.pointSelection.set.each(function(e){this.cx()===t[e][0]&&this.cy()===t[e][1]||this.center(t[e][0],t[e][1])})},t.prototype.updateRectSelection=function(){var t=this,e=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:e.width,height:e.height}),this.options.points.length&&this.options.points.map(function(i,o){var n=t.pointCoords(i,e);t.rectSelection.set.get(o+1).center(n.x,n.y)}),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(e.width/2,20)}},t.prototype.selectRect=function(t){var e=this,i=this.el.bbox();function o(t){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation(),e.el.fire(t,{x:i.pageX||i.touches[0].pageX,y:i.pageY||i.touches[0].pageY,event:i})}}if(this.rectSelection.isSelected=t,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(i.width,i.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(t,n){var r=e.pointCoords(t,i),s=e.drawPoint(r.x,r.y).attr("class",e.options.classPoints+"_"+t).on("mousedown",o(t)).on("touchstart",o(t));e.rectSelection.set.add(s)}),this.rectSelection.set.each(function(){this.addClass(e.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var n=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),e.el.fire("rot",{x:t.pageX||t.touches[0].pageX,y:t.pageY||t.touches[0].pageY,event:t})},r=this.drawPoint(i.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",n).on("mousedown",n);this.rectSelection.set.add(r)}},t.prototype.handler=function(){var t=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(t.x,t.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},t.prototype.observe=function(){var t=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){t.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(t){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){t.handler()})},t.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,i){return"object"==typeof e&&(i=e,e=!0),(this.remember("_selectHandler")||new t(this)).init(void 0===e||e,i||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function t(t){t.remember("_resizeHandler",this),this.el=t,this.parameters={},this.lastUpdateCall=null,this.p=t.doc().node.createSVGPoint()}t.prototype.transformPoint=function(t,e,i){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=e-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},t.prototype._extractPosition=function(t){return{x:null!=t.clientX?t.clientX:t.touches[0].clientX,y:null!=t.clientY?t.clientY:t.touches[0].clientY}},t.prototype.init=function(t){var e=this;if(this.stop(),"stop"!==t){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],void 0!==t[i]&&(this.options[i]=t[i]);this.el.on("lt.resize",function(t){e.resize(t||window.event)}),this.el.on("rt.resize",function(t){e.resize(t||window.event)}),this.el.on("rb.resize",function(t){e.resize(t||window.event)}),this.el.on("lb.resize",function(t){e.resize(t||window.event)}),this.el.on("t.resize",function(t){e.resize(t||window.event)}),this.el.on("r.resize",function(t){e.resize(t||window.event)}),this.el.on("b.resize",function(t){e.resize(t||window.event)}),this.el.on("l.resize",function(t){e.resize(t||window.event)}),this.el.on("rot.resize",function(t){e.resize(t||window.event)}),this.el.on("point.resize",function(t){e.resize(t||window.event)}),this.update()}},t.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},t.prototype.resize=function(t){var e=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(t.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:t.detail.x,y:t.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==t.detail.i){var o=this.el.array().valueOf();this.parameters.i=t.detail.i,this.parameters.pointCoords=[o[t.detail.i][0],o[t.detail.i][1]]}switch(t.type){case"lt":this.calc=function(t,e){var i=this.snapToGrid(t,e);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y+i[1]).size(this.parameters.box.width-i[0],this.parameters.box.height-i[1])}};break;case"rt":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).size(this.parameters.box.width+i[0],this.parameters.box.height-i[1])}};break;case"rb":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+i[0],this.parameters.box.height+i[1])}};break;case"lb":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).size(this.parameters.box.width-i[0],this.parameters.box.height+i[1])}};break;case"t":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).height(this.parameters.box.height-i[1])}};break;case"r":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+i[0])}};break;case"b":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+i[1])}};break;case"l":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).width(this.parameters.box.width-i[0])}};break;case"rot":this.calc=function(t,e){var i=t+this.parameters.p.x,o=e+this.parameters.p.y,n=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),r=Math.atan2(o-this.parameters.box.y-this.parameters.box.height/2,i-this.parameters.box.x-this.parameters.box.width/2),s=this.parameters.rotation+180*(r-n)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(s-s%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(t,e){var i=this.snapToGrid(t,e,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),o=this.el.array().valueOf();o[this.parameters.i][0]=this.parameters.pointCoords[0]+i[0],o[this.parameters.i][1]=this.parameters.pointCoords[1]+i[1],this.el.plot(o)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:t}),SVG.on(window,"touchmove.resize",function(t){e.update(t||window.event)}),SVG.on(window,"touchend.resize",function(){e.done()}),SVG.on(window,"mousemove.resize",function(t){e.update(t||window.event)}),SVG.on(window,"mouseup.resize",function(){e.done()})},t.prototype.update=function(t){if(t){var e=this._extractPosition(t),i=this.transformPoint(e.x,e.y),o=i.x-this.parameters.p.x,n=i.y-this.parameters.p.y;this.lastUpdateCall=[o,n],this.calc(o,n),this.el.fire("resizing",{dx:o,dy:n,event:t})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},t.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},t.prototype.snapToGrid=function(t,e,i,o){var n;return n=void 0!==o?[(i+t)%this.options.snapToGrid,(o+e)%this.options.snapToGrid]:[(this.parameters.box.x+t+(1&(i=null==i?3:i)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+e+(2&i?0:this.parameters.box.height))%this.options.snapToGrid],t<0&&(n[0]-=this.options.snapToGrid),e<0&&(n[1]-=this.options.snapToGrid),t-=Math.abs(n[0])<this.options.snapToGrid/2?n[0]:n[0]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),e-=Math.abs(n[1])<this.options.snapToGrid/2?n[1]:n[1]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(t,e,i,o)},t.prototype.constraintToBox=function(t,e,i,o){var n,r,s=this.options.constraint||{};return void 0!==o?(n=i,r=o):(n=this.parameters.box.x+(1&i?0:this.parameters.box.width),r=this.parameters.box.y+(2&i?0:this.parameters.box.height)),void 0!==s.minX&&n+t<s.minX&&(t=s.minX-n),void 0!==s.maxX&&n+t>s.maxX&&(t=s.maxX-n),void 0!==s.minY&&r+e<s.minY&&(e=s.minY-r),void 0!==s.maxY&&r+e>s.maxY&&(e=s.maxY-r),[t,e]},t.prototype.checkAspectRatio=function(t,e){if(!this.options.saveAspectRatio)return t;var i=t.slice(),o=this.parameters.box.width/this.parameters.box.height,n=this.parameters.box.width+t[0],r=this.parameters.box.height-t[1],s=n/r;return s<o?(i[1]=n/o-this.parameters.box.height,e&&(i[1]=-i[1])):s>o&&(i[0]=this.parameters.box.width-r*o,e&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new t(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Ft=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new m(this.ctx),this.ctx.axes=new K(this.ctx),this.ctx.core=new Dt(this.ctx.el,this.ctx),this.ctx.config=new G({}),this.ctx.data=new H(this.ctx),this.ctx.grid=new W(this.ctx),this.ctx.graphics=new v(this.ctx),this.ctx.coreUtils=new x(this.ctx),this.ctx.crosshairs=new J(this.ctx),this.ctx.events=new $(this.ctx),this.ctx.exports=new j(this.ctx),this.ctx.localization=new Q(this.ctx),this.ctx.options=new k,this.ctx.responsive=new tt(this.ctx),this.ctx.series=new I(this.ctx),this.ctx.theme=new et(this.ctx),this.ctx.formatters=new V(this.ctx),this.ctx.titleSubtitle=new it(this.ctx),this.ctx.legend=new ct(this.ctx),this.ctx.toolbar=new ht(this.ctx),this.ctx.dimensions=new at(this.ctx),this.ctx.updateHelpers=new Nt(this.ctx),this.ctx.zoomPanSelection=new ut(this.ctx),this.ctx.w.globals.tooltip=new vt(this.ctx)}}]),t}(),Ot=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return r(t,[{key:"clear",value:function(t){var e=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:e})}},{key:"killSVG",value:function(t){t.each(function(t,e){this.removeClass("*"),this.off(),this.stop()},!0),t.ungroup(),t.clear()}},{key:"clearDomElements",value:function(t){var e=this,i=this.w.globals.dom.Paper.node;i.parentNode&&i.parentNode.parentNode&&!t.isUpdating&&(i.parentNode.parentNode.style.minHeight="unset");var o=this.w.globals.dom.baseEl;o&&this.ctx.eventList.forEach(function(t){o.removeEventListener(t,e.ctx.events.documentEvent)});var n=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(n.Paper),n.Paper.remove(),n.elWrap=null,n.elGraphical=null,n.elAnnotations=null,n.elLegendWrap=null,n.baseEl=null,n.elGridRect=null,n.elGridRectMask=null,n.elGridRectMarkerMask=null,n.elForecastMask=null,n.elNonForecastMask=null,n.elDefs=null}}]),t}(),Rt=new WeakMap;return function(){function t(e,i){o(this,t),this.opts=i,this.ctx=this,this.w=new z(i).init(),this.el=e,this.w.globals.cuid=f.randomId(),this.w.globals.chartID=this.w.config.chart.id?f.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Ft(this).initModules(),this.create=f.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return r(t,[{key:"render",value:function(){var t=this;return new Promise(function(e,i){if(null!==t.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var o=t.w.config.chart.events.beforeMount;if("function"==typeof o&&o(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),function(t,e){var i=!1,o=t.getBoundingClientRect();"none"!==t.style.display&&0!==o.width||(i=!0);var n=new ResizeObserver(function(o){i&&e.call(t,o),i=!0});t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(t.children).forEach(function(t){return n.observe(t)}):n.observe(t),Rt.set(e,n)}(t.el.parentNode,t.parentResizeHandler),!t.css){var n=t.el.getRootNode&&t.el.getRootNode(),r=f.is("ShadowRoot",n),s=t.el.ownerDocument,a=s.getElementById("apexcharts-css");!r&&a||(t.css=document.createElement("style"),t.css.id="apexcharts-css",t.css.textContent='.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-title:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}',r?n.prepend(t.css):s.head.appendChild(t.css))}var l=t.create(t.w.config.series,{});if(!l)return e(t);t.mount(l).then(function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(l)}).catch(function(t){i(t)})}else i(new Error("Element not found"))})}},{key:"create",value:function(t,e){var i=this.w;new Ft(this).initModules();var o=this.w.globals;if(o.noData=!1,o.animationEnded=!1,this.responsive.checkResponsiveConfig(e),i.config.xaxis.convertedCatToNumeric&&new R(i.config).convertCatToNumericXaxis(i.config,this.ctx),null===this.el)return o.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===i.config.chart.type&&(i.config.grid.show=!1,i.config.yaxis[0].show=!1),0===o.svgWidth)return o.animationEnded=!0,null;var n=x.checkComboSeries(t);o.comboCharts=n.comboCharts,o.comboBarCount=n.comboBarCount;var r=t.every(function(t){return t.data&&0===t.data.length});(0===t.length||r)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(t),this.theme.init(),new T(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),o.noData&&o.collapsedSeries.length!==o.series.length&&!i.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),o.axisCharts&&(this.core.coreCalculations(),"category"!==i.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=i.globals.minX,this.ctx.toolbar.maxX=i.globals.maxX),this.formatters.heatmapLabelFormatters(),new x(this).getLargestMarkerSize(),this.dimensions.plotCoords();var s=this.core.xySettings();this.grid.createGridMask();var a=this.core.plotChartType(t,s),l=new L(this);return l.bringForward(),i.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:a,xyRatios:s,elInner:i.globals.dom.elGraphical,dimensions:{plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}}}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,o=i.w;return new Promise(function(n,r){if(null===i.el)return r(new Error("Not enough data to display or target element not found"));(null===e||o.globals.allSeriesCollapsed)&&i.series.handleNoData(),"treemap"!==o.config.chart.type&&i.axes.drawAxis(o.config.chart.type,e.xyRatios),i.grid=new W(i);var s=i.grid.drawGrid();i.annotations=new A(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),"back"===o.config.grid.position&&s&&o.globals.dom.elGraphical.add(s.el);var a=new X(t.ctx),l=new Z(t.ctx);if(null!==s&&(a.xAxisLabelCorrections(s.xAxisTickWidth),l.setYAxisTextAlignments(),o.config.yaxis.map(function(t,e){-1===o.globals.ignoreYAxisIndexes.indexOf(e)&&l.yAxisTitleRotate(e,t.opposite)})),"back"===o.config.annotations.position&&(o.globals.dom.Paper.add(o.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),Array.isArray(e.elGraph))for(var c=0;c<e.elGraph.length;c++)o.globals.dom.elGraphical.add(e.elGraph[c]);else o.globals.dom.elGraphical.add(e.elGraph);if("front"===o.config.grid.position&&s&&o.globals.dom.elGraphical.add(s.el),"front"===o.config.xaxis.crosshairs.position&&i.crosshairs.drawXCrosshairs(),"front"===o.config.yaxis[0].crosshairs.position&&i.crosshairs.drawYCrosshairs(),"front"===o.config.annotations.position&&(o.globals.dom.Paper.add(o.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),!o.globals.noData){if(o.config.tooltip.enabled&&!o.globals.noData&&i.w.globals.tooltip.drawTooltip(e.xyRatios),o.globals.axisCharts&&(o.globals.isXNumeric||o.config.xaxis.convertedCatToNumeric||o.globals.isRangeBar))(o.config.chart.zoom.enabled||o.config.chart.selection&&o.config.chart.selection.enabled||o.config.chart.pan&&o.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:e.xyRatios});else{var h=o.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(t){h[t]=!1})}o.config.chart.toolbar.show&&!o.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}o.globals.memory.methodsToExec.length>0&&o.globals.memory.methodsToExec.forEach(function(t){t.method(t.params,!1,t.context)}),o.globals.axisCharts||o.globals.noData||i.core.resizeNonAxisCharts(),n(i)})}},{key:"destroy",value:function(){var t,e;window.removeEventListener("resize",this.windowResizeHandler),(e=Rt.get(t=this.parentResizeHandler))&&(e.disconnect(),Rt.delete(t));var i=this.w.config.chart.id;i&&Apex._chartInstances.forEach(function(t,e){t.id===f.escapeString(i)&&Apex._chartInstances.splice(e,1)}),new Ot(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=this.w;return s.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map(function(t,i){return e.updateHelpers._extendSeries(t,i)})),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),s.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,i,o,n,r)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,i)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.w.config.series.slice();return o.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(o,e,i)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var o=i.w.config.series.slice(),n=0;n<o.length;n++)if(null!=t[n])for(var r=0;r<t[n].data.length;r++)o[n].data.push(t[n].data[r]);return i.w.config.series=o,e&&(i.w.globals.initialSeries=f.clone(i.w.config.series)),this.update()}},{key:"update",value:function(t){var e=this;return new Promise(function(i,o){new Ot(e.ctx).clear({isUpdating:!0});var n=e.create(e.w.config.series,t);if(!n)return i(e);e.mount(n).then(function(){"function"==typeof e.w.config.chart.events.updated&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,i(e)}).catch(function(t){o(t)})})}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach(function(t){e.push(t)})),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter(function(t){if(t.group)return!0}).map(function(e){return t.w.config.chart.group===e.group?e.chart:t})}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"highlightSeriesOnLegendHover",value:function(t,e){return this.series.toggleSeriesOnHover(t,e)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(t,e)}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=this;i&&(o=i),o.annotations.addXaxisAnnotationExternal(t,e,o)}},{key:"addYaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=this;i&&(o=i),o.annotations.addYaxisAnnotationExternal(t,e,o)}},{key:"addPointAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=this;i&&(o=i),o.annotations.addPointAnnotationExternal(t,e,o)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this;e&&(i=e),i.annotations.removeAnnotation(i,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new q(this.ctx);return e.getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new q(this.ctx);return e.getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(t){return new j(this.ctx).dataURI(t)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;"function"==typeof t&&(t=t()),t&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var e=f.escapeString(t),i=Apex._chartInstances.filter(function(t){return t.id===e})[0];return i&&i.chart}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),i=0;i<e.length;i++)new t(e[i],JSON.parse(e[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var i=this.getChartByID(t);if(i){i.w.globals.isExecCalled=!0;var o=null;if(-1!==i.publicMethods.indexOf(e)){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];o=i[e].apply(i,r)}return o}}},{key:"merge",value:function(t,e){return f.extend(t,e)}}]),t}()});